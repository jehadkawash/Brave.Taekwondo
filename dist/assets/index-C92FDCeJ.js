import{r as h,j as e}from"./react-BVBiHVO-.js";import{r as He,c as xs}from"./react-dom-C1qW5AtE.js";import{g as ms,o as hs,s as bs,a as us}from"./firebase-D4SAEB23.js";import{y as gs,z as ps,A as de,B as we,D as fs,G as es,H as he,I as ss,J as De,K as js,M as ve,N as Be,O as ys}from"./@firebase-CcMDNQFF.js";import{S as Ge,X as ce,M as Pe,a as be,A as ke,C as ze,b as Je,c as Re,N as Ke,d as me,P as pe,T as ts,U as Ce,e as as,f as Ie,g as $e,h as ye,L as ls,i as _e,j as vs,k as Ns,Z as ws,l as rs,m as Ve,n as Ne,F as ks,o as Ss,p as Ds,q as zs,r as Ye,s as Te,t as ge,u as Ue,v as fe,B as Me,w as se,D as ns,x as Se,y as os,z as is,E as Cs,G as We,H as Is,I as $s,J as Ze,K as As,O as ds,Q as Ms,R as Os}from"./lucide-react-BEWCqpKo.js";import"./scheduler-DYLXRpC5.js";import"./idb-BXWtuYvb.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const x of i.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&c(x)}).observe(document,{childList:!0,subtree:!0});function l(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(o){if(o.ep)return;o.ep=!0;const i=l(o);fetch(o.href,i)}})();const Fs={apiKey:"AIzaSyCKMrH2E_GP_MYZJrhF4LbxC1LmtVGx3Co",authDomain:"brave-academy.firebaseapp.com",projectId:"brave-academy",storageBucket:"brave-academy.firebasestorage.app",messagingSenderId:"862804404676",appId:"1:862804404676:web:871e3bb0796c354f1f5c91"},cs=gs(Fs),Oe=ms(cs),Y=ps(cs),te="brave-academy-live-data",Q=(r,a=[])=>{const[l,c]=h.useState([]),[o,i]=h.useState(!0),x=JSON.stringify(a);return h.useEffect(()=>{let b=de(Y,"artifacts",te,"public","data",r),f;a&&a.length>0?f=we(b,...a):f=we(b);const j=fs(f,t=>{const w=t.docs.map(S=>({...S.data(),id:S.id}));c(w),i(!1)},t=>{console.error(`Error fetching ${r}:`,t),i(!1)});return()=>j()},[r,x]),{data:l,loading:o,add:async b=>{try{const f={...b,createdAt:new Date().toISOString()};return await De(de(Y,"artifacts",te,"public","data",r),f),!0}catch(f){return console.error(f),alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„"),!1}},update:async(b,f)=>{try{await ss(he(Y,"artifacts",te,"public","data",r,b),f)}catch(j){console.error(j)}},remove:async b=>{try{await es(he(Y,"artifacts",te,"public","data",r,b))}catch(f){console.error(f)}}}},A=({children:r,onClick:a,variant:l="primary",className:c="",type:o="button"})=>{const i={primary:"bg-yellow-500 text-black hover:bg-yellow-400 border border-yellow-600 font-bold",secondary:"bg-gray-800 text-white hover:bg-gray-700",danger:"bg-red-600 text-white hover:bg-red-700",outline:"border-2 border-yellow-500 text-yellow-600 hover:bg-yellow-50",ghost:"bg-transparent text-gray-600 hover:bg-gray-100"};return e.jsx("button",{type:o,onClick:a,className:`px-4 py-2 rounded-lg transition duration-200 flex items-center justify-center gap-2 shadow-sm ${i[l]} ${c}`,children:r})},H=({children:r,className:a="",title:l,action:c,noPadding:o=!1})=>e.jsxs("div",{className:`bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden ${a}`,children:[(l||c)&&e.jsxs("div",{className:"px-4 py-3 md:px-6 md:py-4 border-b border-gray-100 flex flex-col md:flex-row justify-between items-start md:items-center bg-gray-50/50 gap-2",children:[l&&e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:l}),c&&e.jsx("div",{className:"self-end md:self-auto",children:c})]}),e.jsx("div",{className:o?"":"p-4 md:p-6",children:r})]}),qe=({status:r})=>{const a={active:{text:"ÙØ¹Ø§Ù„",style:"bg-green-100 text-green-800 border-green-200"},near_end:{text:"Ù‚Ø§Ø±Ø¨ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡",style:"bg-yellow-100 text-yellow-800 border-yellow-200"},expired:{text:"Ù…Ù†ØªÙ‡ÙŠ",style:"bg-red-100 text-red-800 border-red-200"}},l=a[r]||a.active;return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold border ${l.style}`,children:l.text})},Qe=({students:r,onSelect:a,placeholder:l="Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨...",showAllOption:c=!1,onClear:o})=>{const[i,x]=h.useState(""),[m,g]=h.useState(!1),k=h.useMemo(()=>i?r.filter(b=>b.name.includes(i)):r,[r,i]);return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:"w-full border p-2 pr-8 rounded focus:ring-2 focus:ring-yellow-500 outline-none",placeholder:l,value:i,onChange:b=>{x(b.target.value),g(!0),b.target.value===""&&o&&o()},onFocus:()=>g(!0),onBlur:()=>setTimeout(()=>g(!1),200)}),e.jsx(Ge,{className:"absolute left-2 top-2.5 text-gray-400",size:16}),i&&e.jsx("button",{onClick:()=>{x(""),o&&o()},className:"absolute left-8 top-2.5 text-gray-400 hover:text-red-500",children:e.jsx(ce,{size:16})})]}),m&&e.jsxs("div",{className:"absolute z-50 w-full bg-white border rounded shadow-lg max-h-48 overflow-y-auto mt-1",children:[c&&e.jsx("div",{className:"p-2 hover:bg-gray-100 cursor-pointer text-sm border-b font-bold text-blue-600",onClick:()=>{x(""),o&&o(),g(!1)},children:"Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„"}),k.length>0?k.map(b=>e.jsxs("div",{className:"p-2 hover:bg-yellow-50 cursor-pointer text-sm border-b last:border-0 flex justify-between items-center",onClick:()=>{x(b.name),a(b),g(!1)},children:[e.jsx("span",{className:"font-bold",children:b.name}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:b.belt})]},b.id)):e.jsx("div",{className:"p-2 text-gray-500 text-sm text-center",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬"})]})]})},re={LOGO:"/logo.jpg",HERO_BG:"/hero.jpg",BRANCH_SHAFA:"/shafa.jpg",BRANCH_ABU_NSEIR:"/abunseir.jpg"},V={SHAFA:"Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†",ABU_NSEIR:"Ø£Ø¨Ùˆ Ù†ØµÙŠØ±"},le=["Ø£Ø¨ÙŠØ¶","Ø£ØµÙØ±","Ø£Ø®Ø¶Ø± 1","Ø£Ø®Ø¶Ø± 2","Ø£Ø²Ø±Ù‚ 1","Ø£Ø²Ø±Ù‚ 2","Ø¨Ù†ÙŠ 1","Ø¨Ù†ÙŠ 2","Ø£Ø­Ù…Ø± 1","Ø£Ø­Ù…Ø± 2","Ø£Ø³ÙˆØ¯"],Es=[{id:1,days:"Ø§Ù„Ø³Ø¨Øª / Ø§Ù„Ø§Ø«Ù†ÙŠÙ† / Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡",time:"4:00 Ù… - 5:00 Ù…",level:"Ù…Ø¨ØªØ¯Ø¦ÙŠÙ† (Ø£Ø¨ÙŠØ¶ - Ø£ØµÙØ±)",branch:"Ù…Ø´ØªØ±Ùƒ"},{id:2,days:"Ø§Ù„Ø³Ø¨Øª / Ø§Ù„Ø§Ø«Ù†ÙŠÙ† / Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡",time:"5:00 Ù… - 6:30 Ù…",level:"Ø£Ø­Ø²Ù…Ø© Ù…Ù„ÙˆÙ†Ø© (Ø£Ø®Ø¶Ø± - Ø£Ø²Ø±Ù‚)",branch:"Ù…Ø´ØªØ±Ùƒ"},{id:3,days:"Ø§Ù„Ø£Ø­Ø¯ / Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡ / Ø§Ù„Ø®Ù…ÙŠØ³",time:"5:00 Ù… - 6:30 Ù…",level:"Ù…ØªÙ‚Ø¯Ù… (Ø£Ø­Ù…Ø± - Ø£Ø³ÙˆØ¯)",branch:"Ù…Ø´ØªØ±Ùƒ"},{id:4,days:"Ø§Ù„Ø¬Ù…Ø¹Ø©",time:"9:00 Øµ - 11:00 Øµ",level:"ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ù†ØªØ®Ø¨Ø§Øª",branch:"Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ"}],Ls=({setView:r,schedule:a})=>{const[l,c]=h.useState(!1),[o,i]=h.useState(!1),[x,m]=h.useState({name:"",phone:"",dob:"",address:"",branch:V.SHAFA}),[g,k]=h.useState(!1),{data:b}=Q("news"),[f,j]=h.useState(0);h.useEffect(()=>{if(!b||b.length===0)return;const p=setInterval(()=>{j(E=>(E+1)%b.length)},8e3);return()=>clearInterval(p)},[b]);const t=async p=>{p.preventDefault(),k(!0);try{await De(de(Y,"artifacts",te,"public","data","registrations"),{...x,date:new Date().toLocaleDateString("ar-JO"),status:"new",createdAt:new Date().toISOString()}),alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹."),i(!1),m({name:"",phone:"",dob:"",address:"",branch:V.SHAFA})}catch(E){console.error("Error adding document: ",E),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.")}finally{k(!1)}},w=p=>window.open(p,"_blank"),S=()=>window.open("https://wa.me/962795629606","_blank");return e.jsxs("div",{className:"min-h-screen font-sans text-right relative bg-white",dir:"rtl",children:[e.jsxs("header",{className:"bg-black text-white shadow-lg sticky top-0 z-50 border-b-2 border-yellow-500",children:[e.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>window.scrollTo(0,0),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:re.LOGO,alt:"Logo",className:"w-12 h-12 rounded-full bg-white p-1 object-contain transition-transform group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-yellow-500 animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-extrabold leading-none text-yellow-500",children:"Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹"}),e.jsx("p",{className:"text-[10px] text-gray-400 tracking-wider uppercase font-bold",children:"Brave Taekwondo"})]})]}),e.jsx("nav",{className:"hidden md:flex gap-8 font-bold text-sm",children:["Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©","Ù…Ù† Ù†Ø­Ù†","Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ","Ø§Ù„ÙØ±ÙˆØ¹"].map(p=>e.jsxs("button",{className:"hover:text-yellow-500 transition-colors duration-300 relative group",onClick:()=>{var E,_;p==="Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ"&&((E=document.getElementById("schedule"))==null||E.scrollIntoView({behavior:"smooth"})),p==="Ø§Ù„ÙØ±ÙˆØ¹"&&((_=document.getElementById("branches"))==null||_.scrollIntoView({behavior:"smooth"})),p==="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"&&window.scrollTo(0,0)},children:[p,e.jsx("span",{className:"absolute -bottom-1 right-0 w-0 h-0.5 bg-yellow-500 transition-all group-hover:w-full"})]},p))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{onClick:()=>r("login"),className:"bg-yellow-500 text-black hover:bg-yellow-400 font-black px-6 border-none hidden md:block transform hover:-translate-y-1 transition-transform",children:"Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡"}),e.jsx("button",{className:"md:hidden p-2 text-yellow-500",onClick:()=>c(!l),children:l?e.jsx(ce,{size:24}):e.jsx(Pe,{size:24})})]})]}),l&&e.jsx("div",{className:"md:hidden bg-gray-900 border-t border-gray-800 p-4 flex flex-col gap-4",children:e.jsx(A,{onClick:()=>{c(!1),r("login")},className:"w-full py-3 bg-yellow-500 text-black font-bold",children:"Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡"})})]}),e.jsxs("div",{className:"relative bg-gray-900 text-white h-[600px] flex items-center shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-yellow-500/10 -skew-x-12 transform origin-top translate-x-20"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-black/70 to-transparent z-10"}),e.jsx("img",{src:re.HERO_BG,alt:"Hero",className:"absolute inset-0 w-full h-full object-cover"}),e.jsxs("div",{className:"container mx-auto px-6 relative z-20 flex flex-col items-start pt-10",children:[e.jsx("div",{className:"inline-block bg-yellow-500 text-black font-black px-4 py-1 rounded-none skew-x-[-10deg] mb-6 animate-fade-in-up",children:e.jsx("span",{className:"block skew-x-[10deg] text-sm tracking-wider",children:"Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…ÙØªÙˆØ­ Ø§Ù„Ø¢Ù†"})}),e.jsxs("h2",{className:"text-6xl md:text-8xl font-black mb-6 leading-tight drop-shadow-lg",children:["Ø§ØµÙ†Ø¹ ",e.jsx("span",{className:"text-yellow-500",children:"Ù‚ÙˆØªÙƒ"}),e.jsx("br",{}),"Ø§Ø¨Ù†Ù Ù…Ø³ØªÙ‚Ø¨Ù„Ùƒ"]}),e.jsx("p",{className:"text-gray-300 text-lg mb-8 max-w-lg font-medium",children:"Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ù†Ø®Ø¨Ø© Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„Ø£Ø±Ø¯Ù† ÙÙŠ Ø§Ù„ØªØ§ÙŠÙƒÙˆÙ†Ø¯Ùˆ. ØªØ¯Ø±ÙŠØ¨ Ø§Ø­ØªØ±Ø§ÙÙŠØŒ Ø¨ÙŠØ¦Ø© Ø¢Ù…Ù†Ø©ØŒ ÙˆÙ…Ø³ØªÙ‚Ø¨Ù„ ÙˆØ§Ø¹Ø¯."}),e.jsx("div",{className:"flex gap-4",children:e.jsx(A,{onClick:()=>i(!0),className:"px-10 py-4 text-xl bg-yellow-500 text-black font-black hover:bg-yellow-400 hover:scale-105 transition-all shadow-[0_0_20px_rgba(234,179,8,0.5)] border-none",children:"Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ"})})]})]}),b&&b.length>0&&e.jsx("section",{className:"relative -mt-16 z-30 mb-20",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsx("div",{className:"relative w-full max-w-5xl mx-auto h-[450px] bg-white rounded-2xl overflow-hidden shadow-2xl border-t-8 border-yellow-500 flex flex-col md:flex-row",children:b.map((p,E)=>e.jsxs("div",{className:`absolute inset-0 flex flex-col md:flex-row transition-all duration-700 ease-in-out ${E===f?"opacity-100 z-10":"opacity-0 z-0"}`,children:[e.jsxs("div",{className:"w-full md:w-1/2 h-1/2 md:h-full relative overflow-hidden",children:[p.image?e.jsx("img",{src:p.image,alt:p.title,className:"w-full h-full object-cover transition-transform duration-[10000ms] ease-linear transform scale-100 hover:scale-110"}):e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:e.jsx(be,{size:64,className:"text-gray-300"})}),e.jsx("div",{className:"absolute top-4 right-4 bg-yellow-500 text-black text-xs font-bold px-3 py-1 shadow-md",children:p.branch})]}),e.jsxs("div",{className:"w-full md:w-1/2 h-1/2 md:h-full bg-white p-8 flex flex-col justify-center text-right relative",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 font-bold mb-2 text-sm uppercase tracking-wide",children:[e.jsx(ke,{size:16}),e.jsx("span",{children:"Ø£Ø­Ø¯Ø« Ø§Ù„Ø£Ø®Ø¨Ø§Ø±"})]}),e.jsx("h3",{className:"text-2xl md:text-4xl font-black text-gray-900 mb-4 leading-tight",children:p.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed text-sm md:text-base",children:p.desc}),e.jsxs("div",{className:"flex gap-2 mt-8",children:[e.jsx("button",{onClick:()=>j(_=>(_-1+b.length)%b.length),className:"w-10 h-10 rounded-full border border-gray-200 flex items-center justify-center hover:bg-black hover:text-white transition-colors",children:e.jsx(ze,{size:20})}),e.jsx("button",{onClick:()=>j(_=>(_+1)%b.length),className:"w-10 h-10 rounded-full border border-gray-200 flex items-center justify-center hover:bg-black hover:text-white transition-colors",children:e.jsx(Je,{size:20})})]})]})]},p.id))})})}),e.jsx("section",{id:"branches",className:"py-24 bg-white",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16",children:[e.jsx("h2",{className:"text-5xl font-black text-gray-900 mb-4 tracking-tight",children:"ÙØ±ÙˆØ¹Ù†Ø§"}),e.jsx("div",{className:"w-24 h-2 bg-yellow-500 rounded-full"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"group relative h-[500px] w-full rounded-[2.5rem] overflow-hidden shadow-2xl cursor-default",children:[e.jsx("img",{src:re.BRANCH_SHAFA,alt:"Shafa",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent opacity-90 transition-opacity duration-300"}),e.jsx("div",{className:"absolute inset-0 p-8 md:p-12 flex flex-col justify-end",children:e.jsxs("div",{className:"transform transition-transform duration-500 translate-y-4 group-hover:translate-y-0",children:[e.jsx("div",{className:"flex justify-between items-end mb-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"inline-block bg-yellow-500 text-black text-xs font-black px-3 py-1 rounded-full mb-3 shadow-lg",children:"Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ"}),e.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white leading-none mb-2",children:"Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†"}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-300 text-sm md:text-base font-medium max-w-sm",children:[e.jsx(Re,{className:"text-yellow-500 mt-1 shrink-0",size:18}),e.jsx("p",{children:"Ø´Ø§Ø±Ø¹ Ø±ÙØ¹Øª Ø´Ù…ÙˆØ· - Ø¨Ø¬Ø§Ù†Ø¨ Ù…Ø´Ø§ØªÙ„ Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø§Ø±Ø¯Ù†"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[e.jsxs("button",{onClick:()=>w("https://maps.app.goo.gl/mTqvZD4Ftor3NALJ8?g_st=ic"),className:"flex items-center justify-center gap-2 bg-white/20 backdrop-blur-md border border-white/30 text-white font-bold py-4 rounded-2xl hover:bg-white hover:text-black transition-all duration-300",children:[e.jsx(Ke,{size:20}),e.jsx("span",{children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹"})]}),e.jsxs("button",{onClick:()=>window.open("https://wa.me/962795629606","_blank"),className:"flex items-center justify-center gap-2 bg-[#25D366]/90 backdrop-blur-md text-white font-bold py-4 rounded-2xl hover:bg-[#25D366] transition-all duration-300 shadow-lg shadow-green-900/20",children:[e.jsx(me,{size:20}),e.jsx("span",{children:"ÙˆØ§ØªØ³Ø§Ø¨"})]})]}),e.jsxs("a",{href:"tel:0795629606",className:"mt-3 flex items-center justify-center gap-2 bg-black/60 backdrop-blur-md border border-white/10 text-white font-bold py-4 rounded-2xl hover:bg-yellow-500 hover:text-black transition-all duration-300",children:[e.jsx(pe,{size:20}),e.jsx("span",{dir:"ltr",children:"07 9562 9606"})]})]})})]}),e.jsxs("div",{className:"group relative h-[500px] w-full rounded-[2.5rem] overflow-hidden shadow-2xl cursor-default",children:[e.jsx("img",{src:re.BRANCH_ABU_NSEIR,alt:"Abu Nseir",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent opacity-90 transition-opacity duration-300"}),e.jsx("div",{className:"absolute inset-0 p-8 md:p-12 flex flex-col justify-end",children:e.jsxs("div",{className:"transform transition-transform duration-500 translate-y-4 group-hover:translate-y-0",children:[e.jsx("div",{className:"flex justify-between items-end mb-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"inline-block bg-gray-800 text-white text-xs font-black px-3 py-1 rounded-full mb-3 shadow-lg border border-gray-600",children:"ÙØ±Ø¹ 2"}),e.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white leading-none mb-2",children:"Ø£Ø¨Ùˆ Ù†ØµÙŠØ±"}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-300 text-sm md:text-base font-medium max-w-sm",children:[e.jsx(Re,{className:"text-yellow-500 mt-1 shrink-0",size:18}),e.jsx("p",{children:"Ø¯ÙˆØ§Ø± Ø§Ù„Ø¨Ø­Ø±ÙŠØ© - Ù…Ø¬Ù…Ø¹ Ø§Ù„ÙØ±Ø§"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[e.jsxs("button",{onClick:()=>w("https://maps.app.goo.gl/yqu6tWBiqrRWGCMJ8?g_st=ic"),className:"flex items-center justify-center gap-2 bg-white/20 backdrop-blur-md border border-white/30 text-white font-bold py-4 rounded-2xl hover:bg-white hover:text-black transition-all duration-300",children:[e.jsx(Ke,{size:20}),e.jsx("span",{children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹"})]}),e.jsxs("button",{onClick:()=>window.open("https://wa.me/962790368603","_blank"),className:"flex items-center justify-center gap-2 bg-[#25D366]/90 backdrop-blur-md text-white font-bold py-4 rounded-2xl hover:bg-[#25D366] transition-all duration-300 shadow-lg shadow-green-900/20",children:[e.jsx(me,{size:20}),e.jsx("span",{children:"ÙˆØ§ØªØ³Ø§Ø¨"})]})]}),e.jsxs("a",{href:"tel:0790368603",className:"mt-3 flex items-center justify-center gap-2 bg-black/60 backdrop-blur-md border border-white/10 text-white font-bold py-4 rounded-2xl hover:bg-yellow-500 hover:text-black transition-all duration-300",children:[e.jsx(pe,{size:20}),e.jsx("span",{dir:"ltr",children:"07 9036 8603"})]})]})})]})]})]})}),e.jsx("section",{className:"py-24 relative overflow-hidden bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16 text-center",children:[e.jsx("span",{className:"text-yellow-500 font-bold tracking-widest text-sm uppercase mb-2",children:"Ù„Ù…Ø§Ø°Ø§ Ù†Ø­Ù†ØŸ"}),e.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-4",children:["Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø¬Ø±Ø¯ ",e.jsx("span",{className:"text-yellow-500",children:"Ø±ÙŠØ§Ø¶Ø©"})]}),e.jsx("p",{className:"text-gray-500 max-w-xl",children:"Ù†Ø­Ù† Ù†Ø¨Ù†ÙŠ Ø´Ø®ØµÙŠØ© Ø·ÙÙ„ÙƒØŒ Ù†Ø¹Ø²Ø² Ø«Ù‚ØªÙ‡ Ø¨Ù†ÙØ³Ù‡ØŒ ÙˆÙ†Ø¹Ø¯Ù‡ Ù„ÙŠÙƒÙˆÙ† Ù‚Ø§Ø¦Ø¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:ts,title:"ØµÙ†Ø§Ø¹Ø© Ø§Ù„Ø£Ø¨Ø·Ø§Ù„",text:"Ù…Ù†Ù‡Ø¬ ØªØ¯Ø±ÙŠØ¨ÙŠ Ø§Ø­ØªØ±Ø§ÙÙŠ ÙŠÙ‡Ø¯Ù Ù„Ù„ÙˆØµÙˆÙ„ Ø¨Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù„Ù…Ù†ØµØ§Øª Ø§Ù„ØªØªÙˆÙŠØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙˆØ§Ù„Ø¯ÙˆÙ„ÙŠØ©."},{icon:Ce,title:"ÙƒØ§Ø¯Ø± Ù…Ø­ØªØ±Ù",text:"Ù†Ø®Ø¨Ø© Ù…Ù† Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø§Ù„ÙˆØ·Ù†ÙŠÙŠÙ† ÙˆØ§Ù„Ø¯ÙˆÙ„ÙŠÙŠÙ† Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ÙŠÙ† Ø°ÙˆÙŠ Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ø¹Ø§Ù„ÙŠØ©."},{icon:as,title:"Ø¨ÙŠØ¦Ø© Ø¢Ù…Ù†Ø©",text:"Ù†Ù‡ØªÙ… Ø¨Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„ØªØ±Ø¨ÙˆÙŠ ÙˆØ§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø¨Ø¯Ù†ÙŠØŒ ÙÙŠ Ø¨ÙŠØ¦Ø© Ø¹Ø§Ø¦Ù„ÙŠØ© Ø¢Ù…Ù†Ø©."}].map((p,E)=>e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 border border-gray-100 relative group overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-500 to-yellow-200 transform origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-500"}),e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-2xl flex items-center justify-center text-yellow-600 mb-6 group-hover:scale-110 transition-transform group-hover:bg-yellow-500 group-hover:text-black",children:e.jsx(p.icon,{size:32,strokeWidth:2})}),e.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:p.title}),e.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:p.text})]},E))})]})}),e.jsxs("section",{id:"schedule",className:"py-20 bg-gray-900 text-white relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(#FDE047 1px, transparent 1px)",backgroundSize:"20px 20px"}}),e.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-black mb-4",children:"Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ"}),e.jsx("div",{className:"w-20 h-1.5 bg-yellow-500 rounded-full"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(a&&a.length>0?a:Es).map(p=>e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700 hover:border-yellow-500 transition-all duration-300 hover:-translate-y-2 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-yellow-500 group-hover:bg-yellow-500 group-hover:text-black transition-colors",children:e.jsx(Ie,{size:20})}),e.jsx("span",{className:"text-xs font-bold text-gray-400 bg-black/30 px-2 py-1 rounded",children:p.branch})]}),e.jsx("h3",{className:"font-bold text-xl mb-2 text-white",children:p.level}),e.jsxs("div",{className:"space-y-3 mt-6 border-t border-gray-700 pt-4",children:[e.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-400",children:[e.jsx($e,{size:16,className:"text-yellow-500 mt-0.5"}),e.jsx("span",{children:p.days})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-white",children:[e.jsx(ke,{size:16,className:"text-yellow-500"}),e.jsx("span",{children:p.time})]})]})]},p.id))})]})]}),e.jsx("footer",{className:"bg-black text-white pt-16 pb-24 md:pb-8 border-t border-gray-800 relative z-10",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-6",children:[e.jsx("img",{src:re.LOGO,alt:"Logo",className:"w-10 h-10 rounded-full grayscale opacity-80"}),e.jsx("span",{className:"font-bold text-lg text-gray-400",children:"Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹ Ù„Ù„ØªØ§ÙŠÙƒÙˆÙ†Ø¯Ùˆ"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Â© 2023 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©."})]})}),e.jsx("button",{onClick:S,className:"fixed bottom-6 right-6 z-50 bg-[#25D366] text-white p-4 rounded-full shadow-2xl hover:bg-[#20bd5a] transition-transform hover:scale-110 flex items-center justify-center animate-bounce-slow border-4 border-white",title:"ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨",children:e.jsx(me,{size:28,fill:"white",className:"text-transparent"})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsx(H,{className:"w-full max-w-lg animate-fade-in border-t-8 border-yellow-500",title:"Ø·Ù„Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯",children:e.jsxs("form",{onSubmit:t,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",placeholder:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„",value:x.name,onChange:p=>m({...x,name:p.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯"}),e.jsx("input",{type:"date",required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",value:x.dob,onChange:p=>m({...x,dob:p.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"Ø±Ù‚Ù… Ù‡Ø§ØªÙ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",placeholder:"079xxxxxxx",value:x.phone,onChange:p=>m({...x,phone:p.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",placeholder:"Ø§Ù„Ù…Ù†Ø·Ù‚Ø© - Ø§Ù„Ø´Ø§Ø±Ø¹",value:x.address,onChange:p=>m({...x,address:p.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨"}),e.jsxs("select",{className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors bg-white",value:x.branch,onChange:p=>m({...x,branch:p.target.value}),children:[e.jsx("option",{value:V.SHAFA,children:V.SHAFA}),e.jsx("option",{value:V.ABU_NSEIR,children:V.ABU_NSEIR})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-gray-100",children:[e.jsx(A,{variant:"ghost",className:"text-gray-500 hover:text-black",onClick:()=>i(!1),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(A,{type:"submit",disabled:g,className:"bg-black text-white hover:bg-gray-800 px-8",children:g?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨"})]})]})})})]})},Ps=({setView:r,handleLogin:a,loginError:l})=>{const[c,o]=h.useState(""),[i,x]=h.useState(""),m=g=>{g.preventDefault(),a(c,i)};return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4 relative overflow-hidden",dir:"rtl",children:e.jsxs(H,{className:"w-full max-w-md relative z-10 border-t-4 border-yellow-500",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg p-2",children:e.jsx("img",{src:re.LOGO,alt:"Logo",className:"w-full h-full object-contain"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"})]}),l&&e.jsx("div",{className:"bg-red-100 text-red-700 p-2 rounded mb-4 text-sm text-center",children:l}),e.jsxs("form",{className:"space-y-5",onSubmit:m,children:[e.jsx("input",{className:"w-full border p-3 rounded-lg",type:"text",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",value:c,onChange:g=>o(g.target.value),required:!0}),e.jsx("input",{className:"w-full border p-3 rounded-lg",type:"password",placeholder:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",value:i,onChange:g=>x(g.target.value),required:!0}),e.jsx(A,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-yellow-500/30",children:"Ø¯Ø®ÙˆÙ„"})]}),e.jsx("div",{className:"mt-8 text-center border-t pt-4",children:e.jsxs("button",{onClick:()=>r("home"),className:"text-gray-500 hover:text-gray-800 text-sm font-medium flex items-center justify-center gap-2 w-full",children:[e.jsx(ze,{size:16})," Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"]})})]})})},Rs=({user:r,students:a,schedule:l,payments:c,news:o,handleLogout:i})=>{const[x,m]=h.useState(new Date),g=n=>{const N=new Date(x);N.setMonth(N.getMonth()+n),m(N)},k=x.getFullYear(),b=x.getMonth(),f=new Date(k,b+1,0).getDate(),j=["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"],t=a.find(n=>n.id===r.id)||r,w=a.filter(n=>n.familyId===r.familyId),S=c.filter(n=>w.some(N=>N.id===n.studentId)).sort((n,N)=>new Date(N.date)-new Date(n.date)),p=[...new Set(w.map(n=>n.branch))],E=(o||[]).filter(n=>!n.branch||n.branch==="Ø§Ù„ÙƒÙ„"||p.includes(n.branch)).sort((n,N)=>new Date(N.createdAt||0)-new Date(n.createdAt||0)),_=n=>{if(!n)return"expired";const N=new Date,P=new Date(n);N.setHours(0,0,0,0),P.setHours(0,0,0,0);const G=P-N,d=Math.ceil(G/(1e3*60*60*24));return d<0?"expired":d<=7?"near_end":"active"},[C,D]=h.useState(!1),[I,R]=h.useState({username:"",password:""}),[B,F]=h.useState(!1),U=async n=>{if(n.preventDefault(),!I.username||!I.password)return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");F(!0);try{const N=he(Y,"artifacts",te,"public","data","students",t.id);await ss(N,{username:I.username,password:I.password});const P={...r,username:I.username,password:I.password};localStorage.setItem("braveUser",JSON.stringify(P)),alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!"),D(!1)}catch(N){console.error(N),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ«")}finally{F(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans text-right",dir:"rtl",children:[e.jsx("header",{className:"bg-black text-yellow-500 p-4 shadow-lg sticky top-0 z-40",children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:re.LOGO,alt:"Logo",className:"w-10 h-10 bg-white rounded-full p-1"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-bold text-lg",children:["Ù…Ø±Ø­Ø¨Ø§Ù‹ ",r.name]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(A,{variant:"secondary",onClick:()=>{R({username:t.username,password:t.password}),D(!0)},className:"text-sm bg-gray-800 hover:bg-gray-700 text-yellow-500 border border-gray-700",children:[e.jsx(ye,{size:16})," Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"]}),e.jsxs(A,{variant:"secondary",onClick:i,className:"text-sm",children:[e.jsx(ls,{size:16})," Ø®Ø±ÙˆØ¬"]})]})]})}),e.jsxs("div",{className:"container mx-auto p-4 md:p-8 max-w-5xl space-y-8",children:[E.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border-r-4 border-yellow-500 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-white border-b border-yellow-100 flex items-center gap-2",children:[e.jsx("div",{className:"bg-yellow-500 text-white p-2 rounded-full shadow-sm animate-pulse",children:e.jsx(be,{size:20})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:E.slice(0,4).map(n=>e.jsxs("div",{className:"flex gap-4 items-start p-3 bg-gray-50 rounded-xl hover:shadow-md transition-all border border-gray-100",children:[n.image?e.jsx("img",{src:n.image,alt:"News",className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}):e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center text-gray-400",children:e.jsx(be,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed",children:n.desc}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("span",{className:"text-[10px] bg-white border border-gray-200 px-2 py-0.5 rounded-full text-gray-500",children:n.branch||"Ø¹Ø§Ù…"})})]})]},n.id))})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 text-white p-6 rounded-2xl shadow-lg",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ie,{className:"text-yellow-500"})," Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø­ØµØµ"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:l&&l.length>0?l.map(n=>e.jsxs("div",{className:"bg-white/10 p-4 rounded-lg",children:[e.jsx("p",{className:"font-bold text-yellow-400 mb-1",children:n.level}),e.jsxs("p",{className:"text-sm",children:[n.days," | ",n.time]})]},n.id)):e.jsx("p",{className:"text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø¯ÙˆÙ„ Ø­ØµØµ Ù…Ø¹Ù„Ù† Ø­Ø§Ù„ÙŠØ§Ù‹"})})]}),e.jsx(H,{title:"ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø§Ù„Ø¯ÙØ¹Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)",children:S.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø¨ÙŠØ§Ù†"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨Ù„Øº"})]})}),e.jsx("tbody",{children:S.map(n=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-3 text-gray-500 font-mono",children:n.date}),e.jsx("td",{className:"p-3 font-bold text-gray-800",children:n.name}),e.jsxs("td",{className:"p-3 text-gray-700",children:[n.reason," ",n.details&&e.jsxs("span",{className:"block text-xs text-gray-400 mt-1",children:["(",n.details,")"]})]}),e.jsxs("td",{className:"p-3 text-green-600 font-bold",dir:"ltr",children:[n.amount," JD"]})]},n.id))})]})}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"})}),w.map(n=>e.jsxs(H,{className:"mb-8 border-t-4 border-yellow-500",title:n.name,children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø§Ù„Ø­Ø²Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("p",{className:"font-bold text-xl",children:n.belt})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx(qe,{status:_(n.subEnd)}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["ÙŠÙ†ØªÙ‡ÙŠ: ",n.subEnd]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ­Ù‚"}),e.jsxs("p",{className:`font-bold text-xl ${n.balance>0?"text-red-600":"text-green-600"}`,children:[n.balance," JOD"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø§Ù„ÙØ±Ø¹"}),e.jsx("p",{className:"font-bold text-lg",children:n.branch})]})]}),n.notes&&n.notes.length>0&&e.jsxs("div",{className:"mb-6 bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsx("h4",{className:"font-bold text-blue-800 text-sm mb-2",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-blue-900",children:n.notes.map(N=>e.jsxs("li",{children:[N.text," (",N.date,")"]},N.id))})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-bold text-gray-700",children:["Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±: ",j[b]," ",k]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{variant:"ghost",onClick:()=>g(-1),children:e.jsx(ze,{size:16})}),e.jsx(A,{variant:"ghost",onClick:()=>g(1),children:e.jsx(Je,{size:16})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:[...Array(f)].map((N,P)=>{const G=P+1,d=`${k}-${String(b+1).padStart(2,"0")}-${String(G).padStart(2,"0")}`,L=n.attendance&&n.attendance[d];return e.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-xs font-bold border ${L?"bg-green-500 text-white":"bg-gray-100 text-gray-400"}`,children:G},G)})})]})]},n.id))]}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs(H,{className:"w-full max-w-sm relative bg-white rounded-2xl shadow-2xl",children:[e.jsx("button",{onClick:()=>D(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-black transition-colors",children:e.jsx(ce,{size:24})}),e.jsx("h3",{className:"text-xl font-bold mb-6 text-center text-gray-800",children:"ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„"}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯"}),e.jsx("input",{className:"w-full border-2 border-gray-200 p-3 rounded-xl focus:border-yellow-500 outline-none transition-colors font-mono text-left dir-ltr",value:I.username,onChange:n=>R({...I,username:n.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©"}),e.jsx("input",{className:"w-full border-2 border-gray-200 p-3 rounded-xl focus:border-yellow-500 outline-none transition-colors font-mono text-left dir-ltr",value:I.password,onChange:n=>R({...I,password:n.target.value}),required:!0})]}),e.jsx("div",{className:"pt-4",children:e.jsx(A,{type:"submit",disabled:B,className:"w-full py-3 bg-yellow-500 text-black font-bold hover:bg-yellow-400 transition-colors shadow-lg shadow-yellow-500/20",children:B?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"})})]})]})})]})},_s=({user:r,selectedBranch:a,branchStudents:l,netProfit:c,totalAttendance:o,expiredCount:i,activeStudentsCount:x,nearEndCount:m,totalStudents:g,activityLogs:k=[]})=>{const b=f=>{if(!f)return{date:"-",time:"-"};const j=new Date(f);return{date:j.toLocaleDateString("ar-JO"),time:j.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}};return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl p-8 text-white shadow-lg flex justify-between items-center relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ ",r.name,"! ðŸ‘‹"]}),e.jsxs("p",{className:"opacity-90",children:["Ù†Ø¸Ø±Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡ ÙØ±Ø¹ ",a]})]}),e.jsxs("div",{className:"relative z-10 bg-white/20 p-4 rounded-xl backdrop-blur-sm text-center",children:[e.jsx("span",{className:"block text-4xl font-bold",children:new Date().getDate()}),e.jsx("span",{className:"uppercase text-sm tracking-wider",children:new Date().toLocaleString("en-us",{month:"short"})})]}),e.jsx("div",{className:"absolute right-0 top-0 opacity-10 transform translate-x-10 -translate-y-10",children:e.jsx(ts,{size:200})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(H,{className:"border-l-4 border-blue-500 transform hover:-translate-y-1 transition-transform",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:l.length})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(Ce,{className:"text-blue-600",size:24})})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(_e,{size:12,className:"text-green-500"})," ",e.jsx("span",{className:"text-green-500 font-bold",children:"+3"})," Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±"]})]}),e.jsx(H,{className:"border-l-4 border-green-500 transform hover:-translate-y-1 transition-transform",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"ØµØ§ÙÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"}),e.jsxs("h3",{className:"text-3xl font-bold text-gray-800",children:[c," ",e.jsx("span",{className:"text-sm text-gray-400",children:"JOD"})]})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(vs,{className:"text-green-600",size:24})})]})}),e.jsx(H,{className:"border-l-4 border-purple-500 transform hover:-translate-y-1 transition-transform",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Ø­Ø¶ÙˆØ± Ø§Ù„Ø´Ù‡Ø±"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:o})]}),e.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:e.jsx(ke,{className:"text-purple-600",size:24})})]})}),e.jsx(H,{className:"border-l-4 border-red-500 transform hover:-translate-y-1 transition-transform",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ù…Ù†ØªÙ‡ÙŠØ©"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:i})]}),e.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:e.jsx(Ns,{className:"text-red-600",size:24})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(H,{title:"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª",className:"lg:col-span-1",children:[e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx("div",{className:"relative w-48 h-48 rounded-full bg-gray-100 border-8 border-white shadow-inner flex items-center justify-center",style:{background:`conic-gradient(#22c55e 0% ${x/g*100||0}%, #eab308 ${x/g*100||0}% ${(x+m)/g*100||0}%, #ef4444 ${(x+m)/g*100||0}% 100%)`},children:e.jsxs("div",{className:"w-32 h-32 bg-white rounded-full flex flex-col items-center justify-center z-10 shadow-sm",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-800",children:g}),e.jsx("span",{className:"text-xs text-gray-400",children:"Ø·Ø§Ù„Ø¨ ÙƒÙ„ÙŠ"})]})})}),e.jsxs("div",{className:"flex justify-around text-xs mt-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})," ÙØ¹Ø§Ù„ (",x,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"})," Ù‚Ø§Ø±Ø¨ (",m,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"})," Ù…Ù†ØªÙ‡ÙŠ (",i,")"]})]})]}),e.jsx(H,{title:"Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ± (Live Log)",className:"lg:col-span-2",children:e.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:k.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-10 flex flex-col items-center",children:[e.jsx(ws,{size:32,className:"mb-2 opacity-30"}),e.jsx("p",{children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Ø´Ø§Ø·Ø§Øª Ù…Ø³Ø¬Ù„Ø© Ø­Ø¯ÙŠØ«Ø§Ù‹"})]}):k.map((f,j)=>{const{date:t,time:w}=b(f.timestamp);return e.jsxs("div",{className:"flex gap-4 items-start p-3 hover:bg-gray-50 rounded-xl transition border border-gray-100 shadow-sm bg-white",children:[e.jsx("div",{className:"bg-blue-50 text-blue-600 p-2 rounded-full mt-1 shrink-0",children:e.jsx(rs,{size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:f.action}),e.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full font-mono flex items-center gap-1",children:[e.jsx(Ie,{size:10})," ",w]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.details}),e.jsxs("div",{className:"flex justify-between items-center mt-2 border-t border-gray-50 pt-2",children:[e.jsxs("p",{className:"text-[10px] font-bold text-blue-800",children:["Ø¨ÙˆØ§Ø³Ø·Ø©: ",f.performedBy]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:t})]})]})]},j)})})})]})]})},Ts=()=>{const a=`student${Math.floor(1e3+Math.random()*9e3)}`,l="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789";let c="";for(let o=0;o<8;o++)c+=l.charAt(Math.floor(Math.random()*l.length));return{username:a,password:c}},Fe=r=>{if(!r)return"expired";const a=new Date,l=new Date(r);a.setHours(0,0,0,0),l.setHours(0,0,0,0);const c=l-a,o=Math.ceil(c/(1e3*60*60*24));return o<0?"expired":o<=7?"near_end":"active"},Xe=r=>{if(!r)return!1;const a=new Date,l=new Date(r),c=Math.abs(a-l);return Math.ceil(c/(1e3*60*60*24))<=7},je=({children:r,onClose:a})=>typeof document>"u"?null:He.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] overflow-y-auto",role:"dialog",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:a}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center sm:p-0",children:e.jsx("div",{className:"relative transform overflow-hidden rounded-2xl text-right shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-2xl bg-white",onClick:l=>l.stopPropagation(),children:r})})]}),document.body),Us=({isOpen:r,onClose:a,groups:l,allStudents:c,onSend:o})=>{const[i,x]=h.useState("all"),[m,g]=h.useState(""),[k,b]=h.useState([]),[f,j]=h.useState(""),[t,w]=h.useState(""),[S,p]=h.useState(!1);if(!r)return null;const E=c.filter(D=>D.name.toLowerCase().includes(f.toLowerCase())),_=D=>{k.includes(D)?b(I=>I.filter(R=>R!==D)):b(I=>[...I,D])},C=async()=>{if(!t.trim())return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©");if(i==="custom"&&k.length===0)return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø§Ù„Ø¨ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");p(!0),await o(i,m,t,k),p(!1),w(""),b([]),a()};return e.jsx(je,{onClose:a,children:e.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-blue-700",children:[e.jsx(be,{size:24})," Ø¥Ø±Ø³Ø§Ù„ ØªØ¹Ù…ÙŠÙ… / Ø¥Ø¹Ù„Ø§Ù†"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù„Ù…Ù† ØªØ±ÙŠØ¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ØŸ"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 p-3 rounded-xl border border-gray-200",children:[e.jsx("input",{type:"radio",name:"target",value:"all",checked:i==="all",onChange:()=>x("all")}),e.jsx("span",{children:"Ø§Ù„ÙƒÙ„ (Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 p-3 rounded-xl border border-gray-200",children:[e.jsx("input",{type:"radio",name:"target",value:"group",checked:i==="group",onChange:()=>{x("group"),l.length>0&&g(l[0])}}),e.jsx("span",{children:"ÙØªØ±Ø© / Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ø­Ø¯Ø¯Ø©"})]}),i==="group"&&e.jsx("div",{className:"mr-6 mb-2",children:e.jsx("select",{className:"w-full border-2 border-gray-200 p-2 rounded-xl outline-none",value:m,onChange:D=>g(D.target.value),children:l.map((D,I)=>e.jsx("option",{value:D,children:D},I))})}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 p-3 rounded-xl border border-gray-200",children:[e.jsx("input",{type:"radio",name:"target",value:"custom",checked:i==="custom",onChange:()=>x("custom")}),e.jsx("span",{children:"ØªØ­Ø¯ÙŠØ¯ Ø·Ù„Ø§Ø¨ (ÙŠØ¯ÙˆÙŠØ§Ù‹)"})]}),i==="custom"&&e.jsxs("div",{className:"mr-6 p-3 border border-gray-200 rounded-xl bg-white",children:[e.jsx("input",{className:"w-full border-b border-gray-100 p-2 mb-2 text-sm outline-none",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨...",value:f,onChange:D=>j(D.target.value)}),e.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 custom-scrollbar",children:E.map(D=>e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k.includes(D.id),onChange:()=>_(D.id)}),e.jsx("span",{className:"text-sm",children:D.name})]},D.id))}),e.jsxs("div",{className:"mt-2 text-xs text-blue-600 font-bold",children:["ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ",k.length," Ø·Ø§Ù„Ø¨"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù†Øµ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†"}),e.jsx("textarea",{className:"w-full border-2 border-gray-200 p-3 rounded-xl outline-none h-32 focus:border-blue-500",placeholder:"Ø§ÙƒØªØ¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù‡Ù†Ø§... (Ø³ÙŠØ¸Ù‡Ø± ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø·Ù„Ø§Ø¨)",value:t,onChange:D=>w(D.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(A,{variant:"ghost",onClick:a,children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(A,{onClick:C,disabled:S,className:"bg-blue-600 text-white hover:bg-blue-700",children:S?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†"})]})]})]})})},qs=({student:r,onClose:a,onSave:l})=>{const[c,o]=h.useState("private"),[i,x]=h.useState(""),m=()=>{if(!i.trim())return;const b={id:Date.now().toString(),text:i,date:new Date().toLocaleDateString("ar-JO"),timestamp:new Date().toISOString()};l(r.id,c,"add",b),x("")},g=b=>{confirm("Ø­Ø°Ù Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©ØŸ")&&l(r.id,c,"delete",{id:b})},k=c==="private"?r.internalNotes||[]:r.notes||[];return e.jsx(je,{onClose:a,children:e.jsxs("div",{className:"p-0 overflow-hidden flex flex-col h-[500px]",children:[e.jsxs("div",{className:`p-4 text-white flex justify-between items-center ${c==="private"?"bg-red-600":"bg-blue-600"}`,children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[c==="private"?e.jsx(ge,{size:20}):e.jsx(Me,{size:20}),c==="private"?`Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ©: ${r.name}`:`Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù„Ù„Ø·Ø§Ù„Ø¨: ${r.name}`]}),e.jsx("button",{onClick:a,children:e.jsx(ce,{size:20})})]}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>o("private"),className:`flex-1 py-3 font-bold text-sm flex items-center justify-center gap-2 ${c==="private"?"text-red-600 border-b-2 border-red-600 bg-red-50":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(ge,{size:16})," Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ© (Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©)"]}),e.jsxs("button",{onClick:()=>o("public"),className:`flex-1 py-3 font-bold text-sm flex items-center justify-center gap-2 ${c==="public"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(Me,{size:16})," Ø¥Ø¹Ù„Ø§Ù†Ø§Øª (Ù„Ù„Ø·Ø§Ù„Ø¨)"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:k.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[c==="private"?e.jsx(ge,{size:48,className:"mb-2 opacity-20"}):e.jsx(Me,{size:48,className:"mb-2 opacity-20"}),e.jsx("p",{children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ø³Ø¬Ù„Ø©"})]}):e.jsx("div",{className:"space-y-3",children:k.map(b=>e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-gray-200 shadow-sm relative group",children:[e.jsx("p",{className:"text-gray-800 text-sm whitespace-pre-wrap",children:b.text}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] text-gray-400 bg-gray-100 px-2 py-1 rounded-full",children:b.date}),e.jsx("button",{onClick:()=>g(b.id),className:"text-red-400 hover:text-red-600 p-1",children:e.jsx(se,{size:16})})]})]},b.id))})}),e.jsx("div",{className:"p-4 bg-white border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 border-2 border-gray-200 rounded-xl px-4 py-2 focus:outline-none focus:border-yellow-500",placeholder:c==="private"?"Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸Ø© Ø³Ø±ÙŠØ©...":"Ø§ÙƒØªØ¨ Ø¥Ø¹Ù„Ø§Ù†Ø§Ù‹ Ù„Ù„Ø·Ø§Ù„Ø¨...",value:i,onChange:b=>x(b.target.value),onKeyDown:b=>b.key==="Enter"&&m()}),e.jsx(A,{onClick:m,className:c==="private"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700",children:e.jsx(Ne,{size:18})})]})})]})})},Hs=({student:r,onClose:a,onSave:l})=>{const[c,o]=h.useState(r.subEnd||new Date().toISOString().split("T")[0]),i=x=>{const m=new Date(c);m.setMonth(m.getMonth()+x),o(m.toISOString().split("T")[0])};return e.jsx(je,{onClose:a,children:e.jsxs("div",{className:"p-6 text-right",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 text-green-700 flex items-center gap-2",children:[e.jsx(Te,{size:24})," ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§Ùƒ: ",r.name]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯"}),e.jsx("input",{type:"date",className:"w-full border-2 border-green-100 focus:border-green-500 p-3 rounded-xl outline-none text-lg font-bold text-center bg-green-50/20",value:c,onChange:x=>o(x.target.value)})]}),e.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-2",children:"Ø¥Ø¶Ø§ÙØ© Ø³Ø±ÙŠØ¹Ø©:"}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>i(1),className:"flex-1 bg-white hover:bg-green-50 text-green-700 border border-green-200 py-3 rounded-xl font-bold text-sm transition shadow-sm hover:shadow-md",children:"+ Ø´Ù‡Ø±"}),e.jsx("button",{onClick:()=>i(2),className:"flex-1 bg-white hover:bg-green-50 text-green-700 border border-green-200 py-3 rounded-xl font-bold text-sm transition shadow-sm hover:shadow-md",children:"+ Ø´Ù‡Ø±ÙŠÙ†"}),e.jsx("button",{onClick:()=>i(3),className:"flex-1 bg-white hover:bg-green-50 text-green-700 border border-green-200 py-3 rounded-xl font-bold text-sm transition shadow-sm hover:shadow-md",children:"+ 3 Ø´Ù‡ÙˆØ±"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(A,{variant:"ghost",onClick:a,children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(A,{onClick:()=>l(r.id,c),className:"flex-1 bg-green-600 text-white hover:bg-green-700 shadow-lg shadow-green-600/20",children:"Ø­ÙØ¸ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯"})]})]})})},Gs=({students:r,studentsCollection:a,archiveCollection:l,selectedBranch:c,logActivity:o,groups:i})=>{const[x,m]=h.useState(""),[g,k]=h.useState("all"),[b,f]=h.useState("joinDateDesc"),[j,t]=h.useState(!1),[w,S]=h.useState(null),[p,E]=h.useState(null),[_,C]=h.useState(null),[D,I]=h.useState(!1),[R,B]=h.useState(null),F=h.useMemo(()=>i?i.map(s=>s.name):[],[i]),U={name:"",phone:"",belt:"Ø£Ø¨ÙŠØ¶",group:"",joinDate:new Date().toISOString().split("T")[0],dob:"",address:"",balance:0,subEnd:"",username:"",password:""},[n,N]=h.useState(U),[P,G]=h.useState("new"),d=[...new Map(r.map(s=>[s.familyId,s.familyName])).entries()],L=h.useMemo(()=>{let s=[...r];if(x){const y=x.toLowerCase();s=s.filter($=>$.name.toLowerCase().includes(y)||$.phone.includes(y)||$.username.toLowerCase().includes(y))}return g!=="all"&&(s=s.filter(y=>Fe(y.subEnd)===g)),s.sort((y,$)=>{switch(b){case"joinDateDesc":return new Date($.joinDate||0)-new Date(y.joinDate||0);case"joinDateAsc":return new Date(y.joinDate||0)-new Date($.joinDate||0);case"beltDesc":return le.indexOf($.belt)-le.indexOf(y.belt);case"beltAsc":return le.indexOf(y.belt)-le.indexOf($.belt);case"balanceDesc":return $.balance-y.balance;default:return 0}}),s},[r,x,g,b]),K=async s=>{var ie;s.preventDefault();let y=n.username,$=n.password;if(!y||!$){const ee=Ts();y=ee.username,$=ee.password}let q,J;P==="new"?(q=Math.floor(Date.now()/1e3),J=`Ø¹Ø§Ø¦Ù„Ø© ${n.name.split(" ").slice(-1)[0]}`):(q=parseInt(P),J=((ie=r.find(ee=>ee.familyId===q))==null?void 0:ie.familyName)||"Ø¹Ø§Ø¦Ù„Ø©");let v=n.subEnd;if(!v){const ee=new Date(n.joinDate||new Date),Ae=new Date(ee);Ae.setMonth(Ae.getMonth()+1),v=Ae.toISOString().split("T")[0]}const T=n.group||(F.length>0?F[0]:"Ø§Ù„ÙƒÙ„"),W={...n,branch:c,status:"active",subEnd:v,notes:[],internalNotes:[],attendance:{},familyId:q,familyName:J,customOrder:Date.now(),group:T,username:y,password:$};await a.add(W)&&(o&&o("Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨",`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ ${W.name}`),E({name:W.name,username:y,password:$,phone:W.phone}),Z())},X=s=>{S(s),N({name:s.name,phone:s.phone,belt:s.belt,group:s.group||"",joinDate:s.joinDate,dob:s.dob,address:s.address||"",subEnd:s.subEnd,balance:s.balance,username:s.username,password:s.password}),G(s.familyId),t(!0)},Z=()=>{t(!1),S(null),N(U),G("new")},xe=async s=>{s.preventDefault(),await a.update(w.id,n),Z()},ne=async s=>{const y=le.indexOf(s.belt);y<le.length-1&&await a.update(s.id,{belt:le[y+1]})},oe=async s=>{confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ø±Ø´ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ ${s.name}ØŸ`)&&(await l.add({...s,archivedAt:new Date().toISOString().split("T")[0],originalId:s.id}),await a.remove(s.id),o&&o("Ø£Ø±Ø´ÙØ©",`Ø£Ø±Ø´ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ ${s.name}`))},ue=async(s,y,$,q)=>{const J=r.find(ae=>ae.id===s);if(!J)return;const v=y==="private"?"internalNotes":"notes";let T=J[v]||[],W;$==="add"?W=[q,...T]:W=T.filter(ae=>ae.id!==q.id),await a.update(s,{[v]:W})},u=async(s,y,$,q=[])=>{let J=[];if(s==="all"?J=r:s==="group"?J=r.filter(T=>T.group===y):s==="custom"&&(J=r.filter(T=>q.includes(T.id))),J.length===0)return alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø§Ø¨ Ù…Ø³ØªÙ‡Ø¯ÙÙŠÙ†");if(!confirm(`Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù€ ${J.length} Ø·Ø§Ù„Ø¨. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ`))return;const v={id:Date.now().toString(),text:$,date:new Date().toLocaleDateString("ar-JO"),timestamp:new Date().toISOString()};try{const T=js(Y);let W=0;J.forEach(ae=>{const ie=he(Y,"artifacts",te,"public","data","students",ae.id),ee=ae.notes||[];T.update(ie,{notes:[v,...ee]}),W++}),W>0&&(await T.commit(),alert("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­!"))}catch(T){console.error("Broadcast Error:",T),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª.")}},z=async(s,y)=>{await a.update(s,{subEnd:y}),o&&o("ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§Ùƒ",`ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§Ùƒ Ù„Ù„Ø·Ø§Ù„Ø¨ (ØªØ§Ø±ÙŠØ® Ø¬Ø¯ÙŠØ¯: ${y})`),B(null)},M=s=>{if(!s)return;let y=s.replace(/\D/g,"");y.startsWith("0")&&(y=y.substring(1)),window.open(`https://wa.me/962${y}`,"_blank")},O=s=>{if(!s.phone)return;let y=s.phone.replace(/\D/g,"");y.startsWith("0")&&(y=y.substring(1));const $=`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${s.name} ðŸ”¥

Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹ Ù„Ù„ØªØ§ÙŠÙƒÙˆØ§Ù†Ø¯Ùˆ !
Ø¥Ù„ÙŠÙƒ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ Ø¨Ø§Ù„Ù…ÙˆÙ‚Ø¹ :

ðŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${s.username}
ðŸ”‘ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${s.password}

Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø§Ù„Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠ :
https://bravetkd.bar/

Ù†ØªÙ…Ù†Ù‰ Ù„Ùƒ Ø§Ù„ØªÙˆÙÙŠÙ‚ ÙŠØ§ Ø¨Ø·Ù„! ðŸ¥‹

ðŸ“ ÙØ±ÙˆØ¹Ù†Ø§ :
âœ… Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø£ÙˆÙ„: Ø´ÙØ§Ø¨Ø¯Ø±Ø§Ù† â€“ Ø´Ø§Ø±Ø¹ Ø±ÙØ¹Øª Ø´Ù…ÙˆØ·
ðŸ“ž 0795629606

âœ… Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø£Ø¨Ùˆ Ù†ØµÙŠØ± â€“ Ø¯ÙˆØ§Ø± Ø§Ù„Ø¨Ø­Ø±ÙŠØ© - Ù…Ø¬Ù…Ø¹ Ø§Ù„ÙØ±Ù‘Ø§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ
ðŸ“ž 0790368603`;window.open(`https://wa.me/962${y}?text=${encodeURIComponent($)}`,"_blank")};return e.jsxs("div",{className:"space-y-6 animate-fade-in font-sans",children:[e.jsx(Us,{isOpen:D,onClose:()=>I(!1),groups:F,allStudents:r,onSend:u}),_&&e.jsx(qs,{student:_,onClose:()=>C(null),onSave:ue}),R&&e.jsx(Hs,{student:R,onClose:()=>B(null),onSave:z}),p&&e.jsx(je,{onClose:()=>E(null),children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce",children:e.jsx(Ve,{size:32})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨Ø·Ù„ Ø¨Ù†Ø¬Ø§Ø­!"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Ø§Ù„Ø·Ø§Ù„Ø¨: ",e.jsx("strong",{children:p.name})]}),e.jsxs("div",{className:"bg-gray-50 p-4 border rounded-xl mb-6 dir-ltr text-left relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 bg-yellow-400 text-xs font-bold text-black rounded-bl-lg",children:"Credentials"}),e.jsxs("p",{className:"font-mono text-sm mb-1",children:["User: ",e.jsx("strong",{className:"text-lg text-blue-900 select-all",children:p.username})]}),e.jsxs("p",{className:"font-mono text-sm",children:["Pass: ",e.jsx("strong",{className:"text-lg text-red-600 select-all",children:p.password})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(A,{onClick:()=>O(p),className:"bg-[#25D366] hover:bg-[#20bd5a] text-white flex items-center justify-center gap-2",children:[e.jsx(Ne,{size:18})," Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§ØªØ³Ø§Ø¨"]}),e.jsx(A,{variant:"outline",onClick:()=>E(null),children:"Ø¥ØºÙ„Ø§Ù‚"})]})]})}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col md:flex-row gap-4 justify-between items-center sticky top-0 z-20",children:[e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx(Ge,{size:18,className:"text-gray-400"})}),e.jsx("input",{className:"w-full pl-4 pr-10 py-2.5 border-2 border-gray-100 rounded-xl focus:border-yellow-500 focus:ring-4 focus:ring-yellow-500/10 outline-none transition-all",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù…ØŒ Ù‡Ø§ØªÙØŒ ÙŠÙˆØ²Ø±...",value:x,onChange:s=>m(s.target.value),list:"students-suggestions"}),e.jsx("datalist",{id:"students-suggestions",children:r.map(s=>e.jsx("option",{value:s.name},s.id))})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-1 md:pb-0 hide-scrollbar",children:[e.jsxs(A,{onClick:()=>I(!0),className:"bg-blue-50 text-blue-600 border border-blue-100 hover:bg-blue-100 whitespace-nowrap flex items-center gap-2",children:[e.jsx(be,{size:18})," ",e.jsx("span",{className:"hidden sm:inline",children:"Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„ÙƒÙ„"})]}),e.jsxs("div",{className:"relative min-w-[120px]",children:[e.jsxs("select",{className:"w-full appearance-none bg-gray-50 border border-gray-200 text-gray-700 py-2.5 pr-8 pl-8 rounded-xl focus:outline-none focus:border-yellow-500 cursor-pointer text-sm font-bold",value:g,onChange:s=>k(s.target.value),children:[e.jsx("option",{value:"all",children:"ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª"}),e.jsx("option",{value:"active",children:"ðŸŸ¢ ÙØ¹Ø§Ù„"}),e.jsx("option",{value:"near_end",children:"ðŸŸ¡ Ù‚Ø§Ø±Ø¨ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"}),e.jsx("option",{value:"expired",children:"ðŸ”´ Ù…Ù†ØªÙ‡ÙŠ"})]}),e.jsx(ks,{size:14,className:"absolute top-1/2 -translate-y-1/2 right-3 text-gray-500 pointer-events-none"})]}),e.jsxs("div",{className:"relative min-w-[140px]",children:[e.jsxs("select",{className:"w-full appearance-none bg-gray-50 border border-gray-200 text-gray-700 py-2.5 pr-8 pl-8 rounded-xl focus:outline-none focus:border-yellow-500 cursor-pointer text-sm font-bold",value:b,onChange:s=>f(s.target.value),children:[e.jsx("option",{value:"joinDateDesc",children:"ðŸ“… Ø§Ù„Ø£Ø­Ø¯Ø«"}),e.jsx("option",{value:"joinDateAsc",children:"ðŸ“… Ø§Ù„Ø£Ù‚Ø¯Ù…"}),e.jsx("option",{value:"beltDesc",children:"ðŸ¥‹ Ø£Ø¹Ù„Ù‰ Ø­Ø²Ø§Ù…"}),e.jsx("option",{value:"balanceDesc",children:"ðŸ’° Ø§Ù„Ù…Ø¯ÙŠÙˆÙ†ÙŠØ©"})]}),b.includes("Desc")?e.jsx(Ss,{size:14,className:"absolute top-1/2 -translate-y-1/2 right-3 text-gray-500 pointer-events-none"}):e.jsx(Ds,{size:14,className:"absolute top-1/2 -translate-y-1/2 right-3 text-gray-500 pointer-events-none"})]}),e.jsxs(A,{onClick:()=>{S(null),t(!0)},className:"whitespace-nowrap flex items-center gap-2 shadow-lg shadow-yellow-500/20",children:[e.jsx(zs,{size:18})," ",e.jsx("span",{className:"hidden sm:inline",children:"Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯"}),e.jsx("span",{className:"inline sm:hidden",children:"Ø¬Ø¯ÙŠØ¯"})]})]})]}),e.jsx(H,{className:"hidden md:block overflow-hidden border-none shadow-md rounded-2xl p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„ÙØªØ±Ø©"}),e.jsx("th",{className:"p-4 font-bold",children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„Ø­Ø²Ø§Ù…"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:L.map(s=>{const y=Xe(s.joinDate),$=s.internalNotes&&s.internalNotes.length>0,q=s.notes&&s.notes.length>0;return e.jsxs("tr",{className:"hover:bg-yellow-50/50 transition-colors group",children:[e.jsxs("td",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[$&&e.jsx("button",{onClick:()=>C(s),className:"text-red-500 hover:scale-110 transition-transform",title:"ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ©!",children:e.jsx(Ye,{size:20,fill:"currentColor",className:"text-red-100"})}),e.jsx("div",{className:"font-bold text-gray-800 text-base cursor-pointer hover:text-blue-600",onClick:()=>C(s),children:s.name}),y&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-red-100 text-red-600 text-[10px] font-bold border border-red-200 animate-pulse",children:"NEW"})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:s.joinDate})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-bold border border-blue-100",children:s.group||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("a",{href:`tel:${s.phone}`,className:"font-mono text-gray-600 hover:text-blue-600 font-bold flex items-center gap-1",title:"Ø§ØªØµØ§Ù„",children:[s.phone," ",e.jsx(pe,{size:12,className:"opacity-50"})]}),e.jsx("button",{onClick:()=>M(s.phone),className:"w-8 h-8 rounded-full bg-green-50 text-[#25D366] flex items-center justify-center hover:bg-[#25D366] hover:text-white transition-all shadow-sm",children:e.jsx(me,{size:16})})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"bg-gray-50 p-1.5 rounded-lg text-xs font-mono border border-gray-100",children:[e.jsxs("div",{className:"text-blue-900",children:["U: ",s.username]}),e.jsxs("div",{className:"text-red-600 font-bold",children:["P: ",s.password]})]}),e.jsx("button",{onClick:()=>O(s),className:"text-gray-400 hover:text-[#25D366] transition-colors",children:e.jsx(Ne,{size:16})})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-3 py-1 bg-gray-100 rounded-lg font-bold text-xs border border-gray-200",children:s.belt})}),e.jsx("td",{className:"p-4",children:s.balance>0?e.jsxs("span",{className:"text-red-600 font-bold bg-red-50 px-2 py-1 rounded text-xs",children:["Ø¹Ù„ÙŠÙ‡ ",s.balance]}):e.jsx("span",{className:"text-green-600 font-bold text-xs",children:"Ø®Ø§Ù„Øµ"})}),e.jsx("td",{className:"p-4",children:e.jsx(qe,{status:Fe(s.subEnd)})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>B(s),className:"bg-green-100 text-green-700 p-2 rounded-lg hover:bg-green-600 hover:text-white transition",title:"ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ",children:e.jsx(Te,{size:16})}),e.jsx("button",{onClick:()=>C(s),className:`p-2 rounded-lg transition ${q||$?"bg-yellow-100 text-yellow-700":"bg-gray-50 text-gray-400 hover:text-yellow-600"}`,title:"Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª",children:e.jsx(ge,{size:16})}),e.jsx("button",{onClick:()=>ne(s),className:"bg-blue-50 text-blue-600 p-2 rounded-lg hover:bg-blue-600 hover:text-white transition",title:"ØªØ±ÙÙŠØ¹",children:e.jsx(_e,{size:16})}),e.jsx("button",{onClick:()=>X(s),className:"bg-gray-100 text-gray-600 p-2 rounded-lg hover:bg-gray-600 hover:text-white transition",title:"ØªØ¹Ø¯ÙŠÙ„",children:e.jsx(Ue,{size:16})}),e.jsx("button",{onClick:()=>oe(s),className:"bg-red-50 text-red-600 p-2 rounded-lg hover:bg-red-600 hover:text-white transition",title:"Ø£Ø±Ø´ÙØ©",children:e.jsx(fe,{size:16})})]})})]},s.id)})})]})})}),e.jsxs("div",{className:"md:hidden grid grid-cols-1 gap-4",children:[L.map(s=>{const y=Xe(s.joinDate),$=Fe(s.subEnd),q=s.internalNotes&&s.internalNotes.length>0;return e.jsxs("div",{className:`bg-white p-4 rounded-xl shadow-sm border ${q?"border-red-200 ring-1 ring-red-100":"border-gray-100"} flex flex-col gap-3 relative`,children:[q&&e.jsx("div",{className:"absolute top-4 left-14 animate-pulse",children:e.jsx(Ye,{size:20,className:"text-red-500 fill-red-100"})}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:s.name}),y&&e.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-2 rounded-full animate-pulse",children:"NEW"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Ù…Ù†Ø°: ",s.joinDate]}),e.jsx("span",{className:"text-[10px] bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-bold mt-1 inline-block",children:s.group||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]}),e.jsx(qe,{status:$})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg",children:[e.jsx("span",{className:"text-gray-500 text-xs block",children:"Ø§Ù„Ø­Ø²Ø§Ù…"}),e.jsx("span",{className:"font-bold text-gray-800",children:s.belt})]}),e.jsxs("div",{className:`p-2 rounded-lg ${s.balance>0?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:[e.jsx("span",{className:"text-xs block opacity-70",children:"Ø§Ù„Ø±ØµÙŠØ¯"}),e.jsx("span",{className:"font-bold",children:s.balance>0?`Ø¹Ù„ÙŠÙ‡ ${s.balance}`:"Ø®Ø§Ù„Øµ"})]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-lg border border-gray-100 border-dashed",children:[e.jsxs("div",{className:"text-xs font-mono text-gray-600",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-bold text-blue-800",children:"U:"})," ",s.username]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-red-600",children:"P:"})," ",s.password]})]}),e.jsx("button",{onClick:()=>O(s),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200",children:e.jsx(Ne,{size:16})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100 mt-1",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:`tel:${s.phone}`,className:"p-2 bg-gray-100 rounded-full text-gray-600",children:e.jsx(pe,{size:16})}),e.jsx("button",{onClick:()=>M(s.phone),className:"p-2 bg-green-100 rounded-full text-[#25D366]",children:e.jsx(me,{size:16})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>B(s),className:"p-2 bg-green-100 text-green-700 rounded-lg",children:e.jsx(Te,{size:16})}),e.jsx("button",{onClick:()=>C(s),className:`p-2 rounded-lg ${q?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(ge,{size:16})}),e.jsx("button",{onClick:()=>ne(s),className:"p-2 bg-blue-50 text-blue-600 rounded-lg",children:e.jsx(_e,{size:16})}),e.jsx("button",{onClick:()=>X(s),className:"p-2 bg-yellow-50 text-yellow-600 rounded-lg",children:e.jsx(Ue,{size:16})}),e.jsx("button",{onClick:()=>oe(s),className:"p-2 bg-red-50 text-red-600 rounded-lg",children:e.jsx(fe,{size:16})})]})]})]},s.id)}),L.length===0&&e.jsx("div",{className:"text-center p-8 text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬"})]}),j&&e.jsx(je,{onClose:Z,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:w?"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨":"Ø¥Ø¶Ø§ÙØ© Ø¨Ø·Ù„ Ø¬Ø¯ÙŠØ¯"}),e.jsx("button",{onClick:Z,className:"text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(ce,{size:24})})]}),e.jsxs("form",{onSubmit:w?xe:K,className:"space-y-4 text-right",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 bg-gradient-to-r from-yellow-50 to-white p-4 rounded-xl border border-yellow-200 mb-2",children:[e.jsxs("p",{className:"text-xs font-bold text-yellow-700 mb-3 flex items-center gap-1",children:[e.jsx(Ve,{size:12})," Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ø§ØªØ±ÙƒÙ‡Ø§ ÙØ§Ø±ØºØ© Ù„Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Username"}),e.jsx("input",{className:"w-full border border-gray-200 p-2 rounded-lg bg-white font-mono text-left dir-ltr focus:border-yellow-500 outline-none",value:n.username,onChange:s=>N({...n,username:s.target.value}),placeholder:"Auto-generated"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Password"}),e.jsx("input",{className:"w-full border border-gray-200 p-2 rounded-lg bg-white font-mono text-left dir-ltr focus:border-yellow-500 outline-none",value:n.password,onChange:s=>N({...n,password:s.target.value}),placeholder:"Auto-generated"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none transition-all",value:n.name,onChange:s=>N({...n,name:s.target.value}),placeholder:"Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"Ø§Ù„ÙØªØ±Ø© / Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©"}),e.jsxs("select",{className:"w-full border-2 border-blue-100 focus:border-blue-500 p-2.5 rounded-xl bg-blue-50/50 outline-none",value:n.group,onChange:s=>N({...n,group:s.target.value}),children:[e.jsx("option",{value:"",children:"Ø¨Ø¯ÙˆÙ† ØªØ­Ø¯ÙŠØ¯"}),F.map((s,y)=>e.jsx("option",{value:s,children:s},y))]})]}),!w&&e.jsxs("div",{className:"md:col-span-2 bg-blue-50 p-3 rounded-xl border border-blue-100",children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© (Ù„Ù„Ø®ØµÙˆÙ…Ø§Øª)"}),e.jsxs("select",{className:"w-full border border-blue-200 p-2 rounded-lg bg-white focus:ring-2 focus:ring-blue-200 outline-none",value:P,onChange:s=>G(s.target.value),children:[e.jsx("option",{value:"new",children:"ØªØ³Ø¬ÙŠÙ„ ÙƒØ¹Ø§Ø¦Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),d.map(([s,y])=>e.jsxs("option",{value:s,children:["Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù€ ",y]},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:n.phone,onChange:s=>N({...n,phone:s.target.value}),placeholder:"079xxxxxxx"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Ø§Ù„Ø­Ø²Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("select",{className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl bg-white outline-none",value:n.belt,onChange:s=>N({...n,belt:s.target.value}),children:le.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-red-600 mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø§ÙØªØªØ§Ø­ÙŠ (Ø¯ÙŠÙ†Ø§Ø±)"}),e.jsx("input",{type:"number",className:"w-full border-2 border-red-50 focus:border-red-500 p-2.5 rounded-xl outline-none bg-red-50/30",value:n.balance,onChange:s=>N({...n,balance:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:n.dob,onChange:s=>N({...n,dob:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:n.joinDate,onChange:s=>N({...n,joinDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-green-600 mb-1",children:"Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("input",{type:"date",className:"w-full border-2 border-green-50 focus:border-green-500 p-2.5 rounded-xl outline-none bg-green-50/30",value:n.subEnd,onChange:s=>N({...n,subEnd:s.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx("input",{className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:n.address,onChange:s=>N({...n,address:s.target.value}),placeholder:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© - Ø§Ù„Ù…Ù†Ø·Ù‚Ø© - Ø§Ù„Ø´Ø§Ø±Ø¹"})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end mt-8 pt-4 border-t border-gray-100",children:[e.jsx(A,{type:"button",variant:"ghost",onClick:Z,className:"text-gray-500 hover:bg-gray-100",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(A,{type:"submit",className:"bg-yellow-500 text-black font-bold hover:bg-yellow-400 shadow-lg shadow-yellow-500/20 px-8",children:w?"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨"})]})]})]})})]})},Js=({archiveCollection:r,studentsCollection:a,payments:l,logActivity:c})=>{const[o,i]=h.useState(null),[x,m]=h.useState(""),g=r.data.filter(t=>t.name.includes(x)),k=async t=>{if(!window.confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ø·Ø§Ù„Ø¨ ${t.name}ØŸ`))return;const{archivedAt:w,originalId:S,id:p,...E}=t;await a.add({...E,status:"active",joinDate:new Date().toISOString().split("T")[0]}),await r.remove(t.id),c("Ø§Ø³ØªØ¹Ø§Ø¯Ø©",`ØªÙ…Øª Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ ${t.name} Ù…Ù† Ø§Ù„Ø£Ø±Ø´ÙŠÙ`)},b=(t,w)=>{alert("Print functionality for: "+t.id)},f=t=>{if(!t)return;let w=t.replace(/\D/g,"");w.startsWith("0")&&(w=w.substring(1)),window.open(`https://wa.me/962${w}`,"_blank")},j=t=>{const w=t.originalId||t.id;return l.filter(S=>S.studentId===w||S.studentIds&&S.studentIds.includes(w))};return e.jsxs("div",{className:"space-y-6",children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60] p-4 backdrop-blur-sm",children:e.jsxs(H,{className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto",title:`Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø§Ù„ÙŠ: ${o.name}`,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:`p-4 rounded-xl border-2 text-center ${o.balance>0?"bg-red-50 border-red-500":"bg-green-50 border-green-500"}`,children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ (Ø°Ù…Ù…)"}),e.jsxs("p",{className:`text-2xl font-bold ${o.balance>0?"text-red-600":"text-green-600"}`,children:[o.balance," JOD"]})]}),e.jsxs("div",{className:"p-4 rounded-xl border bg-gray-50 text-center",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£Ø±Ø´ÙØ©"}),e.jsx("p",{className:"text-xl font-bold",children:o.archivedAt||"ØºÙŠØ± Ù…Ø³Ø¬Ù„"})]})]}),e.jsxs("h4",{className:"font-bold border-b pb-2 mb-4 text-gray-800 flex items-center gap-2",children:[e.jsx(ns,{size:18,className:"text-green-600"})," Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª ÙˆØ§Ù„ÙˆØµÙ„Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©"]}),j(o).length>0?e.jsx("div",{className:"space-y-3",children:j(o).map(t=>e.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-lg border hover:shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:t.reason}),e.jsxs("p",{className:"text-xs text-gray-500",children:[t.date," - ",t.branch]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"font-bold text-green-600",children:[t.amount," JOD"]}),e.jsx("button",{onClick:()=>b(t,t.branch),className:"text-gray-400 hover:text-black",title:"Ø·Ø¨Ø§Ø¹Ø© Ù†Ø³Ø®Ø©",children:e.jsx(Se,{size:16})})]})]},t.id))}):e.jsx("div",{className:"text-center py-8 bg-gray-50 rounded border-2 border-dashed",children:e.jsx("p",{className:"text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ù…Ø§Ù„ÙŠØ© Ù…Ø¤Ø±Ø´ÙØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø·Ø§Ù„Ø¨"})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(A,{onClick:()=>i(null),children:"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ù„Ù"})})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(fe,{className:"text-red-500"})," Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ø·Ù„Ø§Ø¨"]}),e.jsx("div",{className:"w-64",children:e.jsx("input",{className:"w-full border p-2 rounded shadow-sm",placeholder:"Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ...",value:x,onChange:t=>m(t.target.value)})})]}),e.jsx(H,{noPadding:!0,children:g.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fe,{size:48,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Ø§Ù„Ø£Ø±Ø´ÙŠÙ ÙØ§Ø±Øº Ø­Ø§Ù„ÙŠØ§Ù‹"})]}):e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-4",children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("th",{className:"p-4",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£Ø±Ø´ÙØ©"}),e.jsx("th",{className:"p-4",children:"Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ©"}),e.jsx("th",{className:"p-4",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx("tbody",{className:"divide-y",children:g.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsxs("td",{className:"p-4 font-bold text-gray-800",children:[t.name," ",e.jsx("br",{}),e.jsx("span",{className:"text-xs font-normal text-gray-500",children:t.belt})]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`tel:${t.phone}`,className:"hover:text-blue-600",children:t.phone}),e.jsx("button",{onClick:()=>f(t.phone),className:"text-green-500 hover:bg-green-100 p-1 rounded-full",children:e.jsx(me,{size:16})})]})}),e.jsx("td",{className:"p-4 text-gray-600",children:t.archivedAt}),e.jsx("td",{className:"p-4",children:Number(t.balance)>0?e.jsxs("span",{className:"bg-red-100 text-red-700 px-3 py-1 rounded-full font-bold text-xs",children:["Ø¹Ù„ÙŠÙ‡ ",t.balance," JOD"]}):e.jsxs("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full font-bold text-xs flex items-center gap-1 w-fit",children:[e.jsx(os,{size:12})," Ø®Ø§Ù„Øµ"]})}),e.jsxs("td",{className:"p-4 flex gap-2",children:[e.jsxs(A,{variant:"outline",className:"py-1 px-3 text-xs border-gray-300 hover:bg-gray-100 text-gray-700",onClick:()=>i(t),children:[e.jsx(is,{size:14,className:"ml-1"})," Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø§Ù„ÙŠ"]}),e.jsx("button",{onClick:()=>k(t),className:"bg-blue-50 text-blue-600 p-2 rounded hover:bg-blue-100 border border-blue-200",title:"Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨ (Ø§Ø³ØªØ±Ø¬Ø§Ø¹)",children:e.jsx(Cs,{size:16})}),e.jsx("button",{onClick:async()=>{window.confirm("Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ø³Ø¬Ù„Ø§ØªØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹!")&&await r.remove(t.id)},className:"bg-red-50 text-red-600 p-2 rounded hover:bg-red-100 border border-red-200",title:"Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ",children:e.jsx(se,{size:16})})]})]},t.id))})]})})]})},Ws=({isOpen:r,onClose:a,reasons:l,onAdd:c,onDelete:o})=>{const[i,x]=h.useState("");return r?He.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(ye,{size:20,className:"text-gray-600"})," Ø¥Ø¯Ø§Ø±Ø© Ø¨Ù†ÙˆØ¯ Ø§Ù„Ø¯ÙØ¹"]}),e.jsx("button",{onClick:a,children:e.jsx(ce,{size:20,className:"text-gray-400 hover:text-red-500"})})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("input",{className:"flex-1 border-2 border-gray-200 rounded-xl px-4 py-2 focus:border-green-500 outline-none",placeholder:"Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯...",value:i,onChange:m=>x(m.target.value)}),e.jsx("button",{onClick:()=>{i&&(c(i),x(""))},className:"bg-green-600 text-white p-3 rounded-xl hover:bg-green-700",children:e.jsx(We,{size:20})})]}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[l.map((m,g)=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-xl border border-gray-100",children:[e.jsx("span",{className:"font-bold text-gray-700",children:m.title}),e.jsx("button",{onClick:()=>o(m),className:"text-red-500 hover:bg-red-50 p-2 rounded-lg transition-colors",children:e.jsx(se,{size:18})})]},g)),l.length===0&&e.jsx("p",{className:"text-center text-gray-400 text-sm",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ù†ÙˆØ¯ Ù…Ø¶Ø§ÙØ©ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ù†ÙˆØ¯"})]})]})]}),document.body):null};function Bs({students:r,payments:a,expenses:l,paymentsCollection:c,expensesCollection:o,selectedBranch:i,logActivity:x,financeReasons:m=[],financeReasonsCollection:g}){const[k,b]=h.useState("income"),[f,j]=h.useState({sid:"",amount:"",reason:"",customReason:"",details:""}),[t,w]=h.useState({title:"",amount:"",date:new Date().toISOString().split("T")[0]}),[S,p]=h.useState(null),[E,_]=h.useState(!1),C=a.filter(d=>d.branch===i),D=l.filter(d=>d.branch===i),I=(S?C.filter(d=>d.studentId===S):C).sort((d,L)=>new Date(L.createdAt||L.date)-new Date(d.createdAt||d.date)),R=[...D].sort((d,L)=>new Date(L.date)-new Date(d.date)),B=async d=>{if(m.some(L=>L.title===d))return alert("Ù‡Ø°Ø§ Ø§Ù„Ø¨Ù†Ø¯ Ù…ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹");await g.add({title:d,branch:i,createdAt:new Date().toISOString()})},F=async d=>{confirm(`Ø­Ø°Ù Ø§Ù„Ø¨Ù†Ø¯ "${d.title}"ØŸ`)&&await g.remove(d.id)},U=async d=>{if(d.preventDefault(),!f.studentObjId)return alert("Ø§Ø®ØªØ± Ø·Ø§Ù„Ø¨Ø§Ù‹");const L=r.find(Z=>Z.id===f.studentObjId);if(!L)return alert("Ø·Ø§Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");if(!f.reason&&m.length>0)return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø³Ø¨Ø¨ Ø§Ù„Ø¯ÙØ¹");const K=f.reason==="Ø£Ø®Ø±Ù‰"?f.customReason:f.reason,X={id:Date.now().toString(),studentId:L.id,name:L.name,amount:Number(f.amount),reason:K,details:f.details,date:new Date().toISOString().split("T")[0],branch:i};await c.add(X),x("Ù‚Ø¨Ø¶ Ù…Ø§Ù„ÙŠ",`Ø§Ø³ØªÙ„Ø§Ù… ${f.amount} Ù…Ù† ${L.name}`),j({sid:"",amount:"",reason:"",customReason:"",details:""})},n=async d=>{d.preventDefault(),await o.add({id:Date.now().toString(),title:t.title,amount:Number(t.amount),date:t.date,branch:i}),x("Ù…ØµØ±ÙˆÙ",`ØµØ±Ù ${t.amount} Ù„Ù€ ${t.title}`),w({title:"",amount:"",date:new Date().toISOString().split("T")[0]})},N=async d=>{confirm("Ø­Ø°Ù Ø§Ù„Ø³Ù†Ø¯ØŸ")&&await c.remove(d)},P=async d=>{confirm("Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙØŸ")&&await o.remove(d)},G=d=>{const L=window.open("","PRINT","height=800,width=1000"),K=window.location.origin+re.LOGO,X=`
      <!DOCTYPE html>
      <html lang="ar" dir="rtl">
        <head>
          <meta charset="UTF-8">
          <title>Ø³Ù†Ø¯ Ù‚Ø¨Ø¶ - ${d.name}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap');
            
            @page {
              size: A5 landscape; 
              margin: 0; 
            }

            body {
              font-family: 'Cairo', sans-serif;
              margin: 0;
              padding: 10mm; 
              background-color: white;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
              height: 100vh;
              box-sizing: border-box;
            }

            .receipt-border {
              border: 3px double #444;
              height: 96%; 
              position: relative;
              padding: 20px;
              box-sizing: border-box;
              display: flex;
              flex-direction: column;
              justify-content: space-between;
              overflow: hidden; 
            }

            .watermark {
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%) rotate(-25deg); 
              width: 50%; 
              opacity: 0.08; 
              z-index: 0;
              pointer-events: none;
              filter: grayscale(100%); 
            }

            .header {
              display: flex;
              justify-content: space-between;
              align-items: center;
              border-bottom: 2px solid #b45309;
              padding-bottom: 10px;
              margin-bottom: 15px;
              position: relative;
              z-index: 2;
            }

            .company-info h1 {
              margin: 0;
              font-size: 22px;
              color: #b45309;
              font-weight: 900;
            }
            .company-info p {
              margin: 2px 0;
              font-size: 12px;
              font-weight: bold;
              color: #555;
            }

            .logo img {
              height: 70px;
              object-fit: contain;
            }

            .meta-info {
              text-align: left;
              font-size: 12px;
              border-right: 2px solid #eee;
              padding-right: 10px;
            }
            .meta-info div { margin-bottom: 3px; }

            .content {
              position: relative;
              z-index: 2;
              flex-grow: 1;
            }

            .title {
              text-align: center;
              font-size: 24px;
              font-weight: 900;
              margin: 10px 0 20px;
              text-decoration: underline;
              text-decoration-color: #b45309;
              text-underline-offset: 5px;
            }

            .row {
              display: flex;
              align-items: baseline;
              margin-bottom: 12px;
              font-size: 16px;
            }

            .label {
              font-weight: bold;
              width: 110px;
              color: #333;
            }

            .value {
              flex: 1;
              border-bottom: 1px dotted #888;
              font-weight: 700;
              padding: 0 5px;
            }

            .amount-container {
              position: absolute;
              left: 20px;
              top: 40px;
              border: 2px solid #333;
              padding: 5px 15px;
              border-radius: 8px;
              background: #f9f9f9;
              transform: rotate(-5deg); 
              box-shadow: 2px 2px 0 #ccc;
            }
            .amount-number {
              font-size: 20px;
              font-weight: 900;
              direction: ltr;
            }

            .footer {
              margin-top: 20px;
              position: relative;
              z-index: 2;
            }

            .signatures {
              display: flex;
              justify-content: space-between;
              padding: 0 40px;
              margin-bottom: 15px;
            }
            .sign-box {
              text-align: center;
              width: 150px;
            }
            .sign-line {
              border-top: 1px solid #333;
              margin-bottom: 5px;
            }
            .sign-title { font-size: 12px; font-weight: bold; color: #555; }

            .branches-box {
              border-top: 2px solid #b45309;
              padding-top: 8px;
              font-size: 10px;
              display: flex;
              justify-content: space-between;
              background: #fff;
            }
            
            .branch {
              display: flex;
              flex-direction: column;
              width: 48%;
            }
            .branch span { display: block; margin-bottom: 2px; }
            .phone { direction: ltr; text-align: right; font-weight: bold; }

          </style>
        </head>
        <body>
          <div class="receipt-border">
            
            <img src="${K}" class="watermark" onerror="this.style.display='none'"/>

            <div class="header">
              <div class="company-info">
                <h1>Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹ Ù„Ù„ØªØ§ÙŠÙƒÙˆØ§Ù†Ø¯Ùˆ</h1>
                <p>ÙØ±Ø¹: ${i}</p>
              </div>
              <div class="logo">
                <img src="${K}" onerror="this.style.display='none'"/>
              </div>
              <div class="meta-info">
                <div>Ø±Ù‚Ù… Ø§Ù„Ø³Ù†Ø¯: <strong>${d.id.slice(-6)}</strong></div>
                <div>Ø§Ù„ØªØ§Ø±ÙŠØ®: <strong>${d.date}</strong></div>
              </div>
            </div>

            <div class="content">
              <div class="title">Ø³Ù†Ø¯ Ù‚Ø¨Ø¶</div>
              
              <div class="amount-container">
                <div class="amount-number">${d.amount} JD</div>
              </div>

              <div class="row">
                <span class="label">Ø§Ø³ØªÙ„Ù…Ù†Ø§ Ù…Ù†:</span>
                <span class="value">${d.name}</span>
              </div>
              <div class="row">
                <span class="label">Ù…Ø¨Ù„Øº ÙˆÙ‚Ø¯Ø±Ù‡:</span>
                <span class="value">${d.amount} Ø¯ÙŠÙ†Ø§Ø± Ø£Ø±Ø¯Ù†ÙŠ</span>
              </div>
              <div class="row">
                <span class="label">ÙˆØ°Ù„Ùƒ Ø¹Ù†:</span>
                <span class="value">${d.reason} ${d.details?`(${d.details})`:""}</span>
              </div>
            </div>

            <div class="footer">
              <div class="signatures">
                <div class="sign-box">
                  <div class="sign-line"></div>
                  <div class="sign-title">ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨</div>
                </div>
                <div class="sign-box">
                  <div class="sign-line"></div>
                  <div class="sign-title">ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ„Ù…</div>
                </div>
              </div>

              <div class="branches-box">
                <div class="branch">
                  <span style="font-weight:bold; color:#b45309">Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø£ÙˆÙ„: Ø´ÙØ§Ø¨Ø¯Ø±Ø§Ù†</span>
                  <span>Ø´Ø§Ø±Ø¹ Ø±ÙØ¹Øª Ø´Ù…ÙˆØ·</span>
                  <span class="phone">079 5629 606</span>
                </div>
                <div class="branch">
                  <span style="font-weight:bold; color:#b45309">Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø£Ø¨Ùˆ Ù†ØµÙŠØ±</span>
                  <span>Ø¯ÙˆØ§Ø± Ø§Ù„Ø¨Ø­Ø±ÙŠØ© - Ù…Ø¬Ù…Ø¹ Ø§Ù„ÙØ±Ù‘Ø§</span>
                  <span class="phone">079 0368 603</span>
                </div>
              </div>
            </div>

          </div>
        </body>
      </html>
    `;L.document.write(X),L.document.close(),L.onload=()=>{L.focus(),setTimeout(()=>{L.print(),L.close()},500)}};return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20 md:pb-0",children:[e.jsx(Ws,{isOpen:E,onClose:()=>_(!1),reasons:m,onAdd:B,onDelete:F}),e.jsxs("div",{className:"flex gap-4 mb-6 bg-gray-100 p-1 rounded-2xl",children:[e.jsx("button",{onClick:()=>b("income"),className:`flex-1 py-3 rounded-xl font-bold transition-all shadow-sm ${k==="income"?"bg-green-600 text-white shadow-green-200":"bg-white text-gray-500 hover:bg-gray-50"}`,children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø§Ù„Ù‚Ø¨Ø¶)"}),e.jsx("button",{onClick:()=>b("expense"),className:`flex-1 py-3 rounded-xl font-bold transition-all shadow-sm ${k==="expense"?"bg-red-600 text-white shadow-red-200":"bg-white text-gray-500 hover:bg-gray-50"}`,children:"Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ"})]}),k==="income"?e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"Ø³Ù†Ø¯ Ù‚Ø¨Ø¶ Ø¬Ø¯ÙŠØ¯",className:"border-green-100 shadow-green-50",children:e.jsxs("form",{onSubmit:U,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{className:"relative col-span-1 md:col-span-1",children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx(Qe,{students:r,onSelect:d=>j({...f,sid:d.name,studentObjId:d.id}),placeholder:"Ø§Ø¨Ø­Ø«..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("input",{type:"number",className:"w-full border-2 border-gray-100 p-2 rounded-xl focus:border-green-500 outline-none",value:f.amount,onChange:d=>j({...f,amount:d.target.value}),required:!0,placeholder:"0.00"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"text-xs block mb-1 font-bold text-gray-700 flex justify-between",children:["Ø§Ù„Ø³Ø¨Ø¨",e.jsxs("button",{type:"button",onClick:()=>_(!0),className:"text-green-600 hover:text-green-800 text-[10px] flex items-center gap-1 bg-green-50 px-2 py-0.5 rounded cursor-pointer",children:[e.jsx(ye,{size:10})," ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"]})]}),e.jsxs("select",{className:"w-full border-2 border-gray-100 p-2 rounded-xl focus:border-green-500 outline-none bg-white cursor-pointer",value:f.reason,onChange:d=>j({...f,reason:d.target.value}),children:[e.jsx("option",{value:"",disabled:!0,children:"Ø§Ø®ØªØ± Ø§Ù„Ø³Ø¨Ø¨..."}),m.map((d,L)=>e.jsx("option",{value:d.title,children:d.title},L)),e.jsx("option",{value:"Ø£Ø®Ø±Ù‰",children:"Ø£Ø®Ø±Ù‰ (ÙƒØªØ§Ø¨Ø© ÙŠØ¯ÙˆÙŠØ©)"})]})]}),f.reason==="Ø£Ø®Ø±Ù‰"&&e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"ÙˆØ¶Ø­ Ø§Ù„Ø³Ø¨Ø¨"}),e.jsx("input",{className:"w-full border-2 border-gray-100 p-2 rounded-xl outline-none",value:f.customReason,onChange:d=>j({...f,customReason:d.target.value}),required:!0})]}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{className:"w-full border-2 border-gray-100 p-2 rounded-xl outline-none",value:f.details,onChange:d=>j({...f,details:d.target.value}),placeholder:"Ù…Ø«Ø§Ù„: Ø¹Ù† Ø´Ù‡Ø± 12 + 1"})]}),e.jsx("div",{className:"col-span-1 md:col-span-3 mt-2",children:e.jsx(A,{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white shadow-lg shadow-green-600/20 py-3",children:"Ø­ÙØ¸ ÙˆÙ‚Ø¨Ø¶"})})]})}),e.jsx("div",{className:"flex items-center gap-2 mb-2 w-full md:w-64",children:e.jsx(Qe,{students:r,onSelect:d=>p(d.id),onClear:()=>p(null),placeholder:"ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ø·Ø§Ù„Ø¨...",showAllOption:!0})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(H,{children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 rounded-r-lg",children:"#"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø¨ÙŠØ§Ù†"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("th",{className:"p-3",children:"Ø·Ø¨Ø§Ø¹Ø©"}),e.jsx("th",{className:"p-3 rounded-l-lg",children:"Ø­Ø°Ù"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[I.map(d=>e.jsxs("tr",{className:"hover:bg-green-50 transition-colors",children:[e.jsx("td",{className:"p-3 text-gray-400 font-mono text-xs",children:d.id.slice(-6)}),e.jsx("td",{className:"p-3 font-bold text-gray-800",children:d.name}),e.jsxs("td",{className:"p-3 text-gray-600",children:[e.jsx("span",{className:"block font-bold text-xs",children:d.reason}),e.jsx("span",{className:"text-[10px] text-gray-400",children:d.details})]}),e.jsx("td",{className:"p-3 text-xs text-gray-500",children:d.date}),e.jsxs("td",{className:"p-3 font-bold text-green-600",children:["+",d.amount]}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>G(d),className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 text-gray-600",children:e.jsx(Se,{size:16})})}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>N(d.id),className:"p-2 bg-red-50 rounded-lg hover:bg-red-100 text-red-500",children:e.jsx(se,{size:16})})})]},d.id)),I.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"p-8 text-center text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ù†Ø¯Ø§Øª"})})]})]})})}),e.jsxs("div",{className:"md:hidden grid gap-4",children:[I.map(d=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col gap-3 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-green-500"}),e.jsxs("div",{className:"flex justify-between items-start pl-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(rs,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"font-bold text-gray-800",children:d.name})]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[e.jsx($e,{size:12})," ",d.date]})]}),e.jsxs("div",{className:"text-green-600 font-bold text-lg bg-green-50 px-2 py-1 rounded-lg",children:["+",d.amount]})]}),e.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg text-sm text-gray-600 flex items-start gap-2",children:[e.jsx(is,{size:14,className:"mt-1 text-gray-400 shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold block text-xs text-gray-700",children:d.reason}),e.jsx("span",{className:"text-[10px]",children:d.details})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-1 border-t pt-3 border-gray-100",children:[e.jsxs("button",{onClick:()=>G(d),className:"flex items-center gap-1 text-xs bg-blue-50 text-blue-600 px-3 py-2 rounded-lg font-bold",children:[e.jsx(Se,{size:14})," Ø·Ø¨Ø§Ø¹Ø©"]}),e.jsxs("button",{onClick:()=>N(d.id),className:"flex items-center gap-1 text-xs bg-red-50 text-red-600 px-3 py-2 rounded-lg font-bold",children:[e.jsx(se,{size:14})," Ø­Ø°Ù"]})]})]},d.id)),I.length===0&&e.jsx("div",{className:"text-center p-8 text-gray-400 bg-gray-50 rounded-xl border border-dashed",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ù†Ø¯Ø§Øª"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"ØªØ³Ø¬ÙŠÙ„ Ù…ØµØ±ÙˆÙ",className:"border-red-100 shadow-red-50",children:e.jsxs("form",{onSubmit:n,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"Ø§Ù„Ø¨Ù†Ø¯ (Ø³Ø¨Ø¨ Ø§Ù„ØµØ±Ù)"}),e.jsx("input",{className:"w-full border-2 border-gray-100 p-2 rounded-xl focus:border-red-500 outline-none",value:t.title,onChange:d=>w({...t,title:d.target.value}),required:!0,placeholder:"Ù…Ø«Ø§Ù„: ÙØ§ØªÙˆØ±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¡"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("input",{type:"number",className:"w-full border-2 border-gray-100 p-2 rounded-xl focus:border-red-500 outline-none",value:t.amount,onChange:d=>w({...t,amount:d.target.value}),required:!0,placeholder:"0.00"})]}),e.jsx("div",{children:e.jsx(A,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-600/20 py-2.5",children:"Ø­ÙØ¸"})})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(H,{children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 rounded-r-lg",children:"Ø§Ù„Ø¨Ù†Ø¯"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("th",{className:"p-3 rounded-l-lg",children:"Ø­Ø°Ù"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:R.map(d=>e.jsxs("tr",{className:"hover:bg-red-50 transition-colors",children:[e.jsx("td",{className:"p-3 font-bold text-gray-700",children:d.title}),e.jsx("td",{className:"p-3 text-gray-500 text-xs",children:d.date}),e.jsxs("td",{className:"p-3 text-red-600 font-bold",children:["-",d.amount]}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>P(d.id),className:"text-red-500 p-2 bg-red-50 rounded-lg hover:bg-red-100",children:e.jsx(se,{size:16})})})]},d.id))})]})})}),e.jsxs("div",{className:"md:hidden grid gap-4",children:[R.map(d=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-red-500"}),e.jsxs("div",{className:"pl-3",children:[e.jsx("h4",{className:"font-bold text-gray-800",children:d.title}),e.jsx("span",{className:"text-xs text-gray-400 block mt-1",children:d.date})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("span",{className:"font-bold text-red-600 text-lg",children:["-",d.amount]}),e.jsx("button",{onClick:()=>P(d.id),className:"text-red-400 hover:text-red-600 bg-red-50 p-1.5 rounded-lg",children:e.jsx(se,{size:16})})]})]},d.id)),R.length===0&&e.jsx("div",{className:"text-center p-8 text-gray-400 bg-gray-50 rounded-xl border border-dashed",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ØµØ§Ø±ÙŠÙ"})]})]})]})}const Ks=({isOpen:r,onClose:a,groups:l,onAdd:c,onDelete:o})=>{const[i,x]=h.useState("");return r?He.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-fade-in",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(ye,{size:20,className:"text-gray-600"})," Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØªØ±Ø§Øª ÙˆØ§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª"]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("input",{className:"flex-1 border-2 border-gray-200 rounded-xl px-4 py-2 focus:border-blue-500 outline-none",placeholder:"Ø§Ø³Ù… Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©...",value:i,onChange:m=>x(m.target.value)}),e.jsx("button",{onClick:()=>{i&&(c(i),x(""))},className:"bg-blue-600 text-white p-3 rounded-xl hover:bg-blue-700",children:e.jsx(We,{size:20})})]}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4",children:[l.map((m,g)=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-xl border border-gray-100",children:[e.jsx("span",{className:"font-bold text-gray-700",children:m.name}),e.jsx("button",{onClick:()=>o(m),className:"text-red-500 hover:bg-red-50 p-2 rounded-lg transition-colors",children:e.jsx(se,{size:18})})]},g)),l.length===0&&e.jsx("p",{className:"text-center text-gray-400 text-sm",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙØªØ±Ø§Øª Ù…Ø¶Ø§ÙØ©"})]}),e.jsx(A,{onClick:a,variant:"outline",className:"w-full",children:"Ø¥ØºÙ„Ø§Ù‚"})]})]}),document.body):null};function Vs({students:r,studentsCollection:a,groups:l=[],groupsCollection:c,selectedBranch:o}){const[i,x]=h.useState(new Date),[m,g]=h.useState(new Date().getDate()),[k,b]=h.useState(""),[f,j]=h.useState(1),[t,w]=h.useState(10),[S,p]=h.useState(!1),[E,_]=h.useState(!1),[C,D]=h.useState("Ø§Ù„ÙƒÙ„"),I=h.useMemo(()=>l?l.map(u=>u.name):[],[l]),R=async u=>{var z;if(I.includes(u))return alert("Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹");await c.add({name:u,branch:o||((z=r[0])==null?void 0:z.branch)||"Ø¹Ø§Ù…"})},B=async u=>{confirm(`Ø­Ø°Ù Ø§Ù„ÙØªØ±Ø© "${u.name}"ØŸ`)&&(await c.remove(u.id),C===u.name&&D("Ø§Ù„ÙƒÙ„"))},F=i.getFullYear(),U=i.getMonth(),n=new Date(F,U+1,0).getDate(),N=["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"],P=["Ø£Ø­Ø¯","Ø¥Ø«Ù†ÙŠÙ†","Ø«Ù„Ø§Ø«Ø§Ø¡","Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø®Ù…ÙŠØ³","Ø¬Ù…Ø¹Ø©","Ø³Ø¨Øª"],G=Array.from({length:8},(u,z)=>2023+z),d=(u,z)=>{const M=new Date(i);u!==null&&M.setFullYear(u),z!==null&&M.setMonth(z),x(M),g(1)},L=u=>{const z=new Date(F,U+1,0).getDate();let M=m+u;M>z&&(M=z),M<1&&(M=1),g(M)},K=h.useMemo(()=>{let u=Array.isArray(r)?[...r]:[];return C!=="Ø§Ù„ÙƒÙ„"&&(u=u.filter(z=>z.group===C)),u.sort((z,M)=>(z.customOrder||999999)-(M.customOrder||999999)),k&&(u=u.filter(z=>z.name.toLowerCase().includes(k.toLowerCase()))),u},[r,k,C]),X=Math.ceil(K.length/t),Z=S?K:K.slice((f-1)*t,f*t),xe=async(u,z)=>{const M=`${F}-${String(U+1).padStart(2,"0")}-${String(z).padStart(2,"0")}`,s={...r.find(y=>y.id===u).attendance||{}};s[M]?delete s[M]:s[M]=!0,await a.update(u,{attendance:s})},ne=async(u,z)=>{let M=z-1;if(M<0&&(M=0),M>=K.length&&(M=K.length-1),M===u)return;const O=[...K],[s]=O.splice(u,1);O.splice(M,0,s);const y=O.map(($,q)=>a.update($.id,{customOrder:q+1}));await Promise.all(y)},oe=async(u,z)=>{confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù†Ù‚Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨ Ù„Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©ØŸ")&&await a.update(u,{group:z})},ue=()=>{const u=window.open("","PRINT","height=800,width=1200"),z=window.location.origin+re.LOGO;let M="";for(let y=1;y<=n;y++)M+=`<th style="font-size:10px; width:20px; border:1px solid #ccc; background:#f9f9f9;">${y}</th>`;let O="";K.forEach((y,$)=>{var J;let q="";for(let v=1;v<=n;v++){const T=`${F}-${String(U+1).padStart(2,"0")}-${String(v).padStart(2,"0")}`,W=(J=y.attendance)==null?void 0:J[T],ae=new Date(F,U,v).getDay()===5;let ie="",ee="";ae?ee="#eee":W&&(ie="âœ“",ee="#dcfce7"),q+=`<td style="border:1px solid #ccc; background:${ee}; text-align:center; font-size:12px; color:#166534; font-weight:bold;">${ie}</td>`}O+=`
            <tr>
                <td style="border:1px solid #ccc; padding:5px; font-weight:bold; text-align:center;">${$+1}</td>
                <td style="border:1px solid #ccc; padding:5px; text-align:right;">${y.name}</td>
                <td style="border:1px solid #ccc; padding:5px; text-align:center; font-size:11px;">${y.group||"-"}</td>
                ${q}
            </tr>
        `});const s=`
      <!DOCTYPE html>
      <html lang="ar" dir="rtl">
        <head>
          <title>ÙƒØ´Ù Ø§Ù„Ø­Ø¶ÙˆØ± - ${N[U]} ${F}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
            body { font-family: 'Cairo', sans-serif; padding: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            h1 { text-align: center; color: #b45309; margin-bottom: 5px; }
            .header-info { text-align: center; margin-bottom: 20px; font-weight:bold; color:#555; }
            @page { size: A4 landscape; margin: 10mm; }
          </style>
        </head>
        <body>
            <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid #b45309; padding-bottom:10px;">
                <div>
                    <h1>Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹ Ù„Ù„ØªØ§ÙŠÙƒÙˆØ§Ù†Ø¯Ùˆ</h1>
                    <div style="font-size:12px;">ÙØ±Ø¹: ${o}</div>
                </div>
                <img src="${z}" style="height:60px;" onerror="this.style.display='none'"/>
            </div>

            <div class="header-info">
                Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨ | Ø´Ù‡Ø±: ${N[U]} ${F} | Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©: ${C}
            </div>

            <table>
                <thead>
                    <tr>
                        <th style="border:1px solid #ccc; background:#eee; width:30px;">#</th>
                        <th style="border:1px solid #ccc; background:#eee; width:200px;">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                        <th style="border:1px solid #ccc; background:#eee; width:80px;">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©</th>
                        ${M}
                    </tr>
                </thead>
                <tbody>
                    ${O}
                </tbody>
            </table>
            
            <div style="margin-top:20px; font-size:10px; text-align:left; color:#777;">
                ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©: ${new Date().toLocaleDateString("ar-JO")}
            </div>
        </body>
      </html>
    `;u.document.write(s),u.document.close(),u.onload=()=>{u.focus(),setTimeout(()=>{u.print(),u.close()},500)}};return e.jsxs("div",{className:"space-y-6 animate-fade-in font-sans",children:[e.jsx(Ks,{isOpen:E,onClose:()=>_(!1),groups:l||[],onAdd:R,onDelete:B}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col xl:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-gray-50 p-2 rounded-xl border border-gray-200 justify-center w-full md:w-auto",children:[e.jsx($e,{size:18,className:"text-gray-500 ml-1"}),e.jsx("select",{className:"bg-transparent font-bold text-gray-700 outline-none cursor-pointer",value:U,onChange:u=>d(null,parseInt(u.target.value)),children:N.map((u,z)=>e.jsx("option",{value:z,children:u},z))}),e.jsx("select",{className:"bg-transparent font-bold text-gray-700 outline-none cursor-pointer",value:F,onChange:u=>d(parseInt(u.target.value),null),children:G.map(u=>e.jsx("option",{value:u,children:u},u))})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 p-2 pl-3 rounded-xl border border-blue-100 w-full md:w-auto",children:[e.jsx(Ce,{size:18,className:"text-blue-500 ml-1"}),e.jsx("span",{className:"text-xs font-bold text-blue-800 ml-1 hidden sm:inline",children:"Ø§Ù„ÙØªØ±Ø©:"}),e.jsx("div",{className:"relative group",children:e.jsxs("select",{className:"bg-transparent text-blue-900 font-bold outline-none w-full md:w-40 cursor-pointer appearance-none pr-4",value:C,onChange:u=>{D(u.target.value),j(1)},children:[e.jsx("option",{value:"Ø§Ù„ÙƒÙ„",children:"Ø§Ù„ÙƒÙ„ (Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨)"}),I.map((u,z)=>e.jsx("option",{value:u,children:u},z))]})}),e.jsx("button",{onClick:()=>_(!0),className:"bg-white p-1.5 rounded-lg text-blue-500 hover:text-blue-700 hover:shadow-sm border border-transparent hover:border-blue-200 transition-all",title:"Ø¥Ø¶Ø§ÙØ©/Ø­Ø°Ù ÙØªØ±Ø§Øª",children:e.jsx(ye,{size:16})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full xl:w-auto",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(Ge,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Ø¨Ø­Ø«...",className:"w-full pl-4 pr-10 py-2.5 border-2 border-gray-100 rounded-xl focus:border-yellow-500 outline-none",value:k,onChange:u=>{b(u.target.value),j(1)}})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(A,{variant:S?"default":"outline",onClick:()=>p(!S),className:`gap-2 whitespace-nowrap ${S?"bg-yellow-500 text-black border-none":""}`,children:[S?e.jsx(Is,{size:18}):e.jsx($s,{size:18}),S?"Ø­ÙØ¸ Ø§Ù„ØªØ±ØªÙŠØ¨":"ØªØ±ØªÙŠØ¨"]}),e.jsxs(A,{onClick:ue,className:"bg-gray-800 text-white gap-2 hover:bg-black",title:"Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙƒØ´Ù",children:[e.jsx(Se,{size:18})," ",e.jsx("span",{className:"hidden md:inline",children:"Ø·Ø¨Ø§Ø¹Ø©"})]})]})]})]}),e.jsxs("div",{className:"md:hidden space-y-4",children:[e.jsxs("div",{className:"bg-yellow-500 text-black p-4 rounded-xl shadow-lg flex justify-between items-center",children:[e.jsx("button",{onClick:()=>L(-1),className:"p-2 bg-white/20 rounded-lg",children:e.jsx(ze,{})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs opacity-75 font-bold mb-1",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±"}),e.jsx("div",{className:"text-xl font-bold flex flex-col",children:e.jsxs("span",{children:[m," ",N[U]]})})]}),e.jsx("button",{onClick:()=>L(1),className:"p-2 bg-white/20 rounded-lg",children:e.jsx(Je,{})})]}),e.jsx("div",{className:"grid gap-3",children:Z.map((u,z)=>{var y;const M=`${F}-${String(U+1).padStart(2,"0")}-${String(m).padStart(2,"0")}`,O=!!((y=u.attendance)!=null&&y[M]),s=new Date(F,U,m).getDay()===5;return e.jsx("div",{className:"p-4 rounded-xl border border-gray-100 bg-white shadow-sm",children:e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center font-bold text-gray-500 text-sm",children:(f-1)*t+z+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800",children:u.name}),e.jsx("div",{className:"relative mt-1",children:e.jsx("select",{className:"text-[10px] bg-blue-50 text-blue-700 px-2 py-0.5 rounded-md outline-none border-none font-bold w-full appearance-none",value:u.group||(I.length>0?I[0]:""),onChange:$=>oe(u.id,$.target.value),children:I.map(($,q)=>e.jsx("option",{value:$,children:$},q))})})]})]}),!S&&(s?e.jsx("span",{className:"text-xs font-bold text-red-500 bg-red-50 px-2 py-1 rounded",children:"Ø¹Ø·Ù„Ø©"}):e.jsx("button",{onClick:()=>xe(u.id,m),className:`w-10 h-10 rounded-full flex items-center justify-center ${O?"bg-green-500 text-white":"bg-gray-100 text-gray-300"}`,children:O?e.jsx(Ze,{size:20}):e.jsx("span",{className:"w-3 h-3 bg-gray-300 rounded-full"})}))]})},u.id)})})]}),e.jsx(H,{className:"hidden md:block overflow-visible p-0 border-none shadow-md rounded-2xl",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsx("thead",{className:"bg-gray-800 text-white sticky top-0 z-20",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"p-4 sticky right-0 bg-gray-800 z-30 text-right min-w-[280px] font-bold text-base shadow-lg",children:["Ø§Ù„Ø·Ù„Ø§Ø¨ ",C!=="Ø§Ù„ÙƒÙ„"&&e.jsxs("span",{className:"text-yellow-400 text-sm",children:["(",C,")"]})]}),!S&&[...Array(n)].map((u,z)=>{const M=z+1,O=new Date(F,U,M).getDay()===5;return e.jsx("th",{className:`p-2 border-l border-gray-700 text-center min-w-[40px] ${O?"bg-red-900/40 text-red-100":""}`,children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"opacity-60 text-[10px]",children:P[new Date(F,U,M).getDay()]}),e.jsx("span",{children:M})]})},z)}),S&&e.jsx("th",{className:"p-4 text-center w-64 bg-yellow-600/90 text-white",children:"Ø§Ù„ØªØ±ØªÙŠØ¨"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:Z.map((u,z)=>{const M=(f-1)*t+z+1;return e.jsxs("tr",{className:"hover:bg-yellow-50 transition-colors group",children:[e.jsx("td",{className:"p-3 sticky right-0 bg-white group-hover:bg-yellow-50 font-bold border-l border-gray-100 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] z-10 text-gray-800 text-sm flex items-center justify-between h-[50px]",children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx("span",{className:`text-xs w-6 h-6 flex items-center justify-center rounded-full font-mono ${S?"bg-yellow-100 text-yellow-800 font-bold":"bg-gray-100 text-gray-500"}`,children:M}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("span",{className:"truncate",children:u.name}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(As,{size:10,className:"text-gray-400"}),e.jsxs("select",{className:"bg-transparent text-[10px] text-gray-500 outline-none cursor-pointer hover:text-blue-600 w-full",value:u.group||(I.length>0?I[0]:""),onChange:O=>oe(u.id,O.target.value),onClick:O=>O.stopPropagation(),children:[e.jsx("option",{value:"",disabled:!0,children:"Ù†Ù‚Ù„ Ø¥Ù„Ù‰..."}),I.map((O,s)=>e.jsx("option",{value:O,children:O},s))]})]})]})]})}),!S&&[...Array(n)].map((O,s)=>{var v;const y=s+1,$=`${F}-${String(U+1).padStart(2,"0")}-${String(y).padStart(2,"0")}`,q=!!((v=u.attendance)!=null&&v[$]),J=new Date(F,U,y).getDay()===5;return e.jsx("td",{className:`border-l border-gray-100 text-center p-0 ${J?"bg-gray-50":""}`,children:J?e.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-20 pointer-events-none",children:e.jsx(ce,{size:12})}):e.jsxs("label",{className:"cursor-pointer w-full h-full flex items-center justify-center hover:bg-gray-100",children:[e.jsx("input",{type:"checkbox",checked:q,onChange:()=>xe(u.id,y),className:"hidden"}),e.jsx("div",{className:`w-6 h-6 rounded flex items-center justify-center transition-all ${q?"bg-green-500 text-white scale-110":"bg-gray-100 hover:bg-gray-300"}`,children:e.jsx(Ze,{size:14})})]})},s)}),S&&e.jsx("td",{className:"p-2 text-center bg-yellow-50/20 border-l border-yellow-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Ø±Ù‚Ù…:"}),e.jsx("input",{type:"number",className:"w-20 p-2 text-center border-2 border-yellow-300 rounded-lg focus:border-yellow-600 outline-none font-bold text-lg",placeholder:M,onKeyDown:O=>{O.key==="Enter"&&(ne(z,parseInt(O.target.value)),O.target.value="",O.target.blur())},onBlur:O=>{O.target.value&&(ne(z,parseInt(O.target.value)),O.target.value="")}})]})})]},u.id)})})]})})}),!S&&X>1&&e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-100 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:"Ø¹Ø±Ø¶"}),e.jsxs("select",{className:"bg-gray-50 border border-gray-200 rounded-lg p-1.5 focus:outline-none font-bold cursor-pointer",value:t,onChange:u=>{w(Number(u.target.value)),j(1)},children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:K.length,children:"Ø§Ù„ÙƒÙ„"})]}),e.jsxs("span",{children:["Ù…Ù† Ø£ØµÙ„ ",K.length," Ø·Ø§Ù„Ø¨"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{variant:"outline",disabled:f===1,onClick:()=>j(u=>u-1),className:"px-4 text-sm",children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsx("div",{className:"flex gap-1 overflow-x-auto hide-scrollbar max-w-[150px] md:max-w-none px-1",children:[...Array(X)].map((u,z)=>e.jsx("button",{onClick:()=>j(z+1),className:`w-9 h-9 flex items-center justify-center rounded-lg text-sm font-bold transition-all ${f===z+1?"bg-yellow-500 text-black shadow-md scale-105":"bg-gray-50 text-gray-600 hover:bg-gray-200"}`,children:z+1},z))}),e.jsx(A,{variant:"outline",disabled:f===X,onClick:()=>j(u=>u+1),className:"px-4 text-sm",children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})]})]})}const Ys=()=>{const a=`student${Math.floor(1e3+Math.random()*9e3)}`;let l="";const c="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789";for(let o=0;o<8;o++)l+=c.charAt(Math.floor(Math.random()*c.length));return{username:a,password:l}};function Zs({registrations:r,students:a,registrationsCollection:l,studentsCollection:c,selectedBranch:o,logActivity:i}){const[x,m]=h.useState(null),[g,k]=h.useState({}),b=[...new Map(a.map(t=>[t.familyId,t.familyName])).entries()],f=t=>{const w=new Date().toISOString().split("T")[0],S=new Date;S.setMonth(S.getMonth()+1),k({name:t.name,phone:t.phone,dob:t.dob,address:t.address,belt:"Ø£Ø¨ÙŠØ¶",joinDate:w,subEnd:S.toISOString().split("T")[0],balance:0,linkFamily:"new"}),m(t)},j=async t=>{var C;t.preventDefault();const{username:w,password:S}=Ys();let p,E;g.linkFamily==="new"?(p=Math.floor(Date.now()/1e3),E=`Ø¹Ø§Ø¦Ù„Ø© ${g.name.split(" ").slice(-1)[0]}`):(p=parseInt(g.linkFamily),E=((C=a.find(D=>D.familyId===p))==null?void 0:C.familyName)||"Ø¹Ø§Ø¦Ù„Ø©");const _={branch:o,status:"active",notes:[],internalNotes:[],attendance:{},username:w,password:S,familyId:p,familyName:E,customOrder:Date.now(),...g};delete _.linkFamily,await c.add(_),await l.remove(x.id),i("ØªØ³Ø¬ÙŠÙ„ Ø·Ø§Ù„Ø¨",`ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨ ${g.name}`),alert(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!
User: ${w}
Pass: ${S}`),m(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-4",children:r.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border-2 border-dashed border-gray-200",children:[e.jsx(ds,{size:48,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ø­Ø§Ù„ÙŠØ§Ù‹."})]}):r.map(t=>e.jsx(H,{className:"border-r-4 border-blue-500",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-lg flex items-center gap-2",children:[t.name," ",e.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded",children:"Ø¬Ø¯ÙŠØ¯"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(pe,{size:14})," ",t.phone]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Re,{size:14})," ",t.address]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($e,{size:14})," ",t.dob]})]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsx(A,{onClick:()=>f(t),className:"bg-green-600 hover:bg-green-700 text-white text-sm flex-1 md:flex-none",children:"Ø§Ø¹ØªÙ…Ø§Ø¯ ÙƒØ·Ø§Ù„Ø¨"}),e.jsx("button",{onClick:()=>{confirm("Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ØŸ")&&l.remove(t.id)},className:"text-red-500 p-2 hover:bg-red-50 rounded border border-red-200",children:e.jsx(se,{size:18})})]})]})},t.id))}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60] p-4 backdrop-blur-sm",children:e.jsx(H,{className:"w-full max-w-2xl animate-fade-in",title:"Ø¥ÙƒÙ…Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯",children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("input",{className:"w-full border p-2 bg-gray-100 rounded text-gray-500",value:g.name,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("input",{className:"w-full border p-2 bg-gray-100 rounded text-gray-500",value:g.phone,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:g.linkFamily,onChange:t=>k({...g,linkFamily:t.target.value}),children:[e.jsx("option",{value:"new",children:"Ø¹Ø§Ø¦Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),b.map(([t,w])=>e.jsx("option",{value:t,children:w},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"Ø§Ù„Ø­Ø²Ø§Ù…"}),e.jsx("select",{className:"w-full border p-2 rounded",value:g.belt,onChange:t=>k({...g,belt:t.target.value}),children:le.map(t=>e.jsx("option",{children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚"}),e.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:g.joinDate,onChange:t=>k({...g,joinDate:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold text-green-600",children:"Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("input",{type:"date",className:"w-full border p-2 rounded bg-green-50",value:g.subEnd,onChange:t=>k({...g,subEnd:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 text-red-600 font-bold",children:"Ø±ØµÙŠØ¯ Ù…Ø³ØªØ­Ù‚ (JOD)"}),e.jsx("input",{type:"number",className:"w-full border p-2 rounded focus:ring-2 ring-red-500 outline-none",value:g.balance,onChange:t=>k({...g,balance:t.target.value})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[e.jsx(A,{variant:"ghost",onClick:()=>m(null),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(A,{type:"submit",children:"ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø¶Ø§ÙØ©"})]})]})})})]})}function Qs({schedule:r,scheduleCollection:a}){const[l,c]=h.useState({level:"",days:"",time:"",branch:""}),o=async x=>{x.preventDefault(),await a.add({...l}),c({level:"",days:"",time:"",branch:""})},i=async x=>{confirm("Ø­Ø°ÙØŸ")&&await a.remove(x)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{title:"Ø¥Ø¶Ø§ÙØ© Ø­ØµØ©",children:e.jsxs("form",{onSubmit:o,className:"grid grid-cols-2 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ù…Ø³ØªÙˆÙ‰"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.level,onChange:x=>c({...l,level:x.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ø£ÙŠØ§Ù…"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.days,onChange:x=>c({...l,days:x.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„ÙˆÙ‚Øª"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.time,onChange:x=>c({...l,time:x.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„ÙØ±Ø¹"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.branch,onChange:x=>c({...l,branch:x.target.value}),required:!0})]}),e.jsx(A,{type:"submit",children:"Ø¥Ø¶Ø§ÙØ©"})]})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:r.map(x=>e.jsxs("div",{className:"bg-white p-4 rounded border flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:x.level}),e.jsxs("p",{className:"text-xs text-gray-500",children:[x.days," | ",x.time]})]}),e.jsx("button",{onClick:()=>i(x.id),className:"text-red-500",children:e.jsx(se,{size:16})})]},x.id))})]})}function Xs({captains:r,captainsCollection:a}){const[l,c]=h.useState({name:"",branch:V.SHAFA,username:"",password:"",salary:"",holidays:[],withdrawals:[]}),[o,i]=h.useState(null),x=async m=>{m.preventDefault(),o?(await a.update(o,l),i(null)):await a.add({...l,role:"captain"}),c({name:"",branch:V.SHAFA,username:"",password:"",salary:"",holidays:[],withdrawals:[]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{title:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒØ¨Ø§ØªÙ†",children:e.jsxs("form",{onSubmit:x,className:"grid gap-4 md:grid-cols-2",children:[e.jsx("input",{className:"border p-2 rounded",placeholder:"Ø§Ù„Ø§Ø³Ù…",value:l.name,onChange:m=>c({...l,name:m.target.value}),required:!0}),e.jsxs("select",{className:"border p-2 rounded",value:l.branch,onChange:m=>c({...l,branch:m.target.value}),children:[e.jsx("option",{value:V.SHAFA,children:"Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†"}),e.jsx("option",{value:V.ABU_NSEIR,children:"Ø£Ø¨Ùˆ Ù†ØµÙŠØ±"})]}),e.jsx("input",{className:"border p-2 rounded",placeholder:"User",value:l.username,onChange:m=>c({...l,username:m.target.value}),required:!0}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Pass",value:l.password,onChange:m=>c({...l,password:m.target.value}),required:!0}),e.jsx("input",{className:"border p-2 rounded",type:"number",placeholder:"Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ",value:l.salary,onChange:m=>c({...l,salary:m.target.value})}),e.jsx(A,{type:"submit",children:o?"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„":"Ø¥Ø¶Ø§ÙØ© ÙƒØ§Ø¨ØªÙ†"})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.map(m=>e.jsx(H,{className:"border-l-4 border-purple-500",children:e.jsxs("div",{className:"flex justify-between flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:m.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Ø§Ù„Ø±Ø§ØªØ¨: ",m.salary," | User: ",m.username," | Pass: ",m.password]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("button",{onClick:()=>{i(m.id),c(m)},className:"text-blue-500",children:e.jsx(Ue,{size:16})}),e.jsx("button",{onClick:()=>a.remove(m.id),className:"text-red-500",children:e.jsx(se,{size:16})})]})]})},m.id))})]})}const et=({news:r,newsCollection:a,selectedBranch:l})=>{const[c,o]=h.useState(!1),[i,x]=h.useState({title:"",desc:"",image:"",branch:l}),[m,g]=h.useState(!1),k=j=>{const t=j.target.files[0];if(t){if(t.size>5e5){alert("Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹! ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø£Ù‚Ù„ Ù…Ù† 500 ÙƒÙŠÙ„ÙˆØ¨Ø§ÙŠØª");return}const w=new FileReader;w.onloadend=()=>{x({...i,image:w.result})},w.readAsDataURL(t)}},b=async j=>{j.preventDefault(),g(!0);try{await De(de(Y,"artifacts",te,"public","data","news"),{...i,createdAt:new Date().toISOString()}),alert("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø± Ø¨Ù†Ø¬Ø§Ø­!"),o(!1),x({title:"",desc:"",image:"",branch:l})}catch(t){console.error(t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£")}g(!1)},f=async j=>{confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø®Ø¨Ø±ØŸ")&&await es(he(Y,"artifacts",te,"public","data","news",j))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm",children:[e.jsx("h2",{className:"font-bold text-lg",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª"}),e.jsxs(A,{onClick:()=>o(!0),children:[e.jsx(We,{size:18})," Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(j=>e.jsxs(H,{className:"relative overflow-hidden group",children:[e.jsxs("div",{className:"aspect-video w-full bg-gray-100 relative",children:[j.image?e.jsx("img",{src:j.image,alt:j.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-300",children:e.jsx(Ms,{size:48})}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxs(A,{variant:"danger",onClick:()=>f(j.id),children:[e.jsx(se,{size:18})," Ø­Ø°Ù"]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:j.title}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:j.desc}),e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded mt-2 inline-block",children:j.branch})]})]},j.id))}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:e.jsx(H,{className:"w-full max-w-lg",title:"Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯",children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block mb-1",children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø±"}),e.jsx("input",{required:!0,className:"w-full border p-2 rounded",value:i.title,onChange:j=>x({...i,title:j.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block mb-1",children:"Ø§Ù„ØªÙØ§ØµÙŠÙ„"}),e.jsx("textarea",{required:!0,className:"w-full border p-2 rounded h-24",value:i.desc,onChange:j=>x({...i,desc:j.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block mb-1",children:"ØµÙˆØ±Ø© Ø§Ù„Ø®Ø¨Ø±"}),e.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"w-full border p-2 rounded bg-gray-50"}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"ÙŠÙØ¶Ù„ ØµÙˆØ± Ø¨Ø§Ù„Ø¹Ø±Ø¶ (Landscape) - Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 500KB"})]}),i.image&&e.jsx("img",{src:i.image,alt:"preview",className:"w-full h-32 object-cover rounded border"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(A,{variant:"ghost",onClick:()=>o(!1),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(A,{type:"submit",disabled:m,children:m?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹...":"Ù†Ø´Ø±"})]})]})})})]})},Ee=r=>{if(!r)return"expired";const a=new Date,l=new Date(r);a.setHours(0,0,0,0),l.setHours(0,0,0,0);const c=l-a,o=Math.ceil(c/(1e3*60*60*24));return o<0?"expired":o<=7?"near_end":"active"},st=async(r,a,l,c)=>{try{await De(de(Y,"artifacts",te,"public","data","activity_logs"),{action:r,details:a,branch:l,performedBy:c.name||"Admin",role:c.role||"admin",timestamp:new Date().toISOString()})}catch(o){console.error("Log error",o)}},tt=({user:r,selectedBranch:a,studentsCollection:l,paymentsCollection:c,expensesCollection:o,scheduleCollection:i,archiveCollection:x,registrationsCollection:m,captainsCollection:g,handleLogout:k})=>{const[b,f]=h.useState("dashboard"),[j,t]=h.useState(!0),w=(l==null?void 0:l.data)||[],S=(c==null?void 0:c.data)||[],p=(o==null?void 0:o.data)||[],E=(m==null?void 0:m.data)||[],_=(i==null?void 0:i.data)||[],C=(g==null?void 0:g.data)||[],D=Q("groups"),I=(D==null?void 0:D.data)||[],R=Q("news"),B=(R==null?void 0:R.data)||[],F=Q("finance_reasons"),U=(F==null?void 0:F.data)||[],n=Q("activity_logs"),N=(n==null?void 0:n.data)||[],P=h.useMemo(()=>w.filter(v=>v.branch===a),[w,a]),G=h.useMemo(()=>S.filter(v=>v.branch===a),[S,a]),d=h.useMemo(()=>p.filter(v=>v.branch===a),[p,a]),L=h.useMemo(()=>E.filter(v=>v.branch===a),[E,a]),K=h.useMemo(()=>I.filter(v=>v.branch===a),[I,a]),X=h.useMemo(()=>U.filter(v=>v.branch===a),[U,a]),Z=h.useMemo(()=>N.filter(v=>v.branch===a).sort((v,T)=>new Date(T.timestamp)-new Date(v.timestamp)).slice(0,50),[N,a]),xe=G.reduce((v,T)=>v+T.amount,0),ne=d.reduce((v,T)=>v+T.amount,0),oe=xe-ne,ue=P.filter(v=>Ee(v.subEnd)==="active").length,u=P.filter(v=>Ee(v.subEnd)==="near_end").length,z=P.filter(v=>Ee(v.subEnd)==="expired").length,M=P.length,O=new Date,s=`${O.getFullYear()}-${String(O.getMonth()+1).padStart(2,"0")}`,y=P.reduce((v,T)=>T.attendance?v+Object.keys(T.attendance).filter(W=>W.startsWith(s)).length:v,0),$=(v,T)=>st(v,T,a,r),q=()=>{if(!confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ­Ù…ÙŠÙ„ Ù†Ø³Ø®Ø© ÙƒØ§Ù…Ù„Ø© Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ"))return;const v={date:new Date().toISOString(),branch:a,students:P,payments:G,expenses:d,registrations:L,schedule:_,news:B,groups:K,captains:C,activityLogs:Z},T="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(v,null,2)),W=document.createElement("a");W.setAttribute("href",T),W.setAttribute("download",`brave_backup_${a}_${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild(W),W.click(),W.remove()},J=[{id:"dashboard",icon:ke,label:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©"},{id:"news",icon:be,label:"Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„Ø¹Ø±ÙˆØ¶"},{id:"registrations",icon:ds,label:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",badge:L.length},{id:"students",icon:Ce,label:"Ø§Ù„Ø·Ù„Ø§Ø¨"},{id:"finance",icon:ns,label:"Ø§Ù„Ù…Ø§Ù„ÙŠØ©"},{id:"attendance",icon:os,label:"Ø§Ù„Ø­Ø¶ÙˆØ±"},{id:"schedule",icon:Ie,label:"Ø§Ù„Ø¬Ø¯ÙˆÙ„"},{id:"archive",icon:fe,label:"Ø§Ù„Ø£Ø±Ø´ÙŠÙ"},{id:"captains",icon:as,label:"Ø§Ù„ÙƒØ¨Ø§ØªÙ†",role:"admin"}];return e.jsxs("div",{className:"flex min-h-screen bg-gray-100 text-right font-sans",dir:"rtl",children:[e.jsxs("aside",{className:`${j?"w-64":"w-20"} bg-black text-gray-300 transition-all duration-300 flex flex-col sticky top-0 h-screen shadow-2xl z-40`,children:[e.jsxs("div",{className:"p-6 flex justify-between border-b border-gray-800",children:[j&&e.jsx("h2",{className:"font-black text-yellow-500 text-xl",children:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsx("button",{onClick:()=>t(!j),children:e.jsx(Pe,{size:20})})]}),e.jsxs("div",{className:"p-4 border-b border-gray-800",children:[e.jsx("p",{className:"text-white font-bold",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500",children:r.role==="admin"?"Ù…Ø¯ÙŠØ± Ø¹Ø§Ù…":"ÙƒØ§Ø¨ØªÙ†"})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-6 space-y-2 px-3 custom-scrollbar",children:J.filter(v=>!v.role||v.role===r.role).map(v=>e.jsxs("button",{onClick:()=>{f(v.id),t(!1)},className:`w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all ${b===v.id?"bg-yellow-500 text-black font-bold":"hover:bg-gray-800"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(v.icon,{size:20}),v.badge>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] w-4 h-4 rounded-full flex items-center justify-center",children:v.badge})]}),j&&e.jsx("span",{children:v.label})]},v.id))}),e.jsxs("div",{className:"p-4 space-y-2 border-t border-gray-800",children:[r.role==="admin"&&e.jsxs("button",{onClick:q,className:`w-full flex items-center gap-4 px-4 py-3 text-green-500 hover:bg-gray-900 rounded transition-colors ${!j&&"justify-center"}`,title:"ØªØ­Ù…ÙŠÙ„ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©",children:[e.jsx(Os,{size:20})," ",j&&"Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ"]}),e.jsxs("button",{onClick:k,className:`w-full flex items-center gap-4 px-4 py-3 text-red-400 hover:bg-gray-900 rounded transition-colors ${!j&&"justify-center"}`,title:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",children:[e.jsx(ls,{size:20})," ",j&&"Ø®Ø±ÙˆØ¬"]})]})]}),e.jsxs("main",{className:"flex-1 p-4 md:p-8 w-full overflow-x-hidden",children:[e.jsxs("div",{className:"md:hidden mb-4 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>t(!0),className:"p-2 bg-white rounded shadow",children:e.jsx(Pe,{})}),e.jsx("h2",{className:"font-bold text-gray-800",children:"Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹"})]}),b==="dashboard"&&e.jsx(_s,{user:r,selectedBranch:a,branchStudents:P,netProfit:oe,totalAttendance:y,expiredCount:z,activeStudentsCount:ue,nearEndCount:u,totalStudents:M,branchRegistrations:L,branchPayments:G,activityLogs:Z}),b==="students"&&e.jsx(Gs,{students:P,groups:K,studentsCollection:l,archiveCollection:x,selectedBranch:a,logActivity:$}),b==="finance"&&e.jsx(Bs,{students:P,payments:G,expenses:d,paymentsCollection:c,expensesCollection:o,financeReasons:X,financeReasonsCollection:F,selectedBranch:a,logActivity:$}),b==="attendance"&&e.jsx(Vs,{students:P,groups:K,groupsCollection:D,studentsCollection:l,selectedBranch:a}),b==="registrations"&&e.jsx(Zs,{registrations:L,students:w,registrationsCollection:m,studentsCollection:l,selectedBranch:a,logActivity:$}),b==="schedule"&&e.jsx(Qs,{schedule:_,scheduleCollection:i}),b==="archive"&&e.jsx(Js,{archiveCollection:x,studentsCollection:l,payments:S,logActivity:$}),b==="captains"&&e.jsx(Xs,{captains:C,captainsCollection:g}),b==="news"&&e.jsx(et,{news:B,newsCollection:R,selectedBranch:a})]})]})},Le="brave-academy-live-data";function at(){const[r,a]=h.useState(()=>{const C=localStorage.getItem("braveUser");return C?JSON.parse(C):null}),[l,c]=h.useState(()=>typeof window<"u"&&localStorage.getItem("braveUser")?JSON.parse(localStorage.getItem("braveUser")).role==="student"?"student_portal":"admin_dashboard":"home"),[o,i]=h.useState(()=>r&&r.branch?r.branch:V.SHAFA),[x,m]=h.useState(!0),g=Q("students"),k=Q("payments"),b=Q("expenses"),f=Q("schedule"),j=Q("archive"),t=Q("registrations"),w=Q("captains"),S=Q("news"),p=C=>{c(C),window.history.pushState({view:C},"","")};h.useEffect(()=>{window.history.replaceState({view:l},"","");const C=D=>{D.state&&D.state.view?c(D.state.view):c("home")};return window.addEventListener("popstate",C),()=>window.removeEventListener("popstate",C)},[]);const E=async(C,D)=>{try{const I=de(Y,"artifacts",Le,"public","data","students"),R=we(I,ve("username","==",C),ve("password","==",D)),B=await Be(R);if(!B.empty){const N=B.docs[0],P=N.data(),G={role:"student",familyId:P.familyId,name:P.familyName||P.name,id:N.id};a(G),localStorage.setItem("braveUser",JSON.stringify(G)),p("student_portal");return}const F=de(Y,"artifacts",Le,"public","data","captains"),U=we(F,ve("username","==",C),ve("password","==",D)),n=await Be(U);if(!n.empty){const N=n.docs[0],P=N.data(),G={role:"captain",...P,id:N.id};a(G),localStorage.setItem("braveUser",JSON.stringify(G)),i(P.branch),p("admin_dashboard");return}if(C.includes("@")||C==="admin1"){let N=C;C==="admin1"&&(N="admin@brave.com"),await bs(Oe,N,D);return}alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø®Ø§Ø·Ø¦Ø©! ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.")}catch(I){console.error("Login Error:",I),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.")}};h.useEffect(()=>{const C=hs(Oe,async D=>{if(D){const I=D.email;let R={email:I};I==="admin@brave.com"?R={...R,role:"admin",isSuper:!0,name:"Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…",branch:V.SHAFA}:I==="shafa@brave.com"?R={...R,role:"admin",isSuper:!1,name:"Ù…Ø¯ÙŠØ± Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†",branch:V.SHAFA}:I==="abunseir@brave.com"&&(R={...R,role:"admin",isSuper:!1,name:"Ù…Ø¯ÙŠØ± Ø£Ø¨Ùˆ Ù†ØµÙŠØ±",branch:V.ABU_NSEIR});try{const B=he(Y,"artifacts",Le,"public","data","admin_profiles",I),F=await ys(B);F.exists()&&F.data().name&&(R.name=F.data().name)}catch{console.log("Profile fetch warning")}a(R),i(R.branch),localStorage.setItem("braveUser",JSON.stringify(R)),c("admin_dashboard")}else localStorage.getItem("braveUser")||a(null);m(!1)});return()=>C()},[]);const _=async()=>{await us(Oe),localStorage.removeItem("braveUser"),a(null),p("home")};return x&&r?e.jsx("div",{className:"flex h-screen items-center justify-center font-bold text-xl text-yellow-600 bg-gray-50",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."}):e.jsxs(e.Fragment,{children:[l==="home"&&e.jsx(Ls,{setView:p,schedule:f.data,registrationsCollection:t}),l==="login"&&e.jsx(Ps,{setView:p,handleLogin:E}),l==="student_portal"&&r&&e.jsx(Rs,{user:r,students:g.data,schedule:f.data,payments:k.data,news:S.data,handleLogout:_}),l==="admin_dashboard"&&r&&e.jsx(tt,{user:r,selectedBranch:o,onSwitchBranch:r.isSuper?i:null,studentsCollection:g,paymentsCollection:k,expensesCollection:b,scheduleCollection:f,archiveCollection:j,registrationsCollection:t,captainsCollection:w,handleLogout:_})]})}xs(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(at,{})}));
