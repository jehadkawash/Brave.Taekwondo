import{r as b,j as e}from"./react-BVBiHVO-.js";import{r as Je,c as hs}from"./react-dom-C1qW5AtE.js";import{g as bs,o as us,s as gs,a as ps}from"./firebase-D4SAEB23.js";import{y as fs,z as js,A as xe,B as we,D as ys,G as as,H as be,I as ls,J as De,K as vs,M as ve,N as Ye,O as Ns}from"./@firebase-CcMDNQFF.js";import{S as We,X as me,M as Pe,a as ue,A as ke,C as Ce,b as Be,c as Re,N as Ze,d as he,P as pe,T as rs,U as ze,e as ns,f as $e,g as Ie,h as ye,L as os,i as Te,B as qe,j as _e,k as ws,l as ks,Z as Ss,m as ds,n as Qe,o as Ne,F as Ds,p as Cs,q as zs,r as $s,s as Xe,t as Ue,u as ge,v as He,w as fe,x as Me,y as le,D as Ke,z as Se,E as is,G as cs,H as Is,I as Ve,J as As,K as Ms,O as es,Q as Os,R as xs,V as Fs,W as Es}from"./lucide-react-0_Uwqfxu.js";import"./scheduler-DYLXRpC5.js";import"./idb-BXWtuYvb.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const x of i.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&c(x)}).observe(document,{childList:!0,subtree:!0});function l(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(o){if(o.ep)return;o.ep=!0;const i=l(o);fetch(o.href,i)}})();const Ls={apiKey:"AIzaSyCKMrH2E_GP_MYZJrhF4LbxC1LmtVGx3Co",authDomain:"brave-academy.firebaseapp.com",projectId:"brave-academy",storageBucket:"brave-academy.firebasestorage.app",messagingSenderId:"862804404676",appId:"1:862804404676:web:871e3bb0796c354f1f5c91"},ms=fs(Ls),Oe=bs(ms),ee=js(ms),ne="brave-academy-live-data",te=(r,a=[])=>{const[l,c]=b.useState([]),[o,i]=b.useState(!0),x=JSON.stringify(a);return b.useEffect(()=>{let u=xe(ee,"artifacts",ne,"public","data",r),p;a&&a.length>0?p=we(u,...a):p=we(u);const j=ys(p,t=>{const w=t.docs.map(S=>({...S.data(),id:S.id}));c(w),i(!1)},t=>{console.error(`Error fetching ${r}:`,t),i(!1)});return()=>j()},[r,x]),{data:l,loading:o,add:async u=>{try{const p={...u,createdAt:new Date().toISOString()};return await De(xe(ee,"artifacts",ne,"public","data",r),p),!0}catch(p){return console.error(p),alert("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ≠ŸÅÿ∏ÿå ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿßŸÑÿßÿ™ÿµÿßŸÑ"),!1}},update:async(u,p)=>{try{await ls(be(ee,"artifacts",ne,"public","data",r,u),p)}catch(j){console.error(j)}},remove:async u=>{try{await as(be(ee,"artifacts",ne,"public","data",r,u))}catch(p){console.error(p)}}}},A=({children:r,onClick:a,variant:l="primary",className:c="",type:o="button"})=>{const i={primary:"bg-yellow-500 text-black hover:bg-yellow-400 border border-yellow-600 font-bold",secondary:"bg-gray-800 text-white hover:bg-gray-700",danger:"bg-red-600 text-white hover:bg-red-700",outline:"border-2 border-yellow-500 text-yellow-600 hover:bg-yellow-50",ghost:"bg-transparent text-gray-600 hover:bg-gray-100"};return e.jsx("button",{type:o,onClick:a,className:`px-4 py-2 rounded-lg transition duration-200 flex items-center justify-center gap-2 shadow-sm ${i[l]} ${c}`,children:r})},H=({children:r,className:a="",title:l,action:c,noPadding:o=!1})=>e.jsxs("div",{className:`bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden ${a}`,children:[(l||c)&&e.jsxs("div",{className:"px-4 py-3 md:px-6 md:py-4 border-b border-gray-100 flex flex-col md:flex-row justify-between items-start md:items-center bg-gray-50/50 gap-2",children:[l&&e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:l}),c&&e.jsx("div",{className:"self-end md:self-auto",children:c})]}),e.jsx("div",{className:o?"":"p-4 md:p-6",children:r})]}),Ge=({status:r})=>{const a={active:{text:"ŸÅÿπÿßŸÑ",style:"bg-green-100 text-green-800 border-green-200"},near_end:{text:"ŸÇÿßÿ±ÿ® ÿßŸÑÿßŸÜÿ™Ÿáÿßÿ°",style:"bg-yellow-100 text-yellow-800 border-yellow-200"},expired:{text:"ŸÖŸÜÿ™ŸáŸä",style:"bg-red-100 text-red-800 border-red-200"}},l=a[r]||a.active;return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold border ${l.style}`,children:l.text})},ss=({students:r,onSelect:a,placeholder:l="ÿ®ÿ≠ÿ´ ÿπŸÜ ÿ∑ÿßŸÑÿ®...",showAllOption:c=!1,onClear:o})=>{const[i,x]=b.useState(""),[h,g]=b.useState(!1),k=b.useMemo(()=>i?r.filter(u=>u.name.includes(i)):r,[r,i]);return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:"w-full border p-2 pr-8 rounded focus:ring-2 focus:ring-yellow-500 outline-none",placeholder:l,value:i,onChange:u=>{x(u.target.value),g(!0),u.target.value===""&&o&&o()},onFocus:()=>g(!0),onBlur:()=>setTimeout(()=>g(!1),200)}),e.jsx(We,{className:"absolute left-2 top-2.5 text-gray-400",size:16}),i&&e.jsx("button",{onClick:()=>{x(""),o&&o()},className:"absolute left-8 top-2.5 text-gray-400 hover:text-red-500",children:e.jsx(me,{size:16})})]}),h&&e.jsxs("div",{className:"absolute z-50 w-full bg-white border rounded shadow-lg max-h-48 overflow-y-auto mt-1",children:[c&&e.jsx("div",{className:"p-2 hover:bg-gray-100 cursor-pointer text-sm border-b font-bold text-blue-600",onClick:()=>{x(""),o&&o(),g(!1)},children:"ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑ"}),k.length>0?k.map(u=>e.jsxs("div",{className:"p-2 hover:bg-yellow-50 cursor-pointer text-sm border-b last:border-0 flex justify-between items-center",onClick:()=>{x(u.name),a(u),g(!1)},children:[e.jsx("span",{className:"font-bold",children:u.name}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:u.belt})]},u.id)):e.jsx("div",{className:"p-2 text-gray-500 text-sm text-center",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨"})]})]})},ie={LOGO:"/logo.jpg",HERO_BG:"/hero.jpg",BRANCH_SHAFA:"/shafa.jpg",BRANCH_ABU_NSEIR:"/abunseir.jpg"},X={SHAFA:"ÿ¥ŸÅÿß ÿ®ÿØÿ±ÿßŸÜ",ABU_NSEIR:"ÿ£ÿ®Ÿà ŸÜÿµŸäÿ±"},de=["ÿ£ÿ®Ÿäÿ∂","ÿ£ÿµŸÅÿ±","ÿ£ÿÆÿ∂ÿ± 1","ÿ£ÿÆÿ∂ÿ± 2","ÿ£ÿ≤ÿ±ŸÇ 1","ÿ£ÿ≤ÿ±ŸÇ 2","ÿ®ŸÜŸä 1","ÿ®ŸÜŸä 2","ÿ£ÿ≠ŸÖÿ± 1","ÿ£ÿ≠ŸÖÿ± 2","ÿ£ÿ≥ŸàÿØ"],Ps=[{id:1,days:"ÿßŸÑÿ≥ÿ®ÿ™ / ÿßŸÑÿßÿ´ŸÜŸäŸÜ / ÿßŸÑÿ£ÿ±ÿ®ÿπÿßÿ°",time:"4:00 ŸÖ - 5:00 ŸÖ",level:"ŸÖÿ®ÿ™ÿØÿ¶ŸäŸÜ (ÿ£ÿ®Ÿäÿ∂ - ÿ£ÿµŸÅÿ±)",branch:"ŸÖÿ¥ÿ™ÿ±ŸÉ"},{id:2,days:"ÿßŸÑÿ≥ÿ®ÿ™ / ÿßŸÑÿßÿ´ŸÜŸäŸÜ / ÿßŸÑÿ£ÿ±ÿ®ÿπÿßÿ°",time:"5:00 ŸÖ - 6:30 ŸÖ",level:"ÿ£ÿ≠ÿ≤ŸÖÿ© ŸÖŸÑŸàŸÜÿ© (ÿ£ÿÆÿ∂ÿ± - ÿ£ÿ≤ÿ±ŸÇ)",branch:"ŸÖÿ¥ÿ™ÿ±ŸÉ"},{id:3,days:"ÿßŸÑÿ£ÿ≠ÿØ / ÿßŸÑÿ´ŸÑÿßÿ´ÿßÿ° / ÿßŸÑÿÆŸÖŸäÿ≥",time:"5:00 ŸÖ - 6:30 ŸÖ",level:"ŸÖÿ™ŸÇÿØŸÖ (ÿ£ÿ≠ŸÖÿ± - ÿ£ÿ≥ŸàÿØ)",branch:"ŸÖÿ¥ÿ™ÿ±ŸÉ"},{id:4,days:"ÿßŸÑÿ¨ŸÖÿπÿ©",time:"9:00 ÿµ - 11:00 ÿµ",level:"ŸÅÿ±ŸäŸÇ ÿßŸÑŸÖŸÜÿ™ÿÆÿ®ÿßÿ™",branch:"ÿßŸÑŸÅÿ±ÿπ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä"}],Rs=({setView:r,schedule:a})=>{const[l,c]=b.useState(!1),[o,i]=b.useState(!1),[x,h]=b.useState({name:"",phone:"",dob:"",address:"",branch:X.SHAFA}),[g,k]=b.useState(!1),{data:u}=te("news"),[p,j]=b.useState(0);b.useEffect(()=>{if(!u||u.length===0)return;const f=setInterval(()=>{j(E=>(E+1)%u.length)},8e3);return()=>clearInterval(f)},[u]);const t=async f=>{f.preventDefault(),k(!0);try{await De(xe(ee,"artifacts",ne,"public","data","registrations"),{...x,date:new Date().toLocaleDateString("ar-JO"),status:"new",createdAt:new Date().toISOString()}),alert("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ® ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠! ÿ≥ŸÜÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã."),i(!1),h({name:"",phone:"",dob:"",address:"",branch:X.SHAFA})}catch(E){console.error("Error adding document: ",E),alert("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.")}finally{k(!1)}},w=f=>window.open(f,"_blank"),S=()=>window.open("https://wa.me/962795629606","_blank");return e.jsxs("div",{className:"min-h-screen font-sans text-right relative bg-white",dir:"rtl",children:[e.jsxs("header",{className:"bg-black text-white shadow-lg sticky top-0 z-50 border-b-2 border-yellow-500",children:[e.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>window.scrollTo(0,0),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ie.LOGO,alt:"Logo",className:"w-12 h-12 rounded-full bg-white p-1 object-contain transition-transform group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-yellow-500 animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-extrabold leading-none text-yellow-500",children:"ÿ£ŸÉÿßÿØŸäŸÖŸäÿ© ÿßŸÑÿ¥ÿ¨ÿßÿπ"}),e.jsx("p",{className:"text-[10px] text-gray-400 tracking-wider uppercase font-bold",children:"Brave Taekwondo"})]})]}),e.jsx("nav",{className:"hidden md:flex gap-8 font-bold text-sm",children:["ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©","ŸÖŸÜ ŸÜÿ≠ŸÜ","ÿ¨ÿØŸàŸÑ ÿßŸÑÿ≠ÿµÿµ","ÿßŸÑŸÅÿ±Ÿàÿπ"].map(f=>e.jsxs("button",{className:"hover:text-yellow-500 transition-colors duration-300 relative group",onClick:()=>{var E,q;f==="ÿ¨ÿØŸàŸÑ ÿßŸÑÿ≠ÿµÿµ"&&((E=document.getElementById("schedule"))==null||E.scrollIntoView({behavior:"smooth"})),f==="ÿßŸÑŸÅÿ±Ÿàÿπ"&&((q=document.getElementById("branches"))==null||q.scrollIntoView({behavior:"smooth"})),f==="ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"&&window.scrollTo(0,0)},children:[f,e.jsx("span",{className:"absolute -bottom-1 right-0 w-0 h-0.5 bg-yellow-500 transition-all group-hover:w-full"})]},f))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{onClick:()=>r("login"),className:"bg-yellow-500 text-black hover:bg-yellow-400 font-black px-6 border-none hidden md:block transform hover:-translate-y-1 transition-transform",children:"ÿ®Ÿàÿßÿ®ÿ© ÿßŸÑÿ£ÿπÿ∂ÿßÿ°"}),e.jsx("button",{className:"md:hidden p-2 text-yellow-500",onClick:()=>c(!l),children:l?e.jsx(me,{size:24}):e.jsx(Pe,{size:24})})]})]}),l&&e.jsx("div",{className:"md:hidden bg-gray-900 border-t border-gray-800 p-4 flex flex-col gap-4",children:e.jsx(A,{onClick:()=>{c(!1),r("login")},className:"w-full py-3 bg-yellow-500 text-black font-bold",children:"ÿ®Ÿàÿßÿ®ÿ© ÿßŸÑÿ£ÿπÿ∂ÿßÿ°"})})]}),e.jsxs("div",{className:"relative bg-gray-900 text-white h-[600px] flex items-center shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-yellow-500/10 -skew-x-12 transform origin-top translate-x-20"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-black/70 to-transparent z-10"}),e.jsx("img",{src:ie.HERO_BG,alt:"Hero",className:"absolute inset-0 w-full h-full object-cover"}),e.jsxs("div",{className:"container mx-auto px-6 relative z-20 flex flex-col items-start pt-10",children:[e.jsx("div",{className:"inline-block bg-yellow-500 text-black font-black px-4 py-1 rounded-none skew-x-[-10deg] mb-6 animate-fade-in-up",children:e.jsx("span",{className:"block skew-x-[10deg] text-sm tracking-wider",children:"ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÖŸÅÿ™Ÿàÿ≠ ÿßŸÑÿ¢ŸÜ"})}),e.jsxs("h2",{className:"text-6xl md:text-8xl font-black mb-6 leading-tight drop-shadow-lg",children:["ÿßÿµŸÜÿπ ",e.jsx("span",{className:"text-yellow-500",children:"ŸÇŸàÿ™ŸÉ"}),e.jsx("br",{}),"ÿßÿ®ŸÜŸê ŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸÉ"]}),e.jsx("p",{className:"text-gray-300 text-lg mb-8 max-w-lg font-medium",children:"ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ŸÜÿÆÿ®ÿ© ÿ£ÿ®ÿ∑ÿßŸÑ ÿßŸÑÿ£ÿ±ÿØŸÜ ŸÅŸä ÿßŸÑÿ™ÿßŸäŸÉŸàŸÜÿØŸà. ÿ™ÿØÿ±Ÿäÿ® ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿå ÿ®Ÿäÿ¶ÿ© ÿ¢ŸÖŸÜÿ©ÿå ŸàŸÖÿ≥ÿ™ŸÇÿ®ŸÑ ŸàÿßÿπÿØ."}),e.jsx("div",{className:"flex gap-4",children:e.jsx(A,{onClick:()=>i(!0),className:"px-10 py-4 text-xl bg-yellow-500 text-black font-black hover:bg-yellow-400 hover:scale-105 transition-all shadow-[0_0_20px_rgba(234,179,8,0.5)] border-none",children:"ÿßÿ®ÿØÿ£ ÿ±ÿ≠ŸÑÿ™ŸÉ"})})]})]}),u&&u.length>0&&e.jsx("section",{className:"relative -mt-16 z-30 mb-20",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsx("div",{className:"relative w-full max-w-5xl mx-auto h-[450px] bg-white rounded-2xl overflow-hidden shadow-2xl border-t-8 border-yellow-500 flex flex-col md:flex-row",children:u.map((f,E)=>e.jsxs("div",{className:`absolute inset-0 flex flex-col md:flex-row transition-all duration-700 ease-in-out ${E===p?"opacity-100 z-10":"opacity-0 z-0"}`,children:[e.jsxs("div",{className:"w-full md:w-1/2 h-1/2 md:h-full relative overflow-hidden",children:[f.image?e.jsx("img",{src:f.image,alt:f.title,className:"w-full h-full object-cover transition-transform duration-[10000ms] ease-linear transform scale-100 hover:scale-110"}):e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:e.jsx(ue,{size:64,className:"text-gray-300"})}),e.jsx("div",{className:"absolute top-4 right-4 bg-yellow-500 text-black text-xs font-bold px-3 py-1 shadow-md",children:f.branch})]}),e.jsxs("div",{className:"w-full md:w-1/2 h-1/2 md:h-full bg-white p-8 flex flex-col justify-center text-right relative",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 font-bold mb-2 text-sm uppercase tracking-wide",children:[e.jsx(ke,{size:16}),e.jsx("span",{children:"ÿ£ÿ≠ÿØÿ´ ÿßŸÑÿ£ÿÆÿ®ÿßÿ±"})]}),e.jsx("h3",{className:"text-2xl md:text-4xl font-black text-gray-900 mb-4 leading-tight",children:f.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed text-sm md:text-base",children:f.desc}),e.jsxs("div",{className:"flex gap-2 mt-8",children:[e.jsx("button",{onClick:()=>j(q=>(q-1+u.length)%u.length),className:"w-10 h-10 rounded-full border border-gray-200 flex items-center justify-center hover:bg-black hover:text-white transition-colors",children:e.jsx(Ce,{size:20})}),e.jsx("button",{onClick:()=>j(q=>(q+1)%u.length),className:"w-10 h-10 rounded-full border border-gray-200 flex items-center justify-center hover:bg-black hover:text-white transition-colors",children:e.jsx(Be,{size:20})})]})]})]},f.id))})})}),e.jsx("section",{id:"branches",className:"py-24 bg-white",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16",children:[e.jsx("h2",{className:"text-5xl font-black text-gray-900 mb-4 tracking-tight",children:"ŸÅÿ±ŸàÿπŸÜÿß"}),e.jsx("div",{className:"w-24 h-2 bg-yellow-500 rounded-full"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"group relative h-[500px] w-full rounded-[2.5rem] overflow-hidden shadow-2xl cursor-default",children:[e.jsx("img",{src:ie.BRANCH_SHAFA,alt:"Shafa",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent opacity-90 transition-opacity duration-300"}),e.jsx("div",{className:"absolute inset-0 p-8 md:p-12 flex flex-col justify-end",children:e.jsxs("div",{className:"transform transition-transform duration-500 translate-y-4 group-hover:translate-y-0",children:[e.jsx("div",{className:"flex justify-between items-end mb-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"inline-block bg-yellow-500 text-black text-xs font-black px-3 py-1 rounded-full mb-3 shadow-lg",children:"ÿßŸÑŸÅÿ±ÿπ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä"}),e.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white leading-none mb-2",children:"ÿ¥ŸÅÿß ÿ®ÿØÿ±ÿßŸÜ"}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-300 text-sm md:text-base font-medium max-w-sm",children:[e.jsx(Re,{className:"text-yellow-500 mt-1 shrink-0",size:18}),e.jsx("p",{children:"ÿ¥ÿßÿ±ÿπ ÿ±ŸÅÿπÿ™ ÿ¥ŸÖŸàÿ∑ - ÿ®ÿ¨ÿßŸÜÿ® ŸÖÿ¥ÿßÿ™ŸÑ ÿ±ÿ®Ÿäÿπ ÿßŸÑÿßÿ±ÿØŸÜ"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[e.jsxs("button",{onClick:()=>w("https://maps.app.goo.gl/mTqvZD4Ftor3NALJ8?g_st=ic"),className:"flex items-center justify-center gap-2 bg-white/20 backdrop-blur-md border border-white/30 text-white font-bold py-4 rounded-2xl hover:bg-white hover:text-black transition-all duration-300",children:[e.jsx(Ze,{size:20}),e.jsx("span",{children:"ÿßŸÑŸÖŸàŸÇÿπ"})]}),e.jsxs("button",{onClick:()=>window.open("https://wa.me/962795629606","_blank"),className:"flex items-center justify-center gap-2 bg-[#25D366]/90 backdrop-blur-md text-white font-bold py-4 rounded-2xl hover:bg-[#25D366] transition-all duration-300 shadow-lg shadow-green-900/20",children:[e.jsx(he,{size:20}),e.jsx("span",{children:"Ÿàÿßÿ™ÿ≥ÿßÿ®"})]})]}),e.jsxs("a",{href:"tel:0795629606",className:"mt-3 flex items-center justify-center gap-2 bg-black/60 backdrop-blur-md border border-white/10 text-white font-bold py-4 rounded-2xl hover:bg-yellow-500 hover:text-black transition-all duration-300",children:[e.jsx(pe,{size:20}),e.jsx("span",{dir:"ltr",children:"07 9562 9606"})]})]})})]}),e.jsxs("div",{className:"group relative h-[500px] w-full rounded-[2.5rem] overflow-hidden shadow-2xl cursor-default",children:[e.jsx("img",{src:ie.BRANCH_ABU_NSEIR,alt:"Abu Nseir",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent opacity-90 transition-opacity duration-300"}),e.jsx("div",{className:"absolute inset-0 p-8 md:p-12 flex flex-col justify-end",children:e.jsxs("div",{className:"transform transition-transform duration-500 translate-y-4 group-hover:translate-y-0",children:[e.jsx("div",{className:"flex justify-between items-end mb-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"inline-block bg-gray-800 text-white text-xs font-black px-3 py-1 rounded-full mb-3 shadow-lg border border-gray-600",children:"ŸÅÿ±ÿπ 2"}),e.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white leading-none mb-2",children:"ÿ£ÿ®Ÿà ŸÜÿµŸäÿ±"}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-300 text-sm md:text-base font-medium max-w-sm",children:[e.jsx(Re,{className:"text-yellow-500 mt-1 shrink-0",size:18}),e.jsx("p",{children:"ÿØŸàÿßÿ± ÿßŸÑÿ®ÿ≠ÿ±Ÿäÿ© - ŸÖÿ¨ŸÖÿπ ÿßŸÑŸÅÿ±ÿß"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[e.jsxs("button",{onClick:()=>w("https://maps.app.goo.gl/yqu6tWBiqrRWGCMJ8?g_st=ic"),className:"flex items-center justify-center gap-2 bg-white/20 backdrop-blur-md border border-white/30 text-white font-bold py-4 rounded-2xl hover:bg-white hover:text-black transition-all duration-300",children:[e.jsx(Ze,{size:20}),e.jsx("span",{children:"ÿßŸÑŸÖŸàŸÇÿπ"})]}),e.jsxs("button",{onClick:()=>window.open("https://wa.me/962790368603","_blank"),className:"flex items-center justify-center gap-2 bg-[#25D366]/90 backdrop-blur-md text-white font-bold py-4 rounded-2xl hover:bg-[#25D366] transition-all duration-300 shadow-lg shadow-green-900/20",children:[e.jsx(he,{size:20}),e.jsx("span",{children:"Ÿàÿßÿ™ÿ≥ÿßÿ®"})]})]}),e.jsxs("a",{href:"tel:0790368603",className:"mt-3 flex items-center justify-center gap-2 bg-black/60 backdrop-blur-md border border-white/10 text-white font-bold py-4 rounded-2xl hover:bg-yellow-500 hover:text-black transition-all duration-300",children:[e.jsx(pe,{size:20}),e.jsx("span",{dir:"ltr",children:"07 9036 8603"})]})]})})]})]})]})}),e.jsx("section",{className:"py-24 relative overflow-hidden bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16 text-center",children:[e.jsx("span",{className:"text-yellow-500 font-bold tracking-widest text-sm uppercase mb-2",children:"ŸÑŸÖÿßÿ∞ÿß ŸÜÿ≠ŸÜÿü"}),e.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-4",children:["ÿ£ŸÉÿ´ÿ± ŸÖŸÜ ŸÖÿ¨ÿ±ÿØ ",e.jsx("span",{className:"text-yellow-500",children:"ÿ±Ÿäÿßÿ∂ÿ©"})]}),e.jsx("p",{className:"text-gray-500 max-w-xl",children:"ŸÜÿ≠ŸÜ ŸÜÿ®ŸÜŸä ÿ¥ÿÆÿµŸäÿ© ÿ∑ŸÅŸÑŸÉÿå ŸÜÿπÿ≤ÿ≤ ÿ´ŸÇÿ™Ÿá ÿ®ŸÜŸÅÿ≥Ÿáÿå ŸàŸÜÿπÿØŸá ŸÑŸäŸÉŸàŸÜ ŸÇÿßÿ¶ÿØÿßŸã ŸÅŸä ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑ."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:rs,title:"ÿµŸÜÿßÿπÿ© ÿßŸÑÿ£ÿ®ÿ∑ÿßŸÑ",text:"ŸÖŸÜŸáÿ¨ ÿ™ÿØÿ±Ÿäÿ®Ÿä ÿßÿ≠ÿ™ÿ±ÿßŸÅŸä ŸäŸáÿØŸÅ ŸÑŸÑŸàÿµŸàŸÑ ÿ®ÿßŸÑŸÑÿßÿπÿ®ŸäŸÜ ŸÑŸÖŸÜÿµÿßÿ™ ÿßŸÑÿ™ÿ™ŸàŸäÿ¨ ÿßŸÑŸÖÿ≠ŸÑŸäÿ© ŸàÿßŸÑÿØŸàŸÑŸäÿ©."},{icon:ze,title:"ŸÉÿßÿØÿ± ŸÖÿ≠ÿ™ÿ±ŸÅ",text:"ŸÜÿÆÿ®ÿ© ŸÖŸÜ ÿßŸÑŸÖÿØÿ±ÿ®ŸäŸÜ ÿßŸÑŸàÿ∑ŸÜŸäŸäŸÜ ŸàÿßŸÑÿØŸàŸÑŸäŸäŸÜ ÿßŸÑŸÖÿπÿ™ŸÖÿØŸäŸÜ ÿ∞ŸàŸä ÿßŸÑÿÆÿ®ÿ±ÿ© ÿßŸÑÿπÿßŸÑŸäÿ©."},{icon:ns,title:"ÿ®Ÿäÿ¶ÿ© ÿ¢ŸÖŸÜÿ©",text:"ŸÜŸáÿ™ŸÖ ÿ®ÿßŸÑÿ¨ÿßŸÜÿ® ÿßŸÑÿ™ÿ±ÿ®ŸàŸä ŸàÿßŸÑÿ£ÿÆŸÑÿßŸÇŸä ŸÇÿ®ŸÑ ÿßŸÑÿ¨ÿßŸÜÿ® ÿßŸÑÿ®ÿØŸÜŸäÿå ŸÅŸä ÿ®Ÿäÿ¶ÿ© ÿπÿßÿ¶ŸÑŸäÿ© ÿ¢ŸÖŸÜÿ©."}].map((f,E)=>e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 border border-gray-100 relative group overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-500 to-yellow-200 transform origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-500"}),e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-2xl flex items-center justify-center text-yellow-600 mb-6 group-hover:scale-110 transition-transform group-hover:bg-yellow-500 group-hover:text-black",children:e.jsx(f.icon,{size:32,strokeWidth:2})}),e.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:f.title}),e.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:f.text})]},E))})]})}),e.jsxs("section",{id:"schedule",className:"py-20 bg-gray-900 text-white relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(#FDE047 1px, transparent 1px)",backgroundSize:"20px 20px"}}),e.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-black mb-4",children:"ÿ¨ÿØŸàŸÑ ÿßŸÑÿ≠ÿµÿµ ÿßŸÑÿ£ÿ≥ÿ®ŸàÿπŸä"}),e.jsx("div",{className:"w-20 h-1.5 bg-yellow-500 rounded-full"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(a&&a.length>0?a:Ps).map(f=>e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700 hover:border-yellow-500 transition-all duration-300 hover:-translate-y-2 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-yellow-500 group-hover:bg-yellow-500 group-hover:text-black transition-colors",children:e.jsx($e,{size:20})}),e.jsx("span",{className:"text-xs font-bold text-gray-400 bg-black/30 px-2 py-1 rounded",children:f.branch})]}),e.jsx("h3",{className:"font-bold text-xl mb-2 text-white",children:f.level}),e.jsxs("div",{className:"space-y-3 mt-6 border-t border-gray-700 pt-4",children:[e.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-400",children:[e.jsx(Ie,{size:16,className:"text-yellow-500 mt-0.5"}),e.jsx("span",{children:f.days})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-white",children:[e.jsx(ke,{size:16,className:"text-yellow-500"}),e.jsx("span",{children:f.time})]})]})]},f.id))})]})]}),e.jsx("footer",{className:"bg-black text-white pt-16 pb-24 md:pb-8 border-t border-gray-800 relative z-10",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-6",children:[e.jsx("img",{src:ie.LOGO,alt:"Logo",className:"w-10 h-10 rounded-full grayscale opacity-80"}),e.jsx("span",{className:"font-bold text-lg text-gray-400",children:"ÿ£ŸÉÿßÿØŸäŸÖŸäÿ© ÿßŸÑÿ¥ÿ¨ÿßÿπ ŸÑŸÑÿ™ÿßŸäŸÉŸàŸÜÿØŸà"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"¬© 2023 ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ©."})]})}),e.jsx("button",{onClick:S,className:"fixed bottom-6 right-6 z-50 bg-[#25D366] text-white p-4 rounded-full shadow-2xl hover:bg-[#20bd5a] transition-transform hover:scale-110 flex items-center justify-center animate-bounce-slow border-4 border-white",title:"ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®",children:e.jsx(he,{size:28,fill:"white",className:"text-transparent"})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsx(H,{className:"w-full max-w-lg animate-fade-in border-t-8 border-yellow-500",title:"ÿ∑ŸÑÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ¨ÿØŸäÿØ",children:e.jsxs("form",{onSubmit:t,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"ÿßÿ≥ŸÖ ÿßŸÑÿ∑ÿßŸÑÿ® ÿßŸÑÿ±ÿ®ÿßÿπŸä"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",placeholder:"ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ",value:x.name,onChange:f=>h({...x,name:f.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÖŸäŸÑÿßÿØ"}),e.jsx("input",{type:"date",required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",value:x.dob,onChange:f=>h({...x,dob:f.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ŸàŸÑŸä ÿßŸÑÿ£ŸÖÿ±"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",placeholder:"079xxxxxxx",value:x.phone,onChange:f=>h({...x,phone:f.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"ÿßŸÑÿπŸÜŸàÿßŸÜ"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",placeholder:"ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© - ÿßŸÑÿ¥ÿßÿ±ÿπ",value:x.address,onChange:f=>h({...x,address:f.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"ÿßŸÑŸÅÿ±ÿπ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®"}),e.jsxs("select",{className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors bg-white",value:x.branch,onChange:f=>h({...x,branch:f.target.value}),children:[e.jsx("option",{value:X.SHAFA,children:X.SHAFA}),e.jsx("option",{value:X.ABU_NSEIR,children:X.ABU_NSEIR})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-gray-100",children:[e.jsx(A,{variant:"ghost",className:"text-gray-500 hover:text-black",onClick:()=>i(!1),children:"ÿ•ŸÑÿ∫ÿßÿ°"}),e.jsx(A,{type:"submit",disabled:g,className:"bg-black text-white hover:bg-gray-800 px-8",children:g?"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ...":"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®"})]})]})})})]})},Ts=({setView:r,handleLogin:a,loginError:l})=>{const[c,o]=b.useState(""),[i,x]=b.useState(""),h=g=>{g.preventDefault(),a(c,i)};return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4 relative overflow-hidden",dir:"rtl",children:e.jsxs(H,{className:"w-full max-w-md relative z-10 border-t-4 border-yellow-500",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg p-2",children:e.jsx("img",{src:ie.LOGO,alt:"Logo",className:"w-full h-full object-contain"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"})]}),l&&e.jsx("div",{className:"bg-red-100 text-red-700 p-2 rounded mb-4 text-sm text-center",children:l}),e.jsxs("form",{className:"space-y-5",onSubmit:h,children:[e.jsx("input",{className:"w-full border p-3 rounded-lg",type:"text",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ£Ÿà ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",value:c,onChange:g=>o(g.target.value),required:!0}),e.jsx("input",{className:"w-full border p-3 rounded-lg",type:"password",placeholder:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",value:i,onChange:g=>x(g.target.value),required:!0}),e.jsx(A,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-yellow-500/30",children:"ÿØÿÆŸàŸÑ"})]}),e.jsx("div",{className:"mt-8 text-center border-t pt-4",children:e.jsxs("button",{onClick:()=>r("home"),className:"text-gray-500 hover:text-gray-800 text-sm font-medium flex items-center justify-center gap-2 w-full",children:[e.jsx(Ce,{size:16})," ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"]})})]})})},qs=({user:r,students:a,schedule:l,payments:c,news:o,handleLogout:i})=>{const[x,h]=b.useState(new Date),g=n=>{const N=new Date(x);N.setMonth(N.getMonth()+n),h(N)},k=x.getFullYear(),u=x.getMonth(),p=new Date(k,u+1,0).getDate(),j=["ŸäŸÜÿßŸäÿ±","ŸÅÿ®ÿ±ÿßŸäÿ±","ŸÖÿßÿ±ÿ≥","ÿ£ÿ®ÿ±ŸäŸÑ","ŸÖÿßŸäŸà","ŸäŸàŸÜŸäŸà","ŸäŸàŸÑŸäŸà","ÿ£ÿ∫ÿ≥ÿ∑ÿ≥","ÿ≥ÿ®ÿ™ŸÖÿ®ÿ±","ÿ£ŸÉÿ™Ÿàÿ®ÿ±","ŸÜŸàŸÅŸÖÿ®ÿ±","ÿØŸäÿ≥ŸÖÿ®ÿ±"],t=a.find(n=>n.id===r.id)||r,w=a.filter(n=>n.familyId===r.familyId),S=c.filter(n=>w.some(N=>N.id===n.studentId)).sort((n,N)=>new Date(N.date)-new Date(n.date)),f=[...new Set(w.map(n=>n.branch))],E=(o||[]).filter(n=>!n.branch||n.branch==="ÿßŸÑŸÉŸÑ"||f.includes(n.branch)).sort((n,N)=>new Date(N.createdAt||0)-new Date(n.createdAt||0)),q=n=>{if(!n)return"expired";const N=new Date,L=new Date(n);N.setHours(0,0,0,0),L.setHours(0,0,0,0);const G=L-N,V=Math.ceil(G/(1e3*60*60*24));return V<0?"expired":V<=7?"near_end":"active"},[$,C]=b.useState(!1),[D,P]=b.useState({username:"",password:""}),[J,F]=b.useState(!1),T=async n=>{if(n.preventDefault(),!D.username||!D.password)return alert("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ™ÿπÿ®ÿ¶ÿ© ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ");F(!0);try{const N=be(ee,"artifacts",ne,"public","data","students",t.id);await ls(N,{username:D.username,password:D.password});const L={...r,username:D.username,password:D.password};localStorage.setItem("braveUser",JSON.stringify(L)),alert("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ ÿ®ŸÜÿ¨ÿßÿ≠!"),C(!1)}catch(N){console.error(N),alert("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ÿ≠ÿØŸäÿ´")}finally{F(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans text-right",dir:"rtl",children:[e.jsx("header",{className:"bg-black text-yellow-500 p-4 shadow-lg sticky top-0 z-40",children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:ie.LOGO,alt:"Logo",className:"w-10 h-10 bg-white rounded-full p-1"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-bold text-lg",children:["ŸÖÿ±ÿ≠ÿ®ÿßŸã ",r.name]}),e.jsx("p",{className:"text-xs text-gray-400",children:"ÿ®Ÿàÿßÿ®ÿ© ÿßŸÑÿπÿßÿ¶ŸÑÿ©"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(A,{variant:"secondary",onClick:()=>{P({username:t.username,password:t.password}),C(!0)},className:"text-sm bg-gray-800 hover:bg-gray-700 text-yellow-500 border border-gray-700",children:[e.jsx(ye,{size:16})," ÿ•ÿπÿØÿßÿØÿßÿ™"]}),e.jsxs(A,{variant:"secondary",onClick:i,className:"text-sm",children:[e.jsx(os,{size:16})," ÿÆÿ±Ÿàÿ¨"]})]})]})}),e.jsxs("div",{className:"container mx-auto p-4 md:p-8 max-w-5xl space-y-8",children:[E.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border-r-4 border-yellow-500 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-white border-b border-yellow-100 flex items-center gap-2",children:[e.jsx("div",{className:"bg-yellow-500 text-white p-2 rounded-full shadow-sm animate-pulse",children:e.jsx(ue,{size:20})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"ÿ¢ÿÆÿ± ÿßŸÑÿ£ÿÆÿ®ÿßÿ± ŸàÿßŸÑÿ•ÿπŸÑÿßŸÜÿßÿ™"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:E.slice(0,4).map(n=>e.jsxs("div",{className:"flex gap-4 items-start p-3 bg-gray-50 rounded-xl hover:shadow-md transition-all border border-gray-100",children:[n.image?e.jsx("img",{src:n.image,alt:"News",className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}):e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center text-gray-400",children:e.jsx(ue,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed",children:n.desc}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("span",{className:"text-[10px] bg-white border border-gray-200 px-2 py-0.5 rounded-full text-gray-500",children:n.branch||"ÿπÿßŸÖ"})})]})]},n.id))})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 text-white p-6 rounded-2xl shadow-lg",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx($e,{className:"text-yellow-500"})," ŸÖŸàÿßÿπŸäÿØ ÿßŸÑÿ≠ÿµÿµ"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:l&&l.length>0?l.map(n=>e.jsxs("div",{className:"bg-white/10 p-4 rounded-lg",children:[e.jsx("p",{className:"font-bold text-yellow-400 mb-1",children:n.level}),e.jsxs("p",{className:"text-sm",children:[n.days," | ",n.time]})]},n.id)):e.jsx("p",{className:"text-gray-400",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ÿ¨ÿØŸàŸÑ ÿ≠ÿµÿµ ŸÖÿπŸÑŸÜ ÿ≠ÿßŸÑŸäÿßŸã"})})]}),e.jsx(H,{title:"ŸÉÿ¥ŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ® (ÿßŸÑÿØŸÅÿπÿßÿ™ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©)",children:S.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ"}),e.jsx("th",{className:"p-3",children:"ÿßŸÑÿ∑ÿßŸÑÿ®"}),e.jsx("th",{className:"p-3",children:"ÿßŸÑÿ®ŸäÿßŸÜ"}),e.jsx("th",{className:"p-3",children:"ÿßŸÑÿØŸÅÿπ"}),e.jsx("th",{className:"p-3",children:"ÿßŸÑŸÖÿ®ŸÑÿ∫"})]})}),e.jsx("tbody",{children:S.map(n=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-3 text-gray-500 font-mono",children:n.date}),e.jsx("td",{className:"p-3 font-bold text-gray-800",children:n.name}),e.jsxs("td",{className:"p-3 text-gray-700",children:[n.reason," ",n.details&&e.jsxs("span",{className:"block text-xs text-gray-400 mt-1",children:["(",n.details,")"]})]}),e.jsx("td",{className:"p-3",children:n.method==="cliq"?e.jsxs("span",{className:"flex items-center gap-1 text-purple-600 bg-purple-50 px-2 py-1 rounded text-xs w-fit font-bold",children:[e.jsx(Te,{size:12})," Cliq"]}):e.jsxs("span",{className:"flex items-center gap-1 text-green-600 bg-green-50 px-2 py-1 rounded text-xs w-fit font-bold",children:[e.jsx(qe,{size:12})," ŸÜŸÇÿØÿßŸã"]})}),e.jsxs("td",{className:"p-3 text-green-600 font-bold",dir:"ltr",children:[n.amount," JD"]})]},n.id))})]})}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿØŸÅÿπÿßÿ™ ŸÖÿ≥ÿ¨ŸÑÿ©"})}),w.map(n=>e.jsxs(H,{className:"mb-8 border-t-4 border-yellow-500",title:n.name,children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"ÿßŸÑÿ≠ÿ≤ÿßŸÖ ÿßŸÑÿ≠ÿßŸÑŸä"}),e.jsx("p",{className:"font-bold text-xl",children:n.belt})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ"}),e.jsx(Ge,{status:q(n.subEnd)}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["ŸäŸÜÿ™ŸáŸä: ",n.subEnd]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑŸÖÿ≥ÿ™ÿ≠ŸÇ"}),e.jsxs("p",{className:`font-bold text-xl ${n.balance>0?"text-red-600":"text-green-600"}`,children:[n.balance," JOD"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"ÿßŸÑŸÅÿ±ÿπ"}),e.jsx("p",{className:"font-bold text-lg",children:n.branch})]})]}),n.notes&&n.notes.length>0&&e.jsxs("div",{className:"mb-6 bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsx("h4",{className:"font-bold text-blue-800 text-sm mb-2",children:"ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿßŸÑÿ•ÿØÿßÿ±ÿ©:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-blue-900",children:n.notes.map(N=>e.jsxs("li",{children:[N.text," (",N.date,")"]},N.id))})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-bold text-gray-700",children:["ÿ≥ÿ¨ŸÑ ÿßŸÑÿ≠ÿ∂Ÿàÿ±: ",j[u]," ",k]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{variant:"ghost",onClick:()=>g(-1),children:e.jsx(Ce,{size:16})}),e.jsx(A,{variant:"ghost",onClick:()=>g(1),children:e.jsx(Be,{size:16})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:[...Array(p)].map((N,L)=>{const G=L+1,V=`${k}-${String(u+1).padStart(2,"0")}-${String(G).padStart(2,"0")}`,Y=n.attendance&&n.attendance[V];return e.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-xs font-bold border ${Y?"bg-green-500 text-white":"bg-gray-100 text-gray-400"}`,children:G},G)})})]})]},n.id))]}),$&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs(H,{className:"w-full max-w-sm relative bg-white rounded-2xl shadow-2xl",children:[e.jsx("button",{onClick:()=>C(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-black transition-colors",children:e.jsx(me,{size:24})}),e.jsx("h3",{className:"text-xl font-bold mb-6 text-center text-gray-800",children:"ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ"}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ¨ÿØŸäÿØ"}),e.jsx("input",{className:"w-full border-2 border-gray-200 p-3 rounded-xl focus:border-yellow-500 outline-none transition-colors font-mono text-left dir-ltr",value:D.username,onChange:n=>P({...D,username:n.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ©"}),e.jsx("input",{className:"w-full border-2 border-gray-200 p-3 rounded-xl focus:border-yellow-500 outline-none transition-colors font-mono text-left dir-ltr",value:D.password,onChange:n=>P({...D,password:n.target.value}),required:!0})]}),e.jsx("div",{className:"pt-4",children:e.jsx(A,{type:"submit",disabled:J,className:"w-full py-3 bg-yellow-500 text-black font-bold hover:bg-yellow-400 transition-colors shadow-lg shadow-yellow-500/20",children:J?"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ≠ŸÅÿ∏...":"ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™"})})]})]})})]})},_s=({user:r,selectedBranch:a,branchStudents:l,netProfit:c,totalAttendance:o,expiredCount:i,activeStudentsCount:x,nearEndCount:h,totalStudents:g,activityLogs:k=[]})=>{const u=p=>{if(!p)return{date:"-",time:"-"};const j=new Date(p);return{date:j.toLocaleDateString("ar-JO"),time:j.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}};return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl p-8 text-white shadow-lg flex justify-between items-center relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ Ÿäÿß ",r.name,"! üëã"]}),e.jsxs("p",{className:"opacity-90",children:["ŸÜÿ∏ÿ±ÿ© ÿ≥ÿ±Ÿäÿπÿ© ÿπŸÑŸâ ÿ£ÿØÿßÿ° ŸÅÿ±ÿπ ",a]})]}),e.jsxs("div",{className:"relative z-10 bg-white/20 p-4 rounded-xl backdrop-blur-sm text-center",children:[e.jsx("span",{className:"block text-4xl font-bold",children:new Date().getDate()}),e.jsx("span",{className:"uppercase text-sm tracking-wider",children:new Date().toLocaleString("en-us",{month:"short"})})]}),e.jsx("div",{className:"absolute right-0 top-0 opacity-10 transform translate-x-10 -translate-y-10",children:e.jsx(rs,{size:200})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(H,{className:"border-l-4 border-blue-500 transform hover:-translate-y-1 transition-transform",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ∑ŸÑÿßÿ®"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:l.length})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(ze,{className:"text-blue-600",size:24})})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(_e,{size:12,className:"text-green-500"})," ",e.jsx("span",{className:"text-green-500 font-bold",children:"+3"})," Ÿáÿ∞ÿß ÿßŸÑÿ¥Ÿáÿ±"]})]}),e.jsx(H,{className:"border-l-4 border-green-500 transform hover:-translate-y-1 transition-transform",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"ÿµÿßŸÅŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"}),e.jsxs("h3",{className:"text-3xl font-bold text-gray-800",children:[c," ",e.jsx("span",{className:"text-sm text-gray-400",children:"JOD"})]})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(ws,{className:"text-green-600",size:24})})]})}),e.jsx(H,{className:"border-l-4 border-purple-500 transform hover:-translate-y-1 transition-transform",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"ÿ≠ÿ∂Ÿàÿ± ÿßŸÑÿ¥Ÿáÿ±"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:o})]}),e.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:e.jsx(ke,{className:"text-purple-600",size:24})})]})}),e.jsx(H,{className:"border-l-4 border-red-500 transform hover:-translate-y-1 transition-transform",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"ÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™ ŸÖŸÜÿ™ŸáŸäÿ©"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:i})]}),e.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:e.jsx(ks,{className:"text-red-600",size:24})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(H,{title:"ÿ™Ÿàÿ≤Ÿäÿπ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™",className:"lg:col-span-1",children:[e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx("div",{className:"relative w-48 h-48 rounded-full bg-gray-100 border-8 border-white shadow-inner flex items-center justify-center",style:{background:`conic-gradient(#22c55e 0% ${x/g*100||0}%, #eab308 ${x/g*100||0}% ${(x+h)/g*100||0}%, #ef4444 ${(x+h)/g*100||0}% 100%)`},children:e.jsxs("div",{className:"w-32 h-32 bg-white rounded-full flex flex-col items-center justify-center z-10 shadow-sm",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-800",children:g}),e.jsx("span",{className:"text-xs text-gray-400",children:"ÿ∑ÿßŸÑÿ® ŸÉŸÑŸä"})]})})}),e.jsxs("div",{className:"flex justify-around text-xs mt-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})," ŸÅÿπÿßŸÑ (",x,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"})," ŸÇÿßÿ±ÿ® (",h,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"})," ŸÖŸÜÿ™ŸáŸä (",i,")"]})]})]}),e.jsx(H,{title:"ÿ≥ÿ¨ŸÑ ÿßŸÑŸÜÿ¥ÿßÿ∑ÿßÿ™ ÿßŸÑÿ£ÿÆŸäÿ± (Live Log)",className:"lg:col-span-2",children:e.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:k.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-10 flex flex-col items-center",children:[e.jsx(Ss,{size:32,className:"mb-2 opacity-30"}),e.jsx("p",{children:"ŸÑÿß ŸäŸàÿ¨ÿØ ŸÜÿ¥ÿßÿ∑ÿßÿ™ ŸÖÿ≥ÿ¨ŸÑÿ© ÿ≠ÿØŸäÿ´ÿßŸã"})]}):k.map((p,j)=>{const{date:t,time:w}=u(p.timestamp);return e.jsxs("div",{className:"flex gap-4 items-start p-3 hover:bg-gray-50 rounded-xl transition border border-gray-100 shadow-sm bg-white",children:[e.jsx("div",{className:"bg-blue-50 text-blue-600 p-2 rounded-full mt-1 shrink-0",children:e.jsx(ds,{size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:p.action}),e.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full font-mono flex items-center gap-1",children:[e.jsx($e,{size:10})," ",w]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:p.details}),e.jsxs("div",{className:"flex justify-between items-center mt-2 border-t border-gray-50 pt-2",children:[e.jsxs("p",{className:"text-[10px] font-bold text-blue-800",children:["ÿ®Ÿàÿßÿ≥ÿ∑ÿ©: ",p.performedBy]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:t})]})]})]},j)})})})]})]})},Us=()=>{const a=`student${Math.floor(1e3+Math.random()*9e3)}`,l="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789";let c="";for(let o=0;o<8;o++)c+=l.charAt(Math.floor(Math.random()*l.length));return{username:a,password:c}},Fe=r=>{if(!r)return"expired";const a=new Date,l=new Date(r);a.setHours(0,0,0,0),l.setHours(0,0,0,0);const c=l-a,o=Math.ceil(c/(1e3*60*60*24));return o<0?"expired":o<=7?"near_end":"active"},ts=r=>{if(!r)return!1;const a=new Date,l=new Date(r),c=Math.abs(a-l);return Math.ceil(c/(1e3*60*60*24))<=7},je=({children:r,onClose:a})=>typeof document>"u"?null:Je.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] overflow-y-auto",role:"dialog",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:a}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center sm:p-0",children:e.jsx("div",{className:"relative transform overflow-hidden rounded-2xl text-right shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-2xl bg-white",onClick:l=>l.stopPropagation(),children:r})})]}),document.body),Hs=({isOpen:r,onClose:a,groups:l,allStudents:c,onSend:o})=>{const[i,x]=b.useState("all"),[h,g]=b.useState(""),[k,u]=b.useState([]),[p,j]=b.useState(""),[t,w]=b.useState(""),[S,f]=b.useState(!1);if(!r)return null;const E=c.filter(C=>C.name.toLowerCase().includes(p.toLowerCase())),q=C=>{k.includes(C)?u(D=>D.filter(P=>P!==C)):u(D=>[...D,C])},$=async()=>{if(!t.trim())return alert("ÿßŸÑÿ±ÿ¨ÿßÿ° ŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©");if(i==="custom"&&k.length===0)return alert("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ÿ∑ÿßŸÑÿ® Ÿàÿßÿ≠ÿØ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ");f(!0),await o(i,h,t,k),f(!1),w(""),u([]),a()};return e.jsx(je,{onClose:a,children:e.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-blue-700",children:[e.jsx(ue,{size:24})," ÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ÿπŸÖŸäŸÖ / ÿ•ÿπŸÑÿßŸÜ"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÑŸÖŸÜ ÿ™ÿ±ŸäÿØ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿπŸÑÿßŸÜÿü"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 p-3 rounded-xl border border-gray-200",children:[e.jsx("input",{type:"radio",name:"target",value:"all",checked:i==="all",onChange:()=>x("all")}),e.jsx("span",{children:"ÿßŸÑŸÉŸÑ (ÿ¨ŸÖŸäÿπ ÿßŸÑÿ∑ŸÑÿßÿ®)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 p-3 rounded-xl border border-gray-200",children:[e.jsx("input",{type:"radio",name:"target",value:"group",checked:i==="group",onChange:()=>{x("group"),l.length>0&&g(l[0])}}),e.jsx("span",{children:"ŸÅÿ™ÿ±ÿ© / ŸÖÿ¨ŸÖŸàÿπÿ© ŸÖÿ≠ÿØÿØÿ©"})]}),i==="group"&&e.jsx("div",{className:"mr-6 mb-2",children:e.jsx("select",{className:"w-full border-2 border-gray-200 p-2 rounded-xl outline-none",value:h,onChange:C=>g(C.target.value),children:l.map((C,D)=>e.jsx("option",{value:C,children:C},D))})}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 p-3 rounded-xl border border-gray-200",children:[e.jsx("input",{type:"radio",name:"target",value:"custom",checked:i==="custom",onChange:()=>x("custom")}),e.jsx("span",{children:"ÿ™ÿ≠ÿØŸäÿØ ÿ∑ŸÑÿßÿ® (ŸäÿØŸàŸäÿßŸã)"})]}),i==="custom"&&e.jsxs("div",{className:"mr-6 p-3 border border-gray-200 rounded-xl bg-white",children:[e.jsx("input",{className:"w-full border-b border-gray-100 p-2 mb-2 text-sm outline-none",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ∑ÿßŸÑÿ®...",value:p,onChange:C=>j(C.target.value)}),e.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 custom-scrollbar",children:E.map(C=>e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k.includes(C.id),onChange:()=>q(C.id)}),e.jsx("span",{className:"text-sm",children:C.name})]},C.id))}),e.jsxs("div",{className:"mt-2 text-xs text-blue-600 font-bold",children:["ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ",k.length," ÿ∑ÿßŸÑÿ®"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÜÿµ ÿßŸÑÿ•ÿπŸÑÿßŸÜ"}),e.jsx("textarea",{className:"w-full border-2 border-gray-200 p-3 rounded-xl outline-none h-32 focus:border-blue-500",placeholder:"ÿßŸÉÿ™ÿ® ÿßŸÑÿ•ÿπŸÑÿßŸÜ ŸáŸÜÿß... (ÿ≥Ÿäÿ∏Ÿáÿ± ŸÅŸä ÿµŸÅÿ≠ÿ© ÿßŸÑÿ∑ŸÑÿßÿ®)",value:t,onChange:C=>w(C.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(A,{variant:"ghost",onClick:a,children:"ÿ•ŸÑÿ∫ÿßÿ°"}),e.jsx(A,{onClick:$,disabled:S,className:"bg-blue-600 text-white hover:bg-blue-700",children:S?"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ...":"ŸÜÿ¥ÿ± ÿßŸÑÿ•ÿπŸÑÿßŸÜ"})]})]})]})})},Gs=({student:r,onClose:a,onSave:l})=>{const[c,o]=b.useState("private"),[i,x]=b.useState(""),h=()=>{if(!i.trim())return;const u={id:Date.now().toString(),text:i,date:new Date().toLocaleDateString("ar-JO"),timestamp:new Date().toISOString()};l(r.id,c,"add",u),x("")},g=u=>{confirm("ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿ©ÿü")&&l(r.id,c,"delete",{id:u})},k=c==="private"?r.internalNotes||[]:r.notes||[];return e.jsx(je,{onClose:a,children:e.jsxs("div",{className:"p-0 overflow-hidden flex flex-col h-[500px]",children:[e.jsxs("div",{className:`p-4 text-white flex justify-between items-center ${c==="private"?"bg-red-600":"bg-blue-600"}`,children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[c==="private"?e.jsx(ge,{size:20}):e.jsx(Me,{size:20}),c==="private"?`ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿÆÿßÿµÿ©: ${r.name}`:`ÿ•ÿπŸÑÿßŸÜÿßÿ™ ŸÑŸÑÿ∑ÿßŸÑÿ®: ${r.name}`]}),e.jsx("button",{onClick:a,children:e.jsx(me,{size:20})})]}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>o("private"),className:`flex-1 py-3 font-bold text-sm flex items-center justify-center gap-2 ${c==="private"?"text-red-600 border-b-2 border-red-600 bg-red-50":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(ge,{size:16})," ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿÆÿßÿµÿ© (ŸÑŸÑÿ•ÿØÿßÿ±ÿ©)"]}),e.jsxs("button",{onClick:()=>o("public"),className:`flex-1 py-3 font-bold text-sm flex items-center justify-center gap-2 ${c==="public"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(Me,{size:16})," ÿ•ÿπŸÑÿßŸÜÿßÿ™ (ŸÑŸÑÿ∑ÿßŸÑÿ®)"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:k.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[c==="private"?e.jsx(ge,{size:48,className:"mb-2 opacity-20"}):e.jsx(Me,{size:48,className:"mb-2 opacity-20"}),e.jsx("p",{children:"ŸÑÿß ŸäŸàÿ¨ÿØ ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ŸÖÿ≥ÿ¨ŸÑÿ©"})]}):e.jsx("div",{className:"space-y-3",children:k.map(u=>e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-gray-200 shadow-sm relative group",children:[e.jsx("p",{className:"text-gray-800 text-sm whitespace-pre-wrap",children:u.text}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] text-gray-400 bg-gray-100 px-2 py-1 rounded-full",children:u.date}),e.jsx("button",{onClick:()=>g(u.id),className:"text-red-400 hover:text-red-600 p-1",children:e.jsx(le,{size:16})})]})]},u.id))})}),e.jsx("div",{className:"p-4 bg-white border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 border-2 border-gray-200 rounded-xl px-4 py-2 focus:outline-none focus:border-yellow-500",placeholder:c==="private"?"ÿßŸÉÿ™ÿ® ŸÖŸÑÿßÿ≠ÿ∏ÿ© ÿ≥ÿ±Ÿäÿ©...":"ÿßŸÉÿ™ÿ® ÿ•ÿπŸÑÿßŸÜÿßŸã ŸÑŸÑÿ∑ÿßŸÑÿ®...",value:i,onChange:u=>x(u.target.value),onKeyDown:u=>u.key==="Enter"&&h()}),e.jsx(A,{onClick:h,className:c==="private"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700",children:e.jsx(Ne,{size:18})})]})})]})})},Js=({student:r,onClose:a,onSave:l})=>{const[c,o]=b.useState(r.subEnd||new Date().toISOString().split("T")[0]),i=x=>{const h=new Date(c);h.setMonth(h.getMonth()+x),o(h.toISOString().split("T")[0])};return e.jsx(je,{onClose:a,children:e.jsxs("div",{className:"p-6 text-right",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 text-green-700 flex items-center gap-2",children:[e.jsx(Ue,{size:24})," ÿ™ÿ¨ÿØŸäÿØ ÿßÿ¥ÿ™ÿ±ÿßŸÉ: ",r.name]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿßŸÑÿ¨ÿØŸäÿØ"}),e.jsx("input",{type:"date",className:"w-full border-2 border-green-100 focus:border-green-500 p-3 rounded-xl outline-none text-lg font-bold text-center bg-green-50/20",value:c,onChange:x=>o(x.target.value)})]}),e.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-2",children:"ÿ•ÿ∂ÿßŸÅÿ© ÿ≥ÿ±Ÿäÿπÿ©:"}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>i(1),className:"flex-1 bg-white hover:bg-green-50 text-green-700 border border-green-200 py-3 rounded-xl font-bold text-sm transition shadow-sm hover:shadow-md",children:"+ ÿ¥Ÿáÿ±"}),e.jsx("button",{onClick:()=>i(2),className:"flex-1 bg-white hover:bg-green-50 text-green-700 border border-green-200 py-3 rounded-xl font-bold text-sm transition shadow-sm hover:shadow-md",children:"+ ÿ¥Ÿáÿ±ŸäŸÜ"}),e.jsx("button",{onClick:()=>i(3),className:"flex-1 bg-white hover:bg-green-50 text-green-700 border border-green-200 py-3 rounded-xl font-bold text-sm transition shadow-sm hover:shadow-md",children:"+ 3 ÿ¥ŸáŸàÿ±"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(A,{variant:"ghost",onClick:a,children:"ÿ•ŸÑÿ∫ÿßÿ°"}),e.jsx(A,{onClick:()=>l(r.id,c),className:"flex-1 bg-green-600 text-white hover:bg-green-700 shadow-lg shadow-green-600/20",children:"ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ¨ÿØŸäÿØ"})]})]})})},Ws=({students:r,studentsCollection:a,archiveCollection:l,selectedBranch:c,logActivity:o,groups:i})=>{const[x,h]=b.useState(""),[g,k]=b.useState("all"),[u,p]=b.useState("joinDateDesc"),[j,t]=b.useState(!1),[w,S]=b.useState(null),[f,E]=b.useState(null),[q,$]=b.useState(null),[C,D]=b.useState(!1),[P,J]=b.useState(null),F=b.useMemo(()=>i?i.map(s=>s.name):[],[i]),T={name:"",phone:"",belt:"ÿ£ÿ®Ÿäÿ∂",group:"",joinDate:new Date().toISOString().split("T")[0],dob:"",address:"",balance:0,subEnd:"",username:"",password:""},[n,N]=b.useState(T),[L,G]=b.useState("new"),V=[...new Map(r.map(s=>[s.familyId,s.familyName])).entries()],Y=b.useMemo(()=>{let s=[...r];if(x){const y=x.toLowerCase();s=s.filter(I=>I.name.toLowerCase().includes(y)||I.phone.includes(y)||I.username.toLowerCase().includes(y))}return g!=="all"&&(s=s.filter(y=>Fe(y.subEnd)===g)),s.sort((y,I)=>{switch(u){case"joinDateDesc":return new Date(I.joinDate||0)-new Date(y.joinDate||0);case"joinDateAsc":return new Date(y.joinDate||0)-new Date(I.joinDate||0);case"beltDesc":return de.indexOf(I.belt)-de.indexOf(y.belt);case"beltAsc":return de.indexOf(y.belt)-de.indexOf(I.belt);case"balanceDesc":return I.balance-y.balance;default:return 0}}),s},[r,x,g,u]),K=async s=>{var ce;s.preventDefault();let y=n.username,I=n.password;if(!y||!I){const ae=Us();y=ae.username,I=ae.password}let U,W;L==="new"?(U=Math.floor(Date.now()/1e3),W=`ÿπÿßÿ¶ŸÑÿ© ${n.name.split(" ").slice(-1)[0]}`):(U=parseInt(L),W=((ce=r.find(ae=>ae.familyId===U))==null?void 0:ce.familyName)||"ÿπÿßÿ¶ŸÑÿ©");let v=n.subEnd;if(!v){const ae=new Date(n.joinDate||new Date),Ae=new Date(ae);Ae.setMonth(Ae.getMonth()+1),v=Ae.toISOString().split("T")[0]}const _=n.group||(F.length>0?F[0]:"ÿßŸÑŸÉŸÑ"),B={...n,branch:c,status:"active",subEnd:v,notes:[],internalNotes:[],attendance:{},familyId:U,familyName:W,customOrder:Date.now(),group:_,username:y,password:I};await a.add(B)&&(o&&o("ÿ•ÿ∂ÿßŸÅÿ© ÿ∑ÿßŸÑÿ®",`ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ∑ÿßŸÑÿ® ${B.name}`),E({name:B.name,username:y,password:I,phone:B.phone}),Q())},re=s=>{S(s),N({name:s.name,phone:s.phone,belt:s.belt,group:s.group||"",joinDate:s.joinDate,dob:s.dob,address:s.address||"",subEnd:s.subEnd,balance:s.balance,username:s.username,password:s.password}),G(s.familyId),t(!0)},Q=()=>{t(!1),S(null),N(T),G("new")},d=async s=>{s.preventDefault(),await a.update(w.id,n),Q()},R=async s=>{const y=de.indexOf(s.belt);y<de.length-1&&await a.update(s.id,{belt:de[y+1]})},se=async s=>{confirm(`ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ÿ±ÿ¥ŸÅÿ© ÿßŸÑÿ∑ÿßŸÑÿ® ${s.name}ÿü`)&&(await l.add({...s,archivedAt:new Date().toISOString().split("T")[0],originalId:s.id}),await a.remove(s.id),o&&o("ÿ£ÿ±ÿ¥ŸÅÿ©",`ÿ£ÿ±ÿ¥ŸÅÿ© ÿßŸÑÿ∑ÿßŸÑÿ® ${s.name}`))},Z=async(s,y,I,U)=>{const W=r.find(oe=>oe.id===s);if(!W)return;const v=y==="private"?"internalNotes":"notes";let _=W[v]||[],B;I==="add"?B=[U,..._]:B=_.filter(oe=>oe.id!==U.id),await a.update(s,{[v]:B})},m=async(s,y,I,U=[])=>{let W=[];if(s==="all"?W=r:s==="group"?W=r.filter(_=>_.group===y):s==="custom"&&(W=r.filter(_=>U.includes(_.id))),W.length===0)return alert("ŸÑÿß ŸäŸàÿ¨ÿØ ÿ∑ŸÑÿßÿ® ŸÖÿ≥ÿ™ŸáÿØŸÅŸäŸÜ");if(!confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿπŸÑÿßŸÜ ŸÑŸÄ ${W.length} ÿ∑ÿßŸÑÿ®. ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØÿü`))return;const v={id:Date.now().toString(),text:I,date:new Date().toLocaleDateString("ar-JO"),timestamp:new Date().toISOString()};try{const _=vs(ee);let B=0;W.forEach(oe=>{const ce=be(ee,"artifacts",ne,"public","data","students",oe.id),ae=oe.notes||[];_.update(ce,{notes:[v,...ae]}),B++}),B>0&&(await _.commit(),alert("ÿ™ŸÖ ŸÜÿ¥ÿ± ÿßŸÑÿ•ÿπŸÑÿßŸÜ ÿ®ŸÜÿ¨ÿßÿ≠!"))}catch(_){console.error("Broadcast Error:",_),alert("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑŸÜÿ¥ÿ± ÿßŸÑÿ¨ŸÖÿßÿπŸä. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿßŸÑÿµŸÑÿßÿ≠Ÿäÿßÿ™.")}},z=async(s,y)=>{await a.update(s,{subEnd:y}),o&&o("ÿ™ÿ¨ÿØŸäÿØ ÿßÿ¥ÿ™ÿ±ÿßŸÉ",`ÿ™ÿ¨ÿØŸäÿØ ÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÑŸÑÿ∑ÿßŸÑÿ® (ÿ™ÿßÿ±ŸäÿÆ ÿ¨ÿØŸäÿØ: ${y})`),J(null)},M=s=>{if(!s)return;let y=s.replace(/\D/g,"");y.startsWith("0")&&(y=y.substring(1)),window.open(`https://wa.me/962${y}`,"_blank")},O=s=>{if(!s.phone)return;let y=s.phone.replace(/\D/g,"");y.startsWith("0")&&(y=y.substring(1));const I=`ŸÖÿ±ÿ≠ÿ®ÿßŸã ${s.name} üî•

ÿ£ŸáŸÑÿßŸã ÿ®ŸÉ ŸÅŸä ÿ£ŸÉÿßÿØŸäŸÖŸäÿ© ÿßŸÑÿ¥ÿ¨ÿßÿπ ŸÑŸÑÿ™ÿßŸäŸÉŸàÿßŸÜÿØŸà !
ÿ•ŸÑŸäŸÉ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÉ ÿ®ÿßŸÑŸÖŸàŸÇÿπ :

üë§ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ: ${s.username}
üîë ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±: ${s.password}

ŸÖŸàŸÇÿπŸÜÿß ÿßŸÑÿßŸÑŸÉÿ™ÿ±ŸàŸÜŸä :
https://bravetkd.bar/

ŸÜÿ™ŸÖŸÜŸâ ŸÑŸÉ ÿßŸÑÿ™ŸàŸÅŸäŸÇ Ÿäÿß ÿ®ÿ∑ŸÑ! ü•ã

üìç ŸÅÿ±ŸàÿπŸÜÿß :
‚úÖ ÿßŸÑŸÅÿ±ÿπ ÿßŸÑÿ£ŸàŸÑ: ÿ¥ŸÅÿßÿ®ÿØÿ±ÿßŸÜ ‚Äì ÿ¥ÿßÿ±ÿπ ÿ±ŸÅÿπÿ™ ÿ¥ŸÖŸàÿ∑
üìû 0795629606

‚úÖ ÿßŸÑŸÅÿ±ÿπ ÿßŸÑÿ´ÿßŸÜŸä: ÿ£ÿ®Ÿà ŸÜÿµŸäÿ± ‚Äì ÿØŸàÿßÿ± ÿßŸÑÿ®ÿ≠ÿ±Ÿäÿ© - ŸÖÿ¨ŸÖÿπ ÿßŸÑŸÅÿ±Ÿëÿß ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä
üìû 0790368603`;window.open(`https://wa.me/962${y}?text=${encodeURIComponent(I)}`,"_blank")};return e.jsxs("div",{className:"space-y-6 animate-fade-in font-sans",children:[e.jsx(Hs,{isOpen:C,onClose:()=>D(!1),groups:F,allStudents:r,onSend:m}),q&&e.jsx(Gs,{student:q,onClose:()=>$(null),onSave:Z}),P&&e.jsx(Js,{student:P,onClose:()=>J(null),onSave:z}),f&&e.jsx(je,{onClose:()=>E(null),children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce",children:e.jsx(Qe,{size:32})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ®ÿ∑ŸÑ ÿ®ŸÜÿ¨ÿßÿ≠!"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["ÿßŸÑÿ∑ÿßŸÑÿ®: ",e.jsx("strong",{children:f.name})]}),e.jsxs("div",{className:"bg-gray-50 p-4 border rounded-xl mb-6 dir-ltr text-left relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 bg-yellow-400 text-xs font-bold text-black rounded-bl-lg",children:"Credentials"}),e.jsxs("p",{className:"font-mono text-sm mb-1",children:["User: ",e.jsx("strong",{className:"text-lg text-blue-900 select-all",children:f.username})]}),e.jsxs("p",{className:"font-mono text-sm",children:["Pass: ",e.jsx("strong",{className:"text-lg text-red-600 select-all",children:f.password})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(A,{onClick:()=>O(f),className:"bg-[#25D366] hover:bg-[#20bd5a] text-white flex items-center justify-center gap-2",children:[e.jsx(Ne,{size:18})," ÿ•ÿ±ÿ≥ÿßŸÑ Ÿàÿßÿ™ÿ≥ÿßÿ®"]}),e.jsx(A,{variant:"outline",onClick:()=>E(null),children:"ÿ•ÿ∫ŸÑÿßŸÇ"})]})]})}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col md:flex-row gap-4 justify-between items-center sticky top-0 z-20",children:[e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx(We,{size:18,className:"text-gray-400"})}),e.jsx("input",{className:"w-full pl-4 pr-10 py-2.5 border-2 border-gray-100 rounded-xl focus:border-yellow-500 focus:ring-4 focus:ring-yellow-500/10 outline-none transition-all",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿßÿ≥ŸÖÿå Ÿáÿßÿ™ŸÅÿå ŸäŸàÿ≤ÿ±...",value:x,onChange:s=>h(s.target.value),list:"students-suggestions"}),e.jsx("datalist",{id:"students-suggestions",children:r.map(s=>e.jsx("option",{value:s.name},s.id))})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-1 md:pb-0 hide-scrollbar",children:[e.jsxs(A,{onClick:()=>D(!0),className:"bg-blue-50 text-blue-600 border border-blue-100 hover:bg-blue-100 whitespace-nowrap flex items-center gap-2",children:[e.jsx(ue,{size:18})," ",e.jsx("span",{className:"hidden sm:inline",children:"ÿ•ÿπŸÑÿßŸÜ ŸÑŸÑŸÉŸÑ"})]}),e.jsxs("div",{className:"relative min-w-[120px]",children:[e.jsxs("select",{className:"w-full appearance-none bg-gray-50 border border-gray-200 text-gray-700 py-2.5 pr-8 pl-8 rounded-xl focus:outline-none focus:border-yellow-500 cursor-pointer text-sm font-bold",value:g,onChange:s=>k(s.target.value),children:[e.jsx("option",{value:"all",children:"ŸÉŸÑ ÿßŸÑÿ≠ÿßŸÑÿßÿ™"}),e.jsx("option",{value:"active",children:"üü¢ ŸÅÿπÿßŸÑ"}),e.jsx("option",{value:"near_end",children:"üü° ŸÇÿßÿ±ÿ® ÿßŸÑÿßŸÜÿ™Ÿáÿßÿ°"}),e.jsx("option",{value:"expired",children:"üî¥ ŸÖŸÜÿ™ŸáŸä"})]}),e.jsx(Ds,{size:14,className:"absolute top-1/2 -translate-y-1/2 right-3 text-gray-500 pointer-events-none"})]}),e.jsxs("div",{className:"relative min-w-[140px]",children:[e.jsxs("select",{className:"w-full appearance-none bg-gray-50 border border-gray-200 text-gray-700 py-2.5 pr-8 pl-8 rounded-xl focus:outline-none focus:border-yellow-500 cursor-pointer text-sm font-bold",value:u,onChange:s=>p(s.target.value),children:[e.jsx("option",{value:"joinDateDesc",children:"üìÖ ÿßŸÑÿ£ÿ≠ÿØÿ´"}),e.jsx("option",{value:"joinDateAsc",children:"üìÖ ÿßŸÑÿ£ŸÇÿØŸÖ"}),e.jsx("option",{value:"beltDesc",children:"ü•ã ÿ£ÿπŸÑŸâ ÿ≠ÿ≤ÿßŸÖ"}),e.jsx("option",{value:"balanceDesc",children:"üí∞ ÿßŸÑŸÖÿØŸäŸàŸÜŸäÿ©"})]}),u.includes("Desc")?e.jsx(Cs,{size:14,className:"absolute top-1/2 -translate-y-1/2 right-3 text-gray-500 pointer-events-none"}):e.jsx(zs,{size:14,className:"absolute top-1/2 -translate-y-1/2 right-3 text-gray-500 pointer-events-none"})]}),e.jsxs(A,{onClick:()=>{S(null),t(!0)},className:"whitespace-nowrap flex items-center gap-2 shadow-lg shadow-yellow-500/20",children:[e.jsx($s,{size:18})," ",e.jsx("span",{className:"hidden sm:inline",children:"ÿ∑ÿßŸÑÿ® ÿ¨ÿØŸäÿØ"}),e.jsx("span",{className:"inline sm:hidden",children:"ÿ¨ÿØŸäÿØ"})]})]})]}),e.jsx(H,{className:"hidden md:block overflow-hidden border-none shadow-md rounded-2xl p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 font-bold",children:"ÿßŸÑÿ∑ÿßŸÑÿ®"}),e.jsx("th",{className:"p-4 font-bold",children:"ÿßŸÑŸÅÿ™ÿ±ÿ©"}),e.jsx("th",{className:"p-4 font-bold",children:"ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßÿ™ÿµÿßŸÑ"}),e.jsx("th",{className:"p-4 font-bold",children:"ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ"}),e.jsx("th",{className:"p-4 font-bold",children:"ÿßŸÑÿ≠ÿ≤ÿßŸÖ"}),e.jsx("th",{className:"p-4 font-bold",children:"ÿßŸÑÿ≠ÿßŸÑÿ© ÿßŸÑŸÖÿßŸÑŸäÿ©"}),e.jsx("th",{className:"p-4 font-bold",children:"ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ"}),e.jsx("th",{className:"p-4 font-bold",children:"ÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:Y.map(s=>{const y=ts(s.joinDate),I=s.internalNotes&&s.internalNotes.length>0,U=s.notes&&s.notes.length>0;return e.jsxs("tr",{className:"hover:bg-yellow-50/50 transition-colors group",children:[e.jsxs("td",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[I&&e.jsx("button",{onClick:()=>$(s),className:"text-red-500 hover:scale-110 transition-transform",title:"ŸäŸàÿ¨ÿØ ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿÆÿßÿµÿ©!",children:e.jsx(Xe,{size:20,fill:"currentColor",className:"text-red-100"})}),e.jsx("div",{className:"font-bold text-gray-800 text-base cursor-pointer hover:text-blue-600",onClick:()=>$(s),children:s.name}),y&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-red-100 text-red-600 text-[10px] font-bold border border-red-200 animate-pulse",children:"NEW"})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:s.joinDate})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-bold border border-blue-100",children:s.group||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("a",{href:`tel:${s.phone}`,className:"font-mono text-gray-600 hover:text-blue-600 font-bold flex items-center gap-1",title:"ÿßÿ™ÿµÿßŸÑ",children:[s.phone," ",e.jsx(pe,{size:12,className:"opacity-50"})]}),e.jsx("button",{onClick:()=>M(s.phone),className:"w-8 h-8 rounded-full bg-green-50 text-[#25D366] flex items-center justify-center hover:bg-[#25D366] hover:text-white transition-all shadow-sm",children:e.jsx(he,{size:16})})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"bg-gray-50 p-1.5 rounded-lg text-xs font-mono border border-gray-100",children:[e.jsxs("div",{className:"text-blue-900",children:["U: ",s.username]}),e.jsxs("div",{className:"text-red-600 font-bold",children:["P: ",s.password]})]}),e.jsx("button",{onClick:()=>O(s),className:"text-gray-400 hover:text-[#25D366] transition-colors",children:e.jsx(Ne,{size:16})})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-3 py-1 bg-gray-100 rounded-lg font-bold text-xs border border-gray-200",children:s.belt})}),e.jsx("td",{className:"p-4",children:s.balance>0?e.jsxs("span",{className:"text-red-600 font-bold bg-red-50 px-2 py-1 rounded text-xs",children:["ÿπŸÑŸäŸá ",s.balance]}):e.jsx("span",{className:"text-green-600 font-bold text-xs",children:"ÿÆÿßŸÑÿµ"})}),e.jsx("td",{className:"p-4",children:e.jsx(Ge,{status:Fe(s.subEnd)})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>J(s),className:"bg-green-100 text-green-700 p-2 rounded-lg hover:bg-green-600 hover:text-white transition",title:"ÿ™ÿ¨ÿØŸäÿØ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ",children:e.jsx(Ue,{size:16})}),e.jsx("button",{onClick:()=>$(s),className:`p-2 rounded-lg transition ${U||I?"bg-yellow-100 text-yellow-700":"bg-gray-50 text-gray-400 hover:text-yellow-600"}`,title:"ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™",children:e.jsx(ge,{size:16})}),e.jsx("button",{onClick:()=>R(s),className:"bg-blue-50 text-blue-600 p-2 rounded-lg hover:bg-blue-600 hover:text-white transition",title:"ÿ™ÿ±ŸÅŸäÿπ",children:e.jsx(_e,{size:16})}),e.jsx("button",{onClick:()=>re(s),className:"bg-gray-100 text-gray-600 p-2 rounded-lg hover:bg-gray-600 hover:text-white transition",title:"ÿ™ÿπÿØŸäŸÑ",children:e.jsx(He,{size:16})}),e.jsx("button",{onClick:()=>se(s),className:"bg-red-50 text-red-600 p-2 rounded-lg hover:bg-red-600 hover:text-white transition",title:"ÿ£ÿ±ÿ¥ŸÅÿ©",children:e.jsx(fe,{size:16})})]})})]},s.id)})})]})})}),e.jsxs("div",{className:"md:hidden grid grid-cols-1 gap-4",children:[Y.map(s=>{const y=ts(s.joinDate),I=Fe(s.subEnd),U=s.internalNotes&&s.internalNotes.length>0;return e.jsxs("div",{className:`bg-white p-4 rounded-xl shadow-sm border ${U?"border-red-200 ring-1 ring-red-100":"border-gray-100"} flex flex-col gap-3 relative`,children:[U&&e.jsx("div",{className:"absolute top-4 left-14 animate-pulse",children:e.jsx(Xe,{size:20,className:"text-red-500 fill-red-100"})}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:s.name}),y&&e.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-2 rounded-full animate-pulse",children:"NEW"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["ŸÖŸÜÿ∞: ",s.joinDate]}),e.jsx("span",{className:"text-[10px] bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-bold mt-1 inline-block",children:s.group||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"})]}),e.jsx(Ge,{status:I})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg",children:[e.jsx("span",{className:"text-gray-500 text-xs block",children:"ÿßŸÑÿ≠ÿ≤ÿßŸÖ"}),e.jsx("span",{className:"font-bold text-gray-800",children:s.belt})]}),e.jsxs("div",{className:`p-2 rounded-lg ${s.balance>0?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:[e.jsx("span",{className:"text-xs block opacity-70",children:"ÿßŸÑÿ±ÿµŸäÿØ"}),e.jsx("span",{className:"font-bold",children:s.balance>0?`ÿπŸÑŸäŸá ${s.balance}`:"ÿÆÿßŸÑÿµ"})]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-lg border border-gray-100 border-dashed",children:[e.jsxs("div",{className:"text-xs font-mono text-gray-600",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-bold text-blue-800",children:"U:"})," ",s.username]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-red-600",children:"P:"})," ",s.password]})]}),e.jsx("button",{onClick:()=>O(s),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200",children:e.jsx(Ne,{size:16})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100 mt-1",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:`tel:${s.phone}`,className:"p-2 bg-gray-100 rounded-full text-gray-600",children:e.jsx(pe,{size:16})}),e.jsx("button",{onClick:()=>M(s.phone),className:"p-2 bg-green-100 rounded-full text-[#25D366]",children:e.jsx(he,{size:16})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>J(s),className:"p-2 bg-green-100 text-green-700 rounded-lg",children:e.jsx(Ue,{size:16})}),e.jsx("button",{onClick:()=>$(s),className:`p-2 rounded-lg ${U?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(ge,{size:16})}),e.jsx("button",{onClick:()=>R(s),className:"p-2 bg-blue-50 text-blue-600 rounded-lg",children:e.jsx(_e,{size:16})}),e.jsx("button",{onClick:()=>re(s),className:"p-2 bg-yellow-50 text-yellow-600 rounded-lg",children:e.jsx(He,{size:16})}),e.jsx("button",{onClick:()=>se(s),className:"p-2 bg-red-50 text-red-600 rounded-lg",children:e.jsx(fe,{size:16})})]})]})]},s.id)}),Y.length===0&&e.jsx("div",{className:"text-center p-8 text-gray-400",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨"})]}),j&&e.jsx(je,{onClose:Q,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:w?"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ∑ÿßŸÑÿ®":"ÿ•ÿ∂ÿßŸÅÿ© ÿ®ÿ∑ŸÑ ÿ¨ÿØŸäÿØ"}),e.jsx("button",{onClick:Q,className:"text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(me,{size:24})})]}),e.jsxs("form",{onSubmit:w?d:K,className:"space-y-4 text-right",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 bg-gradient-to-r from-yellow-50 to-white p-4 rounded-xl border border-yellow-200 mb-2",children:[e.jsxs("p",{className:"text-xs font-bold text-yellow-700 mb-3 flex items-center gap-1",children:[e.jsx(Qe,{size:12})," ÿ®ŸäÿßŸÜÿßÿ™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ (ÿßÿ™ÿ±ŸÉŸáÿß ŸÅÿßÿ±ÿ∫ÿ© ŸÑŸÑÿ™ŸàŸÑŸäÿØ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Username"}),e.jsx("input",{className:"w-full border border-gray-200 p-2 rounded-lg bg-white font-mono text-left dir-ltr focus:border-yellow-500 outline-none",value:n.username,onChange:s=>N({...n,username:s.target.value}),placeholder:"Auto-generated"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Password"}),e.jsx("input",{className:"w-full border border-gray-200 p-2 rounded-lg bg-white font-mono text-left dir-ltr focus:border-yellow-500 outline-none",value:n.password,onChange:s=>N({...n,password:s.target.value}),placeholder:"Auto-generated"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ±ÿ®ÿßÿπŸä"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none transition-all",value:n.name,onChange:s=>N({...n,name:s.target.value}),placeholder:"ŸÖÿ´ÿßŸÑ: ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ ÿπŸÑŸä"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"ÿßŸÑŸÅÿ™ÿ±ÿ© / ÿßŸÑŸÖÿ¨ŸÖŸàÿπÿ©"}),e.jsxs("select",{className:"w-full border-2 border-blue-100 focus:border-blue-500 p-2.5 rounded-xl bg-blue-50/50 outline-none",value:n.group,onChange:s=>N({...n,group:s.target.value}),children:[e.jsx("option",{value:"",children:"ÿ®ÿØŸàŸÜ ÿ™ÿ≠ÿØŸäÿØ"}),F.map((s,y)=>e.jsx("option",{value:s,children:s},y))]})]}),!w&&e.jsxs("div",{className:"md:col-span-2 bg-blue-50 p-3 rounded-xl border border-blue-100",children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"ÿßŸÑÿπÿßÿ¶ŸÑÿ© (ŸÑŸÑÿÆÿµŸàŸÖÿßÿ™)"}),e.jsxs("select",{className:"w-full border border-blue-200 p-2 rounded-lg bg-white focus:ring-2 focus:ring-blue-200 outline-none",value:L,onChange:s=>G(s.target.value),children:[e.jsx("option",{value:"new",children:"ÿ™ÿ≥ÿ¨ŸäŸÑ ŸÉÿπÿßÿ¶ŸÑÿ© ÿ¨ÿØŸäÿØÿ©"}),V.map(([s,y])=>e.jsxs("option",{value:s,children:["ÿßŸÜÿ∂ŸÖÿßŸÖ ŸÑŸÄ ",y]},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:n.phone,onChange:s=>N({...n,phone:s.target.value}),placeholder:"079xxxxxxx"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ÿßŸÑÿ≠ÿ≤ÿßŸÖ ÿßŸÑÿ≠ÿßŸÑŸä"}),e.jsx("select",{className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl bg-white outline-none",value:n.belt,onChange:s=>N({...n,belt:s.target.value}),children:de.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-red-600 mb-1",children:"ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑÿßŸÅÿ™ÿ™ÿßÿ≠Ÿä (ÿØŸäŸÜÿßÿ±)"}),e.jsx("input",{type:"number",className:"w-full border-2 border-red-50 focus:border-red-500 p-2.5 rounded-xl outline-none bg-red-50/30",value:n.balance,onChange:s=>N({...n,balance:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÖŸäŸÑÿßÿØ"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:n.dob,onChange:s=>N({...n,dob:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßŸÑÿ™ÿ≠ÿßŸÇ"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:n.joinDate,onChange:s=>N({...n,joinDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-green-600 mb-1",children:"ŸÜŸáÿßŸäÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ"}),e.jsx("input",{type:"date",className:"w-full border-2 border-green-50 focus:border-green-500 p-2.5 rounded-xl outline-none bg-green-50/30",value:n.subEnd,onChange:s=>N({...n,subEnd:s.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ÿßŸÑÿπŸÜŸàÿßŸÜ"}),e.jsx("input",{className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:n.address,onChange:s=>N({...n,address:s.target.value}),placeholder:"ÿßŸÑŸÖÿØŸäŸÜÿ© - ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© - ÿßŸÑÿ¥ÿßÿ±ÿπ"})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end mt-8 pt-4 border-t border-gray-100",children:[e.jsx(A,{type:"button",variant:"ghost",onClick:Q,className:"text-gray-500 hover:bg-gray-100",children:"ÿ•ŸÑÿ∫ÿßÿ°"}),e.jsx(A,{type:"submit",className:"bg-yellow-500 text-black font-bold hover:bg-yellow-400 shadow-lg shadow-yellow-500/20 px-8",children:w?"ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™":"ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ∑ÿßŸÑÿ®"})]})]})]})})]})},Bs=({archiveCollection:r,studentsCollection:a,payments:l,logActivity:c})=>{const[o,i]=b.useState(null),[x,h]=b.useState(""),g=r.data.filter(t=>t.name.includes(x)),k=async t=>{if(!window.confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ•ÿπÿßÿØÿ© ÿ™ŸÅÿπŸäŸÑ ÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿßŸÑÿ∑ÿßŸÑÿ® ${t.name}ÿü`))return;const{archivedAt:w,originalId:S,id:f,...E}=t;await a.add({...E,status:"active",joinDate:new Date().toISOString().split("T")[0]}),await r.remove(t.id),c("ÿßÿ≥ÿ™ÿπÿßÿØÿ©",`ÿ™ŸÖÿ™ ÿßÿ≥ÿ™ÿπÿßÿØÿ© ÿßŸÑÿ∑ÿßŸÑÿ® ${t.name} ŸÖŸÜ ÿßŸÑÿ£ÿ±ÿ¥ŸäŸÅ`)},u=(t,w)=>{alert("Print functionality for: "+t.id)},p=t=>{if(!t)return;let w=t.replace(/\D/g,"");w.startsWith("0")&&(w=w.substring(1)),window.open(`https://wa.me/962${w}`,"_blank")},j=t=>{const w=t.originalId||t.id;return l.filter(S=>S.studentId===w||S.studentIds&&S.studentIds.includes(w))};return e.jsxs("div",{className:"space-y-6",children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60] p-4 backdrop-blur-sm",children:e.jsxs(H,{className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto",title:`ÿßŸÑŸÖŸÑŸÅ ÿßŸÑŸÖÿßŸÑŸä: ${o.name}`,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:`p-4 rounded-xl border-2 text-center ${o.balance>0?"bg-red-50 border-red-500":"bg-green-50 border-green-500"}`,children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑŸÖÿ™ÿ®ŸÇŸä (ÿ∞ŸÖŸÖ)"}),e.jsxs("p",{className:`text-2xl font-bold ${o.balance>0?"text-red-600":"text-green-600"}`,children:[o.balance," JOD"]})]}),e.jsxs("div",{className:"p-4 rounded-xl border bg-gray-50 text-center",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ£ÿ±ÿ¥ŸÅÿ©"}),e.jsx("p",{className:"text-xl font-bold",children:o.archivedAt||"ÿ∫Ÿäÿ± ŸÖÿ≥ÿ¨ŸÑ"})]})]}),e.jsxs("h4",{className:"font-bold border-b pb-2 mb-4 text-gray-800 flex items-center gap-2",children:[e.jsx(Ke,{size:18,className:"text-green-600"})," ÿ≥ÿ¨ŸÑ ÿßŸÑÿØŸÅÿπÿßÿ™ ŸàÿßŸÑŸàÿµŸÑÿßÿ™ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©"]}),j(o).length>0?e.jsx("div",{className:"space-y-3",children:j(o).map(t=>e.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-lg border hover:shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:t.reason}),e.jsxs("p",{className:"text-xs text-gray-500",children:[t.date," - ",t.branch]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"font-bold text-green-600",children:[t.amount," JOD"]}),e.jsx("button",{onClick:()=>u(t,t.branch),className:"text-gray-400 hover:text-black",title:"ÿ∑ÿ®ÿßÿπÿ© ŸÜÿ≥ÿÆÿ©",children:e.jsx(Se,{size:16})})]})]},t.id))}):e.jsx("div",{className:"text-center py-8 bg-gray-50 rounded border-2 border-dashed",children:e.jsx("p",{className:"text-gray-400",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ÿ≥ÿ¨ŸÑÿßÿ™ ŸÖÿßŸÑŸäÿ© ŸÖÿ§ÿ±ÿ¥ŸÅÿ© ŸÑŸáÿ∞ÿß ÿßŸÑÿ∑ÿßŸÑÿ®"})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(A,{onClick:()=>i(null),children:"ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÖŸÑŸÅ"})})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(fe,{className:"text-red-500"})," ÿ£ÿ±ÿ¥ŸäŸÅ ÿßŸÑÿ∑ŸÑÿßÿ®"]}),e.jsx("div",{className:"w-64",children:e.jsx("input",{className:"w-full border p-2 rounded shadow-sm",placeholder:"ÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿ£ÿ±ÿ¥ŸäŸÅ...",value:x,onChange:t=>h(t.target.value)})})]}),e.jsx(H,{noPadding:!0,children:g.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fe,{size:48,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"ÿßŸÑÿ£ÿ±ÿ¥ŸäŸÅ ŸÅÿßÿ±ÿ∫ ÿ≠ÿßŸÑŸäÿßŸã"})]}):e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"ÿßÿ≥ŸÖ ÿßŸÑÿ∑ÿßŸÑÿ®"}),e.jsx("th",{className:"p-4",children:"ÿßŸÑŸáÿßÿ™ŸÅ"}),e.jsx("th",{className:"p-4",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ£ÿ±ÿ¥ŸÅÿ©"}),e.jsx("th",{className:"p-4",children:"ÿßŸÑÿ∞ŸÖŸÖ ÿßŸÑŸÖÿßŸÑŸäÿ©"}),e.jsx("th",{className:"p-4",children:"ÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™"})]})}),e.jsx("tbody",{className:"divide-y",children:g.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsxs("td",{className:"p-4 font-bold text-gray-800",children:[t.name," ",e.jsx("br",{}),e.jsx("span",{className:"text-xs font-normal text-gray-500",children:t.belt})]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`tel:${t.phone}`,className:"hover:text-blue-600",children:t.phone}),e.jsx("button",{onClick:()=>p(t.phone),className:"text-green-500 hover:bg-green-100 p-1 rounded-full",children:e.jsx(he,{size:16})})]})}),e.jsx("td",{className:"p-4 text-gray-600",children:t.archivedAt}),e.jsx("td",{className:"p-4",children:Number(t.balance)>0?e.jsxs("span",{className:"bg-red-100 text-red-700 px-3 py-1 rounded-full font-bold text-xs",children:["ÿπŸÑŸäŸá ",t.balance," JOD"]}):e.jsxs("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full font-bold text-xs flex items-center gap-1 w-fit",children:[e.jsx(is,{size:12})," ÿÆÿßŸÑÿµ"]})}),e.jsxs("td",{className:"p-4 flex gap-2",children:[e.jsxs(A,{variant:"outline",className:"py-1 px-3 text-xs border-gray-300 hover:bg-gray-100 text-gray-700",onClick:()=>i(t),children:[e.jsx(cs,{size:14,className:"ml-1"})," ÿßŸÑŸÖŸÑŸÅ ÿßŸÑŸÖÿßŸÑŸä"]}),e.jsx("button",{onClick:()=>k(t),className:"bg-blue-50 text-blue-600 p-2 rounded hover:bg-blue-100 border border-blue-200",title:"ÿ•ÿπÿßÿØÿ© ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ∑ÿßŸÑÿ® (ÿßÿ≥ÿ™ÿ±ÿ¨ÿßÿπ)",children:e.jsx(Is,{size:16})}),e.jsx("button",{onClick:async()=>{window.confirm("ÿ≠ÿ∞ŸÅ ŸÜŸáÿßÿ¶Ÿä ŸÖŸÜ ÿßŸÑÿ≥ÿ¨ŸÑÿßÿ™ÿü ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ!")&&await r.remove(t.id)},className:"bg-red-50 text-red-600 p-2 rounded hover:bg-red-100 border border-red-200",title:"ÿ≠ÿ∞ŸÅ ŸÜŸáÿßÿ¶Ÿä",children:e.jsx(le,{size:16})})]})]},t.id))})]})})]})},Ks=({isOpen:r,onClose:a,reasons:l,onAdd:c,onDelete:o})=>{const[i,x]=b.useState("");return r?Je.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(ye,{size:20,className:"text-gray-600"})," ÿ•ÿØÿßÿ±ÿ© ÿ®ŸÜŸàÿØ ÿßŸÑÿØŸÅÿπ"]}),e.jsx("button",{onClick:a,children:e.jsx(me,{size:20,className:"text-gray-400 hover:text-red-500"})})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("input",{className:"flex-1 border-2 border-gray-200 rounded-xl px-4 py-2 focus:border-green-500 outline-none",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑÿ®ŸÜÿØ ÿßŸÑÿ¨ÿØŸäÿØ...",value:i,onChange:h=>x(h.target.value)}),e.jsx("button",{onClick:()=>{i&&(c(i),x(""))},className:"bg-green-600 text-white p-3 rounded-xl hover:bg-green-700",children:e.jsx(Ve,{size:20})})]}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[l.map((h,g)=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-xl border border-gray-100",children:[e.jsx("span",{className:"font-bold text-gray-700",children:h.title}),e.jsx("button",{onClick:()=>o(h),className:"text-red-500 hover:bg-red-50 p-2 rounded-lg transition-colors",children:e.jsx(le,{size:18})})]},g)),l.length===0&&e.jsx("p",{className:"text-center text-gray-400 text-sm",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ÿ®ŸÜŸàÿØ ŸÖÿ∂ÿßŸÅÿ©ÿå ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ŸÑÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸÜŸàÿØ"})]})]})]}),document.body):null};function Vs({students:r,payments:a,expenses:l,paymentsCollection:c,expensesCollection:o,selectedBranch:i,logActivity:x,financeReasons:h=[],financeReasonsCollection:g}){const[k,u]=b.useState("income"),[p,j]=b.useState({sid:"",amount:"",reason:"",customReason:"",details:"",method:"cash"}),[t,w]=b.useState({title:"",amount:"",date:new Date().toISOString().split("T")[0]}),[S,f]=b.useState(null),[E,q]=b.useState(!1),$=new Date().toISOString().split("T")[0],C=new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],[D,P]=b.useState({start:C,end:$}),J=a.filter(d=>d.branch===i),F=l.filter(d=>d.branch===i),T=(S?J.filter(d=>d.studentId===S):J).sort((d,R)=>new Date(R.createdAt||R.date)-new Date(d.createdAt||d.date)),n=[...F].sort((d,R)=>new Date(R.date)-new Date(d.date)),N=b.useMemo(()=>{const d=new Date(D.start),R=new Date(D.end);return d.setHours(0,0,0,0),R.setHours(23,59,59,999),J.filter(Z=>{const m=new Date(Z.date);return m>=d&&m<=R}).reduce((Z,m)=>(m.method==="cliq"?Z.cliq+=Number(m.amount):Z.cash+=Number(m.amount),Z),{cash:0,cliq:0})},[J,D]),L=async d=>{if(h.some(R=>R.title===d))return alert("Ÿáÿ∞ÿß ÿßŸÑÿ®ŸÜÿØ ŸÖŸàÿ¨ŸàÿØ ŸÖÿ≥ÿ®ŸÇÿßŸã");await g.add({title:d,branch:i,createdAt:new Date().toISOString()})},G=async d=>{confirm(`ÿ≠ÿ∞ŸÅ ÿßŸÑÿ®ŸÜÿØ "${d.title}"ÿü`)&&await g.remove(d.id)},V=async d=>{if(d.preventDefault(),!p.studentObjId)return alert("ÿßÿÆÿ™ÿ± ÿ∑ÿßŸÑÿ®ÿßŸã");const R=r.find(m=>m.id===p.studentObjId);if(!R)return alert("ÿ∑ÿßŸÑÿ® ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ");if(!p.reason&&h.length>0)return alert("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ÿ≥ÿ®ÿ® ÿßŸÑÿØŸÅÿπ");const se=p.reason==="ÿ£ÿÆÿ±Ÿâ"?p.customReason:p.reason,Z={id:Date.now().toString(),studentId:R.id,name:R.name,amount:Number(p.amount),reason:se,details:p.details,method:p.method,date:new Date().toISOString().split("T")[0],branch:i};await c.add(Z),x("ŸÇÿ®ÿ∂ ŸÖÿßŸÑŸä",`ÿßÿ≥ÿ™ŸÑÿßŸÖ ${p.amount} (${p.method==="cliq"?"Cliq":"ŸÜŸÇÿØÿßŸã"}) ŸÖŸÜ ${R.name}`),j({sid:"",amount:"",reason:"",customReason:"",details:"",method:"cash"})},Y=async d=>{d.preventDefault(),await o.add({id:Date.now().toString(),title:t.title,amount:Number(t.amount),date:t.date,branch:i}),x("ŸÖÿµÿ±ŸàŸÅ",`ÿµÿ±ŸÅ ${t.amount} ŸÑŸÄ ${t.title}`),w({title:"",amount:"",date:new Date().toISOString().split("T")[0]})},K=async d=>{confirm("ÿ≠ÿ∞ŸÅ ÿßŸÑÿ≥ŸÜÿØÿü")&&await c.remove(d)},re=async d=>{confirm("ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿµÿ±ŸàŸÅÿü")&&await o.remove(d)},Q=d=>{const R=window.open("","PRINT","height=800,width=1000"),se=window.location.origin+ie.LOGO,Z=d.method==="cliq"?"ŸÖÿ≠ŸÅÿ∏ÿ© ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿ© (Cliq)":"ŸÜŸÇÿØÿßŸã (Cash)",m=`
      <!DOCTYPE html>
      <html lang="ar" dir="rtl">
        <head>
          <meta charset="UTF-8">
          <title>ÿ≥ŸÜÿØ ŸÇÿ®ÿ∂ - ${d.name}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap');
            
            @page {
              size: A5 landscape; 
              margin: 0; 
            }

            body {
              font-family: 'Cairo', sans-serif;
              margin: 0;
              padding: 10mm; 
              background-color: white;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
              height: 100vh;
              box-sizing: border-box;
            }

            .receipt-border {
              border: 3px double #444;
              height: 96%; 
              position: relative;
              padding: 20px;
              box-sizing: border-box;
              display: flex;
              flex-direction: column;
              justify-content: space-between;
              overflow: hidden; 
            }

            .watermark {
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%) rotate(-25deg); 
              width: 50%; 
              opacity: 0.08; 
              z-index: 0;
              pointer-events: none;
              filter: grayscale(100%); 
            }

            .header {
              display: flex;
              justify-content: space-between;
              align-items: center;
              border-bottom: 2px solid #b45309;
              padding-bottom: 10px;
              margin-bottom: 15px;
              position: relative;
              z-index: 2;
            }

            .company-info h1 {
              margin: 0;
              font-size: 22px;
              color: #b45309;
              font-weight: 900;
            }
            .company-info p {
              margin: 2px 0;
              font-size: 12px;
              font-weight: bold;
              color: #555;
            }

            .logo img {
              height: 70px;
              object-fit: contain;
            }

            .meta-info {
              text-align: left;
              font-size: 12px;
              border-right: 2px solid #eee;
              padding-right: 10px;
            }
            .meta-info div { margin-bottom: 3px; }

            .content {
              position: relative;
              z-index: 2;
              flex-grow: 1;
            }

            .title {
              text-align: center;
              font-size: 24px;
              font-weight: 900;
              margin: 10px 0 20px;
              text-decoration: underline;
              text-decoration-color: #b45309;
              text-underline-offset: 5px;
            }

            .row {
              display: flex;
              align-items: baseline;
              margin-bottom: 12px;
              font-size: 16px;
            }

            .label {
              font-weight: bold;
              width: 110px;
              color: #333;
            }

            .value {
              flex: 1;
              border-bottom: 1px dotted #888;
              font-weight: 700;
              padding: 0 5px;
            }

            .amount-container {
              position: absolute;
              left: 20px;
              top: 40px;
              border: 2px solid #333;
              padding: 5px 15px;
              border-radius: 8px;
              background: #f9f9f9;
              transform: rotate(-5deg); 
              box-shadow: 2px 2px 0 #ccc;
            }
            .amount-number {
              font-size: 20px;
              font-weight: 900;
              direction: ltr;
            }

            .footer {
              margin-top: 20px;
              position: relative;
              z-index: 2;
            }

            .signatures {
              display: flex;
              justify-content: space-between;
              padding: 0 40px;
              margin-bottom: 15px;
            }
            .sign-box {
              text-align: center;
              width: 150px;
            }
            .sign-line {
              border-top: 1px solid #333;
              margin-bottom: 5px;
            }
            .sign-title { font-size: 12px; font-weight: bold; color: #555; }

            .branches-box {
              border-top: 2px solid #b45309;
              padding-top: 8px;
              font-size: 10px;
              display: flex;
              justify-content: space-between;
              background: #fff;
            }
            
            .branch {
              display: flex;
              flex-direction: column;
              width: 48%;
            }
            .branch span { display: block; margin-bottom: 2px; }
            .phone { direction: ltr; text-align: right; font-weight: bold; }

          </style>
        </head>
        <body>
          <div class="receipt-border">
            
            <img src="${se}" class="watermark" onerror="this.style.display='none'"/>

            <div class="header">
              <div class="company-info">
                <h1>ÿ£ŸÉÿßÿØŸäŸÖŸäÿ© ÿßŸÑÿ¥ÿ¨ÿßÿπ ŸÑŸÑÿ™ÿßŸäŸÉŸàÿßŸÜÿØŸà</h1>
                <p>ŸÅÿ±ÿπ: ${i}</p>
              </div>
              <div class="logo">
                <img src="${se}" onerror="this.style.display='none'"/>
              </div>
              <div class="meta-info">
                <div>ÿ±ŸÇŸÖ ÿßŸÑÿ≥ŸÜÿØ: <strong>${d.id.slice(-6)}</strong></div>
                <div>ÿßŸÑÿ™ÿßÿ±ŸäÿÆ: <strong>${d.date}</strong></div>
              </div>
            </div>

            <div class="content">
              <div class="title">ÿ≥ŸÜÿØ ŸÇÿ®ÿ∂</div>
              
              <div class="amount-container">
                <div class="amount-number">${d.amount} JD</div>
              </div>

              <div class="row">
                <span class="label">ÿßÿ≥ÿ™ŸÑŸÖŸÜÿß ŸÖŸÜ:</span>
                <span class="value">${d.name}</span>
              </div>
              <div class="row">
                <span class="label">ŸÖÿ®ŸÑÿ∫ ŸàŸÇÿØÿ±Ÿá:</span>
                <span class="value">${d.amount} ÿØŸäŸÜÿßÿ± ÿ£ÿ±ÿØŸÜŸä</span>
              </div>
              <div class="row">
                <span class="label">ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ:</span>
                <span class="value">${Z}</span>
              </div>
              <div class="row">
                <span class="label">Ÿàÿ∞ŸÑŸÉ ÿπŸÜ:</span>
                <span class="value">${d.reason} ${d.details?`(${d.details})`:""}</span>
              </div>
            </div>

            <div class="footer">
              <div class="signatures">
                <div class="sign-box">
                  <div class="sign-line"></div>
                  <div class="sign-title">ÿ™ŸàŸÇŸäÿπ ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®</div>
                </div>
                <div class="sign-box">
                  <div class="sign-line"></div>
                  <div class="sign-title">ÿ™ŸàŸÇŸäÿπ ÿßŸÑŸÖÿ≥ÿ™ŸÑŸÖ</div>
                </div>
              </div>

              <div class="branches-box">
                <div class="branch">
                  <span style="font-weight:bold; color:#b45309">ÿßŸÑŸÅÿ±ÿπ ÿßŸÑÿ£ŸàŸÑ: ÿ¥ŸÅÿßÿ®ÿØÿ±ÿßŸÜ</span>
                  <span>ÿ¥ÿßÿ±ÿπ ÿ±ŸÅÿπÿ™ ÿ¥ŸÖŸàÿ∑</span>
                  <span class="phone">079 5629 606</span>
                </div>
                <div class="branch">
                  <span style="font-weight:bold; color:#b45309">ÿßŸÑŸÅÿ±ÿπ ÿßŸÑÿ´ÿßŸÜŸä: ÿ£ÿ®Ÿà ŸÜÿµŸäÿ±</span>
                  <span>ÿØŸàÿßÿ± ÿßŸÑÿ®ÿ≠ÿ±Ÿäÿ© - ŸÖÿ¨ŸÖÿπ ÿßŸÑŸÅÿ±Ÿëÿß</span>
                  <span class="phone">079 0368 603</span>
                </div>
              </div>
            </div>

          </div>
        </body>
      </html>
    `;R.document.write(m),R.document.close(),R.onload=()=>{R.focus(),setTimeout(()=>{R.print(),R.close()},500)}};return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20 md:pb-0",children:[e.jsx(Ks,{isOpen:E,onClose:()=>q(!1),reasons:h,onAdd:L,onDelete:G}),e.jsxs(H,{className:"border-b-4 border-gray-800 bg-gradient-to-br from-gray-50 to-white",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end md:items-center mb-4 gap-4",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ke,{size:20,className:"text-yellow-500"}),"ŸÖŸÑÿÆÿµ ÿßŸÑÿ™ÿ≠ÿµŸäŸÑ (ŸÉÿßÿ¥ / Cliq)"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white p-1 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 mr-2",children:"ŸÖŸÜ:"}),e.jsx("input",{type:"date",value:D.start,onChange:d=>P({...D,start:d.target.value}),className:"text-sm bg-gray-50 border rounded px-2 py-1 outline-none focus:border-yellow-500"}),e.jsx("span",{className:"text-xs font-bold text-gray-500 mx-1",children:"ÿ•ŸÑŸâ:"}),e.jsx("input",{type:"date",value:D.end,onChange:d=>P({...D,end:d.target.value}),className:"text-sm bg-gray-50 border rounded px-2 py-1 outline-none focus:border-yellow-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100 flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 font-bold mb-1",children:[e.jsx(qe,{size:18})," ŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÉÿßÿ¥ (Cash)"]}),e.jsxs("div",{className:"text-2xl font-black text-green-600",children:[N.cash," JD"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100 flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-700 font-bold mb-1",children:[e.jsx(Te,{size:18})," ŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÉŸÑŸäŸÉ (Cliq)"]}),e.jsxs("div",{className:"text-2xl font-black text-purple-600",children:[N.cliq," JD"]})]})]})]}),e.jsxs("div",{className:"flex gap-4 mb-6 bg-gray-100 p-1 rounded-2xl",children:[e.jsx("button",{onClick:()=>u("income"),className:`flex-1 py-3 rounded-xl font-bold transition-all shadow-sm ${k==="income"?"bg-green-600 text-white shadow-green-200":"bg-white text-gray-500 hover:bg-gray-50"}`,children:"ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™ (ÿßŸÑŸÇÿ®ÿ∂)"}),e.jsx("button",{onClick:()=>u("expense"),className:`flex-1 py-3 rounded-xl font-bold transition-all shadow-sm ${k==="expense"?"bg-red-600 text-white shadow-red-200":"bg-white text-gray-500 hover:bg-gray-50"}`,children:"ÿßŸÑŸÖÿµÿßÿ±ŸäŸÅ"})]}),k==="income"?e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"ÿ≥ŸÜÿØ ŸÇÿ®ÿ∂ ÿ¨ÿØŸäÿØ",className:"border-green-100 shadow-green-50",children:e.jsxs("form",{onSubmit:V,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{className:"relative col-span-1 md:col-span-1",children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"ÿßÿ≥ŸÖ ÿßŸÑÿ∑ÿßŸÑÿ®"}),e.jsx(ss,{students:r,onSelect:d=>j({...p,sid:d.name,studentObjId:d.id}),placeholder:"ÿßÿ®ÿ≠ÿ´..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"ÿßŸÑŸÖÿ®ŸÑÿ∫"}),e.jsx("input",{type:"number",className:"w-full border-2 border-gray-100 p-2 rounded-xl focus:border-green-500 outline-none",value:p.amount,onChange:d=>j({...p,amount:d.target.value}),required:!0,placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ"}),e.jsxs("div",{className:"flex gap-2 bg-gray-50 p-1 rounded-xl border border-gray-100",children:[e.jsxs("button",{type:"button",onClick:()=>j({...p,method:"cash"}),className:`flex-1 flex items-center justify-center gap-1 py-1.5 rounded-lg text-sm font-bold transition-colors ${p.method==="cash"?"bg-white text-green-600 shadow-sm ring-1 ring-green-200":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(qe,{size:14})," ŸÜŸÇÿØÿßŸã"]}),e.jsxs("button",{type:"button",onClick:()=>j({...p,method:"cliq"}),className:`flex-1 flex items-center justify-center gap-1 py-1.5 rounded-lg text-sm font-bold transition-colors ${p.method==="cliq"?"bg-white text-purple-600 shadow-sm ring-1 ring-purple-200":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(Te,{size:14})," Cliq"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"text-xs block mb-1 font-bold text-gray-700 flex justify-between",children:["ÿßŸÑÿ≥ÿ®ÿ®",e.jsxs("button",{type:"button",onClick:()=>q(!0),className:"text-green-600 hover:text-green-800 text-[10px] flex items-center gap-1 bg-green-50 px-2 py-0.5 rounded cursor-pointer",children:[e.jsx(ye,{size:10})," ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"]})]}),e.jsxs("select",{className:"w-full border-2 border-gray-100 p-2 rounded-xl focus:border-green-500 outline-none bg-white cursor-pointer",value:p.reason,onChange:d=>j({...p,reason:d.target.value}),children:[e.jsx("option",{value:"",disabled:!0,children:"ÿßÿÆÿ™ÿ± ÿßŸÑÿ≥ÿ®ÿ®..."}),h.map((d,R)=>e.jsx("option",{value:d.title,children:d.title},R)),e.jsx("option",{value:"ÿ£ÿÆÿ±Ÿâ",children:"ÿ£ÿÆÿ±Ÿâ (ŸÉÿ™ÿßÿ®ÿ© ŸäÿØŸàŸäÿ©)"})]})]}),p.reason==="ÿ£ÿÆÿ±Ÿâ"&&e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"Ÿàÿ∂ÿ≠ ÿßŸÑÿ≥ÿ®ÿ®"}),e.jsx("input",{className:"w-full border-2 border-gray-100 p-2 rounded-xl outline-none",value:p.customReason,onChange:d=>j({...p,customReason:d.target.value}),required:!0})]}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"ÿ™ŸÅÿßÿµŸäŸÑ ÿ•ÿ∂ÿßŸÅŸäÿ© (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("input",{className:"w-full border-2 border-gray-100 p-2 rounded-xl outline-none",value:p.details,onChange:d=>j({...p,details:d.target.value}),placeholder:"ŸÖÿ´ÿßŸÑ: ÿπŸÜ ÿ¥Ÿáÿ± 12 + 1"})]}),e.jsx("div",{className:"col-span-1 md:col-span-3 mt-2",children:e.jsx(A,{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white shadow-lg shadow-green-600/20 py-3",children:"ÿ≠ŸÅÿ∏ ŸàŸÇÿ®ÿ∂"})})]})}),e.jsx("div",{className:"flex items-center gap-2 mb-2 w-full md:w-64",children:e.jsx(ss,{students:r,onSelect:d=>f(d.id),onClear:()=>f(null),placeholder:"ŸÅŸÑÿ™ÿ±ÿ© ÿ≠ÿ≥ÿ® ÿßŸÑÿ∑ÿßŸÑÿ®...",showAllOption:!0})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(H,{children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 rounded-r-lg",children:"#"}),e.jsx("th",{className:"p-3",children:"ÿßŸÑÿ∑ÿßŸÑÿ®"}),e.jsx("th",{className:"p-3",children:"ÿßŸÑÿ®ŸäÿßŸÜ"}),e.jsx("th",{className:"p-3",children:"ÿßŸÑÿ∑ÿ±ŸäŸÇÿ©"})," ",e.jsx("th",{className:"p-3",children:"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ"}),e.jsx("th",{className:"p-3",children:"ÿßŸÑŸÖÿ®ŸÑÿ∫"}),e.jsx("th",{className:"p-3",children:"ÿ∑ÿ®ÿßÿπÿ©"}),e.jsx("th",{className:"p-3 rounded-l-lg",children:"ÿ≠ÿ∞ŸÅ"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[T.map(d=>e.jsxs("tr",{className:"hover:bg-green-50 transition-colors",children:[e.jsx("td",{className:"p-3 text-gray-400 font-mono text-xs",children:d.id.slice(-6)}),e.jsx("td",{className:"p-3 font-bold text-gray-800",children:d.name}),e.jsxs("td",{className:"p-3 text-gray-600",children:[e.jsx("span",{className:"block font-bold text-xs",children:d.reason}),e.jsx("span",{className:"text-[10px] text-gray-400",children:d.details})]}),e.jsx("td",{className:"p-3",children:d.method==="cliq"?e.jsx("span",{className:"text-[10px] font-bold text-purple-600 bg-purple-50 px-2 py-1 rounded-md",children:"Cliq"}):e.jsx("span",{className:"text-[10px] font-bold text-green-600 bg-green-50 px-2 py-1 rounded-md",children:"Cash"})}),e.jsx("td",{className:"p-3 text-xs text-gray-500",children:d.date}),e.jsxs("td",{className:"p-3 font-bold text-green-600",children:["+",d.amount]}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>Q(d),className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 text-gray-600",children:e.jsx(Se,{size:16})})}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>K(d.id),className:"p-2 bg-red-50 rounded-lg hover:bg-red-100 text-red-500",children:e.jsx(le,{size:16})})})]},d.id)),T.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-8 text-center text-gray-400",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ÿ≥ŸÜÿØÿßÿ™"})})]})]})})}),e.jsxs("div",{className:"md:hidden grid gap-4",children:[T.map(d=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col gap-3 relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${d.method==="cliq"?"bg-purple-500":"bg-green-500"}`}),e.jsxs("div",{className:"flex justify-between items-start pl-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ds,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"font-bold text-gray-800",children:d.name})]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[e.jsx(Ie,{size:12})," ",d.date]})]}),e.jsxs("div",{className:"text-green-600 font-bold text-lg bg-green-50 px-2 py-1 rounded-lg",children:["+",d.amount]})]}),e.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg text-sm text-gray-600 flex items-start gap-2",children:[e.jsx(cs,{size:14,className:"mt-1 text-gray-400 shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-bold block text-xs text-gray-700",children:d.reason}),e.jsx("span",{className:"text-[10px]",children:d.details})]}),d.method==="cliq"?e.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded",children:"Cliq"}):e.jsx("span",{className:"text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded",children:"Cash"})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-1 border-t pt-3 border-gray-100",children:[e.jsxs("button",{onClick:()=>Q(d),className:"flex items-center gap-1 text-xs bg-blue-50 text-blue-600 px-3 py-2 rounded-lg font-bold",children:[e.jsx(Se,{size:14})," ÿ∑ÿ®ÿßÿπÿ©"]}),e.jsxs("button",{onClick:()=>K(d.id),className:"flex items-center gap-1 text-xs bg-red-50 text-red-600 px-3 py-2 rounded-lg font-bold",children:[e.jsx(le,{size:14})," ÿ≠ÿ∞ŸÅ"]})]})]},d.id)),T.length===0&&e.jsx("div",{className:"text-center p-8 text-gray-400 bg-gray-50 rounded-xl border border-dashed",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ÿ≥ŸÜÿØÿßÿ™"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"ÿ™ÿ≥ÿ¨ŸäŸÑ ŸÖÿµÿ±ŸàŸÅ",className:"border-red-100 shadow-red-50",children:e.jsxs("form",{onSubmit:Y,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"ÿßŸÑÿ®ŸÜÿØ (ÿ≥ÿ®ÿ® ÿßŸÑÿµÿ±ŸÅ)"}),e.jsx("input",{className:"w-full border-2 border-gray-100 p-2 rounded-xl focus:border-red-500 outline-none",value:t.title,onChange:d=>w({...t,title:d.target.value}),required:!0,placeholder:"ŸÖÿ´ÿßŸÑ: ŸÅÿßÿ™Ÿàÿ±ÿ© ŸÉŸáÿ±ÿ®ÿßÿ°"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"ÿßŸÑŸÖÿ®ŸÑÿ∫"}),e.jsx("input",{type:"number",className:"w-full border-2 border-gray-100 p-2 rounded-xl focus:border-red-500 outline-none",value:t.amount,onChange:d=>w({...t,amount:d.target.value}),required:!0,placeholder:"0.00"})]}),e.jsx("div",{children:e.jsx(A,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-600/20 py-2.5",children:"ÿ≠ŸÅÿ∏"})})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(H,{children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 rounded-r-lg",children:"ÿßŸÑÿ®ŸÜÿØ"}),e.jsx("th",{className:"p-3",children:"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ"}),e.jsx("th",{className:"p-3",children:"ÿßŸÑŸÖÿ®ŸÑÿ∫"}),e.jsx("th",{className:"p-3 rounded-l-lg",children:"ÿ≠ÿ∞ŸÅ"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:n.map(d=>e.jsxs("tr",{className:"hover:bg-red-50 transition-colors",children:[e.jsx("td",{className:"p-3 font-bold text-gray-700",children:d.title}),e.jsx("td",{className:"p-3 text-gray-500 text-xs",children:d.date}),e.jsxs("td",{className:"p-3 text-red-600 font-bold",children:["-",d.amount]}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>re(d.id),className:"text-red-500 p-2 bg-red-50 rounded-lg hover:bg-red-100",children:e.jsx(le,{size:16})})})]},d.id))})]})})}),e.jsxs("div",{className:"md:hidden grid gap-4",children:[n.map(d=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-red-500"}),e.jsxs("div",{className:"pl-3",children:[e.jsx("h4",{className:"font-bold text-gray-800",children:d.title}),e.jsx("span",{className:"text-xs text-gray-400 block mt-1",children:d.date})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("span",{className:"font-bold text-red-600 text-lg",children:["-",d.amount]}),e.jsx("button",{onClick:()=>re(d.id),className:"text-red-400 hover:text-red-600 bg-red-50 p-1.5 rounded-lg",children:e.jsx(le,{size:16})})]})]},d.id)),n.length===0&&e.jsx("div",{className:"text-center p-8 text-gray-400 bg-gray-50 rounded-xl border border-dashed",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ŸÖÿµÿßÿ±ŸäŸÅ"})]})]})]})}const Ys=({isOpen:r,onClose:a,groups:l,onAdd:c,onDelete:o})=>{const[i,x]=b.useState("");return r?Je.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-fade-in",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(ye,{size:20,className:"text-gray-600"})," ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÅÿ™ÿ±ÿßÿ™ ŸàÿßŸÑŸÖÿ¨ŸÖŸàÿπÿßÿ™"]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("input",{className:"flex-1 border-2 border-gray-200 rounded-xl px-4 py-2 focus:border-blue-500 outline-none",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÅÿ™ÿ±ÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ©...",value:i,onChange:h=>x(h.target.value)}),e.jsx("button",{onClick:()=>{i&&(c(i),x(""))},className:"bg-blue-600 text-white p-3 rounded-xl hover:bg-blue-700",children:e.jsx(Ve,{size:20})})]}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4",children:[l.map((h,g)=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-xl border border-gray-100",children:[e.jsx("span",{className:"font-bold text-gray-700",children:h.name}),e.jsx("button",{onClick:()=>o(h),className:"text-red-500 hover:bg-red-50 p-2 rounded-lg transition-colors",children:e.jsx(le,{size:18})})]},g)),l.length===0&&e.jsx("p",{className:"text-center text-gray-400 text-sm",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ŸÅÿ™ÿ±ÿßÿ™ ŸÖÿ∂ÿßŸÅÿ©"})]}),e.jsx(A,{onClick:a,variant:"outline",className:"w-full",children:"ÿ•ÿ∫ŸÑÿßŸÇ"})]})]}),document.body):null};function Zs({students:r,studentsCollection:a,groups:l=[],groupsCollection:c,selectedBranch:o}){const[i,x]=b.useState(new Date),[h,g]=b.useState(new Date().getDate()),[k,u]=b.useState(""),[p,j]=b.useState(1),[t,w]=b.useState(10),[S,f]=b.useState(!1),[E,q]=b.useState(!1),[$,C]=b.useState("ÿßŸÑŸÉŸÑ"),D=b.useMemo(()=>l?l.map(m=>m.name):[],[l]),P=async m=>{var z;if(D.includes(m))return alert("Ÿáÿ∞Ÿá ÿßŸÑŸÅÿ™ÿ±ÿ© ŸÖŸàÿ¨ŸàÿØÿ© ŸÖÿ≥ÿ®ŸÇÿßŸã");await c.add({name:m,branch:o||((z=r[0])==null?void 0:z.branch)||"ÿπÿßŸÖ"})},J=async m=>{confirm(`ÿ≠ÿ∞ŸÅ ÿßŸÑŸÅÿ™ÿ±ÿ© "${m.name}"ÿü`)&&(await c.remove(m.id),$===m.name&&C("ÿßŸÑŸÉŸÑ"))},F=i.getFullYear(),T=i.getMonth(),n=new Date(F,T+1,0).getDate(),N=["ŸäŸÜÿßŸäÿ±","ŸÅÿ®ÿ±ÿßŸäÿ±","ŸÖÿßÿ±ÿ≥","ÿ£ÿ®ÿ±ŸäŸÑ","ŸÖÿßŸäŸà","ŸäŸàŸÜŸäŸà","ŸäŸàŸÑŸäŸà","ÿ£ÿ∫ÿ≥ÿ∑ÿ≥","ÿ≥ÿ®ÿ™ŸÖÿ®ÿ±","ÿ£ŸÉÿ™Ÿàÿ®ÿ±","ŸÜŸàŸÅŸÖÿ®ÿ±","ÿØŸäÿ≥ŸÖÿ®ÿ±"],L=["ÿ£ÿ≠ÿØ","ÿ•ÿ´ŸÜŸäŸÜ","ÿ´ŸÑÿßÿ´ÿßÿ°","ÿ£ÿ±ÿ®ÿπÿßÿ°","ÿÆŸÖŸäÿ≥","ÿ¨ŸÖÿπÿ©","ÿ≥ÿ®ÿ™"],G=Array.from({length:8},(m,z)=>2023+z),V=(m,z)=>{const M=new Date(i);m!==null&&M.setFullYear(m),z!==null&&M.setMonth(z),x(M),g(1)},Y=m=>{const z=new Date(F,T+1,0).getDate();let M=h+m;M>z&&(M=z),M<1&&(M=1),g(M)},K=b.useMemo(()=>{let m=Array.isArray(r)?[...r]:[];return $!=="ÿßŸÑŸÉŸÑ"&&(m=m.filter(z=>z.group===$)),m.sort((z,M)=>(z.customOrder||999999)-(M.customOrder||999999)),k&&(m=m.filter(z=>z.name.toLowerCase().includes(k.toLowerCase()))),m},[r,k,$]),re=Math.ceil(K.length/t),Q=S?K:K.slice((p-1)*t,p*t),d=async(m,z)=>{const M=`${F}-${String(T+1).padStart(2,"0")}-${String(z).padStart(2,"0")}`,s={...r.find(y=>y.id===m).attendance||{}};s[M]?delete s[M]:s[M]=!0,await a.update(m,{attendance:s})},R=async(m,z)=>{let M=z-1;if(M<0&&(M=0),M>=K.length&&(M=K.length-1),M===m)return;const O=[...K],[s]=O.splice(m,1);O.splice(M,0,s);const y=O.map((I,U)=>a.update(I.id,{customOrder:U+1}));await Promise.all(y)},se=async(m,z)=>{confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ŸÜŸÇŸÑ ÿßŸÑÿ∑ÿßŸÑÿ® ŸÑŸáÿ∞Ÿá ÿßŸÑŸÅÿ™ÿ±ÿ©ÿü")&&await a.update(m,{group:z})},Z=()=>{const m=window.open("","PRINT","height=800,width=1200"),z=window.location.origin+ie.LOGO;let M="";for(let y=1;y<=n;y++)M+=`<th style="font-size:10px; width:20px; border:1px solid #ccc; background:#f9f9f9;">${y}</th>`;let O="";K.forEach((y,I)=>{var W;let U="";for(let v=1;v<=n;v++){const _=`${F}-${String(T+1).padStart(2,"0")}-${String(v).padStart(2,"0")}`,B=(W=y.attendance)==null?void 0:W[_],oe=new Date(F,T,v).getDay()===5;let ce="",ae="";oe?ae="#eee":B&&(ce="‚úì",ae="#dcfce7"),U+=`<td style="border:1px solid #ccc; background:${ae}; text-align:center; font-size:12px; color:#166534; font-weight:bold;">${ce}</td>`}O+=`
            <tr>
                <td style="border:1px solid #ccc; padding:5px; font-weight:bold; text-align:center;">${I+1}</td>
                <td style="border:1px solid #ccc; padding:5px; text-align:right;">${y.name}</td>
                <td style="border:1px solid #ccc; padding:5px; text-align:center; font-size:11px;">${y.group||"-"}</td>
                ${U}
            </tr>
        `});const s=`
      <!DOCTYPE html>
      <html lang="ar" dir="rtl">
        <head>
          <title>ŸÉÿ¥ŸÅ ÿßŸÑÿ≠ÿ∂Ÿàÿ± - ${N[T]} ${F}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
            body { font-family: 'Cairo', sans-serif; padding: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            h1 { text-align: center; color: #b45309; margin-bottom: 5px; }
            .header-info { text-align: center; margin-bottom: 20px; font-weight:bold; color:#555; }
            @page { size: A4 landscape; margin: 10mm; }
          </style>
        </head>
        <body>
            <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid #b45309; padding-bottom:10px;">
                <div>
                    <h1>ÿ£ŸÉÿßÿØŸäŸÖŸäÿ© ÿßŸÑÿ¥ÿ¨ÿßÿπ ŸÑŸÑÿ™ÿßŸäŸÉŸàÿßŸÜÿØŸà</h1>
                    <div style="font-size:12px;">ŸÅÿ±ÿπ: ${o}</div>
                </div>
                <img src="${z}" style="height:60px;" onerror="this.style.display='none'"/>
            </div>

            <div class="header-info">
                ÿ≥ÿ¨ŸÑ ÿßŸÑÿ≠ÿ∂Ÿàÿ± ŸàÿßŸÑÿ∫Ÿäÿßÿ® | ÿ¥Ÿáÿ±: ${N[T]} ${F} | ÿßŸÑŸÖÿ¨ŸÖŸàÿπÿ©: ${$}
            </div>

            <table>
                <thead>
                    <tr>
                        <th style="border:1px solid #ccc; background:#eee; width:30px;">#</th>
                        <th style="border:1px solid #ccc; background:#eee; width:200px;">ÿßÿ≥ŸÖ ÿßŸÑÿ∑ÿßŸÑÿ®</th>
                        <th style="border:1px solid #ccc; background:#eee; width:80px;">ÿßŸÑŸÖÿ¨ŸÖŸàÿπÿ©</th>
                        ${M}
                    </tr>
                </thead>
                <tbody>
                    ${O}
                </tbody>
            </table>
            
            <div style="margin-top:20px; font-size:10px; text-align:left; color:#777;">
                ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ∑ÿ®ÿßÿπÿ©: ${new Date().toLocaleDateString("ar-JO")}
            </div>
        </body>
      </html>
    `;m.document.write(s),m.document.close(),m.onload=()=>{m.focus(),setTimeout(()=>{m.print(),m.close()},500)}};return e.jsxs("div",{className:"space-y-6 animate-fade-in font-sans",children:[e.jsx(Ys,{isOpen:E,onClose:()=>q(!1),groups:l||[],onAdd:P,onDelete:J}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col xl:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-gray-50 p-2 rounded-xl border border-gray-200 justify-center w-full md:w-auto",children:[e.jsx(Ie,{size:18,className:"text-gray-500 ml-1"}),e.jsx("select",{className:"bg-transparent font-bold text-gray-700 outline-none cursor-pointer",value:T,onChange:m=>V(null,parseInt(m.target.value)),children:N.map((m,z)=>e.jsx("option",{value:z,children:m},z))}),e.jsx("select",{className:"bg-transparent font-bold text-gray-700 outline-none cursor-pointer",value:F,onChange:m=>V(parseInt(m.target.value),null),children:G.map(m=>e.jsx("option",{value:m,children:m},m))})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 p-2 pl-3 rounded-xl border border-blue-100 w-full md:w-auto",children:[e.jsx(ze,{size:18,className:"text-blue-500 ml-1"}),e.jsx("span",{className:"text-xs font-bold text-blue-800 ml-1 hidden sm:inline",children:"ÿßŸÑŸÅÿ™ÿ±ÿ©:"}),e.jsx("div",{className:"relative group",children:e.jsxs("select",{className:"bg-transparent text-blue-900 font-bold outline-none w-full md:w-40 cursor-pointer appearance-none pr-4",value:$,onChange:m=>{C(m.target.value),j(1)},children:[e.jsx("option",{value:"ÿßŸÑŸÉŸÑ",children:"ÿßŸÑŸÉŸÑ (ÿ¨ŸÖŸäÿπ ÿßŸÑÿ∑ŸÑÿßÿ®)"}),D.map((m,z)=>e.jsx("option",{value:m,children:m},z))]})}),e.jsx("button",{onClick:()=>q(!0),className:"bg-white p-1.5 rounded-lg text-blue-500 hover:text-blue-700 hover:shadow-sm border border-transparent hover:border-blue-200 transition-all",title:"ÿ•ÿ∂ÿßŸÅÿ©/ÿ≠ÿ∞ŸÅ ŸÅÿ™ÿ±ÿßÿ™",children:e.jsx(ye,{size:16})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full xl:w-auto",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(We,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"ÿ®ÿ≠ÿ´...",className:"w-full pl-4 pr-10 py-2.5 border-2 border-gray-100 rounded-xl focus:border-yellow-500 outline-none",value:k,onChange:m=>{u(m.target.value),j(1)}})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(A,{variant:S?"default":"outline",onClick:()=>f(!S),className:`gap-2 whitespace-nowrap ${S?"bg-yellow-500 text-black border-none":""}`,children:[S?e.jsx(As,{size:18}):e.jsx(Ms,{size:18}),S?"ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ±ÿ™Ÿäÿ®":"ÿ™ÿ±ÿ™Ÿäÿ®"]}),e.jsxs(A,{onClick:Z,className:"bg-gray-800 text-white gap-2 hover:bg-black",title:"ÿ∑ÿ®ÿßÿπÿ© ÿßŸÑŸÉÿ¥ŸÅ",children:[e.jsx(Se,{size:18})," ",e.jsx("span",{className:"hidden md:inline",children:"ÿ∑ÿ®ÿßÿπÿ©"})]})]})]})]}),e.jsxs("div",{className:"md:hidden space-y-4",children:[e.jsxs("div",{className:"bg-yellow-500 text-black p-4 rounded-xl shadow-lg flex justify-between items-center",children:[e.jsx("button",{onClick:()=>Y(-1),className:"p-2 bg-white/20 rounded-lg",children:e.jsx(Ce,{})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs opacity-75 font-bold mb-1",children:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ≠ÿ∂Ÿàÿ±"}),e.jsx("div",{className:"text-xl font-bold flex flex-col",children:e.jsxs("span",{children:[h," ",N[T]]})})]}),e.jsx("button",{onClick:()=>Y(1),className:"p-2 bg-white/20 rounded-lg",children:e.jsx(Be,{})})]}),e.jsx("div",{className:"grid gap-3",children:Q.map((m,z)=>{var y;const M=`${F}-${String(T+1).padStart(2,"0")}-${String(h).padStart(2,"0")}`,O=!!((y=m.attendance)!=null&&y[M]),s=new Date(F,T,h).getDay()===5;return e.jsx("div",{className:"p-4 rounded-xl border border-gray-100 bg-white shadow-sm",children:e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center font-bold text-gray-500 text-sm",children:(p-1)*t+z+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800",children:m.name}),e.jsx("div",{className:"relative mt-1",children:e.jsx("select",{className:"text-[10px] bg-blue-50 text-blue-700 px-2 py-0.5 rounded-md outline-none border-none font-bold w-full appearance-none",value:m.group||(D.length>0?D[0]:""),onChange:I=>se(m.id,I.target.value),children:D.map((I,U)=>e.jsx("option",{value:I,children:I},U))})})]})]}),!S&&(s?e.jsx("span",{className:"text-xs font-bold text-red-500 bg-red-50 px-2 py-1 rounded",children:"ÿπÿ∑ŸÑÿ©"}):e.jsx("button",{onClick:()=>d(m.id,h),className:`w-10 h-10 rounded-full flex items-center justify-center ${O?"bg-green-500 text-white":"bg-gray-100 text-gray-300"}`,children:O?e.jsx(es,{size:20}):e.jsx("span",{className:"w-3 h-3 bg-gray-300 rounded-full"})}))]})},m.id)})})]}),e.jsx(H,{className:"hidden md:block overflow-visible p-0 border-none shadow-md rounded-2xl",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsx("thead",{className:"bg-gray-800 text-white sticky top-0 z-20",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"p-4 sticky right-0 bg-gray-800 z-30 text-right min-w-[280px] font-bold text-base shadow-lg",children:["ÿßŸÑÿ∑ŸÑÿßÿ® ",$!=="ÿßŸÑŸÉŸÑ"&&e.jsxs("span",{className:"text-yellow-400 text-sm",children:["(",$,")"]})]}),!S&&[...Array(n)].map((m,z)=>{const M=z+1,O=new Date(F,T,M).getDay()===5;return e.jsx("th",{className:`p-2 border-l border-gray-700 text-center min-w-[40px] ${O?"bg-red-900/40 text-red-100":""}`,children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"opacity-60 text-[10px]",children:L[new Date(F,T,M).getDay()]}),e.jsx("span",{children:M})]})},z)}),S&&e.jsx("th",{className:"p-4 text-center w-64 bg-yellow-600/90 text-white",children:"ÿßŸÑÿ™ÿ±ÿ™Ÿäÿ®"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:Q.map((m,z)=>{const M=(p-1)*t+z+1;return e.jsxs("tr",{className:"hover:bg-yellow-50 transition-colors group",children:[e.jsx("td",{className:"p-3 sticky right-0 bg-white group-hover:bg-yellow-50 font-bold border-l border-gray-100 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] z-10 text-gray-800 text-sm flex items-center justify-between h-[50px]",children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx("span",{className:`text-xs w-6 h-6 flex items-center justify-center rounded-full font-mono ${S?"bg-yellow-100 text-yellow-800 font-bold":"bg-gray-100 text-gray-500"}`,children:M}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("span",{className:"truncate",children:m.name}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(Os,{size:10,className:"text-gray-400"}),e.jsxs("select",{className:"bg-transparent text-[10px] text-gray-500 outline-none cursor-pointer hover:text-blue-600 w-full",value:m.group||(D.length>0?D[0]:""),onChange:O=>se(m.id,O.target.value),onClick:O=>O.stopPropagation(),children:[e.jsx("option",{value:"",disabled:!0,children:"ŸÜŸÇŸÑ ÿ•ŸÑŸâ..."}),D.map((O,s)=>e.jsx("option",{value:O,children:O},s))]})]})]})]})}),!S&&[...Array(n)].map((O,s)=>{var v;const y=s+1,I=`${F}-${String(T+1).padStart(2,"0")}-${String(y).padStart(2,"0")}`,U=!!((v=m.attendance)!=null&&v[I]),W=new Date(F,T,y).getDay()===5;return e.jsx("td",{className:`border-l border-gray-100 text-center p-0 ${W?"bg-gray-50":""}`,children:W?e.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-20 pointer-events-none",children:e.jsx(me,{size:12})}):e.jsxs("label",{className:"cursor-pointer w-full h-full flex items-center justify-center hover:bg-gray-100",children:[e.jsx("input",{type:"checkbox",checked:U,onChange:()=>d(m.id,y),className:"hidden"}),e.jsx("div",{className:`w-6 h-6 rounded flex items-center justify-center transition-all ${U?"bg-green-500 text-white scale-110":"bg-gray-100 hover:bg-gray-300"}`,children:e.jsx(es,{size:14})})]})},s)}),S&&e.jsx("td",{className:"p-2 text-center bg-yellow-50/20 border-l border-yellow-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"ÿ±ŸÇŸÖ:"}),e.jsx("input",{type:"number",className:"w-20 p-2 text-center border-2 border-yellow-300 rounded-lg focus:border-yellow-600 outline-none font-bold text-lg",placeholder:M,onKeyDown:O=>{O.key==="Enter"&&(R(z,parseInt(O.target.value)),O.target.value="",O.target.blur())},onBlur:O=>{O.target.value&&(R(z,parseInt(O.target.value)),O.target.value="")}})]})})]},m.id)})})]})})}),!S&&re>1&&e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-100 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:"ÿπÿ±ÿ∂"}),e.jsxs("select",{className:"bg-gray-50 border border-gray-200 rounded-lg p-1.5 focus:outline-none font-bold cursor-pointer",value:t,onChange:m=>{w(Number(m.target.value)),j(1)},children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:K.length,children:"ÿßŸÑŸÉŸÑ"})]}),e.jsxs("span",{children:["ŸÖŸÜ ÿ£ÿµŸÑ ",K.length," ÿ∑ÿßŸÑÿ®"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{variant:"outline",disabled:p===1,onClick:()=>j(m=>m-1),className:"px-4 text-sm",children:"ÿßŸÑÿ≥ÿßÿ®ŸÇ"}),e.jsx("div",{className:"flex gap-1 overflow-x-auto hide-scrollbar max-w-[150px] md:max-w-none px-1",children:[...Array(re)].map((m,z)=>e.jsx("button",{onClick:()=>j(z+1),className:`w-9 h-9 flex items-center justify-center rounded-lg text-sm font-bold transition-all ${p===z+1?"bg-yellow-500 text-black shadow-md scale-105":"bg-gray-50 text-gray-600 hover:bg-gray-200"}`,children:z+1},z))}),e.jsx(A,{variant:"outline",disabled:p===re,onClick:()=>j(m=>m+1),className:"px-4 text-sm",children:"ÿßŸÑÿ™ÿßŸÑŸä"})]})]})]})}const Qs=()=>{const a=`student${Math.floor(1e3+Math.random()*9e3)}`;let l="";const c="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789";for(let o=0;o<8;o++)l+=c.charAt(Math.floor(Math.random()*c.length));return{username:a,password:l}};function Xs({registrations:r,students:a,registrationsCollection:l,studentsCollection:c,selectedBranch:o,logActivity:i}){const[x,h]=b.useState(null),[g,k]=b.useState({}),u=[...new Map(a.map(t=>[t.familyId,t.familyName])).entries()],p=t=>{const w=new Date().toISOString().split("T")[0],S=new Date;S.setMonth(S.getMonth()+1),k({name:t.name,phone:t.phone,dob:t.dob,address:t.address,belt:"ÿ£ÿ®Ÿäÿ∂",joinDate:w,subEnd:S.toISOString().split("T")[0],balance:0,linkFamily:"new"}),h(t)},j=async t=>{var $;t.preventDefault();const{username:w,password:S}=Qs();let f,E;g.linkFamily==="new"?(f=Math.floor(Date.now()/1e3),E=`ÿπÿßÿ¶ŸÑÿ© ${g.name.split(" ").slice(-1)[0]}`):(f=parseInt(g.linkFamily),E=(($=a.find(C=>C.familyId===f))==null?void 0:$.familyName)||"ÿπÿßÿ¶ŸÑÿ©");const q={branch:o,status:"active",notes:[],internalNotes:[],attendance:{},username:w,password:S,familyId:f,familyName:E,customOrder:Date.now(),...g};delete q.linkFamily,await c.add(q),await l.remove(x.id),i("ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ∑ÿßŸÑÿ®",`ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿßŸÑÿ∑ÿßŸÑÿ® ${g.name}`),alert(`ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ∑ÿßŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠!
User: ${w}
Pass: ${S}`),h(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-4",children:r.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border-2 border-dashed border-gray-200",children:[e.jsx(xs,{size:48,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ© ÿ≠ÿßŸÑŸäÿßŸã."})]}):r.map(t=>e.jsx(H,{className:"border-r-4 border-blue-500",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-lg flex items-center gap-2",children:[t.name," ",e.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded",children:"ÿ¨ÿØŸäÿØ"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(pe,{size:14})," ",t.phone]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Re,{size:14})," ",t.address]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ie,{size:14})," ",t.dob]})]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsx(A,{onClick:()=>p(t),className:"bg-green-600 hover:bg-green-700 text-white text-sm flex-1 md:flex-none",children:"ÿßÿπÿ™ŸÖÿßÿØ ŸÉÿ∑ÿßŸÑÿ®"}),e.jsx("button",{onClick:()=>{confirm("ÿ≠ÿ∞ŸÅ ÿßŸÑÿ∑ŸÑÿ®ÿü")&&l.remove(t.id)},className:"text-red-500 p-2 hover:bg-red-50 rounded border border-red-200",children:e.jsx(le,{size:18})})]})]})},t.id))}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60] p-4 backdrop-blur-sm",children:e.jsx(H,{className:"w-full max-w-2xl animate-fade-in",title:"ÿ•ŸÉŸÖÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ∑ÿßŸÑÿ® ÿßŸÑÿ¨ÿØŸäÿØ",children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"ÿßŸÑÿßÿ≥ŸÖ"}),e.jsx("input",{className:"w-full border p-2 bg-gray-100 rounded text-gray-500",value:g.name,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"ÿßŸÑŸáÿßÿ™ŸÅ"}),e.jsx("input",{className:"w-full border p-2 bg-gray-100 rounded text-gray-500",value:g.phone,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"ÿßŸÑÿπÿßÿ¶ŸÑÿ©"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:g.linkFamily,onChange:t=>k({...g,linkFamily:t.target.value}),children:[e.jsx("option",{value:"new",children:"ÿπÿßÿ¶ŸÑÿ© ÿ¨ÿØŸäÿØÿ©"}),u.map(([t,w])=>e.jsx("option",{value:t,children:w},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"ÿßŸÑÿ≠ÿ≤ÿßŸÖ"}),e.jsx("select",{className:"w-full border p-2 rounded",value:g.belt,onChange:t=>k({...g,belt:t.target.value}),children:de.map(t=>e.jsx("option",{children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßŸÑÿ™ÿ≠ÿßŸÇ"}),e.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:g.joinDate,onChange:t=>k({...g,joinDate:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold text-green-600",children:"ŸÜŸáÿßŸäÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ"}),e.jsx("input",{type:"date",className:"w-full border p-2 rounded bg-green-50",value:g.subEnd,onChange:t=>k({...g,subEnd:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 text-red-600 font-bold",children:"ÿ±ÿµŸäÿØ ŸÖÿ≥ÿ™ÿ≠ŸÇ (JOD)"}),e.jsx("input",{type:"number",className:"w-full border p-2 rounded focus:ring-2 ring-red-500 outline-none",value:g.balance,onChange:t=>k({...g,balance:t.target.value})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[e.jsx(A,{variant:"ghost",onClick:()=>h(null),children:"ÿ•ŸÑÿ∫ÿßÿ°"}),e.jsx(A,{type:"submit",children:"ÿ™ÿ£ŸÉŸäÿØ Ÿàÿ•ÿ∂ÿßŸÅÿ©"})]})]})})})]})}function et({schedule:r,scheduleCollection:a}){const[l,c]=b.useState({level:"",days:"",time:"",branch:""}),o=async x=>{x.preventDefault(),await a.add({...l}),c({level:"",days:"",time:"",branch:""})},i=async x=>{confirm("ÿ≠ÿ∞ŸÅÿü")&&await a.remove(x)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{title:"ÿ•ÿ∂ÿßŸÅÿ© ÿ≠ÿµÿ©",children:e.jsxs("form",{onSubmit:o,className:"grid grid-cols-2 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.level,onChange:x=>c({...l,level:x.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"ÿßŸÑÿ£ŸäÿßŸÖ"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.days,onChange:x=>c({...l,days:x.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"ÿßŸÑŸàŸÇÿ™"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.time,onChange:x=>c({...l,time:x.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"ÿßŸÑŸÅÿ±ÿπ"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.branch,onChange:x=>c({...l,branch:x.target.value}),required:!0})]}),e.jsx(A,{type:"submit",children:"ÿ•ÿ∂ÿßŸÅÿ©"})]})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:r.map(x=>e.jsxs("div",{className:"bg-white p-4 rounded border flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:x.level}),e.jsxs("p",{className:"text-xs text-gray-500",children:[x.days," | ",x.time]})]}),e.jsx("button",{onClick:()=>i(x.id),className:"text-red-500",children:e.jsx(le,{size:16})})]},x.id))})]})}function st({captains:r,captainsCollection:a}){const[l,c]=b.useState({name:"",branch:X.SHAFA,username:"",password:"",salary:"",holidays:[],withdrawals:[]}),[o,i]=b.useState(null),x=async h=>{h.preventDefault(),o?(await a.update(o,l),i(null)):await a.add({...l,role:"captain"}),c({name:"",branch:X.SHAFA,username:"",password:"",salary:"",holidays:[],withdrawals:[]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{title:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÉÿ®ÿßÿ™ŸÜ",children:e.jsxs("form",{onSubmit:x,className:"grid gap-4 md:grid-cols-2",children:[e.jsx("input",{className:"border p-2 rounded",placeholder:"ÿßŸÑÿßÿ≥ŸÖ",value:l.name,onChange:h=>c({...l,name:h.target.value}),required:!0}),e.jsxs("select",{className:"border p-2 rounded",value:l.branch,onChange:h=>c({...l,branch:h.target.value}),children:[e.jsx("option",{value:X.SHAFA,children:"ÿ¥ŸÅÿß ÿ®ÿØÿ±ÿßŸÜ"}),e.jsx("option",{value:X.ABU_NSEIR,children:"ÿ£ÿ®Ÿà ŸÜÿµŸäÿ±"})]}),e.jsx("input",{className:"border p-2 rounded",placeholder:"User",value:l.username,onChange:h=>c({...l,username:h.target.value}),required:!0}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Pass",value:l.password,onChange:h=>c({...l,password:h.target.value}),required:!0}),e.jsx("input",{className:"border p-2 rounded",type:"number",placeholder:"ÿßŸÑÿ±ÿßÿ™ÿ® ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä",value:l.salary,onChange:h=>c({...l,salary:h.target.value})}),e.jsx(A,{type:"submit",children:o?"ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑ":"ÿ•ÿ∂ÿßŸÅÿ© ŸÉÿßÿ®ÿ™ŸÜ"})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.map(h=>e.jsx(H,{className:"border-l-4 border-purple-500",children:e.jsxs("div",{className:"flex justify-between flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:h.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ÿßŸÑÿ±ÿßÿ™ÿ®: ",h.salary," | User: ",h.username," | Pass: ",h.password]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("button",{onClick:()=>{i(h.id),c(h)},className:"text-blue-500",children:e.jsx(He,{size:16})}),e.jsx("button",{onClick:()=>a.remove(h.id),className:"text-red-500",children:e.jsx(le,{size:16})})]})]})},h.id))})]})}const tt=({news:r,newsCollection:a,selectedBranch:l})=>{const[c,o]=b.useState(!1),[i,x]=b.useState({title:"",desc:"",image:"",branch:l}),[h,g]=b.useState(!1),k=j=>{const t=j.target.files[0];if(t){if(t.size>5e5){alert("ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© ŸÉÿ®Ÿäÿ± ÿ¨ÿØÿßŸã! Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ£ŸÇŸÑ ŸÖŸÜ 500 ŸÉŸäŸÑŸàÿ®ÿßŸäÿ™");return}const w=new FileReader;w.onloadend=()=>{x({...i,image:w.result})},w.readAsDataURL(t)}},u=async j=>{j.preventDefault(),g(!0);try{await De(xe(ee,"artifacts",ne,"public","data","news"),{...i,createdAt:new Date().toISOString()}),alert("ÿ™ŸÖ ŸÜÿ¥ÿ± ÿßŸÑÿÆÿ®ÿ± ÿ®ŸÜÿ¨ÿßÿ≠!"),o(!1),x({title:"",desc:"",image:"",branch:l})}catch(t){console.error(t),alert("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£")}g(!1)},p=async j=>{confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿÆÿ®ÿ±ÿü")&&await as(be(ee,"artifacts",ne,"public","data","news",j))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm",children:[e.jsx("h2",{className:"font-bold text-lg",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿÆÿ®ÿßÿ± ŸàÿßŸÑÿ•ÿπŸÑÿßŸÜÿßÿ™"}),e.jsxs(A,{onClick:()=>o(!0),children:[e.jsx(Ve,{size:18})," ÿÆÿ®ÿ± ÿ¨ÿØŸäÿØ"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(j=>e.jsxs(H,{className:"relative overflow-hidden group",children:[e.jsxs("div",{className:"aspect-video w-full bg-gray-100 relative",children:[j.image?e.jsx("img",{src:j.image,alt:j.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-300",children:e.jsx(Fs,{size:48})}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxs(A,{variant:"danger",onClick:()=>p(j.id),children:[e.jsx(le,{size:18})," ÿ≠ÿ∞ŸÅ"]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:j.title}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:j.desc}),e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded mt-2 inline-block",children:j.branch})]})]},j.id))}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:e.jsx(H,{className:"w-full max-w-lg",title:"ÿ•ÿ∂ÿßŸÅÿ© ÿÆÿ®ÿ± ÿ¨ÿØŸäÿØ",children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block mb-1",children:"ÿπŸÜŸàÿßŸÜ ÿßŸÑÿÆÿ®ÿ±"}),e.jsx("input",{required:!0,className:"w-full border p-2 rounded",value:i.title,onChange:j=>x({...i,title:j.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block mb-1",children:"ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ"}),e.jsx("textarea",{required:!0,className:"w-full border p-2 rounded h-24",value:i.desc,onChange:j=>x({...i,desc:j.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block mb-1",children:"ÿµŸàÿ±ÿ© ÿßŸÑÿÆÿ®ÿ±"}),e.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"w-full border p-2 rounded bg-gray-50"}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"ŸäŸÅÿ∂ŸÑ ÿµŸàÿ± ÿ®ÿßŸÑÿπÿ±ÿ∂ (Landscape) - ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ 500KB"})]}),i.image&&e.jsx("img",{src:i.image,alt:"preview",className:"w-full h-32 object-cover rounded border"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(A,{variant:"ghost",onClick:()=>o(!1),children:"ÿ•ŸÑÿ∫ÿßÿ°"}),e.jsx(A,{type:"submit",disabled:h,children:h?"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ±ŸÅÿπ...":"ŸÜÿ¥ÿ±"})]})]})})})]})},Ee=r=>{if(!r)return"expired";const a=new Date,l=new Date(r);a.setHours(0,0,0,0),l.setHours(0,0,0,0);const c=l-a,o=Math.ceil(c/(1e3*60*60*24));return o<0?"expired":o<=7?"near_end":"active"},at=async(r,a,l,c)=>{try{await De(xe(ee,"artifacts",ne,"public","data","activity_logs"),{action:r,details:a,branch:l,performedBy:c.name||"Admin",role:c.role||"admin",timestamp:new Date().toISOString()})}catch(o){console.error("Log error",o)}},lt=({user:r,selectedBranch:a,studentsCollection:l,paymentsCollection:c,expensesCollection:o,scheduleCollection:i,archiveCollection:x,registrationsCollection:h,captainsCollection:g,handleLogout:k})=>{const[u,p]=b.useState("dashboard"),[j,t]=b.useState(!0),w=(l==null?void 0:l.data)||[],S=(c==null?void 0:c.data)||[],f=(o==null?void 0:o.data)||[],E=(h==null?void 0:h.data)||[],q=(i==null?void 0:i.data)||[],$=(g==null?void 0:g.data)||[],C=te("groups"),D=(C==null?void 0:C.data)||[],P=te("news"),J=(P==null?void 0:P.data)||[],F=te("finance_reasons"),T=(F==null?void 0:F.data)||[],n=te("activity_logs"),N=(n==null?void 0:n.data)||[],L=b.useMemo(()=>w.filter(v=>v.branch===a),[w,a]),G=b.useMemo(()=>S.filter(v=>v.branch===a),[S,a]),V=b.useMemo(()=>f.filter(v=>v.branch===a),[f,a]),Y=b.useMemo(()=>E.filter(v=>v.branch===a),[E,a]),K=b.useMemo(()=>D.filter(v=>v.branch===a),[D,a]),re=b.useMemo(()=>T.filter(v=>v.branch===a),[T,a]),Q=b.useMemo(()=>N.filter(v=>v.branch===a).sort((v,_)=>new Date(_.timestamp)-new Date(v.timestamp)).slice(0,50),[N,a]),d=G.reduce((v,_)=>v+_.amount,0),R=V.reduce((v,_)=>v+_.amount,0),se=d-R,Z=L.filter(v=>Ee(v.subEnd)==="active").length,m=L.filter(v=>Ee(v.subEnd)==="near_end").length,z=L.filter(v=>Ee(v.subEnd)==="expired").length,M=L.length,O=new Date,s=`${O.getFullYear()}-${String(O.getMonth()+1).padStart(2,"0")}`,y=L.reduce((v,_)=>_.attendance?v+Object.keys(_.attendance).filter(B=>B.startsWith(s)).length:v,0),I=(v,_)=>at(v,_,a,r),U=()=>{if(!confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ÿ≠ŸÖŸäŸÑ ŸÜÿ≥ÿÆÿ© ŸÉÿßŸÖŸÑÿ© ŸÖŸÜ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ÿü"))return;const v={date:new Date().toISOString(),branch:a,students:L,payments:G,expenses:V,registrations:Y,schedule:q,news:J,groups:K,captains:$,activityLogs:Q},_="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(v,null,2)),B=document.createElement("a");B.setAttribute("href",_),B.setAttribute("download",`brave_backup_${a}_${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild(B),B.click(),B.remove()},W=[{id:"dashboard",icon:ke,label:"ŸÜÿ∏ÿ±ÿ© ÿπÿßŸÖÿ©"},{id:"news",icon:ue,label:"ÿßŸÑÿ£ÿÆÿ®ÿßÿ± ŸàÿßŸÑÿπÿ±Ÿàÿ∂"},{id:"registrations",icon:xs,label:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",badge:Y.length},{id:"students",icon:ze,label:"ÿßŸÑÿ∑ŸÑÿßÿ®"},{id:"finance",icon:Ke,label:"ÿßŸÑŸÖÿßŸÑŸäÿ©"},{id:"attendance",icon:is,label:"ÿßŸÑÿ≠ÿ∂Ÿàÿ±"},{id:"schedule",icon:$e,label:"ÿßŸÑÿ¨ÿØŸàŸÑ"},{id:"archive",icon:fe,label:"ÿßŸÑÿ£ÿ±ÿ¥ŸäŸÅ"},{id:"captains",icon:ns,label:"ÿßŸÑŸÉÿ®ÿßÿ™ŸÜ",role:"admin"}];return e.jsxs("div",{className:"flex min-h-screen bg-gray-100 text-right font-sans",dir:"rtl",children:[e.jsxs("aside",{className:`${j?"w-64":"w-20"} bg-black text-gray-300 transition-all duration-300 flex flex-col sticky top-0 h-screen shadow-2xl z-40`,children:[e.jsxs("div",{className:"p-6 flex justify-between border-b border-gray-800",children:[j&&e.jsx("h2",{className:"font-black text-yellow-500 text-xl",children:"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ"}),e.jsx("button",{onClick:()=>t(!j),children:e.jsx(Pe,{size:20})})]}),e.jsxs("div",{className:"p-4 border-b border-gray-800",children:[e.jsx("p",{className:"text-white font-bold",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500",children:r.role==="admin"?"ŸÖÿØŸäÿ± ÿπÿßŸÖ":"ŸÉÿßÿ®ÿ™ŸÜ"})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-6 space-y-2 px-3 custom-scrollbar",children:W.filter(v=>!v.role||v.role===r.role).map(v=>e.jsxs("button",{onClick:()=>{p(v.id),t(!1)},className:`w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all ${u===v.id?"bg-yellow-500 text-black font-bold":"hover:bg-gray-800"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(v.icon,{size:20}),v.badge>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] w-4 h-4 rounded-full flex items-center justify-center",children:v.badge})]}),j&&e.jsx("span",{children:v.label})]},v.id))}),e.jsxs("div",{className:"p-4 space-y-2 border-t border-gray-800",children:[r.role==="admin"&&e.jsxs("button",{onClick:U,className:`w-full flex items-center gap-4 px-4 py-3 text-green-500 hover:bg-gray-900 rounded transition-colors ${!j&&"justify-center"}`,title:"ÿ™ÿ≠ŸÖŸäŸÑ ŸÜÿ≥ÿÆÿ© ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©",children:[e.jsx(Es,{size:20})," ",j&&"ŸÜÿ≥ÿÆ ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä"]}),e.jsxs("button",{onClick:k,className:`w-full flex items-center gap-4 px-4 py-3 text-red-400 hover:bg-gray-900 rounded transition-colors ${!j&&"justify-center"}`,title:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨",children:[e.jsx(os,{size:20})," ",j&&"ÿÆÿ±Ÿàÿ¨"]})]})]}),e.jsxs("main",{className:"flex-1 p-4 md:p-8 w-full overflow-x-hidden",children:[e.jsxs("div",{className:"md:hidden mb-4 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>t(!0),className:"p-2 bg-white rounded shadow",children:e.jsx(Pe,{})}),e.jsx("h2",{className:"font-bold text-gray-800",children:"ÿ£ŸÉÿßÿØŸäŸÖŸäÿ© ÿßŸÑÿ¥ÿ¨ÿßÿπ"})]}),u==="dashboard"&&e.jsx(_s,{user:r,selectedBranch:a,branchStudents:L,netProfit:se,totalAttendance:y,expiredCount:z,activeStudentsCount:Z,nearEndCount:m,totalStudents:M,branchRegistrations:Y,branchPayments:G,activityLogs:Q}),u==="students"&&e.jsx(Ws,{students:L,groups:K,studentsCollection:l,archiveCollection:x,selectedBranch:a,logActivity:I}),u==="finance"&&e.jsx(Vs,{students:L,payments:G,expenses:V,paymentsCollection:c,expensesCollection:o,financeReasons:re,financeReasonsCollection:F,selectedBranch:a,logActivity:I}),u==="attendance"&&e.jsx(Zs,{students:L,groups:K,groupsCollection:C,studentsCollection:l,selectedBranch:a}),u==="registrations"&&e.jsx(Xs,{registrations:Y,students:w,registrationsCollection:h,studentsCollection:l,selectedBranch:a,logActivity:I}),u==="schedule"&&e.jsx(et,{schedule:q,scheduleCollection:i}),u==="archive"&&e.jsx(Bs,{archiveCollection:x,studentsCollection:l,payments:S,logActivity:I}),u==="captains"&&e.jsx(st,{captains:$,captainsCollection:g}),u==="news"&&e.jsx(tt,{news:J,newsCollection:P,selectedBranch:a})]})]})},Le="brave-academy-live-data";function rt(){const[r,a]=b.useState(()=>{const $=localStorage.getItem("braveUser");return $?JSON.parse($):null}),[l,c]=b.useState(()=>typeof window<"u"&&localStorage.getItem("braveUser")?JSON.parse(localStorage.getItem("braveUser")).role==="student"?"student_portal":"admin_dashboard":"home"),[o,i]=b.useState(()=>r&&r.branch?r.branch:X.SHAFA),[x,h]=b.useState(!0),g=te("students"),k=te("payments"),u=te("expenses"),p=te("schedule"),j=te("archive"),t=te("registrations"),w=te("captains"),S=te("news"),f=$=>{c($),window.history.pushState({view:$},"","")};b.useEffect(()=>{window.history.replaceState({view:l},"","");const $=C=>{C.state&&C.state.view?c(C.state.view):c("home")};return window.addEventListener("popstate",$),()=>window.removeEventListener("popstate",$)},[]);const E=async($,C)=>{try{const D=xe(ee,"artifacts",Le,"public","data","students"),P=we(D,ve("username","==",$),ve("password","==",C)),J=await Ye(P);if(!J.empty){const N=J.docs[0],L=N.data(),G={role:"student",familyId:L.familyId,name:L.familyName||L.name,id:N.id};a(G),localStorage.setItem("braveUser",JSON.stringify(G)),f("student_portal");return}const F=xe(ee,"artifacts",Le,"public","data","captains"),T=we(F,ve("username","==",$),ve("password","==",C)),n=await Ye(T);if(!n.empty){const N=n.docs[0],L=N.data(),G={role:"captain",...L,id:N.id};a(G),localStorage.setItem("braveUser",JSON.stringify(G)),i(L.branch),f("admin_dashboard");return}if($.includes("@")||$==="admin1"){let N=$;$==="admin1"&&(N="admin@brave.com"),await gs(Oe,N,C);return}alert("ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ ÿÆÿßÿ∑ÿ¶ÿ©! ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸàŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±.")}catch(D){console.error("Login Error:",D),alert("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ.")}};b.useEffect(()=>{const $=us(Oe,async C=>{if(C){const D=C.email;let P={email:D};D==="admin@brave.com"?P={...P,role:"admin",isSuper:!0,name:"ÿßŸÑŸÖÿØŸäÿ± ÿßŸÑÿπÿßŸÖ",branch:X.SHAFA}:D==="shafa@brave.com"?P={...P,role:"admin",isSuper:!1,name:"ŸÖÿØŸäÿ± ÿ¥ŸÅÿß ÿ®ÿØÿ±ÿßŸÜ",branch:X.SHAFA}:D==="abunseir@brave.com"&&(P={...P,role:"admin",isSuper:!1,name:"ŸÖÿØŸäÿ± ÿ£ÿ®Ÿà ŸÜÿµŸäÿ±",branch:X.ABU_NSEIR});try{const J=be(ee,"artifacts",Le,"public","data","admin_profiles",D),F=await Ns(J);F.exists()&&F.data().name&&(P.name=F.data().name)}catch{console.log("Profile fetch warning")}a(P),i(P.branch),localStorage.setItem("braveUser",JSON.stringify(P)),c("admin_dashboard")}else localStorage.getItem("braveUser")||a(null);h(!1)});return()=>$()},[]);const q=async()=>{await ps(Oe),localStorage.removeItem("braveUser"),a(null),f("home")};return x&&r?e.jsx("div",{className:"flex h-screen items-center justify-center font-bold text-xl text-yellow-600 bg-gray-50",children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™..."}):e.jsxs(e.Fragment,{children:[l==="home"&&e.jsx(Rs,{setView:f,schedule:p.data,registrationsCollection:t}),l==="login"&&e.jsx(Ts,{setView:f,handleLogin:E}),l==="student_portal"&&r&&e.jsx(qs,{user:r,students:g.data,schedule:p.data,payments:k.data,news:S.data,handleLogout:q}),l==="admin_dashboard"&&r&&e.jsx(lt,{user:r,selectedBranch:o,onSwitchBranch:r.isSuper?i:null,studentsCollection:g,paymentsCollection:k,expensesCollection:u,scheduleCollection:p,archiveCollection:j,registrationsCollection:t,captainsCollection:w,handleLogout:q})]})}hs(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(rt,{})}));
