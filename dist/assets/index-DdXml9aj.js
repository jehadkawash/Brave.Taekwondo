import{r as b,j as e}from"./react-BVBiHVO-.js";import{r as He,c as xs}from"./react-dom-C1qW5AtE.js";import{g as ms,o as hs,s as bs,a as us}from"./firebase-DLxkeRg7.js";import{y as gs,z as ps,A as fs,B as de,D as we,G as js,H as ss,I as he,J as ts,K as De,M as ys,N as vs,O as Ns,P as ws,Q as ve,R as Ke,T as ks}from"./@firebase-ChIsshGs.js";import{S as Ge,X as ce,M as Pe,a as be,A as ke,C as Ce,b as Je,c as Re,N as Ve,d as me,P as pe,T as as,U as ze,e as ls,f as $e,g as Ie,h as ye,L as rs,i as _e,j as Ss,k as Ds,Z as Cs,l as ns,m as Ye,n as Ne,F as zs,o as $s,p as Is,q as As,r as Ze,s as Te,t as ge,u as Ue,v as fe,B as Me,w as se,D as os,x as Se,y as is,z as ds,E as Ms,G as We,H as Os,I as Fs,J as Qe,K as Es,O as cs,Q as Ls,R as Ps}from"./lucide-react-BEWCqpKo.js";import"./scheduler-DYLXRpC5.js";import"./idb-BXWtuYvb.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function l(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(o){if(o.ep)return;o.ep=!0;const n=l(o);fetch(o.href,n)}})();const Rs={apiKey:"AIzaSyCKMrH2E_GP_MYZJrhF4LbxC1LmtVGx3Co",authDomain:"brave-academy.firebaseapp.com",projectId:"brave-academy",storageBucket:"brave-academy.firebasestorage.app",messagingSenderId:"862804404676",appId:"1:862804404676:web:871e3bb0796c354f1f5c91"},Be=gs(Rs),Oe=ms(Be),Z=ps(Be),_s=fs(Be),te="brave-academy-live-data",V=(r,a=[])=>{const[l,d]=b.useState([]),[o,n]=b.useState(!0),c=JSON.stringify(a);return b.useEffect(()=>{let f=de(Z,"artifacts",te,"public","data",r),j;a&&a.length>0?j=we(f,...a):j=we(f);const D=js(j,t=>{const h=t.docs.map(y=>({...y.data(),id:y.id}));d(h),n(!1)},t=>{console.error(`Error fetching ${r}:`,t),n(!1)});return()=>D()},[r,c]),{data:l,loading:o,add:async f=>{try{const j={...f,createdAt:new Date().toISOString()};return await De(de(Z,"artifacts",te,"public","data",r),j),!0}catch(j){return console.error(j),alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„"),!1}},update:async(f,j)=>{try{await ts(he(Z,"artifacts",te,"public","data",r,f),j)}catch(D){console.error(D)}},remove:async f=>{try{await ss(he(Z,"artifacts",te,"public","data",r,f))}catch(j){console.error(j)}}}},I=({children:r,onClick:a,variant:l="primary",className:d="",type:o="button"})=>{const n={primary:"bg-yellow-500 text-black hover:bg-yellow-400 border border-yellow-600 font-bold",secondary:"bg-gray-800 text-white hover:bg-gray-700",danger:"bg-red-600 text-white hover:bg-red-700",outline:"border-2 border-yellow-500 text-yellow-600 hover:bg-yellow-50",ghost:"bg-transparent text-gray-600 hover:bg-gray-100"};return e.jsx("button",{type:o,onClick:a,className:`px-4 py-2 rounded-lg transition duration-200 flex items-center justify-center gap-2 shadow-sm ${n[l]} ${d}`,children:r})},H=({children:r,className:a="",title:l,action:d,noPadding:o=!1})=>e.jsxs("div",{className:`bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden ${a}`,children:[(l||d)&&e.jsxs("div",{className:"px-4 py-3 md:px-6 md:py-4 border-b border-gray-100 flex flex-col md:flex-row justify-between items-start md:items-center bg-gray-50/50 gap-2",children:[l&&e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:l}),d&&e.jsx("div",{className:"self-end md:self-auto",children:d})]}),e.jsx("div",{className:o?"":"p-4 md:p-6",children:r})]}),qe=({status:r})=>{const a={active:{text:"ÙØ¹Ø§Ù„",style:"bg-green-100 text-green-800 border-green-200"},near_end:{text:"Ù‚Ø§Ø±Ø¨ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡",style:"bg-yellow-100 text-yellow-800 border-yellow-200"},expired:{text:"Ù…Ù†ØªÙ‡ÙŠ",style:"bg-red-100 text-red-800 border-red-200"}},l=a[r]||a.active;return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold border ${l.style}`,children:l.text})},Xe=({students:r,onSelect:a,placeholder:l="Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨...",showAllOption:d=!1,onClear:o})=>{const[n,c]=b.useState(""),[x,p]=b.useState(!1),w=b.useMemo(()=>n?r.filter(f=>f.name.includes(n)):r,[r,n]);return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:"w-full border p-2 pr-8 rounded focus:ring-2 focus:ring-yellow-500 outline-none",placeholder:l,value:n,onChange:f=>{c(f.target.value),p(!0),f.target.value===""&&o&&o()},onFocus:()=>p(!0),onBlur:()=>setTimeout(()=>p(!1),200)}),e.jsx(Ge,{className:"absolute left-2 top-2.5 text-gray-400",size:16}),n&&e.jsx("button",{onClick:()=>{c(""),o&&o()},className:"absolute left-8 top-2.5 text-gray-400 hover:text-red-500",children:e.jsx(ce,{size:16})})]}),x&&e.jsxs("div",{className:"absolute z-50 w-full bg-white border rounded shadow-lg max-h-48 overflow-y-auto mt-1",children:[d&&e.jsx("div",{className:"p-2 hover:bg-gray-100 cursor-pointer text-sm border-b font-bold text-blue-600",onClick:()=>{c(""),o&&o(),p(!1)},children:"Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„"}),w.length>0?w.map(f=>e.jsxs("div",{className:"p-2 hover:bg-yellow-50 cursor-pointer text-sm border-b last:border-0 flex justify-between items-center",onClick:()=>{c(f.name),a(f),p(!1)},children:[e.jsx("span",{className:"font-bold",children:f.name}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:f.belt})]},f.id)):e.jsx("div",{className:"p-2 text-gray-500 text-sm text-center",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬"})]})]})},re={LOGO:"/logo.jpg",HERO_BG:"/hero.jpg",BRANCH_SHAFA:"/shafa.jpg",BRANCH_ABU_NSEIR:"/abunseir.jpg"},Y={SHAFA:"Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†",ABU_NSEIR:"Ø£Ø¨Ùˆ Ù†ØµÙŠØ±"},le=["Ø£Ø¨ÙŠØ¶","Ø£ØµÙØ±","Ø£Ø®Ø¶Ø± 1","Ø£Ø®Ø¶Ø± 2","Ø£Ø²Ø±Ù‚ 1","Ø£Ø²Ø±Ù‚ 2","Ø¨Ù†ÙŠ 1","Ø¨Ù†ÙŠ 2","Ø£Ø­Ù…Ø± 1","Ø£Ø­Ù…Ø± 2","Ø£Ø³ÙˆØ¯"],Ts=[{id:1,days:"Ø§Ù„Ø³Ø¨Øª / Ø§Ù„Ø§Ø«Ù†ÙŠÙ† / Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡",time:"4:00 Ù… - 5:00 Ù…",level:"Ù…Ø¨ØªØ¯Ø¦ÙŠÙ† (Ø£Ø¨ÙŠØ¶ - Ø£ØµÙØ±)",branch:"Ù…Ø´ØªØ±Ùƒ"},{id:2,days:"Ø§Ù„Ø³Ø¨Øª / Ø§Ù„Ø§Ø«Ù†ÙŠÙ† / Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡",time:"5:00 Ù… - 6:30 Ù…",level:"Ø£Ø­Ø²Ù…Ø© Ù…Ù„ÙˆÙ†Ø© (Ø£Ø®Ø¶Ø± - Ø£Ø²Ø±Ù‚)",branch:"Ù…Ø´ØªØ±Ùƒ"},{id:3,days:"Ø§Ù„Ø£Ø­Ø¯ / Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡ / Ø§Ù„Ø®Ù…ÙŠØ³",time:"5:00 Ù… - 6:30 Ù…",level:"Ù…ØªÙ‚Ø¯Ù… (Ø£Ø­Ù…Ø± - Ø£Ø³ÙˆØ¯)",branch:"Ù…Ø´ØªØ±Ùƒ"},{id:4,days:"Ø§Ù„Ø¬Ù…Ø¹Ø©",time:"9:00 Øµ - 11:00 Øµ",level:"ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ù†ØªØ®Ø¨Ø§Øª",branch:"Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ"}],Us=({setView:r,schedule:a})=>{const[l,d]=b.useState(!1),[o,n]=b.useState(!1),[c,x]=b.useState({name:"",phone:"",dob:"",address:"",branch:Y.SHAFA}),[p,w]=b.useState(!1),{data:f}=V("news"),[j,D]=b.useState(0);b.useEffect(()=>{if(!f||f.length===0)return;const u=setInterval(()=>{D(S=>(S+1)%f.length)},8e3);return()=>clearInterval(u)},[f]);const t=async u=>{u.preventDefault(),w(!0);try{await De(de(Z,"artifacts",te,"public","data","registrations"),{...c,date:new Date().toLocaleDateString("ar-JO"),status:"new",createdAt:new Date().toISOString()}),alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹."),n(!1),x({name:"",phone:"",dob:"",address:"",branch:Y.SHAFA})}catch(S){console.error("Error adding document: ",S),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.")}finally{w(!1)}},h=u=>window.open(u,"_blank"),y=()=>window.open("https://wa.me/962795629606","_blank");return e.jsxs("div",{className:"min-h-screen font-sans text-right relative bg-white",dir:"rtl",children:[e.jsxs("header",{className:"bg-black text-white shadow-lg sticky top-0 z-50 border-b-2 border-yellow-500",children:[e.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>window.scrollTo(0,0),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:re.LOGO,alt:"Logo",className:"w-12 h-12 rounded-full bg-white p-1 object-contain transition-transform group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-yellow-500 animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-extrabold leading-none text-yellow-500",children:"Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹"}),e.jsx("p",{className:"text-[10px] text-gray-400 tracking-wider uppercase font-bold",children:"Brave Taekwondo"})]})]}),e.jsx("nav",{className:"hidden md:flex gap-8 font-bold text-sm",children:["Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©","Ù…Ù† Ù†Ø­Ù†","Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ","Ø§Ù„ÙØ±ÙˆØ¹"].map(u=>e.jsxs("button",{className:"hover:text-yellow-500 transition-colors duration-300 relative group",onClick:()=>{var S,R;u==="Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ"&&((S=document.getElementById("schedule"))==null||S.scrollIntoView({behavior:"smooth"})),u==="Ø§Ù„ÙØ±ÙˆØ¹"&&((R=document.getElementById("branches"))==null||R.scrollIntoView({behavior:"smooth"})),u==="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"&&window.scrollTo(0,0)},children:[u,e.jsx("span",{className:"absolute -bottom-1 right-0 w-0 h-0.5 bg-yellow-500 transition-all group-hover:w-full"})]},u))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{onClick:()=>r("login"),className:"bg-yellow-500 text-black hover:bg-yellow-400 font-black px-6 border-none hidden md:block transform hover:-translate-y-1 transition-transform",children:"Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡"}),e.jsx("button",{className:"md:hidden p-2 text-yellow-500",onClick:()=>d(!l),children:l?e.jsx(ce,{size:24}):e.jsx(Pe,{size:24})})]})]}),l&&e.jsx("div",{className:"md:hidden bg-gray-900 border-t border-gray-800 p-4 flex flex-col gap-4",children:e.jsx(I,{onClick:()=>{d(!1),r("login")},className:"w-full py-3 bg-yellow-500 text-black font-bold",children:"Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡"})})]}),e.jsxs("div",{className:"relative bg-gray-900 text-white h-[600px] flex items-center shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-yellow-500/10 -skew-x-12 transform origin-top translate-x-20"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-black/70 to-transparent z-10"}),e.jsx("img",{src:re.HERO_BG,alt:"Hero",className:"absolute inset-0 w-full h-full object-cover"}),e.jsxs("div",{className:"container mx-auto px-6 relative z-20 flex flex-col items-start pt-10",children:[e.jsx("div",{className:"inline-block bg-yellow-500 text-black font-black px-4 py-1 rounded-none skew-x-[-10deg] mb-6 animate-fade-in-up",children:e.jsx("span",{className:"block skew-x-[10deg] text-sm tracking-wider",children:"Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…ÙØªÙˆØ­ Ø§Ù„Ø¢Ù†"})}),e.jsxs("h2",{className:"text-6xl md:text-8xl font-black mb-6 leading-tight drop-shadow-lg",children:["Ø§ØµÙ†Ø¹ ",e.jsx("span",{className:"text-yellow-500",children:"Ù‚ÙˆØªÙƒ"}),e.jsx("br",{}),"Ø§Ø¨Ù†Ù Ù…Ø³ØªÙ‚Ø¨Ù„Ùƒ"]}),e.jsx("p",{className:"text-gray-300 text-lg mb-8 max-w-lg font-medium",children:"Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ù†Ø®Ø¨Ø© Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„Ø£Ø±Ø¯Ù† ÙÙŠ Ø§Ù„ØªØ§ÙŠÙƒÙˆÙ†Ø¯Ùˆ. ØªØ¯Ø±ÙŠØ¨ Ø§Ø­ØªØ±Ø§ÙÙŠØŒ Ø¨ÙŠØ¦Ø© Ø¢Ù…Ù†Ø©ØŒ ÙˆÙ…Ø³ØªÙ‚Ø¨Ù„ ÙˆØ§Ø¹Ø¯."}),e.jsx("div",{className:"flex gap-4",children:e.jsx(I,{onClick:()=>n(!0),className:"px-10 py-4 text-xl bg-yellow-500 text-black font-black hover:bg-yellow-400 hover:scale-105 transition-all shadow-[0_0_20px_rgba(234,179,8,0.5)] border-none",children:"Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ"})})]})]}),f&&f.length>0&&e.jsx("section",{className:"relative -mt-16 z-30 mb-20",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsx("div",{className:"relative w-full max-w-5xl mx-auto h-[450px] bg-white rounded-2xl overflow-hidden shadow-2xl border-t-8 border-yellow-500 flex flex-col md:flex-row",children:f.map((u,S)=>e.jsxs("div",{className:`absolute inset-0 flex flex-col md:flex-row transition-all duration-700 ease-in-out ${S===j?"opacity-100 z-10":"opacity-0 z-0"}`,children:[e.jsxs("div",{className:"w-full md:w-1/2 h-1/2 md:h-full relative overflow-hidden",children:[u.image?e.jsx("img",{src:u.image,alt:u.title,className:"w-full h-full object-cover transition-transform duration-[10000ms] ease-linear transform scale-100 hover:scale-110"}):e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:e.jsx(be,{size:64,className:"text-gray-300"})}),e.jsx("div",{className:"absolute top-4 right-4 bg-yellow-500 text-black text-xs font-bold px-3 py-1 shadow-md",children:u.branch})]}),e.jsxs("div",{className:"w-full md:w-1/2 h-1/2 md:h-full bg-white p-8 flex flex-col justify-center text-right relative",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 font-bold mb-2 text-sm uppercase tracking-wide",children:[e.jsx(ke,{size:16}),e.jsx("span",{children:"Ø£Ø­Ø¯Ø« Ø§Ù„Ø£Ø®Ø¨Ø§Ø±"})]}),e.jsx("h3",{className:"text-2xl md:text-4xl font-black text-gray-900 mb-4 leading-tight",children:u.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed text-sm md:text-base",children:u.desc}),e.jsxs("div",{className:"flex gap-2 mt-8",children:[e.jsx("button",{onClick:()=>D(R=>(R-1+f.length)%f.length),className:"w-10 h-10 rounded-full border border-gray-200 flex items-center justify-center hover:bg-black hover:text-white transition-colors",children:e.jsx(Ce,{size:20})}),e.jsx("button",{onClick:()=>D(R=>(R+1)%f.length),className:"w-10 h-10 rounded-full border border-gray-200 flex items-center justify-center hover:bg-black hover:text-white transition-colors",children:e.jsx(Je,{size:20})})]})]})]},u.id))})})}),e.jsx("section",{id:"branches",className:"py-24 bg-white",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16",children:[e.jsx("h2",{className:"text-5xl font-black text-gray-900 mb-4 tracking-tight",children:"ÙØ±ÙˆØ¹Ù†Ø§"}),e.jsx("div",{className:"w-24 h-2 bg-yellow-500 rounded-full"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"group relative h-[500px] w-full rounded-[2.5rem] overflow-hidden shadow-2xl cursor-default",children:[e.jsx("img",{src:re.BRANCH_SHAFA,alt:"Shafa",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent opacity-90 transition-opacity duration-300"}),e.jsx("div",{className:"absolute inset-0 p-8 md:p-12 flex flex-col justify-end",children:e.jsxs("div",{className:"transform transition-transform duration-500 translate-y-4 group-hover:translate-y-0",children:[e.jsx("div",{className:"flex justify-between items-end mb-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"inline-block bg-yellow-500 text-black text-xs font-black px-3 py-1 rounded-full mb-3 shadow-lg",children:"Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ"}),e.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white leading-none mb-2",children:"Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†"}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-300 text-sm md:text-base font-medium max-w-sm",children:[e.jsx(Re,{className:"text-yellow-500 mt-1 shrink-0",size:18}),e.jsx("p",{children:"Ø´Ø§Ø±Ø¹ Ø±ÙØ¹Øª Ø´Ù…ÙˆØ· - Ø¨Ø¬Ø§Ù†Ø¨ Ù…Ø´Ø§ØªÙ„ Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø§Ø±Ø¯Ù†"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[e.jsxs("button",{onClick:()=>h("https://maps.app.goo.gl/mTqvZD4Ftor3NALJ8?g_st=ic"),className:"flex items-center justify-center gap-2 bg-white/20 backdrop-blur-md border border-white/30 text-white font-bold py-4 rounded-2xl hover:bg-white hover:text-black transition-all duration-300",children:[e.jsx(Ve,{size:20}),e.jsx("span",{children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹"})]}),e.jsxs("button",{onClick:()=>window.open("https://wa.me/962795629606","_blank"),className:"flex items-center justify-center gap-2 bg-[#25D366]/90 backdrop-blur-md text-white font-bold py-4 rounded-2xl hover:bg-[#25D366] transition-all duration-300 shadow-lg shadow-green-900/20",children:[e.jsx(me,{size:20}),e.jsx("span",{children:"ÙˆØ§ØªØ³Ø§Ø¨"})]})]}),e.jsxs("a",{href:"tel:0795629606",className:"mt-3 flex items-center justify-center gap-2 bg-black/60 backdrop-blur-md border border-white/10 text-white font-bold py-4 rounded-2xl hover:bg-yellow-500 hover:text-black transition-all duration-300",children:[e.jsx(pe,{size:20}),e.jsx("span",{dir:"ltr",children:"07 9562 9606"})]})]})})]}),e.jsxs("div",{className:"group relative h-[500px] w-full rounded-[2.5rem] overflow-hidden shadow-2xl cursor-default",children:[e.jsx("img",{src:re.BRANCH_ABU_NSEIR,alt:"Abu Nseir",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent opacity-90 transition-opacity duration-300"}),e.jsx("div",{className:"absolute inset-0 p-8 md:p-12 flex flex-col justify-end",children:e.jsxs("div",{className:"transform transition-transform duration-500 translate-y-4 group-hover:translate-y-0",children:[e.jsx("div",{className:"flex justify-between items-end mb-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"inline-block bg-gray-800 text-white text-xs font-black px-3 py-1 rounded-full mb-3 shadow-lg border border-gray-600",children:"ÙØ±Ø¹ 2"}),e.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white leading-none mb-2",children:"Ø£Ø¨Ùˆ Ù†ØµÙŠØ±"}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-300 text-sm md:text-base font-medium max-w-sm",children:[e.jsx(Re,{className:"text-yellow-500 mt-1 shrink-0",size:18}),e.jsx("p",{children:"Ø¯ÙˆØ§Ø± Ø§Ù„Ø¨Ø­Ø±ÙŠØ© - Ù…Ø¬Ù…Ø¹ Ø§Ù„ÙØ±Ø§"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[e.jsxs("button",{onClick:()=>h("https://maps.app.goo.gl/yqu6tWBiqrRWGCMJ8?g_st=ic"),className:"flex items-center justify-center gap-2 bg-white/20 backdrop-blur-md border border-white/30 text-white font-bold py-4 rounded-2xl hover:bg-white hover:text-black transition-all duration-300",children:[e.jsx(Ve,{size:20}),e.jsx("span",{children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹"})]}),e.jsxs("button",{onClick:()=>window.open("https://wa.me/962790368603","_blank"),className:"flex items-center justify-center gap-2 bg-[#25D366]/90 backdrop-blur-md text-white font-bold py-4 rounded-2xl hover:bg-[#25D366] transition-all duration-300 shadow-lg shadow-green-900/20",children:[e.jsx(me,{size:20}),e.jsx("span",{children:"ÙˆØ§ØªØ³Ø§Ø¨"})]})]}),e.jsxs("a",{href:"tel:0790368603",className:"mt-3 flex items-center justify-center gap-2 bg-black/60 backdrop-blur-md border border-white/10 text-white font-bold py-4 rounded-2xl hover:bg-yellow-500 hover:text-black transition-all duration-300",children:[e.jsx(pe,{size:20}),e.jsx("span",{dir:"ltr",children:"07 9036 8603"})]})]})})]})]})]})}),e.jsx("section",{className:"py-24 relative overflow-hidden bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16 text-center",children:[e.jsx("span",{className:"text-yellow-500 font-bold tracking-widest text-sm uppercase mb-2",children:"Ù„Ù…Ø§Ø°Ø§ Ù†Ø­Ù†ØŸ"}),e.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-4",children:["Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø¬Ø±Ø¯ ",e.jsx("span",{className:"text-yellow-500",children:"Ø±ÙŠØ§Ø¶Ø©"})]}),e.jsx("p",{className:"text-gray-500 max-w-xl",children:"Ù†Ø­Ù† Ù†Ø¨Ù†ÙŠ Ø´Ø®ØµÙŠØ© Ø·ÙÙ„ÙƒØŒ Ù†Ø¹Ø²Ø² Ø«Ù‚ØªÙ‡ Ø¨Ù†ÙØ³Ù‡ØŒ ÙˆÙ†Ø¹Ø¯Ù‡ Ù„ÙŠÙƒÙˆÙ† Ù‚Ø§Ø¦Ø¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:as,title:"ØµÙ†Ø§Ø¹Ø© Ø§Ù„Ø£Ø¨Ø·Ø§Ù„",text:"Ù…Ù†Ù‡Ø¬ ØªØ¯Ø±ÙŠØ¨ÙŠ Ø§Ø­ØªØ±Ø§ÙÙŠ ÙŠÙ‡Ø¯Ù Ù„Ù„ÙˆØµÙˆÙ„ Ø¨Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù„Ù…Ù†ØµØ§Øª Ø§Ù„ØªØªÙˆÙŠØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙˆØ§Ù„Ø¯ÙˆÙ„ÙŠØ©."},{icon:ze,title:"ÙƒØ§Ø¯Ø± Ù…Ø­ØªØ±Ù",text:"Ù†Ø®Ø¨Ø© Ù…Ù† Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø§Ù„ÙˆØ·Ù†ÙŠÙŠÙ† ÙˆØ§Ù„Ø¯ÙˆÙ„ÙŠÙŠÙ† Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ÙŠÙ† Ø°ÙˆÙŠ Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ø¹Ø§Ù„ÙŠØ©."},{icon:ls,title:"Ø¨ÙŠØ¦Ø© Ø¢Ù…Ù†Ø©",text:"Ù†Ù‡ØªÙ… Ø¨Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„ØªØ±Ø¨ÙˆÙŠ ÙˆØ§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø¨Ø¯Ù†ÙŠØŒ ÙÙŠ Ø¨ÙŠØ¦Ø© Ø¹Ø§Ø¦Ù„ÙŠØ© Ø¢Ù…Ù†Ø©."}].map((u,S)=>e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 border border-gray-100 relative group overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-500 to-yellow-200 transform origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-500"}),e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-2xl flex items-center justify-center text-yellow-600 mb-6 group-hover:scale-110 transition-transform group-hover:bg-yellow-500 group-hover:text-black",children:e.jsx(u.icon,{size:32,strokeWidth:2})}),e.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:u.title}),e.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:u.text})]},S))})]})}),e.jsxs("section",{id:"schedule",className:"py-20 bg-gray-900 text-white relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(#FDE047 1px, transparent 1px)",backgroundSize:"20px 20px"}}),e.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-black mb-4",children:"Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ"}),e.jsx("div",{className:"w-20 h-1.5 bg-yellow-500 rounded-full"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(a&&a.length>0?a:Ts).map(u=>e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700 hover:border-yellow-500 transition-all duration-300 hover:-translate-y-2 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-yellow-500 group-hover:bg-yellow-500 group-hover:text-black transition-colors",children:e.jsx($e,{size:20})}),e.jsx("span",{className:"text-xs font-bold text-gray-400 bg-black/30 px-2 py-1 rounded",children:u.branch})]}),e.jsx("h3",{className:"font-bold text-xl mb-2 text-white",children:u.level}),e.jsxs("div",{className:"space-y-3 mt-6 border-t border-gray-700 pt-4",children:[e.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-400",children:[e.jsx(Ie,{size:16,className:"text-yellow-500 mt-0.5"}),e.jsx("span",{children:u.days})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-white",children:[e.jsx(ke,{size:16,className:"text-yellow-500"}),e.jsx("span",{children:u.time})]})]})]},u.id))})]})]}),e.jsx("footer",{className:"bg-black text-white pt-16 pb-24 md:pb-8 border-t border-gray-800 relative z-10",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-6",children:[e.jsx("img",{src:re.LOGO,alt:"Logo",className:"w-10 h-10 rounded-full grayscale opacity-80"}),e.jsx("span",{className:"font-bold text-lg text-gray-400",children:"Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹ Ù„Ù„ØªØ§ÙŠÙƒÙˆÙ†Ø¯Ùˆ"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Â© 2023 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©."})]})}),e.jsx("button",{onClick:y,className:"fixed bottom-6 right-6 z-50 bg-[#25D366] text-white p-4 rounded-full shadow-2xl hover:bg-[#20bd5a] transition-transform hover:scale-110 flex items-center justify-center animate-bounce-slow border-4 border-white",title:"ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨",children:e.jsx(me,{size:28,fill:"white",className:"text-transparent"})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsx(H,{className:"w-full max-w-lg animate-fade-in border-t-8 border-yellow-500",title:"Ø·Ù„Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯",children:e.jsxs("form",{onSubmit:t,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",placeholder:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„",value:c.name,onChange:u=>x({...c,name:u.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯"}),e.jsx("input",{type:"date",required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",value:c.dob,onChange:u=>x({...c,dob:u.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"Ø±Ù‚Ù… Ù‡Ø§ØªÙ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",placeholder:"079xxxxxxx",value:c.phone,onChange:u=>x({...c,phone:u.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",placeholder:"Ø§Ù„Ù…Ù†Ø·Ù‚Ø© - Ø§Ù„Ø´Ø§Ø±Ø¹",value:c.address,onChange:u=>x({...c,address:u.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨"}),e.jsxs("select",{className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors bg-white",value:c.branch,onChange:u=>x({...c,branch:u.target.value}),children:[e.jsx("option",{value:Y.SHAFA,children:Y.SHAFA}),e.jsx("option",{value:Y.ABU_NSEIR,children:Y.ABU_NSEIR})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-gray-100",children:[e.jsx(I,{variant:"ghost",className:"text-gray-500 hover:text-black",onClick:()=>n(!1),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(I,{type:"submit",disabled:p,className:"bg-black text-white hover:bg-gray-800 px-8",children:p?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨"})]})]})})})]})},qs=({setView:r,handleLogin:a,loginError:l})=>{const[d,o]=b.useState(""),[n,c]=b.useState(""),x=p=>{p.preventDefault(),a(d,n)};return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4 relative overflow-hidden",dir:"rtl",children:e.jsxs(H,{className:"w-full max-w-md relative z-10 border-t-4 border-yellow-500",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg p-2",children:e.jsx("img",{src:re.LOGO,alt:"Logo",className:"w-full h-full object-contain"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"})]}),l&&e.jsx("div",{className:"bg-red-100 text-red-700 p-2 rounded mb-4 text-sm text-center",children:l}),e.jsxs("form",{className:"space-y-5",onSubmit:x,children:[e.jsx("input",{className:"w-full border p-3 rounded-lg",type:"text",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",value:d,onChange:p=>o(p.target.value),required:!0}),e.jsx("input",{className:"w-full border p-3 rounded-lg",type:"password",placeholder:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",value:n,onChange:p=>c(p.target.value),required:!0}),e.jsx(I,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-yellow-500/30",children:"Ø¯Ø®ÙˆÙ„"})]}),e.jsx("div",{className:"mt-8 text-center border-t pt-4",children:e.jsxs("button",{onClick:()=>r("home"),className:"text-gray-500 hover:text-gray-800 text-sm font-medium flex items-center justify-center gap-2 w-full",children:[e.jsx(Ce,{size:16})," Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"]})})]})})},Hs=({user:r,students:a,schedule:l,news:d,handleLogout:o})=>{const[n,c]=b.useState(new Date),x=m=>{const z=new Date(n);z.setMonth(z.getMonth()+m),c(z)},p=n.getFullYear(),w=n.getMonth(),f=new Date(p,w+1,0).getDate(),j=["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"],t=V("payments").data||[],h=a.find(m=>m.id===r.id)||r,y=a.filter(m=>m.familyId===r.familyId),u=t.filter(m=>y.some(z=>z.id===m.studentId)).sort((m,z)=>new Date(z.date)-new Date(m.date)),S=[...new Set(y.map(m=>m.branch))],R=(d||[]).filter(m=>!m.branch||m.branch==="Ø§Ù„ÙƒÙ„"||S.includes(m.branch)).sort((m,z)=>new Date(z.createdAt||0)-new Date(m.createdAt||0)),P=m=>{if(!m)return"expired";const z=new Date,K=new Date(m);z.setHours(0,0,0,0),K.setHours(0,0,0,0);const i=K-z,O=Math.ceil(i/(1e3*60*60*24));return O<0?"expired":O<=7?"near_end":"active"},[M,_]=b.useState(!1),[E,G]=b.useState({username:"",password:""}),[L,q]=b.useState(!1),C=async m=>{if(m.preventDefault(),!E.username||!E.password)return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");q(!0);try{const z=he(Z,"artifacts",te,"public","data","students",h.id);await ts(z,{username:E.username,password:E.password});const K={...r,username:E.username,password:E.password};localStorage.setItem("braveUser",JSON.stringify(K)),alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!"),_(!1)}catch(z){console.error(z),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ«")}finally{q(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans text-right",dir:"rtl",children:[e.jsx("header",{className:"bg-black text-yellow-500 p-4 shadow-lg sticky top-0 z-40",children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:re.LOGO,alt:"Logo",className:"w-10 h-10 bg-white rounded-full p-1"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-bold text-lg",children:["Ù…Ø±Ø­Ø¨Ø§Ù‹ ",r.name]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{variant:"secondary",onClick:()=>{G({username:h.username,password:h.password}),_(!0)},className:"text-sm bg-gray-800 hover:bg-gray-700 text-yellow-500 border border-gray-700",children:[e.jsx(ye,{size:16})," Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"]}),e.jsxs(I,{variant:"secondary",onClick:o,className:"text-sm",children:[e.jsx(rs,{size:16})," Ø®Ø±ÙˆØ¬"]})]})]})}),e.jsxs("div",{className:"container mx-auto p-4 md:p-8 max-w-5xl space-y-8",children:[R.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border-r-4 border-yellow-500 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-white border-b border-yellow-100 flex items-center gap-2",children:[e.jsx("div",{className:"bg-yellow-500 text-white p-2 rounded-full shadow-sm animate-pulse",children:e.jsx(be,{size:20})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:R.slice(0,4).map(m=>e.jsxs("div",{className:"flex gap-4 items-start p-3 bg-gray-50 rounded-xl hover:shadow-md transition-all border border-gray-100",children:[m.image?e.jsx("img",{src:m.image,alt:"News",className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}):e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center text-gray-400",children:e.jsx(be,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:m.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed",children:m.desc}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("span",{className:"text-[10px] bg-white border border-gray-200 px-2 py-0.5 rounded-full text-gray-500",children:m.branch||"Ø¹Ø§Ù…"})})]})]},m.id))})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 text-white p-6 rounded-2xl shadow-lg",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx($e,{className:"text-yellow-500"})," Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø­ØµØµ"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:l&&l.length>0?l.map(m=>e.jsxs("div",{className:"bg-white/10 p-4 rounded-lg",children:[e.jsx("p",{className:"font-bold text-yellow-400 mb-1",children:m.level}),e.jsxs("p",{className:"text-sm",children:[m.days," | ",m.time]})]},m.id)):e.jsx("p",{className:"text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø¯ÙˆÙ„ Ø­ØµØµ Ù…Ø¹Ù„Ù† Ø­Ø§Ù„ÙŠØ§Ù‹"})})]}),e.jsx(H,{title:"ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø§Ù„Ø¯ÙØ¹Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)",children:u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø¨ÙŠØ§Ù†"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨Ù„Øº"})]})}),e.jsx("tbody",{children:u.map(m=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-3 text-gray-500 font-mono",children:m.date}),e.jsx("td",{className:"p-3 font-bold text-gray-800",children:m.name}),e.jsxs("td",{className:"p-3 text-gray-700",children:[m.reason," ",m.details&&e.jsxs("span",{className:"block text-xs text-gray-400 mt-1",children:["(",m.details,")"]})]}),e.jsxs("td",{className:"p-3 text-green-600 font-bold",dir:"ltr",children:[m.amount," JD"]})]},m.id))})]})}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"})}),y.map(m=>e.jsxs(H,{className:"mb-8 border-t-4 border-yellow-500",title:m.name,children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø§Ù„Ø­Ø²Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("p",{className:"font-bold text-xl",children:m.belt})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx(qe,{status:P(m.subEnd)}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["ÙŠÙ†ØªÙ‡ÙŠ: ",m.subEnd]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ­Ù‚"}),e.jsxs("p",{className:`font-bold text-xl ${m.balance>0?"text-red-600":"text-green-600"}`,children:[m.balance," JOD"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø§Ù„ÙØ±Ø¹"}),e.jsx("p",{className:"font-bold text-lg",children:m.branch})]})]}),m.notes&&m.notes.length>0&&e.jsxs("div",{className:"mb-6 bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsx("h4",{className:"font-bold text-blue-800 text-sm mb-2",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-blue-900",children:m.notes.map(z=>e.jsxs("li",{children:[z.text," (",z.date,")"]},z.id))})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-bold text-gray-700",children:["Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±: ",j[w]," ",p]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:"ghost",onClick:()=>x(-1),children:e.jsx(Ce,{size:16})}),e.jsx(I,{variant:"ghost",onClick:()=>x(1),children:e.jsx(Je,{size:16})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:[...Array(f)].map((z,K)=>{const i=K+1,O=`${p}-${String(w+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`,J=m.attendance&&m.attendance[O];return e.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-xs font-bold border ${J?"bg-green-500 text-white":"bg-gray-100 text-gray-400"}`,children:i},i)})})]})]},m.id))]}),M&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs(H,{className:"w-full max-w-sm relative bg-white rounded-2xl shadow-2xl",children:[e.jsx("button",{onClick:()=>_(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-black transition-colors",children:e.jsx(ce,{size:24})}),e.jsx("h3",{className:"text-xl font-bold mb-6 text-center text-gray-800",children:"ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„"}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯"}),e.jsx("input",{className:"w-full border-2 border-gray-200 p-3 rounded-xl focus:border-yellow-500 outline-none transition-colors font-mono text-left dir-ltr",value:E.username,onChange:m=>G({...E,username:m.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©"}),e.jsx("input",{className:"w-full border-2 border-gray-200 p-3 rounded-xl focus:border-yellow-500 outline-none transition-colors font-mono text-left dir-ltr",value:E.password,onChange:m=>G({...E,password:m.target.value}),required:!0})]}),e.jsx("div",{className:"pt-4",children:e.jsx(I,{type:"submit",disabled:L,className:"w-full py-3 bg-yellow-500 text-black font-bold hover:bg-yellow-400 transition-colors shadow-lg shadow-yellow-500/20",children:L?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"})})]})]})})]})},Gs=({user:r,selectedBranch:a,branchStudents:l,netProfit:d,totalAttendance:o,expiredCount:n,activeStudentsCount:c,nearEndCount:x,totalStudents:p,activityLogs:w=[]})=>{const f=j=>{if(!j)return{date:"-",time:"-"};const D=new Date(j);return{date:D.toLocaleDateString("ar-JO"),time:D.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}};return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl p-8 text-white shadow-lg flex justify-between items-center relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ ",r.name,"! ðŸ‘‹"]}),e.jsxs("p",{className:"opacity-90",children:["Ù†Ø¸Ø±Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡ ÙØ±Ø¹ ",a]})]}),e.jsxs("div",{className:"relative z-10 bg-white/20 p-4 rounded-xl backdrop-blur-sm text-center",children:[e.jsx("span",{className:"block text-4xl font-bold",children:new Date().getDate()}),e.jsx("span",{className:"uppercase text-sm tracking-wider",children:new Date().toLocaleString("en-us",{month:"short"})})]}),e.jsx("div",{className:"absolute right-0 top-0 opacity-10 transform translate-x-10 -translate-y-10",children:e.jsx(as,{size:200})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(H,{className:"border-l-4 border-blue-500 transform hover:-translate-y-1 transition-transform",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:l.length})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(ze,{className:"text-blue-600",size:24})})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(_e,{size:12,className:"text-green-500"})," ",e.jsx("span",{className:"text-green-500 font-bold",children:"+3"})," Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±"]})]}),e.jsx(H,{className:"border-l-4 border-green-500 transform hover:-translate-y-1 transition-transform",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"ØµØ§ÙÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"}),e.jsxs("h3",{className:"text-3xl font-bold text-gray-800",children:[d," ",e.jsx("span",{className:"text-sm text-gray-400",children:"JOD"})]})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(Ss,{className:"text-green-600",size:24})})]})}),e.jsx(H,{className:"border-l-4 border-purple-500 transform hover:-translate-y-1 transition-transform",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Ø­Ø¶ÙˆØ± Ø§Ù„Ø´Ù‡Ø±"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:o})]}),e.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:e.jsx(ke,{className:"text-purple-600",size:24})})]})}),e.jsx(H,{className:"border-l-4 border-red-500 transform hover:-translate-y-1 transition-transform",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ù…Ù†ØªÙ‡ÙŠØ©"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:n})]}),e.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:e.jsx(Ds,{className:"text-red-600",size:24})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(H,{title:"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª",className:"lg:col-span-1",children:[e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx("div",{className:"relative w-48 h-48 rounded-full bg-gray-100 border-8 border-white shadow-inner flex items-center justify-center",style:{background:`conic-gradient(#22c55e 0% ${c/p*100||0}%, #eab308 ${c/p*100||0}% ${(c+x)/p*100||0}%, #ef4444 ${(c+x)/p*100||0}% 100%)`},children:e.jsxs("div",{className:"w-32 h-32 bg-white rounded-full flex flex-col items-center justify-center z-10 shadow-sm",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-800",children:p}),e.jsx("span",{className:"text-xs text-gray-400",children:"Ø·Ø§Ù„Ø¨ ÙƒÙ„ÙŠ"})]})})}),e.jsxs("div",{className:"flex justify-around text-xs mt-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})," ÙØ¹Ø§Ù„ (",c,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"})," Ù‚Ø§Ø±Ø¨ (",x,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"})," Ù…Ù†ØªÙ‡ÙŠ (",n,")"]})]})]}),e.jsx(H,{title:"Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ± (Live Log)",className:"lg:col-span-2",children:e.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:w.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-10 flex flex-col items-center",children:[e.jsx(Cs,{size:32,className:"mb-2 opacity-30"}),e.jsx("p",{children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Ø´Ø§Ø·Ø§Øª Ù…Ø³Ø¬Ù„Ø© Ø­Ø¯ÙŠØ«Ø§Ù‹"})]}):w.map((j,D)=>{const{date:t,time:h}=f(j.timestamp);return e.jsxs("div",{className:"flex gap-4 items-start p-3 hover:bg-gray-50 rounded-xl transition border border-gray-100 shadow-sm bg-white",children:[e.jsx("div",{className:"bg-blue-50 text-blue-600 p-2 rounded-full mt-1 shrink-0",children:e.jsx(ns,{size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:j.action}),e.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full font-mono flex items-center gap-1",children:[e.jsx($e,{size:10})," ",h]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:j.details}),e.jsxs("div",{className:"flex justify-between items-center mt-2 border-t border-gray-50 pt-2",children:[e.jsxs("p",{className:"text-[10px] font-bold text-blue-800",children:["Ø¨ÙˆØ§Ø³Ø·Ø©: ",j.performedBy]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:t})]})]})]},D)})})})]})]})},Js=()=>{const a=`student${Math.floor(1e3+Math.random()*9e3)}`,l="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789";let d="";for(let o=0;o<8;o++)d+=l.charAt(Math.floor(Math.random()*l.length));return{username:a,password:d}},Fe=r=>{if(!r)return"expired";const a=new Date,l=new Date(r);a.setHours(0,0,0,0),l.setHours(0,0,0,0);const d=l-a,o=Math.ceil(d/(1e3*60*60*24));return o<0?"expired":o<=7?"near_end":"active"},es=r=>{if(!r)return!1;const a=new Date,l=new Date(r),d=Math.abs(a-l);return Math.ceil(d/(1e3*60*60*24))<=7},je=({children:r,onClose:a})=>typeof document>"u"?null:He.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] overflow-y-auto",role:"dialog",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:a}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center sm:p-0",children:e.jsx("div",{className:"relative transform overflow-hidden rounded-2xl text-right shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-2xl bg-white",onClick:l=>l.stopPropagation(),children:r})})]}),document.body),Ws=({isOpen:r,onClose:a,groups:l,allStudents:d,onSend:o})=>{const[n,c]=b.useState("all"),[x,p]=b.useState(""),[w,f]=b.useState([]),[j,D]=b.useState(""),[t,h]=b.useState(""),[y,u]=b.useState(!1);if(!r)return null;const S=d.filter(M=>M.name.toLowerCase().includes(j.toLowerCase())),R=M=>{w.includes(M)?f(_=>_.filter(E=>E!==M)):f(_=>[..._,M])},P=async()=>{if(!t.trim())return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©");if(n==="custom"&&w.length===0)return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø§Ù„Ø¨ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");u(!0),await o(n,x,t,w),u(!1),h(""),f([]),a()};return e.jsx(je,{onClose:a,children:e.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-blue-700",children:[e.jsx(be,{size:24})," Ø¥Ø±Ø³Ø§Ù„ ØªØ¹Ù…ÙŠÙ… / Ø¥Ø¹Ù„Ø§Ù†"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù„Ù…Ù† ØªØ±ÙŠØ¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ØŸ"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 p-3 rounded-xl border border-gray-200",children:[e.jsx("input",{type:"radio",name:"target",value:"all",checked:n==="all",onChange:()=>c("all")}),e.jsx("span",{children:"Ø§Ù„ÙƒÙ„ (Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 p-3 rounded-xl border border-gray-200",children:[e.jsx("input",{type:"radio",name:"target",value:"group",checked:n==="group",onChange:()=>{c("group"),l.length>0&&p(l[0])}}),e.jsx("span",{children:"ÙØªØ±Ø© / Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ø­Ø¯Ø¯Ø©"})]}),n==="group"&&e.jsx("div",{className:"mr-6 mb-2",children:e.jsx("select",{className:"w-full border-2 border-gray-200 p-2 rounded-xl outline-none",value:x,onChange:M=>p(M.target.value),children:l.map((M,_)=>e.jsx("option",{value:M,children:M},_))})}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 p-3 rounded-xl border border-gray-200",children:[e.jsx("input",{type:"radio",name:"target",value:"custom",checked:n==="custom",onChange:()=>c("custom")}),e.jsx("span",{children:"ØªØ­Ø¯ÙŠØ¯ Ø·Ù„Ø§Ø¨ (ÙŠØ¯ÙˆÙŠØ§Ù‹)"})]}),n==="custom"&&e.jsxs("div",{className:"mr-6 p-3 border border-gray-200 rounded-xl bg-white",children:[e.jsx("input",{className:"w-full border-b border-gray-100 p-2 mb-2 text-sm outline-none",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨...",value:j,onChange:M=>D(M.target.value)}),e.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 custom-scrollbar",children:S.map(M=>e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:w.includes(M.id),onChange:()=>R(M.id)}),e.jsx("span",{className:"text-sm",children:M.name})]},M.id))}),e.jsxs("div",{className:"mt-2 text-xs text-blue-600 font-bold",children:["ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ",w.length," Ø·Ø§Ù„Ø¨"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù†Øµ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†"}),e.jsx("textarea",{className:"w-full border-2 border-gray-200 p-3 rounded-xl outline-none h-32 focus:border-blue-500",placeholder:"Ø§ÙƒØªØ¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù‡Ù†Ø§... (Ø³ÙŠØ¸Ù‡Ø± ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø·Ù„Ø§Ø¨)",value:t,onChange:M=>h(M.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(I,{variant:"ghost",onClick:a,children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(I,{onClick:P,disabled:y,className:"bg-blue-600 text-white hover:bg-blue-700",children:y?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†"})]})]})]})})},Bs=({student:r,onClose:a,onSave:l})=>{const[d,o]=b.useState("private"),[n,c]=b.useState(""),x=()=>{if(!n.trim())return;const f={id:Date.now().toString(),text:n,date:new Date().toLocaleDateString("ar-JO"),timestamp:new Date().toISOString()};l(r.id,d,"add",f),c("")},p=f=>{confirm("Ø­Ø°Ù Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©ØŸ")&&l(r.id,d,"delete",{id:f})},w=d==="private"?r.internalNotes||[]:r.notes||[];return e.jsx(je,{onClose:a,children:e.jsxs("div",{className:"p-0 overflow-hidden flex flex-col h-[500px]",children:[e.jsxs("div",{className:`p-4 text-white flex justify-between items-center ${d==="private"?"bg-red-600":"bg-blue-600"}`,children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[d==="private"?e.jsx(ge,{size:20}):e.jsx(Me,{size:20}),d==="private"?`Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ©: ${r.name}`:`Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù„Ù„Ø·Ø§Ù„Ø¨: ${r.name}`]}),e.jsx("button",{onClick:a,children:e.jsx(ce,{size:20})})]}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>o("private"),className:`flex-1 py-3 font-bold text-sm flex items-center justify-center gap-2 ${d==="private"?"text-red-600 border-b-2 border-red-600 bg-red-50":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(ge,{size:16})," Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ© (Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©)"]}),e.jsxs("button",{onClick:()=>o("public"),className:`flex-1 py-3 font-bold text-sm flex items-center justify-center gap-2 ${d==="public"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(Me,{size:16})," Ø¥Ø¹Ù„Ø§Ù†Ø§Øª (Ù„Ù„Ø·Ø§Ù„Ø¨)"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:w.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[d==="private"?e.jsx(ge,{size:48,className:"mb-2 opacity-20"}):e.jsx(Me,{size:48,className:"mb-2 opacity-20"}),e.jsx("p",{children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ø³Ø¬Ù„Ø©"})]}):e.jsx("div",{className:"space-y-3",children:w.map(f=>e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-gray-200 shadow-sm relative group",children:[e.jsx("p",{className:"text-gray-800 text-sm whitespace-pre-wrap",children:f.text}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] text-gray-400 bg-gray-100 px-2 py-1 rounded-full",children:f.date}),e.jsx("button",{onClick:()=>p(f.id),className:"text-red-400 hover:text-red-600 p-1",children:e.jsx(se,{size:16})})]})]},f.id))})}),e.jsx("div",{className:"p-4 bg-white border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 border-2 border-gray-200 rounded-xl px-4 py-2 focus:outline-none focus:border-yellow-500",placeholder:d==="private"?"Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸Ø© Ø³Ø±ÙŠØ©...":"Ø§ÙƒØªØ¨ Ø¥Ø¹Ù„Ø§Ù†Ø§Ù‹ Ù„Ù„Ø·Ø§Ù„Ø¨...",value:n,onChange:f=>c(f.target.value),onKeyDown:f=>f.key==="Enter"&&x()}),e.jsx(I,{onClick:x,className:d==="private"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700",children:e.jsx(Ne,{size:18})})]})})]})})},Ks=({student:r,onClose:a,onSave:l})=>{const[d,o]=b.useState(r.subEnd||new Date().toISOString().split("T")[0]),n=c=>{const x=new Date(d);x.setMonth(x.getMonth()+c),o(x.toISOString().split("T")[0])};return e.jsx(je,{onClose:a,children:e.jsxs("div",{className:"p-6 text-right",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 text-green-700 flex items-center gap-2",children:[e.jsx(Te,{size:24})," ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§Ùƒ: ",r.name]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯"}),e.jsx("input",{type:"date",className:"w-full border-2 border-green-100 focus:border-green-500 p-3 rounded-xl outline-none text-lg font-bold text-center bg-green-50/20",value:d,onChange:c=>o(c.target.value)})]}),e.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-2",children:"Ø¥Ø¶Ø§ÙØ© Ø³Ø±ÙŠØ¹Ø©:"}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>n(1),className:"flex-1 bg-white hover:bg-green-50 text-green-700 border border-green-200 py-3 rounded-xl font-bold text-sm transition shadow-sm hover:shadow-md",children:"+ Ø´Ù‡Ø±"}),e.jsx("button",{onClick:()=>n(2),className:"flex-1 bg-white hover:bg-green-50 text-green-700 border border-green-200 py-3 rounded-xl font-bold text-sm transition shadow-sm hover:shadow-md",children:"+ Ø´Ù‡Ø±ÙŠÙ†"}),e.jsx("button",{onClick:()=>n(3),className:"flex-1 bg-white hover:bg-green-50 text-green-700 border border-green-200 py-3 rounded-xl font-bold text-sm transition shadow-sm hover:shadow-md",children:"+ 3 Ø´Ù‡ÙˆØ±"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(I,{variant:"ghost",onClick:a,children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(I,{onClick:()=>l(r.id,d),className:"flex-1 bg-green-600 text-white hover:bg-green-700 shadow-lg shadow-green-600/20",children:"Ø­ÙØ¸ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯"})]})]})})},Vs=({students:r,studentsCollection:a,archiveCollection:l,selectedBranch:d,logActivity:o,groups:n})=>{const[c,x]=b.useState(""),[p,w]=b.useState("all"),[f,j]=b.useState("joinDateDesc"),[D,t]=b.useState(!1),[h,y]=b.useState(null),[u,S]=b.useState(null),[R,P]=b.useState(null),[M,_]=b.useState(!1),[E,G]=b.useState(null),L=b.useMemo(()=>n?n.map(s=>s.name):[],[n]),q={name:"",phone:"",belt:"Ø£Ø¨ÙŠØ¶",group:"",joinDate:new Date().toISOString().split("T")[0],dob:"",address:"",balance:0,subEnd:"",username:"",password:""},[C,m]=b.useState(q),[z,K]=b.useState("new"),i=[...new Map(r.map(s=>[s.familyId,s.familyName])).entries()],O=b.useMemo(()=>{let s=[...r];if(c){const v=c.toLowerCase();s=s.filter($=>$.name.toLowerCase().includes(v)||$.phone.includes(v)||$.username.toLowerCase().includes(v))}return p!=="all"&&(s=s.filter(v=>Fe(v.subEnd)===p)),s.sort((v,$)=>{switch(f){case"joinDateDesc":return new Date($.joinDate||0)-new Date(v.joinDate||0);case"joinDateAsc":return new Date(v.joinDate||0)-new Date($.joinDate||0);case"beltDesc":return le.indexOf($.belt)-le.indexOf(v.belt);case"beltAsc":return le.indexOf(v.belt)-le.indexOf($.belt);case"balanceDesc":return $.balance-v.balance;default:return 0}}),s},[r,c,p,f]),J=async s=>{var ie;s.preventDefault();let v=C.username,$=C.password;if(!v||!$){const ee=Js();v=ee.username,$=ee.password}let U,W;z==="new"?(U=Math.floor(Date.now()/1e3),W=`Ø¹Ø§Ø¦Ù„Ø© ${C.name.split(" ").slice(-1)[0]}`):(U=parseInt(z),W=((ie=r.find(ee=>ee.familyId===U))==null?void 0:ie.familyName)||"Ø¹Ø§Ø¦Ù„Ø©");let N=C.subEnd;if(!N){const ee=new Date(C.joinDate||new Date),Ae=new Date(ee);Ae.setMonth(Ae.getMonth()+1),N=Ae.toISOString().split("T")[0]}const T=C.group||(L.length>0?L[0]:"Ø§Ù„ÙƒÙ„"),B={...C,branch:d,status:"active",subEnd:N,notes:[],internalNotes:[],attendance:{},familyId:U,familyName:W,customOrder:Date.now(),group:T,username:v,password:$};await a.add(B)&&(o&&o("Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨",`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ ${B.name}`),S({name:B.name,username:v,password:$,phone:B.phone}),Q())},X=s=>{y(s),m({name:s.name,phone:s.phone,belt:s.belt,group:s.group||"",joinDate:s.joinDate,dob:s.dob,address:s.address||"",subEnd:s.subEnd,balance:s.balance,username:s.username,password:s.password}),K(s.familyId),t(!0)},Q=()=>{t(!1),y(null),m(q),K("new")},xe=async s=>{s.preventDefault(),await a.update(h.id,C),Q()},ne=async s=>{const v=le.indexOf(s.belt);v<le.length-1&&await a.update(s.id,{belt:le[v+1]})},oe=async s=>{confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ø±Ø´ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ ${s.name}ØŸ`)&&(await l.add({...s,archivedAt:new Date().toISOString().split("T")[0],originalId:s.id}),await a.remove(s.id),o&&o("Ø£Ø±Ø´ÙØ©",`Ø£Ø±Ø´ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ ${s.name}`))},ue=async(s,v,$,U)=>{const W=r.find(ae=>ae.id===s);if(!W)return;const N=v==="private"?"internalNotes":"notes";let T=W[N]||[],B;$==="add"?B=[U,...T]:B=T.filter(ae=>ae.id!==U.id),await a.update(s,{[N]:B})},g=async(s,v,$,U=[])=>{let W=[];if(s==="all"?W=r:s==="group"?W=r.filter(T=>T.group===v):s==="custom"&&(W=r.filter(T=>U.includes(T.id))),W.length===0)return alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø§Ø¨ Ù…Ø³ØªÙ‡Ø¯ÙÙŠÙ†");if(!confirm(`Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù€ ${W.length} Ø·Ø§Ù„Ø¨. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ`))return;const N={id:Date.now().toString(),text:$,date:new Date().toLocaleDateString("ar-JO"),timestamp:new Date().toISOString()};try{const T=ys(Z);let B=0;W.forEach(ae=>{const ie=he(Z,"artifacts",te,"public","data","students",ae.id),ee=ae.notes||[];T.update(ie,{notes:[N,...ee]}),B++}),B>0&&(await T.commit(),alert("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­!"))}catch(T){console.error("Broadcast Error:",T),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª.")}},k=async(s,v)=>{await a.update(s,{subEnd:v}),o&&o("ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§Ùƒ",`ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§Ùƒ Ù„Ù„Ø·Ø§Ù„Ø¨ (ØªØ§Ø±ÙŠØ® Ø¬Ø¯ÙŠØ¯: ${v})`),G(null)},A=s=>{if(!s)return;let v=s.replace(/\D/g,"");v.startsWith("0")&&(v=v.substring(1)),window.open(`https://wa.me/962${v}`,"_blank")},F=s=>{if(!s.phone)return;let v=s.phone.replace(/\D/g,"");v.startsWith("0")&&(v=v.substring(1));const $=`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${s.name} ðŸ”¥

Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹ Ù„Ù„ØªØ§ÙŠÙƒÙˆØ§Ù†Ø¯Ùˆ !
Ø¥Ù„ÙŠÙƒ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ Ø¨Ø§Ù„Ù…ÙˆÙ‚Ø¹ :

ðŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${s.username}
ðŸ”‘ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${s.password}

Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø§Ù„Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠ :
https://bravetkd.bar/

Ù†ØªÙ…Ù†Ù‰ Ù„Ùƒ Ø§Ù„ØªÙˆÙÙŠÙ‚ ÙŠØ§ Ø¨Ø·Ù„! ðŸ¥‹

ðŸ“ ÙØ±ÙˆØ¹Ù†Ø§ :
âœ… Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø£ÙˆÙ„: Ø´ÙØ§Ø¨Ø¯Ø±Ø§Ù† â€“ Ø´Ø§Ø±Ø¹ Ø±ÙØ¹Øª Ø´Ù…ÙˆØ·
ðŸ“ž 0795629606

âœ… Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø£Ø¨Ùˆ Ù†ØµÙŠØ± â€“ Ø¯ÙˆØ§Ø± Ø§Ù„Ø¨Ø­Ø±ÙŠØ© - Ù…Ø¬Ù…Ø¹ Ø§Ù„ÙØ±Ù‘Ø§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ
ðŸ“ž 0790368603`;window.open(`https://wa.me/962${v}?text=${encodeURIComponent($)}`,"_blank")};return e.jsxs("div",{className:"space-y-6 animate-fade-in font-sans",children:[e.jsx(Ws,{isOpen:M,onClose:()=>_(!1),groups:L,allStudents:r,onSend:g}),R&&e.jsx(Bs,{student:R,onClose:()=>P(null),onSave:ue}),E&&e.jsx(Ks,{student:E,onClose:()=>G(null),onSave:k}),u&&e.jsx(je,{onClose:()=>S(null),children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce",children:e.jsx(Ye,{size:32})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨Ø·Ù„ Ø¨Ù†Ø¬Ø§Ø­!"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Ø§Ù„Ø·Ø§Ù„Ø¨: ",e.jsx("strong",{children:u.name})]}),e.jsxs("div",{className:"bg-gray-50 p-4 border rounded-xl mb-6 dir-ltr text-left relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 bg-yellow-400 text-xs font-bold text-black rounded-bl-lg",children:"Credentials"}),e.jsxs("p",{className:"font-mono text-sm mb-1",children:["User: ",e.jsx("strong",{className:"text-lg text-blue-900 select-all",children:u.username})]}),e.jsxs("p",{className:"font-mono text-sm",children:["Pass: ",e.jsx("strong",{className:"text-lg text-red-600 select-all",children:u.password})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(I,{onClick:()=>F(u),className:"bg-[#25D366] hover:bg-[#20bd5a] text-white flex items-center justify-center gap-2",children:[e.jsx(Ne,{size:18})," Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§ØªØ³Ø§Ø¨"]}),e.jsx(I,{variant:"outline",onClick:()=>S(null),children:"Ø¥ØºÙ„Ø§Ù‚"})]})]})}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col md:flex-row gap-4 justify-between items-center sticky top-0 z-20",children:[e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx(Ge,{size:18,className:"text-gray-400"})}),e.jsx("input",{className:"w-full pl-4 pr-10 py-2.5 border-2 border-gray-100 rounded-xl focus:border-yellow-500 focus:ring-4 focus:ring-yellow-500/10 outline-none transition-all",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù…ØŒ Ù‡Ø§ØªÙØŒ ÙŠÙˆØ²Ø±...",value:c,onChange:s=>x(s.target.value),list:"students-suggestions"}),e.jsx("datalist",{id:"students-suggestions",children:r.map(s=>e.jsx("option",{value:s.name},s.id))})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-1 md:pb-0 hide-scrollbar",children:[e.jsxs(I,{onClick:()=>_(!0),className:"bg-blue-50 text-blue-600 border border-blue-100 hover:bg-blue-100 whitespace-nowrap flex items-center gap-2",children:[e.jsx(be,{size:18})," ",e.jsx("span",{className:"hidden sm:inline",children:"Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„ÙƒÙ„"})]}),e.jsxs("div",{className:"relative min-w-[120px]",children:[e.jsxs("select",{className:"w-full appearance-none bg-gray-50 border border-gray-200 text-gray-700 py-2.5 pr-8 pl-8 rounded-xl focus:outline-none focus:border-yellow-500 cursor-pointer text-sm font-bold",value:p,onChange:s=>w(s.target.value),children:[e.jsx("option",{value:"all",children:"ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª"}),e.jsx("option",{value:"active",children:"ðŸŸ¢ ÙØ¹Ø§Ù„"}),e.jsx("option",{value:"near_end",children:"ðŸŸ¡ Ù‚Ø§Ø±Ø¨ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"}),e.jsx("option",{value:"expired",children:"ðŸ”´ Ù…Ù†ØªÙ‡ÙŠ"})]}),e.jsx(zs,{size:14,className:"absolute top-1/2 -translate-y-1/2 right-3 text-gray-500 pointer-events-none"})]}),e.jsxs("div",{className:"relative min-w-[140px]",children:[e.jsxs("select",{className:"w-full appearance-none bg-gray-50 border border-gray-200 text-gray-700 py-2.5 pr-8 pl-8 rounded-xl focus:outline-none focus:border-yellow-500 cursor-pointer text-sm font-bold",value:f,onChange:s=>j(s.target.value),children:[e.jsx("option",{value:"joinDateDesc",children:"ðŸ“… Ø§Ù„Ø£Ø­Ø¯Ø«"}),e.jsx("option",{value:"joinDateAsc",children:"ðŸ“… Ø§Ù„Ø£Ù‚Ø¯Ù…"}),e.jsx("option",{value:"beltDesc",children:"ðŸ¥‹ Ø£Ø¹Ù„Ù‰ Ø­Ø²Ø§Ù…"}),e.jsx("option",{value:"balanceDesc",children:"ðŸ’° Ø§Ù„Ù…Ø¯ÙŠÙˆÙ†ÙŠØ©"})]}),f.includes("Desc")?e.jsx($s,{size:14,className:"absolute top-1/2 -translate-y-1/2 right-3 text-gray-500 pointer-events-none"}):e.jsx(Is,{size:14,className:"absolute top-1/2 -translate-y-1/2 right-3 text-gray-500 pointer-events-none"})]}),e.jsxs(I,{onClick:()=>{y(null),t(!0)},className:"whitespace-nowrap flex items-center gap-2 shadow-lg shadow-yellow-500/20",children:[e.jsx(As,{size:18})," ",e.jsx("span",{className:"hidden sm:inline",children:"Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯"}),e.jsx("span",{className:"inline sm:hidden",children:"Ø¬Ø¯ÙŠØ¯"})]})]})]}),e.jsx(H,{className:"hidden md:block overflow-hidden border-none shadow-md rounded-2xl p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„ÙØªØ±Ø©"}),e.jsx("th",{className:"p-4 font-bold",children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„Ø­Ø²Ø§Ù…"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:O.map(s=>{const v=es(s.joinDate),$=s.internalNotes&&s.internalNotes.length>0,U=s.notes&&s.notes.length>0;return e.jsxs("tr",{className:"hover:bg-yellow-50/50 transition-colors group",children:[e.jsxs("td",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[$&&e.jsx("button",{onClick:()=>P(s),className:"text-red-500 hover:scale-110 transition-transform",title:"ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ©!",children:e.jsx(Ze,{size:20,fill:"currentColor",className:"text-red-100"})}),e.jsx("div",{className:"font-bold text-gray-800 text-base cursor-pointer hover:text-blue-600",onClick:()=>P(s),children:s.name}),v&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-red-100 text-red-600 text-[10px] font-bold border border-red-200 animate-pulse",children:"NEW"})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:s.joinDate})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-bold border border-blue-100",children:s.group||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("a",{href:`tel:${s.phone}`,className:"font-mono text-gray-600 hover:text-blue-600 font-bold flex items-center gap-1",title:"Ø§ØªØµØ§Ù„",children:[s.phone," ",e.jsx(pe,{size:12,className:"opacity-50"})]}),e.jsx("button",{onClick:()=>A(s.phone),className:"w-8 h-8 rounded-full bg-green-50 text-[#25D366] flex items-center justify-center hover:bg-[#25D366] hover:text-white transition-all shadow-sm",children:e.jsx(me,{size:16})})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"bg-gray-50 p-1.5 rounded-lg text-xs font-mono border border-gray-100",children:[e.jsxs("div",{className:"text-blue-900",children:["U: ",s.username]}),e.jsxs("div",{className:"text-red-600 font-bold",children:["P: ",s.password]})]}),e.jsx("button",{onClick:()=>F(s),className:"text-gray-400 hover:text-[#25D366] transition-colors",children:e.jsx(Ne,{size:16})})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-3 py-1 bg-gray-100 rounded-lg font-bold text-xs border border-gray-200",children:s.belt})}),e.jsx("td",{className:"p-4",children:s.balance>0?e.jsxs("span",{className:"text-red-600 font-bold bg-red-50 px-2 py-1 rounded text-xs",children:["Ø¹Ù„ÙŠÙ‡ ",s.balance]}):e.jsx("span",{className:"text-green-600 font-bold text-xs",children:"Ø®Ø§Ù„Øµ"})}),e.jsx("td",{className:"p-4",children:e.jsx(qe,{status:Fe(s.subEnd)})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>G(s),className:"bg-green-100 text-green-700 p-2 rounded-lg hover:bg-green-600 hover:text-white transition",title:"ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ",children:e.jsx(Te,{size:16})}),e.jsx("button",{onClick:()=>P(s),className:`p-2 rounded-lg transition ${U||$?"bg-yellow-100 text-yellow-700":"bg-gray-50 text-gray-400 hover:text-yellow-600"}`,title:"Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª",children:e.jsx(ge,{size:16})}),e.jsx("button",{onClick:()=>ne(s),className:"bg-blue-50 text-blue-600 p-2 rounded-lg hover:bg-blue-600 hover:text-white transition",title:"ØªØ±ÙÙŠØ¹",children:e.jsx(_e,{size:16})}),e.jsx("button",{onClick:()=>X(s),className:"bg-gray-100 text-gray-600 p-2 rounded-lg hover:bg-gray-600 hover:text-white transition",title:"ØªØ¹Ø¯ÙŠÙ„",children:e.jsx(Ue,{size:16})}),e.jsx("button",{onClick:()=>oe(s),className:"bg-red-50 text-red-600 p-2 rounded-lg hover:bg-red-600 hover:text-white transition",title:"Ø£Ø±Ø´ÙØ©",children:e.jsx(fe,{size:16})})]})})]},s.id)})})]})})}),e.jsxs("div",{className:"md:hidden grid grid-cols-1 gap-4",children:[O.map(s=>{const v=es(s.joinDate),$=Fe(s.subEnd),U=s.internalNotes&&s.internalNotes.length>0;return e.jsxs("div",{className:`bg-white p-4 rounded-xl shadow-sm border ${U?"border-red-200 ring-1 ring-red-100":"border-gray-100"} flex flex-col gap-3 relative`,children:[U&&e.jsx("div",{className:"absolute top-4 left-14 animate-pulse",children:e.jsx(Ze,{size:20,className:"text-red-500 fill-red-100"})}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:s.name}),v&&e.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-2 rounded-full animate-pulse",children:"NEW"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Ù…Ù†Ø°: ",s.joinDate]}),e.jsx("span",{className:"text-[10px] bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-bold mt-1 inline-block",children:s.group||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]}),e.jsx(qe,{status:$})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg",children:[e.jsx("span",{className:"text-gray-500 text-xs block",children:"Ø§Ù„Ø­Ø²Ø§Ù…"}),e.jsx("span",{className:"font-bold text-gray-800",children:s.belt})]}),e.jsxs("div",{className:`p-2 rounded-lg ${s.balance>0?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:[e.jsx("span",{className:"text-xs block opacity-70",children:"Ø§Ù„Ø±ØµÙŠØ¯"}),e.jsx("span",{className:"font-bold",children:s.balance>0?`Ø¹Ù„ÙŠÙ‡ ${s.balance}`:"Ø®Ø§Ù„Øµ"})]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-lg border border-gray-100 border-dashed",children:[e.jsxs("div",{className:"text-xs font-mono text-gray-600",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-bold text-blue-800",children:"U:"})," ",s.username]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-red-600",children:"P:"})," ",s.password]})]}),e.jsx("button",{onClick:()=>F(s),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200",children:e.jsx(Ne,{size:16})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100 mt-1",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:`tel:${s.phone}`,className:"p-2 bg-gray-100 rounded-full text-gray-600",children:e.jsx(pe,{size:16})}),e.jsx("button",{onClick:()=>A(s.phone),className:"p-2 bg-green-100 rounded-full text-[#25D366]",children:e.jsx(me,{size:16})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>G(s),className:"p-2 bg-green-100 text-green-700 rounded-lg",children:e.jsx(Te,{size:16})}),e.jsx("button",{onClick:()=>P(s),className:`p-2 rounded-lg ${U?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(ge,{size:16})}),e.jsx("button",{onClick:()=>ne(s),className:"p-2 bg-blue-50 text-blue-600 rounded-lg",children:e.jsx(_e,{size:16})}),e.jsx("button",{onClick:()=>X(s),className:"p-2 bg-yellow-50 text-yellow-600 rounded-lg",children:e.jsx(Ue,{size:16})}),e.jsx("button",{onClick:()=>oe(s),className:"p-2 bg-red-50 text-red-600 rounded-lg",children:e.jsx(fe,{size:16})})]})]})]},s.id)}),O.length===0&&e.jsx("div",{className:"text-center p-8 text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬"})]}),D&&e.jsx(je,{onClose:Q,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:h?"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨":"Ø¥Ø¶Ø§ÙØ© Ø¨Ø·Ù„ Ø¬Ø¯ÙŠØ¯"}),e.jsx("button",{onClick:Q,className:"text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(ce,{size:24})})]}),e.jsxs("form",{onSubmit:h?xe:J,className:"space-y-4 text-right",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 bg-gradient-to-r from-yellow-50 to-white p-4 rounded-xl border border-yellow-200 mb-2",children:[e.jsxs("p",{className:"text-xs font-bold text-yellow-700 mb-3 flex items-center gap-1",children:[e.jsx(Ye,{size:12})," Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ø§ØªØ±ÙƒÙ‡Ø§ ÙØ§Ø±ØºØ© Ù„Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Username"}),e.jsx("input",{className:"w-full border border-gray-200 p-2 rounded-lg bg-white font-mono text-left dir-ltr focus:border-yellow-500 outline-none",value:C.username,onChange:s=>m({...C,username:s.target.value}),placeholder:"Auto-generated"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Password"}),e.jsx("input",{className:"w-full border border-gray-200 p-2 rounded-lg bg-white font-mono text-left dir-ltr focus:border-yellow-500 outline-none",value:C.password,onChange:s=>m({...C,password:s.target.value}),placeholder:"Auto-generated"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none transition-all",value:C.name,onChange:s=>m({...C,name:s.target.value}),placeholder:"Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"Ø§Ù„ÙØªØ±Ø© / Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©"}),e.jsxs("select",{className:"w-full border-2 border-blue-100 focus:border-blue-500 p-2.5 rounded-xl bg-blue-50/50 outline-none",value:C.group,onChange:s=>m({...C,group:s.target.value}),children:[e.jsx("option",{value:"",children:"Ø¨Ø¯ÙˆÙ† ØªØ­Ø¯ÙŠØ¯"}),L.map((s,v)=>e.jsx("option",{value:s,children:s},v))]})]}),!h&&e.jsxs("div",{className:"md:col-span-2 bg-blue-50 p-3 rounded-xl border border-blue-100",children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© (Ù„Ù„Ø®ØµÙˆÙ…Ø§Øª)"}),e.jsxs("select",{className:"w-full border border-blue-200 p-2 rounded-lg bg-white focus:ring-2 focus:ring-blue-200 outline-none",value:z,onChange:s=>K(s.target.value),children:[e.jsx("option",{value:"new",children:"ØªØ³Ø¬ÙŠÙ„ ÙƒØ¹Ø§Ø¦Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),i.map(([s,v])=>e.jsxs("option",{value:s,children:["Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù€ ",v]},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:C.phone,onChange:s=>m({...C,phone:s.target.value}),placeholder:"079xxxxxxx"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Ø§Ù„Ø­Ø²Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("select",{className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl bg-white outline-none",value:C.belt,onChange:s=>m({...C,belt:s.target.value}),children:le.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-red-600 mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø§ÙØªØªØ§Ø­ÙŠ (Ø¯ÙŠÙ†Ø§Ø±)"}),e.jsx("input",{type:"number",className:"w-full border-2 border-red-50 focus:border-red-500 p-2.5 rounded-xl outline-none bg-red-50/30",value:C.balance,onChange:s=>m({...C,balance:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:C.dob,onChange:s=>m({...C,dob:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:C.joinDate,onChange:s=>m({...C,joinDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-green-600 mb-1",children:"Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("input",{type:"date",className:"w-full border-2 border-green-50 focus:border-green-500 p-2.5 rounded-xl outline-none bg-green-50/30",value:C.subEnd,onChange:s=>m({...C,subEnd:s.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx("input",{className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:C.address,onChange:s=>m({...C,address:s.target.value}),placeholder:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© - Ø§Ù„Ù…Ù†Ø·Ù‚Ø© - Ø§Ù„Ø´Ø§Ø±Ø¹"})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end mt-8 pt-4 border-t border-gray-100",children:[e.jsx(I,{type:"button",variant:"ghost",onClick:Q,className:"text-gray-500 hover:bg-gray-100",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(I,{type:"submit",className:"bg-yellow-500 text-black font-bold hover:bg-yellow-400 shadow-lg shadow-yellow-500/20 px-8",children:h?"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨"})]})]})]})})]})},Ys=({archiveCollection:r,studentsCollection:a,payments:l,logActivity:d})=>{const[o,n]=b.useState(null),[c,x]=b.useState(""),p=r.data.filter(t=>t.name.includes(c)),w=async t=>{if(!window.confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ø·Ø§Ù„Ø¨ ${t.name}ØŸ`))return;const{archivedAt:h,originalId:y,id:u,...S}=t;await a.add({...S,status:"active",joinDate:new Date().toISOString().split("T")[0]}),await r.remove(t.id),d("Ø§Ø³ØªØ¹Ø§Ø¯Ø©",`ØªÙ…Øª Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ ${t.name} Ù…Ù† Ø§Ù„Ø£Ø±Ø´ÙŠÙ`)},f=(t,h)=>{alert("Print functionality for: "+t.id)},j=t=>{if(!t)return;let h=t.replace(/\D/g,"");h.startsWith("0")&&(h=h.substring(1)),window.open(`https://wa.me/962${h}`,"_blank")},D=t=>{const h=t.originalId||t.id;return l.filter(y=>y.studentId===h||y.studentIds&&y.studentIds.includes(h))};return e.jsxs("div",{className:"space-y-6",children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60] p-4 backdrop-blur-sm",children:e.jsxs(H,{className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto",title:`Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø§Ù„ÙŠ: ${o.name}`,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:`p-4 rounded-xl border-2 text-center ${o.balance>0?"bg-red-50 border-red-500":"bg-green-50 border-green-500"}`,children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ (Ø°Ù…Ù…)"}),e.jsxs("p",{className:`text-2xl font-bold ${o.balance>0?"text-red-600":"text-green-600"}`,children:[o.balance," JOD"]})]}),e.jsxs("div",{className:"p-4 rounded-xl border bg-gray-50 text-center",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£Ø±Ø´ÙØ©"}),e.jsx("p",{className:"text-xl font-bold",children:o.archivedAt||"ØºÙŠØ± Ù…Ø³Ø¬Ù„"})]})]}),e.jsxs("h4",{className:"font-bold border-b pb-2 mb-4 text-gray-800 flex items-center gap-2",children:[e.jsx(os,{size:18,className:"text-green-600"})," Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª ÙˆØ§Ù„ÙˆØµÙ„Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©"]}),D(o).length>0?e.jsx("div",{className:"space-y-3",children:D(o).map(t=>e.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-lg border hover:shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:t.reason}),e.jsxs("p",{className:"text-xs text-gray-500",children:[t.date," - ",t.branch]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"font-bold text-green-600",children:[t.amount," JOD"]}),e.jsx("button",{onClick:()=>f(t,t.branch),className:"text-gray-400 hover:text-black",title:"Ø·Ø¨Ø§Ø¹Ø© Ù†Ø³Ø®Ø©",children:e.jsx(Se,{size:16})})]})]},t.id))}):e.jsx("div",{className:"text-center py-8 bg-gray-50 rounded border-2 border-dashed",children:e.jsx("p",{className:"text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ù…Ø§Ù„ÙŠØ© Ù…Ø¤Ø±Ø´ÙØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø·Ø§Ù„Ø¨"})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(I,{onClick:()=>n(null),children:"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ù„Ù"})})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(fe,{className:"text-red-500"})," Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ø·Ù„Ø§Ø¨"]}),e.jsx("div",{className:"w-64",children:e.jsx("input",{className:"w-full border p-2 rounded shadow-sm",placeholder:"Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ...",value:c,onChange:t=>x(t.target.value)})})]}),e.jsx(H,{noPadding:!0,children:p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fe,{size:48,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Ø§Ù„Ø£Ø±Ø´ÙŠÙ ÙØ§Ø±Øº Ø­Ø§Ù„ÙŠØ§Ù‹"})]}):e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-4",children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("th",{className:"p-4",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£Ø±Ø´ÙØ©"}),e.jsx("th",{className:"p-4",children:"Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ©"}),e.jsx("th",{className:"p-4",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx("tbody",{className:"divide-y",children:p.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsxs("td",{className:"p-4 font-bold text-gray-800",children:[t.name," ",e.jsx("br",{}),e.jsx("span",{className:"text-xs font-normal text-gray-500",children:t.belt})]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`tel:${t.phone}`,className:"hover:text-blue-600",children:t.phone}),e.jsx("button",{onClick:()=>j(t.phone),className:"text-green-500 hover:bg-green-100 p-1 rounded-full",children:e.jsx(me,{size:16})})]})}),e.jsx("td",{className:"p-4 text-gray-600",children:t.archivedAt}),e.jsx("td",{className:"p-4",children:Number(t.balance)>0?e.jsxs("span",{className:"bg-red-100 text-red-700 px-3 py-1 rounded-full font-bold text-xs",children:["Ø¹Ù„ÙŠÙ‡ ",t.balance," JOD"]}):e.jsxs("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full font-bold text-xs flex items-center gap-1 w-fit",children:[e.jsx(is,{size:12})," Ø®Ø§Ù„Øµ"]})}),e.jsxs("td",{className:"p-4 flex gap-2",children:[e.jsxs(I,{variant:"outline",className:"py-1 px-3 text-xs border-gray-300 hover:bg-gray-100 text-gray-700",onClick:()=>n(t),children:[e.jsx(ds,{size:14,className:"ml-1"})," Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø§Ù„ÙŠ"]}),e.jsx("button",{onClick:()=>w(t),className:"bg-blue-50 text-blue-600 p-2 rounded hover:bg-blue-100 border border-blue-200",title:"Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨ (Ø§Ø³ØªØ±Ø¬Ø§Ø¹)",children:e.jsx(Ms,{size:16})}),e.jsx("button",{onClick:async()=>{window.confirm("Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ø³Ø¬Ù„Ø§ØªØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹!")&&await r.remove(t.id)},className:"bg-red-50 text-red-600 p-2 rounded hover:bg-red-100 border border-red-200",title:"Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ",children:e.jsx(se,{size:16})})]})]},t.id))})]})})]})},Zs=({isOpen:r,onClose:a,reasons:l,onAdd:d,onDelete:o})=>{const[n,c]=b.useState("");return r?He.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(ye,{size:20,className:"text-gray-600"})," Ø¥Ø¯Ø§Ø±Ø© Ø¨Ù†ÙˆØ¯ Ø§Ù„Ø¯ÙØ¹"]}),e.jsx("button",{onClick:a,children:e.jsx(ce,{size:20,className:"text-gray-400 hover:text-red-500"})})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("input",{className:"flex-1 border-2 border-gray-200 rounded-xl px-4 py-2 focus:border-green-500 outline-none",placeholder:"Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯...",value:n,onChange:x=>c(x.target.value)}),e.jsx("button",{onClick:()=>{n&&(d(n),c(""))},className:"bg-green-600 text-white p-3 rounded-xl hover:bg-green-700",children:e.jsx(We,{size:20})})]}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4 custom-scrollbar",children:[l.map((x,p)=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-xl border border-gray-100",children:[e.jsx("span",{className:"font-bold text-gray-700",children:x.title}),e.jsx("button",{onClick:()=>o(x),className:"text-red-500 hover:bg-red-50 p-2 rounded-lg transition-colors",children:e.jsx(se,{size:18})})]},p)),l.length===0&&e.jsx("p",{className:"text-center text-gray-400 text-sm",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ù†ÙˆØ¯ Ù…Ø¶Ø§ÙØ©ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ù†ÙˆØ¯"})]})]})]}),document.body):null};function Qs({students:r,payments:a,expenses:l,paymentsCollection:d,expensesCollection:o,selectedBranch:n,logActivity:c,financeReasons:x=[],financeReasonsCollection:p}){const[w,f]=b.useState("income"),[j,D]=b.useState({sid:"",amount:"",reason:"",customReason:"",details:""}),[t,h]=b.useState({title:"",amount:"",date:new Date().toISOString().split("T")[0]}),[y,u]=b.useState(null),[S,R]=b.useState(!1),P=a.filter(i=>i.branch===n),M=l.filter(i=>i.branch===n),_=(y?P.filter(i=>i.studentId===y):P).sort((i,O)=>new Date(O.createdAt||O.date)-new Date(i.createdAt||i.date)),E=[...M].sort((i,O)=>new Date(O.date)-new Date(i.date)),G=async i=>{if(x.some(O=>O.title===i))return alert("Ù‡Ø°Ø§ Ø§Ù„Ø¨Ù†Ø¯ Ù…ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹");await p.add({title:i,branch:n,createdAt:new Date().toISOString()})},L=async i=>{confirm(`Ø­Ø°Ù Ø§Ù„Ø¨Ù†Ø¯ "${i.title}"ØŸ`)&&await p.remove(i.id)},q=async i=>{if(i.preventDefault(),!j.studentObjId)return alert("Ø§Ø®ØªØ± Ø·Ø§Ù„Ø¨Ø§Ù‹");const O=r.find(Q=>Q.id===j.studentObjId);if(!O)return alert("Ø·Ø§Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");if(!j.reason&&x.length>0)return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø³Ø¨Ø¨ Ø§Ù„Ø¯ÙØ¹");const J=j.reason==="Ø£Ø®Ø±Ù‰"?j.customReason:j.reason,X={id:Date.now().toString(),studentId:O.id,name:O.name,amount:Number(j.amount),reason:J,details:j.details,date:new Date().toISOString().split("T")[0],branch:n};await d.add(X),c("Ù‚Ø¨Ø¶ Ù…Ø§Ù„ÙŠ",`Ø§Ø³ØªÙ„Ø§Ù… ${j.amount} Ù…Ù† ${O.name}`),D({sid:"",amount:"",reason:"",customReason:"",details:""})},C=async i=>{i.preventDefault(),await o.add({id:Date.now().toString(),title:t.title,amount:Number(t.amount),date:t.date,branch:n}),c("Ù…ØµØ±ÙˆÙ",`ØµØ±Ù ${t.amount} Ù„Ù€ ${t.title}`),h({title:"",amount:"",date:new Date().toISOString().split("T")[0]})},m=async i=>{confirm("Ø­Ø°Ù Ø§Ù„Ø³Ù†Ø¯ØŸ")&&await d.remove(i)},z=async i=>{confirm("Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙØŸ")&&await o.remove(i)},K=i=>{const O=window.open("","PRINT","height=800,width=1000"),J=window.location.origin+re.LOGO,X=`
      <!DOCTYPE html>
      <html lang="ar" dir="rtl">
        <head>
          <meta charset="UTF-8">
          <title>Ø³Ù†Ø¯ Ù‚Ø¨Ø¶ - ${i.name}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap');
            
            @page {
              size: A5 landscape; 
              margin: 0; 
            }

            body {
              font-family: 'Cairo', sans-serif;
              margin: 0;
              padding: 10mm; 
              background-color: white;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
              height: 100vh;
              box-sizing: border-box;
            }

            .receipt-border {
              border: 3px double #444;
              height: 96%; 
              position: relative;
              padding: 20px;
              box-sizing: border-box;
              display: flex;
              flex-direction: column;
              justify-content: space-between;
              overflow: hidden; 
            }

            .watermark {
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%) rotate(-25deg); 
              width: 50%; 
              opacity: 0.08; 
              z-index: 0;
              pointer-events: none;
              filter: grayscale(100%); 
            }

            .header {
              display: flex;
              justify-content: space-between;
              align-items: center;
              border-bottom: 2px solid #b45309;
              padding-bottom: 10px;
              margin-bottom: 15px;
              position: relative;
              z-index: 2;
            }

            .company-info h1 {
              margin: 0;
              font-size: 22px;
              color: #b45309;
              font-weight: 900;
            }
            .company-info p {
              margin: 2px 0;
              font-size: 12px;
              font-weight: bold;
              color: #555;
            }

            .logo img {
              height: 70px;
              object-fit: contain;
            }

            .meta-info {
              text-align: left;
              font-size: 12px;
              border-right: 2px solid #eee;
              padding-right: 10px;
            }
            .meta-info div { margin-bottom: 3px; }

            .content {
              position: relative;
              z-index: 2;
              flex-grow: 1;
            }

            .title {
              text-align: center;
              font-size: 24px;
              font-weight: 900;
              margin: 10px 0 20px;
              text-decoration: underline;
              text-decoration-color: #b45309;
              text-underline-offset: 5px;
            }

            .row {
              display: flex;
              align-items: baseline;
              margin-bottom: 12px;
              font-size: 16px;
            }

            .label {
              font-weight: bold;
              width: 110px;
              color: #333;
            }

            .value {
              flex: 1;
              border-bottom: 1px dotted #888;
              font-weight: 700;
              padding: 0 5px;
            }

            .amount-container {
              position: absolute;
              left: 20px;
              top: 40px;
              border: 2px solid #333;
              padding: 5px 15px;
              border-radius: 8px;
              background: #f9f9f9;
              transform: rotate(-5deg); 
              box-shadow: 2px 2px 0 #ccc;
            }
            .amount-number {
              font-size: 20px;
              font-weight: 900;
              direction: ltr;
            }

            .footer {
              margin-top: 20px;
              position: relative;
              z-index: 2;
            }

            .signatures {
              display: flex;
              justify-content: space-between;
              padding: 0 40px;
              margin-bottom: 15px;
            }
            .sign-box {
              text-align: center;
              width: 150px;
            }
            .sign-line {
              border-top: 1px solid #333;
              margin-bottom: 5px;
            }
            .sign-title { font-size: 12px; font-weight: bold; color: #555; }

            .branches-box {
              border-top: 2px solid #b45309;
              padding-top: 8px;
              font-size: 10px;
              display: flex;
              justify-content: space-between;
              background: #fff;
            }
            
            .branch {
              display: flex;
              flex-direction: column;
              width: 48%;
            }
            .branch span { display: block; margin-bottom: 2px; }
            .phone { direction: ltr; text-align: right; font-weight: bold; }

          </style>
        </head>
        <body>
          <div class="receipt-border">
            
            <img src="${J}" class="watermark" onerror="this.style.display='none'"/>

            <div class="header">
              <div class="company-info">
                <h1>Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹ Ù„Ù„ØªØ§ÙŠÙƒÙˆØ§Ù†Ø¯Ùˆ</h1>
                <p>ÙØ±Ø¹: ${n}</p>
              </div>
              <div class="logo">
                <img src="${J}" onerror="this.style.display='none'"/>
              </div>
              <div class="meta-info">
                <div>Ø±Ù‚Ù… Ø§Ù„Ø³Ù†Ø¯: <strong>${i.id.slice(-6)}</strong></div>
                <div>Ø§Ù„ØªØ§Ø±ÙŠØ®: <strong>${i.date}</strong></div>
              </div>
            </div>

            <div class="content">
              <div class="title">Ø³Ù†Ø¯ Ù‚Ø¨Ø¶</div>
              
              <div class="amount-container">
                <div class="amount-number">${i.amount} JD</div>
              </div>

              <div class="row">
                <span class="label">Ø§Ø³ØªÙ„Ù…Ù†Ø§ Ù…Ù†:</span>
                <span class="value">${i.name}</span>
              </div>
              <div class="row">
                <span class="label">Ù…Ø¨Ù„Øº ÙˆÙ‚Ø¯Ø±Ù‡:</span>
                <span class="value">${i.amount} Ø¯ÙŠÙ†Ø§Ø± Ø£Ø±Ø¯Ù†ÙŠ</span>
              </div>
              <div class="row">
                <span class="label">ÙˆØ°Ù„Ùƒ Ø¹Ù†:</span>
                <span class="value">${i.reason} ${i.details?`(${i.details})`:""}</span>
              </div>
            </div>

            <div class="footer">
              <div class="signatures">
                <div class="sign-box">
                  <div class="sign-line"></div>
                  <div class="sign-title">ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨</div>
                </div>
                <div class="sign-box">
                  <div class="sign-line"></div>
                  <div class="sign-title">ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ„Ù…</div>
                </div>
              </div>

              <div class="branches-box">
                <div class="branch">
                  <span style="font-weight:bold; color:#b45309">Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø£ÙˆÙ„: Ø´ÙØ§Ø¨Ø¯Ø±Ø§Ù†</span>
                  <span>Ø´Ø§Ø±Ø¹ Ø±ÙØ¹Øª Ø´Ù…ÙˆØ·</span>
                  <span class="phone">079 5629 606</span>
                </div>
                <div class="branch">
                  <span style="font-weight:bold; color:#b45309">Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø£Ø¨Ùˆ Ù†ØµÙŠØ±</span>
                  <span>Ø¯ÙˆØ§Ø± Ø§Ù„Ø¨Ø­Ø±ÙŠØ© - Ù…Ø¬Ù…Ø¹ Ø§Ù„ÙØ±Ù‘Ø§</span>
                  <span class="phone">079 0368 603</span>
                </div>
              </div>
            </div>

          </div>
        </body>
      </html>
    `;O.document.write(X),O.document.close(),O.onload=()=>{O.focus(),setTimeout(()=>{O.print(),O.close()},500)}};return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20 md:pb-0",children:[e.jsx(Zs,{isOpen:S,onClose:()=>R(!1),reasons:x,onAdd:G,onDelete:L}),e.jsxs("div",{className:"flex gap-4 mb-6 bg-gray-100 p-1 rounded-2xl",children:[e.jsx("button",{onClick:()=>f("income"),className:`flex-1 py-3 rounded-xl font-bold transition-all shadow-sm ${w==="income"?"bg-green-600 text-white shadow-green-200":"bg-white text-gray-500 hover:bg-gray-50"}`,children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø§Ù„Ù‚Ø¨Ø¶)"}),e.jsx("button",{onClick:()=>f("expense"),className:`flex-1 py-3 rounded-xl font-bold transition-all shadow-sm ${w==="expense"?"bg-red-600 text-white shadow-red-200":"bg-white text-gray-500 hover:bg-gray-50"}`,children:"Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ"})]}),w==="income"?e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"Ø³Ù†Ø¯ Ù‚Ø¨Ø¶ Ø¬Ø¯ÙŠØ¯",className:"border-green-100 shadow-green-50",children:e.jsxs("form",{onSubmit:q,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{className:"relative col-span-1 md:col-span-1",children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx(Xe,{students:r,onSelect:i=>D({...j,sid:i.name,studentObjId:i.id}),placeholder:"Ø§Ø¨Ø­Ø«..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("input",{type:"number",className:"w-full border-2 border-gray-100 p-2 rounded-xl focus:border-green-500 outline-none",value:j.amount,onChange:i=>D({...j,amount:i.target.value}),required:!0,placeholder:"0.00"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"text-xs block mb-1 font-bold text-gray-700 flex justify-between",children:["Ø§Ù„Ø³Ø¨Ø¨",e.jsxs("button",{type:"button",onClick:()=>R(!0),className:"text-green-600 hover:text-green-800 text-[10px] flex items-center gap-1 bg-green-50 px-2 py-0.5 rounded cursor-pointer",children:[e.jsx(ye,{size:10})," ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"]})]}),e.jsxs("select",{className:"w-full border-2 border-gray-100 p-2 rounded-xl focus:border-green-500 outline-none bg-white cursor-pointer",value:j.reason,onChange:i=>D({...j,reason:i.target.value}),children:[e.jsx("option",{value:"",disabled:!0,children:"Ø§Ø®ØªØ± Ø§Ù„Ø³Ø¨Ø¨..."}),x.map((i,O)=>e.jsx("option",{value:i.title,children:i.title},O)),e.jsx("option",{value:"Ø£Ø®Ø±Ù‰",children:"Ø£Ø®Ø±Ù‰ (ÙƒØªØ§Ø¨Ø© ÙŠØ¯ÙˆÙŠØ©)"})]})]}),j.reason==="Ø£Ø®Ø±Ù‰"&&e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"ÙˆØ¶Ø­ Ø§Ù„Ø³Ø¨Ø¨"}),e.jsx("input",{className:"w-full border-2 border-gray-100 p-2 rounded-xl outline-none",value:j.customReason,onChange:i=>D({...j,customReason:i.target.value}),required:!0})]}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{className:"w-full border-2 border-gray-100 p-2 rounded-xl outline-none",value:j.details,onChange:i=>D({...j,details:i.target.value}),placeholder:"Ù…Ø«Ø§Ù„: Ø¹Ù† Ø´Ù‡Ø± 12 + 1"})]}),e.jsx("div",{className:"col-span-1 md:col-span-3 mt-2",children:e.jsx(I,{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white shadow-lg shadow-green-600/20 py-3",children:"Ø­ÙØ¸ ÙˆÙ‚Ø¨Ø¶"})})]})}),e.jsx("div",{className:"flex items-center gap-2 mb-2 w-full md:w-64",children:e.jsx(Xe,{students:r,onSelect:i=>u(i.id),onClear:()=>u(null),placeholder:"ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ø·Ø§Ù„Ø¨...",showAllOption:!0})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(H,{children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 rounded-r-lg",children:"#"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø¨ÙŠØ§Ù†"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("th",{className:"p-3",children:"Ø·Ø¨Ø§Ø¹Ø©"}),e.jsx("th",{className:"p-3 rounded-l-lg",children:"Ø­Ø°Ù"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[_.map(i=>e.jsxs("tr",{className:"hover:bg-green-50 transition-colors",children:[e.jsx("td",{className:"p-3 text-gray-400 font-mono text-xs",children:i.id.slice(-6)}),e.jsx("td",{className:"p-3 font-bold text-gray-800",children:i.name}),e.jsxs("td",{className:"p-3 text-gray-600",children:[e.jsx("span",{className:"block font-bold text-xs",children:i.reason}),e.jsx("span",{className:"text-[10px] text-gray-400",children:i.details})]}),e.jsx("td",{className:"p-3 text-xs text-gray-500",children:i.date}),e.jsxs("td",{className:"p-3 font-bold text-green-600",children:["+",i.amount]}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>K(i),className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200 text-gray-600",children:e.jsx(Se,{size:16})})}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>m(i.id),className:"p-2 bg-red-50 rounded-lg hover:bg-red-100 text-red-500",children:e.jsx(se,{size:16})})})]},i.id)),_.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"p-8 text-center text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ù†Ø¯Ø§Øª"})})]})]})})}),e.jsxs("div",{className:"md:hidden grid gap-4",children:[_.map(i=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col gap-3 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-green-500"}),e.jsxs("div",{className:"flex justify-between items-start pl-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ns,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"font-bold text-gray-800",children:i.name})]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[e.jsx(Ie,{size:12})," ",i.date]})]}),e.jsxs("div",{className:"text-green-600 font-bold text-lg bg-green-50 px-2 py-1 rounded-lg",children:["+",i.amount]})]}),e.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg text-sm text-gray-600 flex items-start gap-2",children:[e.jsx(ds,{size:14,className:"mt-1 text-gray-400 shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold block text-xs text-gray-700",children:i.reason}),e.jsx("span",{className:"text-[10px]",children:i.details})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-1 border-t pt-3 border-gray-100",children:[e.jsxs("button",{onClick:()=>K(i),className:"flex items-center gap-1 text-xs bg-blue-50 text-blue-600 px-3 py-2 rounded-lg font-bold",children:[e.jsx(Se,{size:14})," Ø·Ø¨Ø§Ø¹Ø©"]}),e.jsxs("button",{onClick:()=>m(i.id),className:"flex items-center gap-1 text-xs bg-red-50 text-red-600 px-3 py-2 rounded-lg font-bold",children:[e.jsx(se,{size:14})," Ø­Ø°Ù"]})]})]},i.id)),_.length===0&&e.jsx("div",{className:"text-center p-8 text-gray-400 bg-gray-50 rounded-xl border border-dashed",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ù†Ø¯Ø§Øª"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"ØªØ³Ø¬ÙŠÙ„ Ù…ØµØ±ÙˆÙ",className:"border-red-100 shadow-red-50",children:e.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"Ø§Ù„Ø¨Ù†Ø¯ (Ø³Ø¨Ø¨ Ø§Ù„ØµØ±Ù)"}),e.jsx("input",{className:"w-full border-2 border-gray-100 p-2 rounded-xl focus:border-red-500 outline-none",value:t.title,onChange:i=>h({...t,title:i.target.value}),required:!0,placeholder:"Ù…Ø«Ø§Ù„: ÙØ§ØªÙˆØ±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¡"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("input",{type:"number",className:"w-full border-2 border-gray-100 p-2 rounded-xl focus:border-red-500 outline-none",value:t.amount,onChange:i=>h({...t,amount:i.target.value}),required:!0,placeholder:"0.00"})]}),e.jsx("div",{children:e.jsx(I,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-600/20 py-2.5",children:"Ø­ÙØ¸"})})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(H,{children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 rounded-r-lg",children:"Ø§Ù„Ø¨Ù†Ø¯"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("th",{className:"p-3 rounded-l-lg",children:"Ø­Ø°Ù"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:E.map(i=>e.jsxs("tr",{className:"hover:bg-red-50 transition-colors",children:[e.jsx("td",{className:"p-3 font-bold text-gray-700",children:i.title}),e.jsx("td",{className:"p-3 text-gray-500 text-xs",children:i.date}),e.jsxs("td",{className:"p-3 text-red-600 font-bold",children:["-",i.amount]}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>z(i.id),className:"text-red-500 p-2 bg-red-50 rounded-lg hover:bg-red-100",children:e.jsx(se,{size:16})})})]},i.id))})]})})}),e.jsxs("div",{className:"md:hidden grid gap-4",children:[E.map(i=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-red-500"}),e.jsxs("div",{className:"pl-3",children:[e.jsx("h4",{className:"font-bold text-gray-800",children:i.title}),e.jsx("span",{className:"text-xs text-gray-400 block mt-1",children:i.date})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("span",{className:"font-bold text-red-600 text-lg",children:["-",i.amount]}),e.jsx("button",{onClick:()=>z(i.id),className:"text-red-400 hover:text-red-600 bg-red-50 p-1.5 rounded-lg",children:e.jsx(se,{size:16})})]})]},i.id)),E.length===0&&e.jsx("div",{className:"text-center p-8 text-gray-400 bg-gray-50 rounded-xl border border-dashed",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ØµØ§Ø±ÙŠÙ"})]})]})]})}const Xs=({isOpen:r,onClose:a,groups:l,onAdd:d,onDelete:o})=>{const[n,c]=b.useState("");return r?He.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-fade-in",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(ye,{size:20,className:"text-gray-600"})," Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØªØ±Ø§Øª ÙˆØ§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª"]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("input",{className:"flex-1 border-2 border-gray-200 rounded-xl px-4 py-2 focus:border-blue-500 outline-none",placeholder:"Ø§Ø³Ù… Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©...",value:n,onChange:x=>c(x.target.value)}),e.jsx("button",{onClick:()=>{n&&(d(n),c(""))},className:"bg-blue-600 text-white p-3 rounded-xl hover:bg-blue-700",children:e.jsx(We,{size:20})})]}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4",children:[l.map((x,p)=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-xl border border-gray-100",children:[e.jsx("span",{className:"font-bold text-gray-700",children:x.name}),e.jsx("button",{onClick:()=>o(x),className:"text-red-500 hover:bg-red-50 p-2 rounded-lg transition-colors",children:e.jsx(se,{size:18})})]},p)),l.length===0&&e.jsx("p",{className:"text-center text-gray-400 text-sm",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙØªØ±Ø§Øª Ù…Ø¶Ø§ÙØ©"})]}),e.jsx(I,{onClick:a,variant:"outline",className:"w-full",children:"Ø¥ØºÙ„Ø§Ù‚"})]})]}),document.body):null};function et({students:r,studentsCollection:a,groups:l=[],groupsCollection:d,selectedBranch:o}){const[n,c]=b.useState(new Date),[x,p]=b.useState(new Date().getDate()),[w,f]=b.useState(""),[j,D]=b.useState(1),[t,h]=b.useState(10),[y,u]=b.useState(!1),[S,R]=b.useState(!1),[P,M]=b.useState("Ø§Ù„ÙƒÙ„"),_=b.useMemo(()=>l?l.map(g=>g.name):[],[l]),E=async g=>{var k;if(_.includes(g))return alert("Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹");await d.add({name:g,branch:o||((k=r[0])==null?void 0:k.branch)||"Ø¹Ø§Ù…"})},G=async g=>{confirm(`Ø­Ø°Ù Ø§Ù„ÙØªØ±Ø© "${g.name}"ØŸ`)&&(await d.remove(g.id),P===g.name&&M("Ø§Ù„ÙƒÙ„"))},L=n.getFullYear(),q=n.getMonth(),C=new Date(L,q+1,0).getDate(),m=["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"],z=["Ø£Ø­Ø¯","Ø¥Ø«Ù†ÙŠÙ†","Ø«Ù„Ø§Ø«Ø§Ø¡","Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø®Ù…ÙŠØ³","Ø¬Ù…Ø¹Ø©","Ø³Ø¨Øª"],K=Array.from({length:8},(g,k)=>2023+k),i=(g,k)=>{const A=new Date(n);g!==null&&A.setFullYear(g),k!==null&&A.setMonth(k),c(A),p(1)},O=g=>{const k=new Date(L,q+1,0).getDate();let A=x+g;A>k&&(A=k),A<1&&(A=1),p(A)},J=b.useMemo(()=>{let g=Array.isArray(r)?[...r]:[];return P!=="Ø§Ù„ÙƒÙ„"&&(g=g.filter(k=>k.group===P)),g.sort((k,A)=>(k.customOrder||999999)-(A.customOrder||999999)),w&&(g=g.filter(k=>k.name.toLowerCase().includes(w.toLowerCase()))),g},[r,w,P]),X=Math.ceil(J.length/t),Q=y?J:J.slice((j-1)*t,j*t),xe=async(g,k)=>{const A=`${L}-${String(q+1).padStart(2,"0")}-${String(k).padStart(2,"0")}`,s={...r.find(v=>v.id===g).attendance||{}};s[A]?delete s[A]:s[A]=!0,await a.update(g,{attendance:s})},ne=async(g,k)=>{let A=k-1;if(A<0&&(A=0),A>=J.length&&(A=J.length-1),A===g)return;const F=[...J],[s]=F.splice(g,1);F.splice(A,0,s);const v=F.map(($,U)=>a.update($.id,{customOrder:U+1}));await Promise.all(v)},oe=async(g,k)=>{confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù†Ù‚Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨ Ù„Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©ØŸ")&&await a.update(g,{group:k})},ue=()=>{const g=window.open("","PRINT","height=800,width=1200"),k=window.location.origin+re.LOGO;let A="";for(let v=1;v<=C;v++)A+=`<th style="font-size:10px; width:20px; border:1px solid #ccc; background:#f9f9f9;">${v}</th>`;let F="";J.forEach((v,$)=>{var W;let U="";for(let N=1;N<=C;N++){const T=`${L}-${String(q+1).padStart(2,"0")}-${String(N).padStart(2,"0")}`,B=(W=v.attendance)==null?void 0:W[T],ae=new Date(L,q,N).getDay()===5;let ie="",ee="";ae?ee="#eee":B&&(ie="âœ“",ee="#dcfce7"),U+=`<td style="border:1px solid #ccc; background:${ee}; text-align:center; font-size:12px; color:#166534; font-weight:bold;">${ie}</td>`}F+=`
            <tr>
                <td style="border:1px solid #ccc; padding:5px; font-weight:bold; text-align:center;">${$+1}</td>
                <td style="border:1px solid #ccc; padding:5px; text-align:right;">${v.name}</td>
                <td style="border:1px solid #ccc; padding:5px; text-align:center; font-size:11px;">${v.group||"-"}</td>
                ${U}
            </tr>
        `});const s=`
      <!DOCTYPE html>
      <html lang="ar" dir="rtl">
        <head>
          <title>ÙƒØ´Ù Ø§Ù„Ø­Ø¶ÙˆØ± - ${m[q]} ${L}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
            body { font-family: 'Cairo', sans-serif; padding: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            h1 { text-align: center; color: #b45309; margin-bottom: 5px; }
            .header-info { text-align: center; margin-bottom: 20px; font-weight:bold; color:#555; }
            @page { size: A4 landscape; margin: 10mm; }
          </style>
        </head>
        <body>
            <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid #b45309; padding-bottom:10px;">
                <div>
                    <h1>Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹ Ù„Ù„ØªØ§ÙŠÙƒÙˆØ§Ù†Ø¯Ùˆ</h1>
                    <div style="font-size:12px;">ÙØ±Ø¹: ${o}</div>
                </div>
                <img src="${k}" style="height:60px;" onerror="this.style.display='none'"/>
            </div>

            <div class="header-info">
                Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨ | Ø´Ù‡Ø±: ${m[q]} ${L} | Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©: ${P}
            </div>

            <table>
                <thead>
                    <tr>
                        <th style="border:1px solid #ccc; background:#eee; width:30px;">#</th>
                        <th style="border:1px solid #ccc; background:#eee; width:200px;">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                        <th style="border:1px solid #ccc; background:#eee; width:80px;">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©</th>
                        ${A}
                    </tr>
                </thead>
                <tbody>
                    ${F}
                </tbody>
            </table>
            
            <div style="margin-top:20px; font-size:10px; text-align:left; color:#777;">
                ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©: ${new Date().toLocaleDateString("ar-JO")}
            </div>
        </body>
      </html>
    `;g.document.write(s),g.document.close(),g.onload=()=>{g.focus(),setTimeout(()=>{g.print(),g.close()},500)}};return e.jsxs("div",{className:"space-y-6 animate-fade-in font-sans",children:[e.jsx(Xs,{isOpen:S,onClose:()=>R(!1),groups:l||[],onAdd:E,onDelete:G}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col xl:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-gray-50 p-2 rounded-xl border border-gray-200 justify-center w-full md:w-auto",children:[e.jsx(Ie,{size:18,className:"text-gray-500 ml-1"}),e.jsx("select",{className:"bg-transparent font-bold text-gray-700 outline-none cursor-pointer",value:q,onChange:g=>i(null,parseInt(g.target.value)),children:m.map((g,k)=>e.jsx("option",{value:k,children:g},k))}),e.jsx("select",{className:"bg-transparent font-bold text-gray-700 outline-none cursor-pointer",value:L,onChange:g=>i(parseInt(g.target.value),null),children:K.map(g=>e.jsx("option",{value:g,children:g},g))})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 p-2 pl-3 rounded-xl border border-blue-100 w-full md:w-auto",children:[e.jsx(ze,{size:18,className:"text-blue-500 ml-1"}),e.jsx("span",{className:"text-xs font-bold text-blue-800 ml-1 hidden sm:inline",children:"Ø§Ù„ÙØªØ±Ø©:"}),e.jsx("div",{className:"relative group",children:e.jsxs("select",{className:"bg-transparent text-blue-900 font-bold outline-none w-full md:w-40 cursor-pointer appearance-none pr-4",value:P,onChange:g=>{M(g.target.value),D(1)},children:[e.jsx("option",{value:"Ø§Ù„ÙƒÙ„",children:"Ø§Ù„ÙƒÙ„ (Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨)"}),_.map((g,k)=>e.jsx("option",{value:g,children:g},k))]})}),e.jsx("button",{onClick:()=>R(!0),className:"bg-white p-1.5 rounded-lg text-blue-500 hover:text-blue-700 hover:shadow-sm border border-transparent hover:border-blue-200 transition-all",title:"Ø¥Ø¶Ø§ÙØ©/Ø­Ø°Ù ÙØªØ±Ø§Øª",children:e.jsx(ye,{size:16})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full xl:w-auto",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(Ge,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Ø¨Ø­Ø«...",className:"w-full pl-4 pr-10 py-2.5 border-2 border-gray-100 rounded-xl focus:border-yellow-500 outline-none",value:w,onChange:g=>{f(g.target.value),D(1)}})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{variant:y?"default":"outline",onClick:()=>u(!y),className:`gap-2 whitespace-nowrap ${y?"bg-yellow-500 text-black border-none":""}`,children:[y?e.jsx(Os,{size:18}):e.jsx(Fs,{size:18}),y?"Ø­ÙØ¸ Ø§Ù„ØªØ±ØªÙŠØ¨":"ØªØ±ØªÙŠØ¨"]}),e.jsxs(I,{onClick:ue,className:"bg-gray-800 text-white gap-2 hover:bg-black",title:"Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙƒØ´Ù",children:[e.jsx(Se,{size:18})," ",e.jsx("span",{className:"hidden md:inline",children:"Ø·Ø¨Ø§Ø¹Ø©"})]})]})]})]}),e.jsxs("div",{className:"md:hidden space-y-4",children:[e.jsxs("div",{className:"bg-yellow-500 text-black p-4 rounded-xl shadow-lg flex justify-between items-center",children:[e.jsx("button",{onClick:()=>O(-1),className:"p-2 bg-white/20 rounded-lg",children:e.jsx(Ce,{})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs opacity-75 font-bold mb-1",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±"}),e.jsx("div",{className:"text-xl font-bold flex flex-col",children:e.jsxs("span",{children:[x," ",m[q]]})})]}),e.jsx("button",{onClick:()=>O(1),className:"p-2 bg-white/20 rounded-lg",children:e.jsx(Je,{})})]}),e.jsx("div",{className:"grid gap-3",children:Q.map((g,k)=>{var v;const A=`${L}-${String(q+1).padStart(2,"0")}-${String(x).padStart(2,"0")}`,F=!!((v=g.attendance)!=null&&v[A]),s=new Date(L,q,x).getDay()===5;return e.jsx("div",{className:"p-4 rounded-xl border border-gray-100 bg-white shadow-sm",children:e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center font-bold text-gray-500 text-sm",children:(j-1)*t+k+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800",children:g.name}),e.jsx("div",{className:"relative mt-1",children:e.jsx("select",{className:"text-[10px] bg-blue-50 text-blue-700 px-2 py-0.5 rounded-md outline-none border-none font-bold w-full appearance-none",value:g.group||(_.length>0?_[0]:""),onChange:$=>oe(g.id,$.target.value),children:_.map(($,U)=>e.jsx("option",{value:$,children:$},U))})})]})]}),!y&&(s?e.jsx("span",{className:"text-xs font-bold text-red-500 bg-red-50 px-2 py-1 rounded",children:"Ø¹Ø·Ù„Ø©"}):e.jsx("button",{onClick:()=>xe(g.id,x),className:`w-10 h-10 rounded-full flex items-center justify-center ${F?"bg-green-500 text-white":"bg-gray-100 text-gray-300"}`,children:F?e.jsx(Qe,{size:20}):e.jsx("span",{className:"w-3 h-3 bg-gray-300 rounded-full"})}))]})},g.id)})})]}),e.jsx(H,{className:"hidden md:block overflow-visible p-0 border-none shadow-md rounded-2xl",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsx("thead",{className:"bg-gray-800 text-white sticky top-0 z-20",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"p-4 sticky right-0 bg-gray-800 z-30 text-right min-w-[280px] font-bold text-base shadow-lg",children:["Ø§Ù„Ø·Ù„Ø§Ø¨ ",P!=="Ø§Ù„ÙƒÙ„"&&e.jsxs("span",{className:"text-yellow-400 text-sm",children:["(",P,")"]})]}),!y&&[...Array(C)].map((g,k)=>{const A=k+1,F=new Date(L,q,A).getDay()===5;return e.jsx("th",{className:`p-2 border-l border-gray-700 text-center min-w-[40px] ${F?"bg-red-900/40 text-red-100":""}`,children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"opacity-60 text-[10px]",children:z[new Date(L,q,A).getDay()]}),e.jsx("span",{children:A})]})},k)}),y&&e.jsx("th",{className:"p-4 text-center w-64 bg-yellow-600/90 text-white",children:"Ø§Ù„ØªØ±ØªÙŠØ¨"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:Q.map((g,k)=>{const A=(j-1)*t+k+1;return e.jsxs("tr",{className:"hover:bg-yellow-50 transition-colors group",children:[e.jsx("td",{className:"p-3 sticky right-0 bg-white group-hover:bg-yellow-50 font-bold border-l border-gray-100 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] z-10 text-gray-800 text-sm flex items-center justify-between h-[50px]",children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx("span",{className:`text-xs w-6 h-6 flex items-center justify-center rounded-full font-mono ${y?"bg-yellow-100 text-yellow-800 font-bold":"bg-gray-100 text-gray-500"}`,children:A}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("span",{className:"truncate",children:g.name}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(Es,{size:10,className:"text-gray-400"}),e.jsxs("select",{className:"bg-transparent text-[10px] text-gray-500 outline-none cursor-pointer hover:text-blue-600 w-full",value:g.group||(_.length>0?_[0]:""),onChange:F=>oe(g.id,F.target.value),onClick:F=>F.stopPropagation(),children:[e.jsx("option",{value:"",disabled:!0,children:"Ù†Ù‚Ù„ Ø¥Ù„Ù‰..."}),_.map((F,s)=>e.jsx("option",{value:F,children:F},s))]})]})]})]})}),!y&&[...Array(C)].map((F,s)=>{var N;const v=s+1,$=`${L}-${String(q+1).padStart(2,"0")}-${String(v).padStart(2,"0")}`,U=!!((N=g.attendance)!=null&&N[$]),W=new Date(L,q,v).getDay()===5;return e.jsx("td",{className:`border-l border-gray-100 text-center p-0 ${W?"bg-gray-50":""}`,children:W?e.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-20 pointer-events-none",children:e.jsx(ce,{size:12})}):e.jsxs("label",{className:"cursor-pointer w-full h-full flex items-center justify-center hover:bg-gray-100",children:[e.jsx("input",{type:"checkbox",checked:U,onChange:()=>xe(g.id,v),className:"hidden"}),e.jsx("div",{className:`w-6 h-6 rounded flex items-center justify-center transition-all ${U?"bg-green-500 text-white scale-110":"bg-gray-100 hover:bg-gray-300"}`,children:e.jsx(Qe,{size:14})})]})},s)}),y&&e.jsx("td",{className:"p-2 text-center bg-yellow-50/20 border-l border-yellow-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Ø±Ù‚Ù…:"}),e.jsx("input",{type:"number",className:"w-20 p-2 text-center border-2 border-yellow-300 rounded-lg focus:border-yellow-600 outline-none font-bold text-lg",placeholder:A,onKeyDown:F=>{F.key==="Enter"&&(ne(k,parseInt(F.target.value)),F.target.value="",F.target.blur())},onBlur:F=>{F.target.value&&(ne(k,parseInt(F.target.value)),F.target.value="")}})]})})]},g.id)})})]})})}),!y&&X>1&&e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-100 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:"Ø¹Ø±Ø¶"}),e.jsxs("select",{className:"bg-gray-50 border border-gray-200 rounded-lg p-1.5 focus:outline-none font-bold cursor-pointer",value:t,onChange:g=>{h(Number(g.target.value)),D(1)},children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:J.length,children:"Ø§Ù„ÙƒÙ„"})]}),e.jsxs("span",{children:["Ù…Ù† Ø£ØµÙ„ ",J.length," Ø·Ø§Ù„Ø¨"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:"outline",disabled:j===1,onClick:()=>D(g=>g-1),className:"px-4 text-sm",children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsx("div",{className:"flex gap-1 overflow-x-auto hide-scrollbar max-w-[150px] md:max-w-none px-1",children:[...Array(X)].map((g,k)=>e.jsx("button",{onClick:()=>D(k+1),className:`w-9 h-9 flex items-center justify-center rounded-lg text-sm font-bold transition-all ${j===k+1?"bg-yellow-500 text-black shadow-md scale-105":"bg-gray-50 text-gray-600 hover:bg-gray-200"}`,children:k+1},k))}),e.jsx(I,{variant:"outline",disabled:j===X,onClick:()=>D(g=>g+1),className:"px-4 text-sm",children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})]})]})}const st=()=>{const a=`student${Math.floor(1e3+Math.random()*9e3)}`;let l="";const d="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789";for(let o=0;o<8;o++)l+=d.charAt(Math.floor(Math.random()*d.length));return{username:a,password:l}};function tt({registrations:r,students:a,registrationsCollection:l,studentsCollection:d,selectedBranch:o,logActivity:n}){const[c,x]=b.useState(null),[p,w]=b.useState({}),f=[...new Map(a.map(t=>[t.familyId,t.familyName])).entries()],j=t=>{const h=new Date().toISOString().split("T")[0],y=new Date;y.setMonth(y.getMonth()+1),w({name:t.name,phone:t.phone,dob:t.dob,address:t.address,belt:"Ø£Ø¨ÙŠØ¶",joinDate:h,subEnd:y.toISOString().split("T")[0],balance:0,linkFamily:"new"}),x(t)},D=async t=>{var P;t.preventDefault();const{username:h,password:y}=st();let u,S;p.linkFamily==="new"?(u=Math.floor(Date.now()/1e3),S=`Ø¹Ø§Ø¦Ù„Ø© ${p.name.split(" ").slice(-1)[0]}`):(u=parseInt(p.linkFamily),S=((P=a.find(M=>M.familyId===u))==null?void 0:P.familyName)||"Ø¹Ø§Ø¦Ù„Ø©");const R={branch:o,status:"active",notes:[],internalNotes:[],attendance:{},username:h,password:y,familyId:u,familyName:S,customOrder:Date.now(),...p};delete R.linkFamily,await d.add(R),await l.remove(c.id),n("ØªØ³Ø¬ÙŠÙ„ Ø·Ø§Ù„Ø¨",`ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨ ${p.name}`),alert(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!
User: ${h}
Pass: ${y}`),x(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-4",children:r.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border-2 border-dashed border-gray-200",children:[e.jsx(cs,{size:48,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ø­Ø§Ù„ÙŠØ§Ù‹."})]}):r.map(t=>e.jsx(H,{className:"border-r-4 border-blue-500",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-lg flex items-center gap-2",children:[t.name," ",e.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded",children:"Ø¬Ø¯ÙŠØ¯"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(pe,{size:14})," ",t.phone]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Re,{size:14})," ",t.address]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ie,{size:14})," ",t.dob]})]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsx(I,{onClick:()=>j(t),className:"bg-green-600 hover:bg-green-700 text-white text-sm flex-1 md:flex-none",children:"Ø§Ø¹ØªÙ…Ø§Ø¯ ÙƒØ·Ø§Ù„Ø¨"}),e.jsx("button",{onClick:()=>{confirm("Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ØŸ")&&l.remove(t.id)},className:"text-red-500 p-2 hover:bg-red-50 rounded border border-red-200",children:e.jsx(se,{size:18})})]})]})},t.id))}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60] p-4 backdrop-blur-sm",children:e.jsx(H,{className:"w-full max-w-2xl animate-fade-in",title:"Ø¥ÙƒÙ…Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("input",{className:"w-full border p-2 bg-gray-100 rounded text-gray-500",value:p.name,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("input",{className:"w-full border p-2 bg-gray-100 rounded text-gray-500",value:p.phone,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:p.linkFamily,onChange:t=>w({...p,linkFamily:t.target.value}),children:[e.jsx("option",{value:"new",children:"Ø¹Ø§Ø¦Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),f.map(([t,h])=>e.jsx("option",{value:t,children:h},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"Ø§Ù„Ø­Ø²Ø§Ù…"}),e.jsx("select",{className:"w-full border p-2 rounded",value:p.belt,onChange:t=>w({...p,belt:t.target.value}),children:le.map(t=>e.jsx("option",{children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚"}),e.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:p.joinDate,onChange:t=>w({...p,joinDate:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold text-green-600",children:"Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("input",{type:"date",className:"w-full border p-2 rounded bg-green-50",value:p.subEnd,onChange:t=>w({...p,subEnd:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 text-red-600 font-bold",children:"Ø±ØµÙŠØ¯ Ù…Ø³ØªØ­Ù‚ (JOD)"}),e.jsx("input",{type:"number",className:"w-full border p-2 rounded focus:ring-2 ring-red-500 outline-none",value:p.balance,onChange:t=>w({...p,balance:t.target.value})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[e.jsx(I,{variant:"ghost",onClick:()=>x(null),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(I,{type:"submit",children:"ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø¶Ø§ÙØ©"})]})]})})})]})}function at({schedule:r,scheduleCollection:a}){const[l,d]=b.useState({level:"",days:"",time:"",branch:""}),o=async c=>{c.preventDefault(),await a.add({...l}),d({level:"",days:"",time:"",branch:""})},n=async c=>{confirm("Ø­Ø°ÙØŸ")&&await a.remove(c)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{title:"Ø¥Ø¶Ø§ÙØ© Ø­ØµØ©",children:e.jsxs("form",{onSubmit:o,className:"grid grid-cols-2 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ù…Ø³ØªÙˆÙ‰"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.level,onChange:c=>d({...l,level:c.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ø£ÙŠØ§Ù…"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.days,onChange:c=>d({...l,days:c.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„ÙˆÙ‚Øª"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.time,onChange:c=>d({...l,time:c.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„ÙØ±Ø¹"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.branch,onChange:c=>d({...l,branch:c.target.value}),required:!0})]}),e.jsx(I,{type:"submit",children:"Ø¥Ø¶Ø§ÙØ©"})]})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:r.map(c=>e.jsxs("div",{className:"bg-white p-4 rounded border flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:c.level}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.days," | ",c.time]})]}),e.jsx("button",{onClick:()=>n(c.id),className:"text-red-500",children:e.jsx(se,{size:16})})]},c.id))})]})}function lt({captains:r,captainsCollection:a}){const[l,d]=b.useState({name:"",branch:Y.SHAFA,username:"",password:"",salary:"",holidays:[],withdrawals:[]}),[o,n]=b.useState(null),c=async x=>{x.preventDefault(),o?(await a.update(o,l),n(null)):await a.add({...l,role:"captain"}),d({name:"",branch:Y.SHAFA,username:"",password:"",salary:"",holidays:[],withdrawals:[]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{title:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒØ¨Ø§ØªÙ†",children:e.jsxs("form",{onSubmit:c,className:"grid gap-4 md:grid-cols-2",children:[e.jsx("input",{className:"border p-2 rounded",placeholder:"Ø§Ù„Ø§Ø³Ù…",value:l.name,onChange:x=>d({...l,name:x.target.value}),required:!0}),e.jsxs("select",{className:"border p-2 rounded",value:l.branch,onChange:x=>d({...l,branch:x.target.value}),children:[e.jsx("option",{value:Y.SHAFA,children:"Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†"}),e.jsx("option",{value:Y.ABU_NSEIR,children:"Ø£Ø¨Ùˆ Ù†ØµÙŠØ±"})]}),e.jsx("input",{className:"border p-2 rounded",placeholder:"User",value:l.username,onChange:x=>d({...l,username:x.target.value}),required:!0}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Pass",value:l.password,onChange:x=>d({...l,password:x.target.value}),required:!0}),e.jsx("input",{className:"border p-2 rounded",type:"number",placeholder:"Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ",value:l.salary,onChange:x=>d({...l,salary:x.target.value})}),e.jsx(I,{type:"submit",children:o?"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„":"Ø¥Ø¶Ø§ÙØ© ÙƒØ§Ø¨ØªÙ†"})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.map(x=>e.jsx(H,{className:"border-l-4 border-purple-500",children:e.jsxs("div",{className:"flex justify-between flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:x.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Ø§Ù„Ø±Ø§ØªØ¨: ",x.salary," | User: ",x.username," | Pass: ",x.password]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("button",{onClick:()=>{n(x.id),d(x)},className:"text-blue-500",children:e.jsx(Ue,{size:16})}),e.jsx("button",{onClick:()=>a.remove(x.id),className:"text-red-500",children:e.jsx(se,{size:16})})]})]})},x.id))})]})}const rt=({news:r,newsCollection:a,selectedBranch:l})=>{const[d,o]=b.useState(!1),[n,c]=b.useState({title:"",desc:"",image:"",branch:l}),[x,p]=b.useState(null),[w,f]=b.useState(!1),j=h=>{const y=h.target.files[0];if(y){p(y);const u=new FileReader;u.onloadend=()=>{c({...n,image:u.result})},u.readAsDataURL(y)}},D=async h=>{h.preventDefault(),f(!0);try{let y="";if(x){const u=vs(_s,`news/${Date.now()}_${x.name}`),S=await Ns(u,x);y=await ws(S.ref)}await De(de(Z,"artifacts",te,"public","data","news"),{title:n.title,desc:n.desc,branch:n.branch,image:y,createdAt:new Date().toISOString()}),alert("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø± Ø¨Ù†Ø¬Ø§Ø­!"),o(!1),c({title:"",desc:"",image:"",branch:l}),p(null)}catch(y){console.error("Error adding news:",y),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø´Ø±ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙˆØ§Ù„Ø§ØªØµØ§Ù„.")}f(!1)},t=async h=>{confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø®Ø¨Ø±ØŸ")&&await ss(he(Z,"artifacts",te,"public","data","news",h))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm",children:[e.jsx("h2",{className:"font-bold text-lg",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª"}),e.jsxs(I,{onClick:()=>o(!0),children:[e.jsx(We,{size:18})," Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(h=>e.jsxs(H,{className:"relative overflow-hidden group",children:[e.jsxs("div",{className:"aspect-video w-full bg-gray-100 relative",children:[h.image?e.jsx("img",{src:h.image,alt:h.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-300",children:e.jsx(Ls,{size:48})}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxs(I,{variant:"danger",onClick:()=>t(h.id),children:[e.jsx(se,{size:18})," Ø­Ø°Ù"]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:h.title}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:h.desc}),e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded mt-2 inline-block",children:h.branch})]})]},h.id))}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:e.jsx(H,{className:"w-full max-w-lg",title:"Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block mb-1",children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø±"}),e.jsx("input",{required:!0,className:"w-full border p-2 rounded",value:n.title,onChange:h=>c({...n,title:h.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block mb-1",children:"Ø§Ù„ØªÙØ§ØµÙŠÙ„"}),e.jsx("textarea",{required:!0,className:"w-full border p-2 rounded h-24",value:n.desc,onChange:h=>c({...n,desc:h.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block mb-1",children:"ØµÙˆØ±Ø© Ø§Ù„Ø®Ø¨Ø±"}),e.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"w-full border p-2 rounded bg-gray-50"}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"ÙŠÙØ¶Ù„ ØµÙˆØ± Ø¨Ø§Ù„Ø¹Ø±Ø¶ (Landscape)"})]}),n.image&&e.jsx("img",{src:n.image,alt:"preview",className:"w-full h-32 object-cover rounded border"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(I,{variant:"ghost",onClick:()=>o(!1),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(I,{type:"submit",disabled:w,children:w?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹...":"Ù†Ø´Ø±"})]})]})})})]})},Ee=r=>{if(!r)return"expired";const a=new Date,l=new Date(r);a.setHours(0,0,0,0),l.setHours(0,0,0,0);const d=l-a,o=Math.ceil(d/(1e3*60*60*24));return o<0?"expired":o<=7?"near_end":"active"},nt=async(r,a,l,d)=>{try{await De(de(Z,"artifacts",te,"public","data","activity_logs"),{action:r,details:a,branch:l,performedBy:d.name||"Admin",role:d.role||"admin",timestamp:new Date().toISOString()})}catch(o){console.error("Log error",o)}},ot=({user:r,selectedBranch:a,studentsCollection:l,scheduleCollection:d,handleLogout:o})=>{const[n,c]=b.useState("dashboard"),[x,p]=b.useState(!0),w=V("payments"),f=V("expenses"),j=V("archive"),D=V("registrations"),t=V("captains"),h=(l==null?void 0:l.data)||[],y=(w==null?void 0:w.data)||[],u=(f==null?void 0:f.data)||[],S=(D==null?void 0:D.data)||[],R=(d==null?void 0:d.data)||[],P=(t==null?void 0:t.data)||[],M=V("groups"),_=(M==null?void 0:M.data)||[],E=V("news"),G=(E==null?void 0:E.data)||[],L=V("finance_reasons"),q=(L==null?void 0:L.data)||[],C=V("activity_logs"),m=(C==null?void 0:C.data)||[],z=b.useMemo(()=>h.filter(N=>N.branch===a),[h,a]),K=b.useMemo(()=>y.filter(N=>N.branch===a),[y,a]),i=b.useMemo(()=>u.filter(N=>N.branch===a),[u,a]),O=b.useMemo(()=>S.filter(N=>N.branch===a),[S,a]),J=b.useMemo(()=>_.filter(N=>N.branch===a),[_,a]),X=b.useMemo(()=>q.filter(N=>N.branch===a),[q,a]),Q=b.useMemo(()=>m.filter(N=>N.branch===a).sort((N,T)=>new Date(T.timestamp)-new Date(N.timestamp)).slice(0,50),[m,a]),xe=K.reduce((N,T)=>N+T.amount,0),ne=i.reduce((N,T)=>N+T.amount,0),oe=xe-ne,ue=z.filter(N=>Ee(N.subEnd)==="active").length,g=z.filter(N=>Ee(N.subEnd)==="near_end").length,k=z.filter(N=>Ee(N.subEnd)==="expired").length,A=z.length,F=new Date,s=`${F.getFullYear()}-${String(F.getMonth()+1).padStart(2,"0")}`,v=z.reduce((N,T)=>T.attendance?N+Object.keys(T.attendance).filter(B=>B.startsWith(s)).length:N,0),$=(N,T)=>nt(N,T,a,r),U=()=>{if(!confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ­Ù…ÙŠÙ„ Ù†Ø³Ø®Ø© ÙƒØ§Ù…Ù„Ø© Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ"))return;const N={date:new Date().toISOString(),branch:a,students:z,payments:K,expenses:i,registrations:O,schedule:R,news:G,groups:J,captains:P,activityLogs:Q},T="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(N,null,2)),B=document.createElement("a");B.setAttribute("href",T),B.setAttribute("download",`brave_backup_${a}_${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild(B),B.click(),B.remove()},W=[{id:"dashboard",icon:ke,label:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©"},{id:"news",icon:be,label:"Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„Ø¹Ø±ÙˆØ¶"},{id:"registrations",icon:cs,label:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",badge:O.length},{id:"students",icon:ze,label:"Ø§Ù„Ø·Ù„Ø§Ø¨"},{id:"finance",icon:os,label:"Ø§Ù„Ù…Ø§Ù„ÙŠØ©"},{id:"attendance",icon:is,label:"Ø§Ù„Ø­Ø¶ÙˆØ±"},{id:"schedule",icon:$e,label:"Ø§Ù„Ø¬Ø¯ÙˆÙ„"},{id:"archive",icon:fe,label:"Ø§Ù„Ø£Ø±Ø´ÙŠÙ"},{id:"captains",icon:ls,label:"Ø§Ù„ÙƒØ¨Ø§ØªÙ†",role:"admin"}];return e.jsxs("div",{className:"flex min-h-screen bg-gray-100 text-right font-sans",dir:"rtl",children:[e.jsxs("aside",{className:`${x?"w-64":"w-20"} bg-black text-gray-300 transition-all duration-300 flex flex-col sticky top-0 h-screen shadow-2xl z-40`,children:[e.jsxs("div",{className:"p-6 flex justify-between border-b border-gray-800",children:[x&&e.jsx("h2",{className:"font-black text-yellow-500 text-xl",children:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsx("button",{onClick:()=>p(!x),children:e.jsx(Pe,{size:20})})]}),e.jsxs("div",{className:"p-4 border-b border-gray-800",children:[e.jsx("p",{className:"text-white font-bold",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500",children:r.role==="admin"?"Ù…Ø¯ÙŠØ± Ø¹Ø§Ù…":"ÙƒØ§Ø¨ØªÙ†"})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-6 space-y-2 px-3 custom-scrollbar",children:W.filter(N=>!N.role||N.role===r.role).map(N=>e.jsxs("button",{onClick:()=>{c(N.id),p(!1)},className:`w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all ${n===N.id?"bg-yellow-500 text-black font-bold":"hover:bg-gray-800"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(N.icon,{size:20}),N.badge>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] w-4 h-4 rounded-full flex items-center justify-center",children:N.badge})]}),x&&e.jsx("span",{children:N.label})]},N.id))}),e.jsxs("div",{className:"p-4 space-y-2 border-t border-gray-800",children:[r.role==="admin"&&e.jsxs("button",{onClick:U,className:`w-full flex items-center gap-4 px-4 py-3 text-green-500 hover:bg-gray-900 rounded transition-colors ${!x&&"justify-center"}`,title:"ØªØ­Ù…ÙŠÙ„ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©",children:[e.jsx(Ps,{size:20})," ",x&&"Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ"]}),e.jsxs("button",{onClick:o,className:`w-full flex items-center gap-4 px-4 py-3 text-red-400 hover:bg-gray-900 rounded transition-colors ${!x&&"justify-center"}`,title:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",children:[e.jsx(rs,{size:20})," ",x&&"Ø®Ø±ÙˆØ¬"]})]})]}),e.jsxs("main",{className:"flex-1 p-4 md:p-8 w-full overflow-x-hidden",children:[e.jsxs("div",{className:"md:hidden mb-4 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>p(!0),className:"p-2 bg-white rounded shadow",children:e.jsx(Pe,{})}),e.jsx("h2",{className:"font-bold text-gray-800",children:"Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹"})]}),n==="dashboard"&&e.jsx(Gs,{user:r,selectedBranch:a,branchStudents:z,netProfit:oe,totalAttendance:v,expiredCount:k,activeStudentsCount:ue,nearEndCount:g,totalStudents:A,branchRegistrations:O,branchPayments:K,activityLogs:Q}),n==="students"&&e.jsx(Vs,{students:z,groups:J,studentsCollection:l,archiveCollection:j,selectedBranch:a,logActivity:$}),n==="finance"&&e.jsx(Qs,{students:z,payments:K,expenses:i,paymentsCollection:w,expensesCollection:f,financeReasons:X,financeReasonsCollection:L,selectedBranch:a,logActivity:$}),n==="attendance"&&e.jsx(et,{students:z,groups:J,groupsCollection:M,studentsCollection:l,selectedBranch:a}),n==="registrations"&&e.jsx(tt,{registrations:O,students:h,registrationsCollection:D,studentsCollection:l,selectedBranch:a,logActivity:$}),n==="schedule"&&e.jsx(at,{schedule:R,scheduleCollection:d}),n==="archive"&&e.jsx(Ys,{archiveCollection:j,studentsCollection:l,payments:y,logActivity:$}),n==="captains"&&e.jsx(lt,{captains:P,captainsCollection:t}),n==="news"&&e.jsx(rt,{news:G,newsCollection:E,selectedBranch:a})]})]})},Le="brave-academy-live-data";function it(){const[r,a]=b.useState(()=>{const h=localStorage.getItem("braveUser");return h?JSON.parse(h):null}),[l,d]=b.useState(()=>typeof window<"u"&&localStorage.getItem("braveUser")?JSON.parse(localStorage.getItem("braveUser")).role==="student"?"student_portal":"admin_dashboard":"home"),[o,n]=b.useState(()=>r&&r.branch?r.branch:Y.SHAFA),[c,x]=b.useState(!0),p=V("students"),w=V("schedule"),f=V("news"),j=h=>{d(h),window.history.pushState({view:h},"","")};b.useEffect(()=>{window.history.replaceState({view:l},"","");const h=y=>{y.state&&y.state.view?d(y.state.view):d("home")};return window.addEventListener("popstate",h),()=>window.removeEventListener("popstate",h)},[]);const D=async(h,y)=>{try{const u=de(Z,"artifacts",Le,"public","data","students"),S=we(u,ve("username","==",h),ve("password","==",y)),R=await Ke(S);if(!R.empty){const E=R.docs[0],G=E.data(),L={role:"student",familyId:G.familyId,name:G.familyName||G.name,id:E.id};a(L),localStorage.setItem("braveUser",JSON.stringify(L)),j("student_portal");return}const P=de(Z,"artifacts",Le,"public","data","captains"),M=we(P,ve("username","==",h),ve("password","==",y)),_=await Ke(M);if(!_.empty){const E=_.docs[0],G=E.data(),L={role:"captain",...G,id:E.id};a(L),localStorage.setItem("braveUser",JSON.stringify(L)),n(G.branch),j("admin_dashboard");return}if(h.includes("@")||h==="admin1"){let E=h;h==="admin1"&&(E="admin@brave.com"),await bs(Oe,E,y);return}alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø®Ø§Ø·Ø¦Ø©! ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.")}catch(u){console.error("Login Error:",u),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.")}};b.useEffect(()=>{const h=hs(Oe,async y=>{if(y){const u=y.email;let S={email:u};u==="admin@brave.com"?S={...S,role:"admin",isSuper:!0,name:"Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…",branch:Y.SHAFA}:u==="shafa@brave.com"?S={...S,role:"admin",isSuper:!1,name:"Ù…Ø¯ÙŠØ± Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†",branch:Y.SHAFA}:u==="abunseir@brave.com"&&(S={...S,role:"admin",isSuper:!1,name:"Ù…Ø¯ÙŠØ± Ø£Ø¨Ùˆ Ù†ØµÙŠØ±",branch:Y.ABU_NSEIR});try{const R=he(Z,"artifacts",Le,"public","data","admin_profiles",u),P=await ks(R);P.exists()&&P.data().name&&(S.name=P.data().name)}catch{console.log("Profile fetch warning")}a(S),n(S.branch),localStorage.setItem("braveUser",JSON.stringify(S)),d("admin_dashboard")}else localStorage.getItem("braveUser")||a(null);x(!1)});return()=>h()},[]);const t=async()=>{await us(Oe),localStorage.removeItem("braveUser"),a(null),j("home")};return c&&r?e.jsx("div",{className:"flex h-screen items-center justify-center font-bold text-xl text-yellow-600 bg-gray-50",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."}):e.jsxs(e.Fragment,{children:[l==="home"&&e.jsx(Us,{setView:j,schedule:w.data}),l==="login"&&e.jsx(qs,{setView:j,handleLogin:D}),l==="student_portal"&&r&&e.jsx(Hs,{user:r,students:p.data,schedule:w.data,news:f.data,handleLogout:t}),l==="admin_dashboard"&&r&&e.jsx(ot,{user:r,selectedBranch:o,onSwitchBranch:r.isSuper?n:null,studentsCollection:p,scheduleCollection:w,handleLogout:t})]})}xs(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(it,{})}));
