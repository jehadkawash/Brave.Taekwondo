import{r as u,j as e}from"./react-BVBiHVO-.js";import{r as rs,c as js}from"./react-dom-C1qW5AtE.js";import{g as ys,o as Ns,s as vs,a as ws}from"./firebase-CDcpADl6.js";import{y as Ss,z as ks,A as Ds,B as te,D as we,G as Cs,H as De,I as se,J as He,K as oe,M as zs,N as ns,O as Is,P as os,Q as is,R as ds,T as Ne,U as Qe}from"./@firebase-CFbhX4St.js";import{X as ye,M as Le,a as ue,A as Se,C as Ce,b as Je,c as Pe,N as Xe,d as he,P as pe,T as cs,U as ze,S as xs,e as Ie,f as Ge,g as _e,h as We,L as ms,i as Be,j as Re,k as hs,l as $s,Z as As,m as Ms,n as es,o as ve,p as ke,F as Os,q as Es,r as Fs,s as Ls,t as ss,u as Ue,v as ge,w as Te,x as fe,B as Ae,y as xe,D as Ke,z as Ve,E as us,G as bs,H as Ps,I as ts,J as gs,K as Ye,O as _s,Q as as,R as Rs,V as ps,W as Us}from"./lucide-react-r7oYUhIj.js";import"./scheduler-DYLXRpC5.js";import"./idb-BXWtuYvb.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();const Ts={apiKey:"AIzaSyCKMrH2E_GP_MYZJrhF4LbxC1LmtVGx3Co",authDomain:"brave-academy.firebaseapp.com",projectId:"brave-academy",storageBucket:"brave-academy.firebasestorage.app",messagingSenderId:"862804404676",appId:"1:862804404676:web:871e3bb0796c354f1f5c91"},Ze=Ss(Ts),Me=ys(Ze),J=ks(Ze),fs=Ds(Ze),W="brave-academy-live-data",B=(l,a=[])=>{const[t,d]=u.useState([]),[n,o]=u.useState(!0),i=JSON.stringify(a);return u.useEffect(()=>{let f=te(J,"artifacts",W,"public","data",l),w;a&&a.length>0?w=we(f,...a):w=we(f);const D=Cs(w,r=>{const x=r.docs.map(c=>({...c.data(),id:c.id}));d(x),o(!1)},r=>{console.error(`Error fetching ${l}:`,r),o(!1)});return()=>D()},[l,i]),{data:t,loading:n,add:async f=>{try{const w={...f,createdAt:new Date().toISOString()};return await oe(te(J,"artifacts",W,"public","data",l),w),!0}catch(w){return console.error(w),alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„"),!1}},update:async(f,w)=>{try{await He(se(J,"artifacts",W,"public","data",l,f),w)}catch(D){console.error(D)}},remove:async f=>{try{await De(se(J,"artifacts",W,"public","data",l,f))}catch(w){console.error(w)}}}},z=({children:l,onClick:a,variant:t="primary",className:d="",type:n="button"})=>{const o={primary:"bg-yellow-500 text-black hover:bg-yellow-400 border border-yellow-600 font-bold",secondary:"bg-gray-800 text-white hover:bg-gray-700",danger:"bg-red-600 text-white hover:bg-red-700",outline:"border-2 border-yellow-500 text-yellow-600 hover:bg-yellow-50",ghost:"bg-transparent text-gray-600 hover:bg-gray-100"};return e.jsx("button",{type:n,onClick:a,className:`px-4 py-2 rounded-lg transition duration-200 flex items-center justify-center gap-2 shadow-sm ${o[t]} ${d}`,children:l})},_=({children:l,className:a="",title:t,action:d,noPadding:n=!1})=>e.jsxs("div",{className:`bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden ${a}`,children:[(t||d)&&e.jsxs("div",{className:"px-4 py-3 md:px-6 md:py-4 border-b border-gray-100 flex flex-col md:flex-row justify-between items-start md:items-center bg-gray-50/50 gap-2",children:[t&&e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:t}),d&&e.jsx("div",{className:"self-end md:self-auto",children:d})]}),e.jsx("div",{className:n?"":"p-4 md:p-6",children:l})]}),qe=({status:l})=>{const a={active:{text:"ÙØ¹Ø§Ù„",style:"bg-green-100 text-green-800 border-green-200"},near_end:{text:"Ù‚Ø§Ø±Ø¨ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡",style:"bg-yellow-100 text-yellow-800 border-yellow-200"},expired:{text:"Ù…Ù†ØªÙ‡ÙŠ",style:"bg-red-100 text-red-800 border-red-200"}},t=a[l]||a.active;return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold border ${t.style}`,children:t.text})},ne={LOGO:"/logo.jpg",HERO_BG:"/hero.jpg",BRANCH_SHAFA:"/shafa.jpg",BRANCH_ABU_NSEIR:"/abunseir.jpg"},Z={SHAFA:"Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†",ABU_NSEIR:"Ø£Ø¨Ùˆ Ù†ØµÙŠØ±"},re=["Ø£Ø¨ÙŠØ¶","Ø£ØµÙØ±","Ø£Ø®Ø¶Ø± 1","Ø£Ø®Ø¶Ø± 2","Ø£Ø²Ø±Ù‚ 1","Ø£Ø²Ø±Ù‚ 2","Ø¨Ù†ÙŠ 1","Ø¨Ù†ÙŠ 2","Ø£Ø­Ù…Ø± 1","Ø£Ø­Ù…Ø± 2","Ø£Ø³ÙˆØ¯"],qs=[{id:1,days:"Ø§Ù„Ø³Ø¨Øª / Ø§Ù„Ø§Ø«Ù†ÙŠÙ† / Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡",time:"4:00 Ù… - 5:00 Ù…",level:"Ù…Ø¨ØªØ¯Ø¦ÙŠÙ† (Ø£Ø¨ÙŠØ¶ - Ø£ØµÙØ±)",branch:"Ù…Ø´ØªØ±Ùƒ"},{id:2,days:"Ø§Ù„Ø³Ø¨Øª / Ø§Ù„Ø§Ø«Ù†ÙŠÙ† / Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡",time:"5:00 Ù… - 6:30 Ù…",level:"Ø£Ø­Ø²Ù…Ø© Ù…Ù„ÙˆÙ†Ø© (Ø£Ø®Ø¶Ø± - Ø£Ø²Ø±Ù‚)",branch:"Ù…Ø´ØªØ±Ùƒ"},{id:3,days:"Ø§Ù„Ø£Ø­Ø¯ / Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡ / Ø§Ù„Ø®Ù…ÙŠØ³",time:"5:00 Ù… - 6:30 Ù…",level:"Ù…ØªÙ‚Ø¯Ù… (Ø£Ø­Ù…Ø± - Ø£Ø³ÙˆØ¯)",branch:"Ù…Ø´ØªØ±Ùƒ"},{id:4,days:"Ø§Ù„Ø¬Ù…Ø¹Ø©",time:"9:00 Øµ - 11:00 Øµ",level:"ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ù†ØªØ®Ø¨Ø§Øª",branch:"Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ"}],Hs=({setView:l,schedule:a})=>{const[t,d]=u.useState(!1),[n,o]=u.useState(!1),[i,h]=u.useState({name:"",phone:"",dob:"",address:"",branch:Z.SHAFA}),[b,S]=u.useState(!1),{data:f}=B("news"),[w,D]=u.useState(0);u.useEffect(()=>{if(!f||f.length===0)return;const m=setInterval(()=>{D(k=>(k+1)%f.length)},8e3);return()=>clearInterval(m)},[f]);const r=async m=>{m.preventDefault(),S(!0);try{await oe(te(J,"artifacts",W,"public","data","registrations"),{...i,date:new Date().toLocaleDateString("ar-JO"),status:"new",createdAt:new Date().toISOString()}),alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹."),o(!1),h({name:"",phone:"",dob:"",address:"",branch:Z.SHAFA})}catch(k){console.error("Error adding document: ",k),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.")}finally{S(!1)}},x=m=>window.open(m,"_blank"),c=()=>window.open("https://wa.me/962795629606","_blank");return e.jsxs("div",{className:"min-h-screen font-sans text-right relative bg-white",dir:"rtl",children:[e.jsxs("header",{className:"bg-black text-white shadow-lg sticky top-0 z-50 border-b-2 border-yellow-500",children:[e.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>window.scrollTo(0,0),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ne.LOGO,alt:"Logo",className:"w-12 h-12 rounded-full bg-white p-1 object-contain transition-transform group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-yellow-500 animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-extrabold leading-none text-yellow-500",children:"Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹"}),e.jsx("p",{className:"text-[10px] text-gray-400 tracking-wider uppercase font-bold",children:"Brave Taekwondo"})]})]}),e.jsx("nav",{className:"hidden md:flex gap-8 font-bold text-sm",children:["Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©","Ù…Ù† Ù†Ø­Ù†","Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ","Ø§Ù„ÙØ±ÙˆØ¹"].map(m=>e.jsxs("button",{className:"hover:text-yellow-500 transition-colors duration-300 relative group",onClick:()=>{var k,y;m==="Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ"&&((k=document.getElementById("schedule"))==null||k.scrollIntoView({behavior:"smooth"})),m==="Ø§Ù„ÙØ±ÙˆØ¹"&&((y=document.getElementById("branches"))==null||y.scrollIntoView({behavior:"smooth"})),m==="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"&&window.scrollTo(0,0)},children:[m,e.jsx("span",{className:"absolute -bottom-1 right-0 w-0 h-0.5 bg-yellow-500 transition-all group-hover:w-full"})]},m))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(z,{onClick:()=>l("login"),className:"bg-yellow-500 text-black hover:bg-yellow-400 font-black px-6 border-none hidden md:block transform hover:-translate-y-1 transition-transform",children:"Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡"}),e.jsx("button",{className:"md:hidden p-2 text-yellow-500",onClick:()=>d(!t),children:t?e.jsx(ye,{size:24}):e.jsx(Le,{size:24})})]})]}),t&&e.jsx("div",{className:"md:hidden bg-gray-900 border-t border-gray-800 p-4 flex flex-col gap-4",children:e.jsx(z,{onClick:()=>{d(!1),l("login")},className:"w-full py-3 bg-yellow-500 text-black font-bold",children:"Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡"})})]}),e.jsxs("div",{className:"relative bg-gray-900 text-white h-[600px] flex items-center shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-yellow-500/10 -skew-x-12 transform origin-top translate-x-20"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-black/70 to-transparent z-10"}),e.jsx("img",{src:ne.HERO_BG,alt:"Hero",className:"absolute inset-0 w-full h-full object-cover"}),e.jsxs("div",{className:"container mx-auto px-6 relative z-20 flex flex-col items-start pt-10",children:[e.jsx("div",{className:"inline-block bg-yellow-500 text-black font-black px-4 py-1 rounded-none skew-x-[-10deg] mb-6 animate-fade-in-up",children:e.jsx("span",{className:"block skew-x-[10deg] text-sm tracking-wider",children:"Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…ÙØªÙˆØ­ Ø§Ù„Ø¢Ù†"})}),e.jsxs("h2",{className:"text-6xl md:text-8xl font-black mb-6 leading-tight drop-shadow-lg",children:["Ø§ØµÙ†Ø¹ ",e.jsx("span",{className:"text-yellow-500",children:"Ù‚ÙˆØªÙƒ"}),e.jsx("br",{}),"Ø§Ø¨Ù†Ù Ù…Ø³ØªÙ‚Ø¨Ù„Ùƒ"]}),e.jsx("p",{className:"text-gray-300 text-lg mb-8 max-w-lg font-medium",children:"Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ù†Ø®Ø¨Ø© Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„Ø£Ø±Ø¯Ù† ÙÙŠ Ø§Ù„ØªØ§ÙŠÙƒÙˆÙ†Ø¯Ùˆ. ØªØ¯Ø±ÙŠØ¨ Ø§Ø­ØªØ±Ø§ÙÙŠØŒ Ø¨ÙŠØ¦Ø© Ø¢Ù…Ù†Ø©ØŒ ÙˆÙ…Ø³ØªÙ‚Ø¨Ù„ ÙˆØ§Ø¹Ø¯."}),e.jsx("div",{className:"flex gap-4",children:e.jsx(z,{onClick:()=>o(!0),className:"px-10 py-4 text-xl bg-yellow-500 text-black font-black hover:bg-yellow-400 hover:scale-105 transition-all shadow-[0_0_20px_rgba(234,179,8,0.5)] border-none",children:"Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ"})})]})]}),f&&f.length>0&&e.jsx("section",{className:"relative -mt-16 z-30 mb-20",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsx("div",{className:"relative w-full max-w-5xl mx-auto h-[450px] bg-white rounded-2xl overflow-hidden shadow-2xl border-t-8 border-yellow-500 flex flex-col md:flex-row",children:f.map((m,k)=>e.jsxs("div",{className:`absolute inset-0 flex flex-col md:flex-row transition-all duration-700 ease-in-out ${k===w?"opacity-100 z-10":"opacity-0 z-0"}`,children:[e.jsxs("div",{className:"w-full md:w-1/2 h-1/2 md:h-full relative overflow-hidden",children:[m.image?e.jsx("img",{src:m.image,alt:m.title,className:"w-full h-full object-cover transition-transform duration-[10000ms] ease-linear transform scale-100 hover:scale-110"}):e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:e.jsx(ue,{size:64,className:"text-gray-300"})}),e.jsx("div",{className:"absolute top-4 right-4 bg-yellow-500 text-black text-xs font-bold px-3 py-1 shadow-md",children:m.branch})]}),e.jsxs("div",{className:"w-full md:w-1/2 h-1/2 md:h-full bg-white p-8 flex flex-col justify-center text-right relative",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 font-bold mb-2 text-sm uppercase tracking-wide",children:[e.jsx(Se,{size:16}),e.jsx("span",{children:"Ø£Ø­Ø¯Ø« Ø§Ù„Ø£Ø®Ø¨Ø§Ø±"})]}),e.jsx("h3",{className:"text-2xl md:text-4xl font-black text-gray-900 mb-4 leading-tight",children:m.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed text-sm md:text-base",children:m.desc}),e.jsxs("div",{className:"flex gap-2 mt-8",children:[e.jsx("button",{onClick:()=>D(y=>(y-1+f.length)%f.length),className:"w-10 h-10 rounded-full border border-gray-200 flex items-center justify-center hover:bg-black hover:text-white transition-colors",children:e.jsx(Ce,{size:20})}),e.jsx("button",{onClick:()=>D(y=>(y+1)%f.length),className:"w-10 h-10 rounded-full border border-gray-200 flex items-center justify-center hover:bg-black hover:text-white transition-colors",children:e.jsx(Je,{size:20})})]})]})]},m.id))})})}),e.jsx("section",{id:"branches",className:"py-24 bg-white",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16",children:[e.jsx("h2",{className:"text-5xl font-black text-gray-900 mb-4 tracking-tight",children:"ÙØ±ÙˆØ¹Ù†Ø§"}),e.jsx("div",{className:"w-24 h-2 bg-yellow-500 rounded-full"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"group relative h-[500px] w-full rounded-[2.5rem] overflow-hidden shadow-2xl cursor-default",children:[e.jsx("img",{src:ne.BRANCH_SHAFA,alt:"Shafa",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent opacity-90 transition-opacity duration-300"}),e.jsx("div",{className:"absolute inset-0 p-8 md:p-12 flex flex-col justify-end",children:e.jsxs("div",{className:"transform transition-transform duration-500 translate-y-4 group-hover:translate-y-0",children:[e.jsx("div",{className:"flex justify-between items-end mb-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"inline-block bg-yellow-500 text-black text-xs font-black px-3 py-1 rounded-full mb-3 shadow-lg",children:"Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ"}),e.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white leading-none mb-2",children:"Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†"}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-300 text-sm md:text-base font-medium max-w-sm",children:[e.jsx(Pe,{className:"text-yellow-500 mt-1 shrink-0",size:18}),e.jsx("p",{children:"Ø´Ø§Ø±Ø¹ Ø±ÙØ¹Øª Ø´Ù…ÙˆØ· - Ø¨Ø¬Ø§Ù†Ø¨ Ù…Ø´Ø§ØªÙ„ Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø§Ø±Ø¯Ù†"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[e.jsxs("button",{onClick:()=>x("https://maps.app.goo.gl/mTqvZD4Ftor3NALJ8?g_st=ic"),className:"flex items-center justify-center gap-2 bg-white/20 backdrop-blur-md border border-white/30 text-white font-bold py-4 rounded-2xl hover:bg-white hover:text-black transition-all duration-300",children:[e.jsx(Xe,{size:20}),e.jsx("span",{children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹"})]}),e.jsxs("button",{onClick:()=>window.open("https://wa.me/962795629606","_blank"),className:"flex items-center justify-center gap-2 bg-[#25D366]/90 backdrop-blur-md text-white font-bold py-4 rounded-2xl hover:bg-[#25D366] transition-all duration-300 shadow-lg shadow-green-900/20",children:[e.jsx(he,{size:20}),e.jsx("span",{children:"ÙˆØ§ØªØ³Ø§Ø¨"})]})]}),e.jsxs("a",{href:"tel:0795629606",className:"mt-3 flex items-center justify-center gap-2 bg-black/60 backdrop-blur-md border border-white/10 text-white font-bold py-4 rounded-2xl hover:bg-yellow-500 hover:text-black transition-all duration-300",children:[e.jsx(pe,{size:20}),e.jsx("span",{dir:"ltr",children:"07 9562 9606"})]})]})})]}),e.jsxs("div",{className:"group relative h-[500px] w-full rounded-[2.5rem] overflow-hidden shadow-2xl cursor-default",children:[e.jsx("img",{src:ne.BRANCH_ABU_NSEIR,alt:"Abu Nseir",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent opacity-90 transition-opacity duration-300"}),e.jsx("div",{className:"absolute inset-0 p-8 md:p-12 flex flex-col justify-end",children:e.jsxs("div",{className:"transform transition-transform duration-500 translate-y-4 group-hover:translate-y-0",children:[e.jsx("div",{className:"flex justify-between items-end mb-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"inline-block bg-gray-800 text-white text-xs font-black px-3 py-1 rounded-full mb-3 shadow-lg border border-gray-600",children:"ÙØ±Ø¹ 2"}),e.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white leading-none mb-2",children:"Ø£Ø¨Ùˆ Ù†ØµÙŠØ±"}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-300 text-sm md:text-base font-medium max-w-sm",children:[e.jsx(Pe,{className:"text-yellow-500 mt-1 shrink-0",size:18}),e.jsx("p",{children:"Ø¯ÙˆØ§Ø± Ø§Ù„Ø¨Ø­Ø±ÙŠØ© - Ù…Ø¬Ù…Ø¹ Ø§Ù„ÙØ±Ø§"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[e.jsxs("button",{onClick:()=>x("https://maps.app.goo.gl/yqu6tWBiqrRWGCMJ8?g_st=ic"),className:"flex items-center justify-center gap-2 bg-white/20 backdrop-blur-md border border-white/30 text-white font-bold py-4 rounded-2xl hover:bg-white hover:text-black transition-all duration-300",children:[e.jsx(Xe,{size:20}),e.jsx("span",{children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹"})]}),e.jsxs("button",{onClick:()=>window.open("https://wa.me/962790368603","_blank"),className:"flex items-center justify-center gap-2 bg-[#25D366]/90 backdrop-blur-md text-white font-bold py-4 rounded-2xl hover:bg-[#25D366] transition-all duration-300 shadow-lg shadow-green-900/20",children:[e.jsx(he,{size:20}),e.jsx("span",{children:"ÙˆØ§ØªØ³Ø§Ø¨"})]})]}),e.jsxs("a",{href:"tel:0790368603",className:"mt-3 flex items-center justify-center gap-2 bg-black/60 backdrop-blur-md border border-white/10 text-white font-bold py-4 rounded-2xl hover:bg-yellow-500 hover:text-black transition-all duration-300",children:[e.jsx(pe,{size:20}),e.jsx("span",{dir:"ltr",children:"07 9036 8603"})]})]})})]})]})]})}),e.jsx("section",{className:"py-24 relative overflow-hidden bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16 text-center",children:[e.jsx("span",{className:"text-yellow-500 font-bold tracking-widest text-sm uppercase mb-2",children:"Ù„Ù…Ø§Ø°Ø§ Ù†Ø­Ù†ØŸ"}),e.jsxs("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-4",children:["Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø¬Ø±Ø¯ ",e.jsx("span",{className:"text-yellow-500",children:"Ø±ÙŠØ§Ø¶Ø©"})]}),e.jsx("p",{className:"text-gray-500 max-w-xl",children:"Ù†Ø­Ù† Ù†Ø¨Ù†ÙŠ Ø´Ø®ØµÙŠØ© Ø·ÙÙ„ÙƒØŒ Ù†Ø¹Ø²Ø² Ø«Ù‚ØªÙ‡ Ø¨Ù†ÙØ³Ù‡ØŒ ÙˆÙ†Ø¹Ø¯Ù‡ Ù„ÙŠÙƒÙˆÙ† Ù‚Ø§Ø¦Ø¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:cs,title:"ØµÙ†Ø§Ø¹Ø© Ø§Ù„Ø£Ø¨Ø·Ø§Ù„",text:"Ù…Ù†Ù‡Ø¬ ØªØ¯Ø±ÙŠØ¨ÙŠ Ø§Ø­ØªØ±Ø§ÙÙŠ ÙŠÙ‡Ø¯Ù Ù„Ù„ÙˆØµÙˆÙ„ Ø¨Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù„Ù…Ù†ØµØ§Øª Ø§Ù„ØªØªÙˆÙŠØ¬ Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙˆØ§Ù„Ø¯ÙˆÙ„ÙŠØ©."},{icon:ze,title:"ÙƒØ§Ø¯Ø± Ù…Ø­ØªØ±Ù",text:"Ù†Ø®Ø¨Ø© Ù…Ù† Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ† Ø§Ù„ÙˆØ·Ù†ÙŠÙŠÙ† ÙˆØ§Ù„Ø¯ÙˆÙ„ÙŠÙŠÙ† Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ÙŠÙ† Ø°ÙˆÙŠ Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ø¹Ø§Ù„ÙŠØ©."},{icon:xs,title:"Ø¨ÙŠØ¦Ø© Ø¢Ù…Ù†Ø©",text:"Ù†Ù‡ØªÙ… Ø¨Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„ØªØ±Ø¨ÙˆÙŠ ÙˆØ§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø¨Ø¯Ù†ÙŠØŒ ÙÙŠ Ø¨ÙŠØ¦Ø© Ø¹Ø§Ø¦Ù„ÙŠØ© Ø¢Ù…Ù†Ø©."}].map((m,k)=>e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 border border-gray-100 relative group overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-500 to-yellow-200 transform origin-left scale-x-0 group-hover:scale-x-100 transition-transform duration-500"}),e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-2xl flex items-center justify-center text-yellow-600 mb-6 group-hover:scale-110 transition-transform group-hover:bg-yellow-500 group-hover:text-black",children:e.jsx(m.icon,{size:32,strokeWidth:2})}),e.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900",children:m.title}),e.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:m.text})]},k))})]})}),e.jsxs("section",{id:"schedule",className:"py-20 bg-gray-900 text-white relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(#FDE047 1px, transparent 1px)",backgroundSize:"20px 20px"}}),e.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-black mb-4",children:"Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ"}),e.jsx("div",{className:"w-20 h-1.5 bg-yellow-500 rounded-full"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(a&&a.length>0?a:qs).map(m=>e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700 hover:border-yellow-500 transition-all duration-300 hover:-translate-y-2 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-yellow-500 group-hover:bg-yellow-500 group-hover:text-black transition-colors",children:e.jsx(Ie,{size:20})}),e.jsx("span",{className:"text-xs font-bold text-gray-400 bg-black/30 px-2 py-1 rounded",children:m.branch})]}),e.jsx("h3",{className:"font-bold text-xl mb-2 text-white",children:m.level}),e.jsxs("div",{className:"space-y-3 mt-6 border-t border-gray-700 pt-4",children:[e.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-400",children:[e.jsx(Ge,{size:16,className:"text-yellow-500 mt-0.5"}),e.jsx("span",{children:m.days})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-white",children:[e.jsx(Se,{size:16,className:"text-yellow-500"}),e.jsx("span",{children:m.time})]})]})]},m.id))})]})]}),e.jsx("footer",{className:"bg-black text-white pt-16 pb-24 md:pb-8 border-t border-gray-800 relative z-10",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsxs("div",{className:"flex justify-center items-center gap-3 mb-6",children:[e.jsx("img",{src:ne.LOGO,alt:"Logo",className:"w-10 h-10 rounded-full grayscale opacity-80"}),e.jsx("span",{className:"font-bold text-lg text-gray-400",children:"Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹ Ù„Ù„ØªØ§ÙŠÙƒÙˆÙ†Ø¯Ùˆ"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Â© 2023 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©."})]})}),e.jsx("button",{onClick:c,className:"fixed bottom-6 right-6 z-50 bg-[#25D366] text-white p-4 rounded-full shadow-2xl hover:bg-[#20bd5a] transition-transform hover:scale-110 flex items-center justify-center animate-bounce-slow border-4 border-white",title:"ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨",children:e.jsx(he,{size:28,fill:"white",className:"text-transparent"})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsx(_,{className:"w-full max-w-lg animate-fade-in border-t-8 border-yellow-500",title:"Ø·Ù„Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯",children:e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",placeholder:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„",value:i.name,onChange:m=>h({...i,name:m.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯"}),e.jsx("input",{type:"date",required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",value:i.dob,onChange:m=>h({...i,dob:m.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"Ø±Ù‚Ù… Ù‡Ø§ØªÙ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",placeholder:"079xxxxxxx",value:i.phone,onChange:m=>h({...i,phone:m.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors",placeholder:"Ø§Ù„Ù…Ù†Ø·Ù‚Ø© - Ø§Ù„Ø´Ø§Ø±Ø¹",value:i.address,onChange:m=>h({...i,address:m.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 text-gray-600",children:"Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨"}),e.jsxs("select",{className:"w-full border-2 border-gray-100 p-3 rounded-lg focus:border-yellow-500 focus:ring-0 outline-none transition-colors bg-white",value:i.branch,onChange:m=>h({...i,branch:m.target.value}),children:[e.jsx("option",{value:Z.SHAFA,children:Z.SHAFA}),e.jsx("option",{value:Z.ABU_NSEIR,children:Z.ABU_NSEIR})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-gray-100",children:[e.jsx(z,{variant:"ghost",className:"text-gray-500 hover:text-black",onClick:()=>o(!1),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(z,{type:"submit",disabled:b,className:"bg-black text-white hover:bg-gray-800 px-8",children:b?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨"})]})]})})})]})},Js=({setView:l,handleLogin:a,loginError:t})=>{const[d,n]=u.useState(""),[o,i]=u.useState(""),h=b=>{b.preventDefault(),a(d,o)};return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4 relative overflow-hidden",dir:"rtl",children:e.jsxs(_,{className:"w-full max-w-md relative z-10 border-t-4 border-yellow-500",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg p-2",children:e.jsx("img",{src:ne.LOGO,alt:"Logo",className:"w-full h-full object-contain"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"})]}),t&&e.jsx("div",{className:"bg-red-100 text-red-700 p-2 rounded mb-4 text-sm text-center",children:t}),e.jsxs("form",{className:"space-y-5",onSubmit:h,children:[e.jsx("input",{className:"w-full border p-3 rounded-lg",type:"text",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",value:d,onChange:b=>n(b.target.value),required:!0}),e.jsx("input",{className:"w-full border p-3 rounded-lg",type:"password",placeholder:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",value:o,onChange:b=>i(b.target.value),required:!0}),e.jsx(z,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-yellow-500/30",children:"Ø¯Ø®ÙˆÙ„"})]}),e.jsx("div",{className:"mt-8 text-center border-t pt-4",children:e.jsxs("button",{onClick:()=>l("home"),className:"text-gray-500 hover:text-gray-800 text-sm font-medium flex items-center justify-center gap-2 w-full",children:[e.jsx(Ce,{size:16})," Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"]})})]})})},Gs=({products:l})=>{const a=l.filter(t=>t.stock>0);return a.length===0?e.jsx("div",{className:"text-center py-10 text-gray-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¹Ø±ÙˆØ¶Ø© Ø­Ø§Ù„ÙŠØ§Ù‹"}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:a.map(t=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"h-40 bg-gray-100 relative",children:t.image?e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(_e,{className:"text-gray-300"})})}),e.jsxs("div",{className:"p-3",children:[e.jsx("h4",{className:"font-bold text-gray-800 text-sm mb-1",children:t.name}),e.jsxs("p",{className:"font-black text-yellow-600",children:[t.price," JD"]})]})]},t.id))})},Ws=({user:l,students:a,schedule:t,news:d,handleLogout:n})=>{const[o,i]=u.useState(new Date),h=p=>{const P=new Date(o);P.setMonth(P.getMonth()+p),i(P)},b=o.getFullYear(),S=o.getMonth(),f=new Date(b,S+1,0).getDate(),w=["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"],D=B("payments"),r=B("products"),x=D.data||[],c=r.data||[],m=a.find(p=>p.id===l.id)||l,k=a.filter(p=>p.familyId===l.familyId),y=x.filter(p=>k.some(P=>P.id===p.studentId)).sort((p,P)=>new Date(P.date)-new Date(p.date)),j=[...new Set(k.map(p=>p.branch))],I=(d||[]).filter(p=>!p.branch||p.branch==="Ø§Ù„ÙƒÙ„"||j.includes(p.branch)).sort((p,P)=>new Date(P.createdAt||0)-new Date(p.createdAt||0)),L=p=>{if(!p)return"expired";const P=new Date,V=new Date(p);P.setHours(0,0,0,0),V.setHours(0,0,0,0);const G=V-P,Y=Math.ceil(G/(1e3*60*60*24));return Y<0?"expired":Y<=7?"near_end":"active"},[F,T]=u.useState(!1),[O,q]=u.useState({username:"",password:""}),[A,H]=u.useState(!1),ae=async p=>{if(p.preventDefault(),!O.username||!O.password)return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");H(!0);try{const P=se(J,"artifacts",W,"public","data","students",m.id);await He(P,{username:O.username,password:O.password});const V={...l,username:O.username,password:O.password};localStorage.setItem("braveUser",JSON.stringify(V)),alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!"),T(!1)}catch(P){console.error(P),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ«")}finally{H(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans text-right",dir:"rtl",children:[e.jsx("header",{className:"bg-black text-yellow-500 p-4 shadow-lg sticky top-0 z-40",children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:ne.LOGO,alt:"Logo",className:"w-10 h-10 bg-white rounded-full p-1"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-bold text-lg",children:["Ù…Ø±Ø­Ø¨Ø§Ù‹ ",l.name]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(z,{variant:"secondary",onClick:()=>{q({username:m.username,password:m.password}),T(!0)},className:"text-sm bg-gray-800 hover:bg-gray-700 text-yellow-500 border border-gray-700",children:[e.jsx(We,{size:16})," Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"]}),e.jsxs(z,{variant:"secondary",onClick:n,className:"text-sm",children:[e.jsx(ms,{size:16})," Ø®Ø±ÙˆØ¬"]})]})]})}),e.jsxs("div",{className:"container mx-auto p-4 md:p-8 max-w-5xl space-y-8",children:[I.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border-r-4 border-yellow-500 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-white border-b border-yellow-100 flex items-center gap-2",children:[e.jsx("div",{className:"bg-yellow-500 text-white p-2 rounded-full shadow-sm animate-pulse",children:e.jsx(ue,{size:20})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:I.slice(0,4).map(p=>e.jsxs("div",{className:"flex gap-4 items-start p-3 bg-gray-50 rounded-xl hover:shadow-md transition-all border border-gray-100",children:[p.image?e.jsx("img",{src:p.image,alt:"News",className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}):e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center text-gray-400",children:e.jsx(ue,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:p.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed",children:p.desc}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("span",{className:"text-[10px] bg-white border border-gray-200 px-2 py-0.5 rounded-full text-gray-500",children:p.branch||"Ø¹Ø§Ù…"})})]})]},p.id))})})]}),e.jsxs(_,{title:"Ù…ØªØ¬Ø± Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© (Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØªÙˆÙØ±Ø©)",className:"border-t-4 border-yellow-500",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-gray-500 text-sm bg-yellow-50 p-2 rounded-lg",children:[e.jsx(Be,{size:16,className:"text-yellow-600"}),e.jsx("p",{children:"ÙŠÙ…ÙƒÙ†Ùƒ Ø´Ø±Ø§Ø¡ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† Ø§Ù„Ù†Ø§Ø¯ÙŠ Ù…Ø¨Ø§Ø´Ø±Ø©."})]}),e.jsx(Gs,{products:c})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 text-white p-6 rounded-2xl shadow-lg",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ie,{className:"text-yellow-500"})," Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø­ØµØµ"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t&&t.length>0?t.map(p=>e.jsxs("div",{className:"bg-white/10 p-4 rounded-lg",children:[e.jsx("p",{className:"font-bold text-yellow-400 mb-1",children:p.level}),e.jsxs("p",{className:"text-sm",children:[p.days," | ",p.time]})]},p.id)):e.jsx("p",{className:"text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø¯ÙˆÙ„ Ø­ØµØµ Ù…Ø¹Ù„Ù† Ø­Ø§Ù„ÙŠØ§Ù‹"})})]}),e.jsx(_,{title:"ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø§Ù„Ø¯ÙØ¹Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)",children:y.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø¨ÙŠØ§Ù†"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨Ù„Øº"})]})}),e.jsx("tbody",{children:y.map(p=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-3 text-gray-500 font-mono",children:p.date}),e.jsx("td",{className:"p-3 font-bold text-gray-800",children:p.name}),e.jsxs("td",{className:"p-3 text-gray-700",children:[p.reason," ",p.details&&e.jsxs("span",{className:"block text-xs text-gray-400 mt-1",children:["(",p.details,")"]})]}),e.jsxs("td",{className:"p-3 text-green-600 font-bold",dir:"ltr",children:[p.amount," JD"]})]},p.id))})]})}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"})}),k.map(p=>e.jsxs(_,{className:"mb-8 border-t-4 border-yellow-500",title:p.name,children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø§Ù„Ø­Ø²Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("p",{className:"font-bold text-xl",children:p.belt})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx(qe,{status:L(p.subEnd)}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["ÙŠÙ†ØªÙ‡ÙŠ: ",p.subEnd]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ­Ù‚"}),e.jsxs("p",{className:`font-bold text-xl ${p.balance>0?"text-red-600":"text-green-600"}`,children:[p.balance," JOD"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø§Ù„ÙØ±Ø¹"}),e.jsx("p",{className:"font-bold text-lg",children:p.branch})]})]}),p.notes&&p.notes.length>0&&e.jsxs("div",{className:"mb-6 bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsx("h4",{className:"font-bold text-blue-800 text-sm mb-2",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-blue-900",children:p.notes.map(P=>e.jsxs("li",{children:[P.text," (",P.date,")"]},P.id))})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-bold text-gray-700",children:["Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±: ",w[S]," ",b]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(z,{variant:"ghost",onClick:()=>h(-1),children:e.jsx(Ce,{size:16})}),e.jsx(z,{variant:"ghost",onClick:()=>h(1),children:e.jsx(Je,{size:16})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:[...Array(f)].map((P,V)=>{const G=V+1,Y=`${b}-${String(S+1).padStart(2,"0")}-${String(G).padStart(2,"0")}`,X=p.attendance&&p.attendance[Y];return e.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-xs font-bold border ${X?"bg-green-500 text-white":"bg-gray-100 text-gray-400"}`,children:G},G)})})]})]},p.id))]}),F&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs(_,{className:"w-full max-w-sm relative bg-white rounded-2xl shadow-2xl",children:[e.jsx("button",{onClick:()=>T(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-black transition-colors",children:e.jsx(ye,{size:24})}),e.jsx("h3",{className:"text-xl font-bold mb-6 text-center text-gray-800",children:"ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„"}),e.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯"}),e.jsx("input",{className:"w-full border-2 border-gray-200 p-3 rounded-xl focus:border-yellow-500 outline-none transition-colors font-mono text-left dir-ltr",value:O.username,onChange:p=>q({...O,username:p.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©"}),e.jsx("input",{className:"w-full border-2 border-gray-200 p-3 rounded-xl focus:border-yellow-500 outline-none transition-colors font-mono text-left dir-ltr",value:O.password,onChange:p=>q({...O,password:p.target.value}),required:!0})]}),e.jsx("div",{className:"pt-4",children:e.jsx(z,{type:"submit",disabled:A,className:"w-full py-3 bg-yellow-500 text-black font-bold hover:bg-yellow-400 transition-colors shadow-lg shadow-yellow-500/20",children:A?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"})})]})]})})]})},Bs=({user:l,selectedBranch:a,branchStudents:t,netProfit:d,totalAttendance:n,expiredCount:o,activeStudentsCount:i,nearEndCount:h,totalStudents:b,activityLogs:S=[]})=>{const f=w=>{if(!w)return{date:"-",time:"-"};const D=new Date(w);return{date:D.toLocaleDateString("ar-JO"),time:D.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}};return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl p-8 text-white shadow-lg flex justify-between items-center relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ ",l.name,"! ðŸ‘‹"]}),e.jsxs("p",{className:"opacity-90",children:["Ù†Ø¸Ø±Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡ ÙØ±Ø¹ ",a]})]}),e.jsxs("div",{className:"relative z-10 bg-white/20 p-4 rounded-xl backdrop-blur-sm text-center",children:[e.jsx("span",{className:"block text-4xl font-bold",children:new Date().getDate()}),e.jsx("span",{className:"uppercase text-sm tracking-wider",children:new Date().toLocaleString("en-us",{month:"short"})})]}),e.jsx("div",{className:"absolute right-0 top-0 opacity-10 transform translate-x-10 -translate-y-10",children:e.jsx(cs,{size:200})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(_,{className:"border-l-4 border-blue-500 transform hover:-translate-y-1 transition-transform",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:t.length})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(ze,{className:"text-blue-600",size:24})})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Re,{size:12,className:"text-green-500"})," ",e.jsx("span",{className:"text-green-500 font-bold",children:"+3"})," Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±"]})]}),e.jsx(_,{className:"border-l-4 border-green-500 transform hover:-translate-y-1 transition-transform",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"ØµØ§ÙÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­"}),e.jsxs("h3",{className:"text-3xl font-bold text-gray-800",children:[d," ",e.jsx("span",{className:"text-sm text-gray-400",children:"JOD"})]})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(hs,{className:"text-green-600",size:24})})]})}),e.jsx(_,{className:"border-l-4 border-purple-500 transform hover:-translate-y-1 transition-transform",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Ø­Ø¶ÙˆØ± Ø§Ù„Ø´Ù‡Ø±"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:n})]}),e.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:e.jsx(Se,{className:"text-purple-600",size:24})})]})}),e.jsx(_,{className:"border-l-4 border-red-500 transform hover:-translate-y-1 transition-transform",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ù…Ù†ØªÙ‡ÙŠØ©"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:o})]}),e.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:e.jsx($s,{className:"text-red-600",size:24})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(_,{title:"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª",className:"lg:col-span-1",children:[e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx("div",{className:"relative w-48 h-48 rounded-full bg-gray-100 border-8 border-white shadow-inner flex items-center justify-center",style:{background:`conic-gradient(#22c55e 0% ${i/b*100||0}%, #eab308 ${i/b*100||0}% ${(i+h)/b*100||0}%, #ef4444 ${(i+h)/b*100||0}% 100%)`},children:e.jsxs("div",{className:"w-32 h-32 bg-white rounded-full flex flex-col items-center justify-center z-10 shadow-sm",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-800",children:b}),e.jsx("span",{className:"text-xs text-gray-400",children:"Ø·Ø§Ù„Ø¨ ÙƒÙ„ÙŠ"})]})})}),e.jsxs("div",{className:"flex justify-around text-xs mt-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})," ÙØ¹Ø§Ù„ (",i,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"})," Ù‚Ø§Ø±Ø¨ (",h,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"})," Ù…Ù†ØªÙ‡ÙŠ (",o,")"]})]})]}),e.jsx(_,{title:"Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ± (Live Log)",className:"lg:col-span-2",children:e.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:S.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-10 flex flex-col items-center",children:[e.jsx(As,{size:32,className:"mb-2 opacity-30"}),e.jsx("p",{children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Ø´Ø§Ø·Ø§Øª Ù…Ø³Ø¬Ù„Ø© Ø­Ø¯ÙŠØ«Ø§Ù‹"})]}):S.map((w,D)=>{const{date:r,time:x}=f(w.timestamp);return e.jsxs("div",{className:"flex gap-4 items-start p-3 hover:bg-gray-50 rounded-xl transition border border-gray-100 shadow-sm bg-white",children:[e.jsx("div",{className:"bg-blue-50 text-blue-600 p-2 rounded-full mt-1 shrink-0",children:e.jsx(Ms,{size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:w.action}),e.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full font-mono flex items-center gap-1",children:[e.jsx(Ie,{size:10})," ",x]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:w.details}),e.jsxs("div",{className:"flex justify-between items-center mt-2 border-t border-gray-50 pt-2",children:[e.jsxs("p",{className:"text-[10px] font-bold text-blue-800",children:["Ø¨ÙˆØ§Ø³Ø·Ø©: ",w.performedBy]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:r})]})]})]},D)})})})]})]})},Ks=()=>{const a=`student${Math.floor(1e3+Math.random()*9e3)}`,t="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789";let d="";for(let n=0;n<8;n++)d+=t.charAt(Math.floor(Math.random()*t.length));return{username:a,password:d}},Oe=l=>{if(!l)return"expired";const a=new Date,t=new Date(l);a.setHours(0,0,0,0),t.setHours(0,0,0,0);const d=t-a,n=Math.ceil(d/(1e3*60*60*24));return n<0?"expired":n<=7?"near_end":"active"},ls=l=>{if(!l)return!1;const a=new Date,t=new Date(l),d=Math.abs(a-t);return Math.ceil(d/(1e3*60*60*24))<=7},je=({children:l,onClose:a})=>typeof document>"u"?null:rs.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] overflow-y-auto",role:"dialog",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:a}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center sm:p-0",children:e.jsx("div",{className:"relative transform overflow-hidden rounded-2xl text-right shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-2xl bg-white",onClick:t=>t.stopPropagation(),children:l})})]}),document.body),Vs=({isOpen:l,onClose:a,groups:t,allStudents:d,onSend:n})=>{const[o,i]=u.useState("all"),[h,b]=u.useState(""),[S,f]=u.useState([]),[w,D]=u.useState(""),[r,x]=u.useState(""),[c,m]=u.useState(!1);if(!l)return null;const k=d.filter(I=>I.name.toLowerCase().includes(w.toLowerCase())),y=I=>{S.includes(I)?f(L=>L.filter(F=>F!==I)):f(L=>[...L,I])},j=async()=>{if(!r.trim())return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©");if(o==="custom"&&S.length===0)return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø§Ù„Ø¨ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");m(!0),await n(o,h,r,S),m(!1),x(""),f([]),a()};return e.jsx(je,{onClose:a,children:e.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-blue-700",children:[e.jsx(ue,{size:24})," Ø¥Ø±Ø³Ø§Ù„ ØªØ¹Ù…ÙŠÙ… / Ø¥Ø¹Ù„Ø§Ù†"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù„Ù…Ù† ØªØ±ÙŠØ¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ØŸ"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 p-3 rounded-xl border border-gray-200",children:[e.jsx("input",{type:"radio",name:"target",value:"all",checked:o==="all",onChange:()=>i("all")}),e.jsx("span",{children:"Ø§Ù„ÙƒÙ„ (Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 p-3 rounded-xl border border-gray-200",children:[e.jsx("input",{type:"radio",name:"target",value:"group",checked:o==="group",onChange:()=>{i("group"),t.length>0&&b(t[0])}}),e.jsx("span",{children:"ÙØªØ±Ø© / Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ø­Ø¯Ø¯Ø©"})]}),o==="group"&&e.jsx("div",{className:"mr-6 mb-2",children:e.jsx("select",{className:"w-full border-2 border-gray-200 p-2 rounded-xl outline-none",value:h,onChange:I=>b(I.target.value),children:t.map((I,L)=>e.jsx("option",{value:I,children:I},L))})}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 p-3 rounded-xl border border-gray-200",children:[e.jsx("input",{type:"radio",name:"target",value:"custom",checked:o==="custom",onChange:()=>i("custom")}),e.jsx("span",{children:"ØªØ­Ø¯ÙŠØ¯ Ø·Ù„Ø§Ø¨ (ÙŠØ¯ÙˆÙŠØ§Ù‹)"})]}),o==="custom"&&e.jsxs("div",{className:"mr-6 p-3 border border-gray-200 rounded-xl bg-white",children:[e.jsx("input",{className:"w-full border-b border-gray-100 p-2 mb-2 text-sm outline-none",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨...",value:w,onChange:I=>D(I.target.value)}),e.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 custom-scrollbar",children:k.map(I=>e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:S.includes(I.id),onChange:()=>y(I.id)}),e.jsx("span",{className:"text-sm",children:I.name})]},I.id))}),e.jsxs("div",{className:"mt-2 text-xs text-blue-600 font-bold",children:["ØªÙ… Ø§Ø®ØªÙŠØ§Ø±: ",S.length," Ø·Ø§Ù„Ø¨"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù†Øµ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†"}),e.jsx("textarea",{className:"w-full border-2 border-gray-200 p-3 rounded-xl outline-none h-32 focus:border-blue-500",placeholder:"Ø§ÙƒØªØ¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù‡Ù†Ø§... (Ø³ÙŠØ¸Ù‡Ø± ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø·Ù„Ø§Ø¨)",value:r,onChange:I=>x(I.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(z,{variant:"ghost",onClick:a,children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(z,{onClick:j,disabled:c,className:"bg-blue-600 text-white hover:bg-blue-700",children:c?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†"})]})]})]})})},Ys=({student:l,onClose:a,onSave:t})=>{const[d,n]=u.useState("private"),[o,i]=u.useState(""),h=()=>{if(!o.trim())return;const f={id:Date.now().toString(),text:o,date:new Date().toLocaleDateString("ar-JO"),timestamp:new Date().toISOString()};t(l.id,d,"add",f),i("")},b=f=>{confirm("Ø­Ø°Ù Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©ØŸ")&&t(l.id,d,"delete",{id:f})},S=d==="private"?l.internalNotes||[]:l.notes||[];return e.jsx(je,{onClose:a,children:e.jsxs("div",{className:"p-0 overflow-hidden flex flex-col h-[500px]",children:[e.jsxs("div",{className:`p-4 text-white flex justify-between items-center ${d==="private"?"bg-red-600":"bg-blue-600"}`,children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[d==="private"?e.jsx(ge,{size:20}):e.jsx(Ae,{size:20}),d==="private"?`Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ©: ${l.name}`:`Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù„Ù„Ø·Ø§Ù„Ø¨: ${l.name}`]}),e.jsx("button",{onClick:a,children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>n("private"),className:`flex-1 py-3 font-bold text-sm flex items-center justify-center gap-2 ${d==="private"?"text-red-600 border-b-2 border-red-600 bg-red-50":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(ge,{size:16})," Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ© (Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©)"]}),e.jsxs("button",{onClick:()=>n("public"),className:`flex-1 py-3 font-bold text-sm flex items-center justify-center gap-2 ${d==="public"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(Ae,{size:16})," Ø¥Ø¹Ù„Ø§Ù†Ø§Øª (Ù„Ù„Ø·Ø§Ù„Ø¨)"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:S.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[d==="private"?e.jsx(ge,{size:48,className:"mb-2 opacity-20"}):e.jsx(Ae,{size:48,className:"mb-2 opacity-20"}),e.jsx("p",{children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ø³Ø¬Ù„Ø©"})]}):e.jsx("div",{className:"space-y-3",children:S.map(f=>e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-gray-200 shadow-sm relative group",children:[e.jsx("p",{className:"text-gray-800 text-sm whitespace-pre-wrap",children:f.text}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] text-gray-400 bg-gray-100 px-2 py-1 rounded-full",children:f.date}),e.jsx("button",{onClick:()=>b(f.id),className:"text-red-400 hover:text-red-600 p-1",children:e.jsx(xe,{size:16})})]})]},f.id))})}),e.jsx("div",{className:"p-4 bg-white border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 border-2 border-gray-200 rounded-xl px-4 py-2 focus:outline-none focus:border-yellow-500",placeholder:d==="private"?"Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸Ø© Ø³Ø±ÙŠØ©...":"Ø§ÙƒØªØ¨ Ø¥Ø¹Ù„Ø§Ù†Ø§Ù‹ Ù„Ù„Ø·Ø§Ù„Ø¨...",value:o,onChange:f=>i(f.target.value),onKeyDown:f=>f.key==="Enter"&&h()}),e.jsx(z,{onClick:h,className:d==="private"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700",children:e.jsx(ve,{size:18})})]})})]})})},Zs=({student:l,onClose:a,onSave:t})=>{const[d,n]=u.useState(l.subEnd||new Date().toISOString().split("T")[0]),o=i=>{const h=new Date(d);h.setMonth(h.getMonth()+i),n(h.toISOString().split("T")[0])};return e.jsx(je,{onClose:a,children:e.jsxs("div",{className:"p-6 text-right",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 text-green-700 flex items-center gap-2",children:[e.jsx(Ue,{size:24})," ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§Ùƒ: ",l.name]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯"}),e.jsx("input",{type:"date",className:"w-full border-2 border-green-100 focus:border-green-500 p-3 rounded-xl outline-none text-lg font-bold text-center bg-green-50/20",value:d,onChange:i=>n(i.target.value)})]}),e.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-2",children:"Ø¥Ø¶Ø§ÙØ© Ø³Ø±ÙŠØ¹Ø©:"}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>o(1),className:"flex-1 bg-white hover:bg-green-50 text-green-700 border border-green-200 py-3 rounded-xl font-bold text-sm transition shadow-sm hover:shadow-md",children:"+ Ø´Ù‡Ø±"}),e.jsx("button",{onClick:()=>o(2),className:"flex-1 bg-white hover:bg-green-50 text-green-700 border border-green-200 py-3 rounded-xl font-bold text-sm transition shadow-sm hover:shadow-md",children:"+ Ø´Ù‡Ø±ÙŠÙ†"}),e.jsx("button",{onClick:()=>o(3),className:"flex-1 bg-white hover:bg-green-50 text-green-700 border border-green-200 py-3 rounded-xl font-bold text-sm transition shadow-sm hover:shadow-md",children:"+ 3 Ø´Ù‡ÙˆØ±"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(z,{variant:"ghost",onClick:a,children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(z,{onClick:()=>t(l.id,d),className:"flex-1 bg-green-600 text-white hover:bg-green-700 shadow-lg shadow-green-600/20",children:"Ø­ÙØ¸ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯"})]})]})})},Qs=({students:l,studentsCollection:a,archiveCollection:t,selectedBranch:d,logActivity:n,groups:o})=>{const[i,h]=u.useState(""),[b,S]=u.useState("all"),[f,w]=u.useState("joinDateDesc"),[D,r]=u.useState(!1),[x,c]=u.useState(null),[m,k]=u.useState(null),[y,j]=u.useState(null),[I,L]=u.useState(!1),[F,T]=u.useState(null),O=u.useMemo(()=>o?o.map(s=>s.name):[],[o]),q={name:"",phone:"",belt:"Ø£Ø¨ÙŠØ¶",group:"",joinDate:new Date().toISOString().split("T")[0],dob:"",address:"",balance:0,subEnd:"",username:"",password:""},[A,H]=u.useState(q),[ae,p]=u.useState("new"),P=[...new Map(l.map(s=>[s.familyId,s.familyName])).entries()],V=u.useMemo(()=>{let s=[...l];if(i){const N=i.toLowerCase();s=s.filter($=>$.name.toLowerCase().includes(N)||$.phone.includes(N)||$.username.toLowerCase().includes(N))}return b!=="all"&&(s=s.filter(N=>Oe(N.subEnd)===b)),s.sort((N,$)=>{switch(f){case"joinDateDesc":return new Date($.joinDate||0)-new Date(N.joinDate||0);case"joinDateAsc":return new Date(N.joinDate||0)-new Date($.joinDate||0);case"beltDesc":return re.indexOf($.belt)-re.indexOf(N.belt);case"beltAsc":return re.indexOf(N.belt)-re.indexOf($.belt);case"balanceDesc":return $.balance-N.balance;default:return 0}}),s},[l,i,b,f]),G=async s=>{var ce;s.preventDefault();let N=A.username,$=A.password;if(!N||!$){const ee=Ks();N=ee.username,$=ee.password}let R,v;ae==="new"?(R=Math.floor(Date.now()/1e3),v=`Ø¹Ø§Ø¦Ù„Ø© ${A.name.split(" ").slice(-1)[0]}`):(R=parseInt(ae),v=((ce=l.find(ee=>ee.familyId===R))==null?void 0:ce.familyName)||"Ø¹Ø§Ø¦Ù„Ø©");let U=A.subEnd;if(!U){const ee=new Date(A.joinDate||new Date),$e=new Date(ee);$e.setMonth($e.getMonth()+1),U=$e.toISOString().split("T")[0]}const K=A.group||(O.length>0?O[0]:"Ø§Ù„ÙƒÙ„"),Q={...A,branch:d,status:"active",subEnd:U,notes:[],internalNotes:[],attendance:{},familyId:R,familyName:v,customOrder:Date.now(),group:K,username:N,password:$};await a.add(Q)&&(n&&n("Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨",`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ ${Q.name}`),k({name:Q.name,username:N,password:$,phone:Q.phone}),X())},Y=s=>{c(s),H({name:s.name,phone:s.phone,belt:s.belt,group:s.group||"",joinDate:s.joinDate,dob:s.dob,address:s.address||"",subEnd:s.subEnd,balance:s.balance,username:s.username,password:s.password}),p(s.familyId),r(!0)},X=()=>{r(!1),c(null),H(q),p("new")},me=async s=>{s.preventDefault(),await a.update(x.id,A),X()},ie=async s=>{const N=re.indexOf(s.belt);N<re.length-1&&await a.update(s.id,{belt:re[N+1]})},de=async s=>{confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ø±Ø´ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ ${s.name}ØŸ`)&&(await t.add({...s,archivedAt:new Date().toISOString().split("T")[0],originalId:s.id}),await a.remove(s.id),n&&n("Ø£Ø±Ø´ÙØ©",`Ø£Ø±Ø´ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ ${s.name}`))},be=async(s,N,$,R)=>{const v=l.find(le=>le.id===s);if(!v)return;const U=N==="private"?"internalNotes":"notes";let K=v[U]||[],Q;$==="add"?Q=[R,...K]:Q=K.filter(le=>le.id!==R.id),await a.update(s,{[U]:Q})},g=async(s,N,$,R=[])=>{let v=[];if(s==="all"?v=l:s==="group"?v=l.filter(K=>K.group===N):s==="custom"&&(v=l.filter(K=>R.includes(K.id))),v.length===0)return alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø§Ø¨ Ù…Ø³ØªÙ‡Ø¯ÙÙŠÙ†");if(!confirm(`Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù€ ${v.length} Ø·Ø§Ù„Ø¨. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ`))return;const U={id:Date.now().toString(),text:$,date:new Date().toLocaleDateString("ar-JO"),timestamp:new Date().toISOString()};try{const K=zs(J);let Q=0;v.forEach(le=>{const ce=se(J,"artifacts",W,"public","data","students",le.id),ee=le.notes||[];K.update(ce,{notes:[U,...ee]}),Q++}),Q>0&&(await K.commit(),alert("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­!"))}catch(K){console.error("Broadcast Error:",K),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª.")}},C=async(s,N)=>{await a.update(s,{subEnd:N}),n&&n("ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§Ùƒ",`ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§Ùƒ Ù„Ù„Ø·Ø§Ù„Ø¨ (ØªØ§Ø±ÙŠØ® Ø¬Ø¯ÙŠØ¯: ${N})`),T(null)},M=s=>{if(!s)return;let N=s.replace(/\D/g,"");N.startsWith("0")&&(N=N.substring(1)),window.open(`https://wa.me/962${N}`,"_blank")},E=s=>{if(!s.phone)return;let N=s.phone.replace(/\D/g,"");N.startsWith("0")&&(N=N.substring(1));const $=`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${s.name} ðŸ”¥

Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹ Ù„Ù„ØªØ§ÙŠÙƒÙˆØ§Ù†Ø¯Ùˆ !
Ø¥Ù„ÙŠÙƒ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ Ø¨Ø§Ù„Ù…ÙˆÙ‚Ø¹ :

ðŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${s.username}
ðŸ”‘ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${s.password}

Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø§Ù„Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠ :
https://bravetkd.bar/

Ù†ØªÙ…Ù†Ù‰ Ù„Ùƒ Ø§Ù„ØªÙˆÙÙŠÙ‚ ÙŠØ§ Ø¨Ø·Ù„! ðŸ¥‹

ðŸ“ ÙØ±ÙˆØ¹Ù†Ø§ :
âœ… Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø£ÙˆÙ„: Ø´ÙØ§Ø¨Ø¯Ø±Ø§Ù† â€“ Ø´Ø§Ø±Ø¹ Ø±ÙØ¹Øª Ø´Ù…ÙˆØ·
ðŸ“ž 0795629606

âœ… Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø£Ø¨Ùˆ Ù†ØµÙŠØ± â€“ Ø¯ÙˆØ§Ø± Ø§Ù„Ø¨Ø­Ø±ÙŠØ© - Ù…Ø¬Ù…Ø¹ Ø§Ù„ÙØ±Ù‘Ø§ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ
ðŸ“ž 0790368603`;window.open(`https://wa.me/962${N}?text=${encodeURIComponent($)}`,"_blank")};return e.jsxs("div",{className:"space-y-6 animate-fade-in font-sans",children:[e.jsx(Vs,{isOpen:I,onClose:()=>L(!1),groups:O,allStudents:l,onSend:g}),y&&e.jsx(Ys,{student:y,onClose:()=>j(null),onSave:be}),F&&e.jsx(Zs,{student:F,onClose:()=>T(null),onSave:C}),m&&e.jsx(je,{onClose:()=>k(null),children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce",children:e.jsx(es,{size:32})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨Ø·Ù„ Ø¨Ù†Ø¬Ø§Ø­!"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Ø§Ù„Ø·Ø§Ù„Ø¨: ",e.jsx("strong",{children:m.name})]}),e.jsxs("div",{className:"bg-gray-50 p-4 border rounded-xl mb-6 dir-ltr text-left relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 bg-yellow-400 text-xs font-bold text-black rounded-bl-lg",children:"Credentials"}),e.jsxs("p",{className:"font-mono text-sm mb-1",children:["User: ",e.jsx("strong",{className:"text-lg text-blue-900 select-all",children:m.username})]}),e.jsxs("p",{className:"font-mono text-sm",children:["Pass: ",e.jsx("strong",{className:"text-lg text-red-600 select-all",children:m.password})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(z,{onClick:()=>E(m),className:"bg-[#25D366] hover:bg-[#20bd5a] text-white flex items-center justify-center gap-2",children:[e.jsx(ve,{size:18})," Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§ØªØ³Ø§Ø¨"]}),e.jsx(z,{variant:"outline",onClick:()=>k(null),children:"Ø¥ØºÙ„Ø§Ù‚"})]})]})}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col md:flex-row gap-4 justify-between items-center sticky top-0 z-20",children:[e.jsxs("div",{className:"relative w-full md:w-1/3",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx(ke,{size:18,className:"text-gray-400"})}),e.jsx("input",{className:"w-full pl-4 pr-10 py-2.5 border-2 border-gray-100 rounded-xl focus:border-yellow-500 focus:ring-4 focus:ring-yellow-500/10 outline-none transition-all",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù…ØŒ Ù‡Ø§ØªÙØŒ ÙŠÙˆØ²Ø±...",value:i,onChange:s=>h(s.target.value),list:"students-suggestions"}),e.jsx("datalist",{id:"students-suggestions",children:l.map(s=>e.jsx("option",{value:s.name},s.id))})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-1 md:pb-0 hide-scrollbar",children:[e.jsxs(z,{onClick:()=>L(!0),className:"bg-blue-50 text-blue-600 border border-blue-100 hover:bg-blue-100 whitespace-nowrap flex items-center gap-2",children:[e.jsx(ue,{size:18})," ",e.jsx("span",{className:"hidden sm:inline",children:"Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„ÙƒÙ„"})]}),e.jsxs("div",{className:"relative min-w-[120px]",children:[e.jsxs("select",{className:"w-full appearance-none bg-gray-50 border border-gray-200 text-gray-700 py-2.5 pr-8 pl-8 rounded-xl focus:outline-none focus:border-yellow-500 cursor-pointer text-sm font-bold",value:b,onChange:s=>S(s.target.value),children:[e.jsx("option",{value:"all",children:"ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª"}),e.jsx("option",{value:"active",children:"ðŸŸ¢ ÙØ¹Ø§Ù„"}),e.jsx("option",{value:"near_end",children:"ðŸŸ¡ Ù‚Ø§Ø±Ø¨ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"}),e.jsx("option",{value:"expired",children:"ðŸ”´ Ù…Ù†ØªÙ‡ÙŠ"})]}),e.jsx(Os,{size:14,className:"absolute top-1/2 -translate-y-1/2 right-3 text-gray-500 pointer-events-none"})]}),e.jsxs("div",{className:"relative min-w-[140px]",children:[e.jsxs("select",{className:"w-full appearance-none bg-gray-50 border border-gray-200 text-gray-700 py-2.5 pr-8 pl-8 rounded-xl focus:outline-none focus:border-yellow-500 cursor-pointer text-sm font-bold",value:f,onChange:s=>w(s.target.value),children:[e.jsx("option",{value:"joinDateDesc",children:"ðŸ“… Ø§Ù„Ø£Ø­Ø¯Ø«"}),e.jsx("option",{value:"joinDateAsc",children:"ðŸ“… Ø§Ù„Ø£Ù‚Ø¯Ù…"}),e.jsx("option",{value:"beltDesc",children:"ðŸ¥‹ Ø£Ø¹Ù„Ù‰ Ø­Ø²Ø§Ù…"}),e.jsx("option",{value:"balanceDesc",children:"ðŸ’° Ø§Ù„Ù…Ø¯ÙŠÙˆÙ†ÙŠØ©"})]}),f.includes("Desc")?e.jsx(Es,{size:14,className:"absolute top-1/2 -translate-y-1/2 right-3 text-gray-500 pointer-events-none"}):e.jsx(Fs,{size:14,className:"absolute top-1/2 -translate-y-1/2 right-3 text-gray-500 pointer-events-none"})]}),e.jsxs(z,{onClick:()=>{c(null),r(!0)},className:"whitespace-nowrap flex items-center gap-2 shadow-lg shadow-yellow-500/20",children:[e.jsx(Ls,{size:18})," ",e.jsx("span",{className:"hidden sm:inline",children:"Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯"}),e.jsx("span",{className:"inline sm:hidden",children:"Ø¬Ø¯ÙŠØ¯"})]})]})]}),e.jsx(_,{className:"hidden md:block overflow-hidden border-none shadow-md rounded-2xl p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„ÙØªØ±Ø©"}),e.jsx("th",{className:"p-4 font-bold",children:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„Ø­Ø²Ø§Ù…"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("th",{className:"p-4 font-bold",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:V.map(s=>{const N=ls(s.joinDate),$=s.internalNotes&&s.internalNotes.length>0,R=s.notes&&s.notes.length>0;return e.jsxs("tr",{className:"hover:bg-yellow-50/50 transition-colors group",children:[e.jsxs("td",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[$&&e.jsx("button",{onClick:()=>j(s),className:"text-red-500 hover:scale-110 transition-transform",title:"ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ©!",children:e.jsx(ss,{size:20,fill:"currentColor",className:"text-red-100"})}),e.jsx("div",{className:"font-bold text-gray-800 text-base cursor-pointer hover:text-blue-600",onClick:()=>j(s),children:s.name}),N&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-red-100 text-red-600 text-[10px] font-bold border border-red-200 animate-pulse",children:"NEW"})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:s.joinDate})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-bold border border-blue-100",children:s.group||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("a",{href:`tel:${s.phone}`,className:"font-mono text-gray-600 hover:text-blue-600 font-bold flex items-center gap-1",title:"Ø§ØªØµØ§Ù„",children:[s.phone," ",e.jsx(pe,{size:12,className:"opacity-50"})]}),e.jsx("button",{onClick:()=>M(s.phone),className:"w-8 h-8 rounded-full bg-green-50 text-[#25D366] flex items-center justify-center hover:bg-[#25D366] hover:text-white transition-all shadow-sm",children:e.jsx(he,{size:16})})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"bg-gray-50 p-1.5 rounded-lg text-xs font-mono border border-gray-100",children:[e.jsxs("div",{className:"text-blue-900",children:["U: ",s.username]}),e.jsxs("div",{className:"text-red-600 font-bold",children:["P: ",s.password]})]}),e.jsx("button",{onClick:()=>E(s),className:"text-gray-400 hover:text-[#25D366] transition-colors",children:e.jsx(ve,{size:16})})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-3 py-1 bg-gray-100 rounded-lg font-bold text-xs border border-gray-200",children:s.belt})}),e.jsx("td",{className:"p-4",children:s.balance>0?e.jsxs("span",{className:"text-red-600 font-bold bg-red-50 px-2 py-1 rounded text-xs",children:["Ø¹Ù„ÙŠÙ‡ ",s.balance]}):e.jsx("span",{className:"text-green-600 font-bold text-xs",children:"Ø®Ø§Ù„Øµ"})}),e.jsx("td",{className:"p-4",children:e.jsx(qe,{status:Oe(s.subEnd)})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>T(s),className:"bg-green-100 text-green-700 p-2 rounded-lg hover:bg-green-600 hover:text-white transition",title:"ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ",children:e.jsx(Ue,{size:16})}),e.jsx("button",{onClick:()=>j(s),className:`p-2 rounded-lg transition ${R||$?"bg-yellow-100 text-yellow-700":"bg-gray-50 text-gray-400 hover:text-yellow-600"}`,title:"Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª",children:e.jsx(ge,{size:16})}),e.jsx("button",{onClick:()=>ie(s),className:"bg-blue-50 text-blue-600 p-2 rounded-lg hover:bg-blue-600 hover:text-white transition",title:"ØªØ±ÙÙŠØ¹",children:e.jsx(Re,{size:16})}),e.jsx("button",{onClick:()=>Y(s),className:"bg-gray-100 text-gray-600 p-2 rounded-lg hover:bg-gray-600 hover:text-white transition",title:"ØªØ¹Ø¯ÙŠÙ„",children:e.jsx(Te,{size:16})}),e.jsx("button",{onClick:()=>de(s),className:"bg-red-50 text-red-600 p-2 rounded-lg hover:bg-red-600 hover:text-white transition",title:"Ø£Ø±Ø´ÙØ©",children:e.jsx(fe,{size:16})})]})})]},s.id)})})]})})}),e.jsxs("div",{className:"md:hidden grid grid-cols-1 gap-4",children:[V.map(s=>{const N=ls(s.joinDate),$=Oe(s.subEnd),R=s.internalNotes&&s.internalNotes.length>0;return e.jsxs("div",{className:`bg-white p-4 rounded-xl shadow-sm border ${R?"border-red-200 ring-1 ring-red-100":"border-gray-100"} flex flex-col gap-3 relative`,children:[R&&e.jsx("div",{className:"absolute top-4 left-14 animate-pulse",children:e.jsx(ss,{size:20,className:"text-red-500 fill-red-100"})}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:s.name}),N&&e.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-2 rounded-full animate-pulse",children:"NEW"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Ù…Ù†Ø°: ",s.joinDate]}),e.jsx("span",{className:"text-[10px] bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-bold mt-1 inline-block",children:s.group||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]}),e.jsx(qe,{status:$})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg",children:[e.jsx("span",{className:"text-gray-500 text-xs block",children:"Ø§Ù„Ø­Ø²Ø§Ù…"}),e.jsx("span",{className:"font-bold text-gray-800",children:s.belt})]}),e.jsxs("div",{className:`p-2 rounded-lg ${s.balance>0?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:[e.jsx("span",{className:"text-xs block opacity-70",children:"Ø§Ù„Ø±ØµÙŠØ¯"}),e.jsx("span",{className:"font-bold",children:s.balance>0?`Ø¹Ù„ÙŠÙ‡ ${s.balance}`:"Ø®Ø§Ù„Øµ"})]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-lg border border-gray-100 border-dashed",children:[e.jsxs("div",{className:"text-xs font-mono text-gray-600",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-bold text-blue-800",children:"U:"})," ",s.username]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-red-600",children:"P:"})," ",s.password]})]}),e.jsx("button",{onClick:()=>E(s),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200",children:e.jsx(ve,{size:16})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100 mt-1",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:`tel:${s.phone}`,className:"p-2 bg-gray-100 rounded-full text-gray-600",children:e.jsx(pe,{size:16})}),e.jsx("button",{onClick:()=>M(s.phone),className:"p-2 bg-green-100 rounded-full text-[#25D366]",children:e.jsx(he,{size:16})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>T(s),className:"p-2 bg-green-100 text-green-700 rounded-lg",children:e.jsx(Ue,{size:16})}),e.jsx("button",{onClick:()=>j(s),className:`p-2 rounded-lg ${R?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(ge,{size:16})}),e.jsx("button",{onClick:()=>ie(s),className:"p-2 bg-blue-50 text-blue-600 rounded-lg",children:e.jsx(Re,{size:16})}),e.jsx("button",{onClick:()=>Y(s),className:"p-2 bg-yellow-50 text-yellow-600 rounded-lg",children:e.jsx(Te,{size:16})}),e.jsx("button",{onClick:()=>de(s),className:"p-2 bg-red-50 text-red-600 rounded-lg",children:e.jsx(fe,{size:16})})]})]})]},s.id)}),V.length===0&&e.jsx("div",{className:"text-center p-8 text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬"})]}),D&&e.jsx(je,{onClose:X,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:x?"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨":"Ø¥Ø¶Ø§ÙØ© Ø¨Ø·Ù„ Ø¬Ø¯ÙŠØ¯"}),e.jsx("button",{onClick:X,className:"text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(ye,{size:24})})]}),e.jsxs("form",{onSubmit:x?me:G,className:"space-y-4 text-right",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 bg-gradient-to-r from-yellow-50 to-white p-4 rounded-xl border border-yellow-200 mb-2",children:[e.jsxs("p",{className:"text-xs font-bold text-yellow-700 mb-3 flex items-center gap-1",children:[e.jsx(es,{size:12})," Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ø§ØªØ±ÙƒÙ‡Ø§ ÙØ§Ø±ØºØ© Ù„Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Username"}),e.jsx("input",{className:"w-full border border-gray-200 p-2 rounded-lg bg-white font-mono text-left dir-ltr focus:border-yellow-500 outline-none",value:A.username,onChange:s=>H({...A,username:s.target.value}),placeholder:"Auto-generated"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-500 mb-1 uppercase tracking-wider",children:"Password"}),e.jsx("input",{className:"w-full border border-gray-200 p-2 rounded-lg bg-white font-mono text-left dir-ltr focus:border-yellow-500 outline-none",value:A.password,onChange:s=>H({...A,password:s.target.value}),placeholder:"Auto-generated"})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none transition-all",value:A.name,onChange:s=>H({...A,name:s.target.value}),placeholder:"Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"Ø§Ù„ÙØªØ±Ø© / Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©"}),e.jsxs("select",{className:"w-full border-2 border-blue-100 focus:border-blue-500 p-2.5 rounded-xl bg-blue-50/50 outline-none",value:A.group,onChange:s=>H({...A,group:s.target.value}),children:[e.jsx("option",{value:"",children:"Ø¨Ø¯ÙˆÙ† ØªØ­Ø¯ÙŠØ¯"}),O.map((s,N)=>e.jsx("option",{value:s,children:s},N))]})]}),!x&&e.jsxs("div",{className:"md:col-span-2 bg-blue-50 p-3 rounded-xl border border-blue-100",children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© (Ù„Ù„Ø®ØµÙˆÙ…Ø§Øª)"}),e.jsxs("select",{className:"w-full border border-blue-200 p-2 rounded-lg bg-white focus:ring-2 focus:ring-blue-200 outline-none",value:ae,onChange:s=>p(s.target.value),children:[e.jsx("option",{value:"new",children:"ØªØ³Ø¬ÙŠÙ„ ÙƒØ¹Ø§Ø¦Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),P.map(([s,N])=>e.jsxs("option",{value:s,children:["Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù€ ",N]},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("input",{required:!0,className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:A.phone,onChange:s=>H({...A,phone:s.target.value}),placeholder:"079xxxxxxx"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Ø§Ù„Ø­Ø²Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("select",{className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl bg-white outline-none",value:A.belt,onChange:s=>H({...A,belt:s.target.value}),children:re.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-red-600 mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø§ÙØªØªØ§Ø­ÙŠ (Ø¯ÙŠÙ†Ø§Ø±)"}),e.jsx("input",{type:"number",className:"w-full border-2 border-red-50 focus:border-red-500 p-2.5 rounded-xl outline-none bg-red-50/30",value:A.balance,onChange:s=>H({...A,balance:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:A.dob,onChange:s=>H({...A,dob:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚"}),e.jsx("input",{type:"date",className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:A.joinDate,onChange:s=>H({...A,joinDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-green-600 mb-1",children:"Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("input",{type:"date",className:"w-full border-2 border-green-50 focus:border-green-500 p-2.5 rounded-xl outline-none bg-green-50/30",value:A.subEnd,onChange:s=>H({...A,subEnd:s.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx("input",{className:"w-full border-2 border-gray-100 focus:border-yellow-500 p-2.5 rounded-xl outline-none",value:A.address,onChange:s=>H({...A,address:s.target.value}),placeholder:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© - Ø§Ù„Ù…Ù†Ø·Ù‚Ø© - Ø§Ù„Ø´Ø§Ø±Ø¹"})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end mt-8 pt-4 border-t border-gray-100",children:[e.jsx(z,{type:"button",variant:"ghost",onClick:X,className:"text-gray-500 hover:bg-gray-100",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(z,{type:"submit",className:"bg-yellow-500 text-black font-bold hover:bg-yellow-400 shadow-lg shadow-yellow-500/20 px-8",children:x?"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨"})]})]})]})})]})},Xs=({archiveCollection:l,studentsCollection:a,payments:t,logActivity:d})=>{const[n,o]=u.useState(null),[i,h]=u.useState(""),b=l.data.filter(r=>r.name.includes(i)),S=async r=>{if(!window.confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ø·Ø§Ù„Ø¨ ${r.name}ØŸ`))return;const{archivedAt:x,originalId:c,id:m,...k}=r;await a.add({...k,status:"active",joinDate:new Date().toISOString().split("T")[0]}),await l.remove(r.id),d("Ø§Ø³ØªØ¹Ø§Ø¯Ø©",`ØªÙ…Øª Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ ${r.name} Ù…Ù† Ø§Ù„Ø£Ø±Ø´ÙŠÙ`)},f=(r,x)=>{alert("Print functionality for: "+r.id)},w=r=>{if(!r)return;let x=r.replace(/\D/g,"");x.startsWith("0")&&(x=x.substring(1)),window.open(`https://wa.me/962${x}`,"_blank")},D=r=>{const x=r.originalId||r.id;return t.filter(c=>c.studentId===x||c.studentIds&&c.studentIds.includes(x))};return e.jsxs("div",{className:"space-y-6",children:[n&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60] p-4 backdrop-blur-sm",children:e.jsxs(_,{className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto",title:`Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø§Ù„ÙŠ: ${n.name}`,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:`p-4 rounded-xl border-2 text-center ${n.balance>0?"bg-red-50 border-red-500":"bg-green-50 border-green-500"}`,children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ (Ø°Ù…Ù…)"}),e.jsxs("p",{className:`text-2xl font-bold ${n.balance>0?"text-red-600":"text-green-600"}`,children:[n.balance," JOD"]})]}),e.jsxs("div",{className:"p-4 rounded-xl border bg-gray-50 text-center",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£Ø±Ø´ÙØ©"}),e.jsx("p",{className:"text-xl font-bold",children:n.archivedAt||"ØºÙŠØ± Ù…Ø³Ø¬Ù„"})]})]}),e.jsxs("h4",{className:"font-bold border-b pb-2 mb-4 text-gray-800 flex items-center gap-2",children:[e.jsx(Ke,{size:18,className:"text-green-600"})," Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª ÙˆØ§Ù„ÙˆØµÙ„Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©"]}),D(n).length>0?e.jsx("div",{className:"space-y-3",children:D(n).map(r=>e.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-lg border hover:shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:r.reason}),e.jsxs("p",{className:"text-xs text-gray-500",children:[r.date," - ",r.branch]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"font-bold text-green-600",children:[r.amount," JOD"]}),e.jsx("button",{onClick:()=>f(r,r.branch),className:"text-gray-400 hover:text-black",title:"Ø·Ø¨Ø§Ø¹Ø© Ù†Ø³Ø®Ø©",children:e.jsx(Ve,{size:16})})]})]},r.id))}):e.jsx("div",{className:"text-center py-8 bg-gray-50 rounded border-2 border-dashed",children:e.jsx("p",{className:"text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ù…Ø§Ù„ÙŠØ© Ù…Ø¤Ø±Ø´ÙØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø·Ø§Ù„Ø¨"})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(z,{onClick:()=>o(null),children:"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ù„Ù"})})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(fe,{className:"text-red-500"})," Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ø·Ù„Ø§Ø¨"]}),e.jsx("div",{className:"w-64",children:e.jsx("input",{className:"w-full border p-2 rounded shadow-sm",placeholder:"Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ...",value:i,onChange:r=>h(r.target.value)})})]}),e.jsx(_,{noPadding:!0,children:b.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fe,{size:48,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Ø§Ù„Ø£Ø±Ø´ÙŠÙ ÙØ§Ø±Øº Ø­Ø§Ù„ÙŠØ§Ù‹"})]}):e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-4",children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("th",{className:"p-4",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£Ø±Ø´ÙØ©"}),e.jsx("th",{className:"p-4",children:"Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ©"}),e.jsx("th",{className:"p-4",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx("tbody",{className:"divide-y",children:b.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsxs("td",{className:"p-4 font-bold text-gray-800",children:[r.name," ",e.jsx("br",{}),e.jsx("span",{className:"text-xs font-normal text-gray-500",children:r.belt})]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`tel:${r.phone}`,className:"hover:text-blue-600",children:r.phone}),e.jsx("button",{onClick:()=>w(r.phone),className:"text-green-500 hover:bg-green-100 p-1 rounded-full",children:e.jsx(he,{size:16})})]})}),e.jsx("td",{className:"p-4 text-gray-600",children:r.archivedAt}),e.jsx("td",{className:"p-4",children:Number(r.balance)>0?e.jsxs("span",{className:"bg-red-100 text-red-700 px-3 py-1 rounded-full font-bold text-xs",children:["Ø¹Ù„ÙŠÙ‡ ",r.balance," JOD"]}):e.jsxs("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full font-bold text-xs flex items-center gap-1 w-fit",children:[e.jsx(us,{size:12})," Ø®Ø§Ù„Øµ"]})}),e.jsxs("td",{className:"p-4 flex gap-2",children:[e.jsxs(z,{variant:"outline",className:"py-1 px-3 text-xs border-gray-300 hover:bg-gray-100 text-gray-700",onClick:()=>o(r),children:[e.jsx(bs,{size:14,className:"ml-1"})," Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø§Ù„ÙŠ"]}),e.jsx("button",{onClick:()=>S(r),className:"bg-blue-50 text-blue-600 p-2 rounded hover:bg-blue-100 border border-blue-200",title:"Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨ (Ø§Ø³ØªØ±Ø¬Ø§Ø¹)",children:e.jsx(Ps,{size:16})}),e.jsx("button",{onClick:async()=>{window.confirm("Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ø³Ø¬Ù„Ø§ØªØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹!")&&await l.remove(r.id)},className:"bg-red-50 text-red-600 p-2 rounded hover:bg-red-100 border border-red-200",title:"Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠ",children:e.jsx(xe,{size:16})})]})]},r.id))})]})})]})},et=({selectedBranch:l,logActivity:a})=>{const t=B("payments"),d=B("expenses"),n=(t.data||[]).filter(y=>y.branch===l),o=(d.data||[]).filter(y=>y.branch===l),i=new Date().toISOString().slice(0,7),h=n.filter(y=>y.date.startsWith(i)).reduce((y,j)=>y+Number(j.amount),0),b=o.filter(y=>y.date.startsWith(i)).reduce((y,j)=>y+Number(j.amount),0),[S,f]=u.useState(""),[w,D]=u.useState(!1);u.useEffect(()=>{(async()=>{try{const j=se(J,"artifacts",W,"public","data","finance_notes",`${l}_${i}`),I=await ns(j);I.exists()?f(I.data().text):f("")}catch(j){console.error(j)}})()},[l,i]);const r=async()=>{D(!0);try{await Is(se(J,"artifacts",W,"public","data","finance_notes",`${l}_${i}`),{text:S,updatedAt:new Date().toISOString()}),alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª")}catch{alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸")}D(!1)},[x,c]=u.useState({reason:"",amount:""}),m=async y=>{y.preventDefault(),!(!x.amount||!x.reason)&&(await oe(te(J,"artifacts",W,"public","data","expenses"),{...x,amount:Number(x.amount),branch:l,date:new Date().toISOString().split("T")[0],createdAt:new Date().toISOString()}),c({reason:"",amount:""}),a("add_expense",`Ù…ØµØ±ÙˆÙ: ${x.reason}`,l,{role:"admin"}))},k=async y=>{confirm("Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ØµØ±ÙˆÙØŸ")&&await De(se(J,"artifacts",W,"public","data","expenses",y))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-6 rounded-2xl border border-green-100 text-center",children:[e.jsxs("h3",{className:"text-green-800 font-bold mb-2 flex justify-center gap-2",children:[e.jsx(hs,{})," ÙˆØ§Ø±Ø¯Ø§Øª ",i]}),e.jsxs("p",{className:"text-3xl font-black text-green-600",dir:"ltr",children:[h," JD"]})]}),e.jsxs("div",{className:"bg-red-50 p-6 rounded-2xl border border-red-100 text-center",children:[e.jsxs("h3",{className:"text-red-800 font-bold mb-2 flex justify-center gap-2",children:[e.jsx(ts,{})," Ù…ØµØ§Ø±ÙŠÙ ",i]}),e.jsxs("p",{className:"text-3xl font-black text-red-600",dir:"ltr",children:[b," JD"]})]}),e.jsxs("div",{className:"bg-blue-50 p-6 rounded-2xl border border-blue-100 text-center",children:[e.jsxs("h3",{className:"text-blue-800 font-bold mb-2 flex justify-center gap-2",children:[e.jsx(Ke,{})," Ø§Ù„ØµØ§ÙÙŠ (Net Profit)"]}),e.jsxs("p",{className:`text-3xl font-black ${h-b>=0?"text-blue-600":"text-red-600"}`,dir:"ltr",children:[h-b," JD"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{title:"Ø³Ø¬Ù„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©",children:[e.jsxs("form",{onSubmit:m,className:"flex gap-2 mb-4 bg-gray-50 p-3 rounded-lg",children:[e.jsx("input",{className:"border p-2 rounded flex-1",placeholder:"Ø§Ù„Ø¨ÙŠØ§Ù† (ÙƒÙ‡Ø±Ø¨Ø§Ø¡ØŒ ØµÙŠØ§Ù†Ø©...)",value:x.reason,onChange:y=>c({...x,reason:y.target.value}),required:!0}),e.jsx("input",{type:"number",className:"border p-2 rounded w-24",placeholder:"Ø§Ù„Ù…Ø¨Ù„Øº",value:x.amount,onChange:y=>c({...x,amount:y.target.value}),required:!0}),e.jsx(z,{type:"submit",variant:"danger",children:"Ø¥Ø¶Ø§ÙØ©"})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-right",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("th",{className:"p-2 text-right",children:"Ø§Ù„Ø³Ø¨Ø¨"}),e.jsx("th",{className:"p-2 text-right",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:o.sort((y,j)=>new Date(j.date)-new Date(y.date)).map(y=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-bold text-red-600",children:y.amount}),e.jsx("td",{className:"p-2",children:y.reason}),e.jsx("td",{className:"p-2 text-gray-500 text-xs",children:y.date}),e.jsx("td",{className:"p-2",children:e.jsx("button",{onClick:()=>k(y.id),className:"text-red-400 hover:text-red-600",children:e.jsx(ts,{size:14})})})]},y.id))})]})})]}),e.jsxs(_,{title:"Ø¯ÙØªØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©",children:[e.jsx("textarea",{className:"w-full h-48 border-2 border-yellow-100 rounded-xl p-4 focus:border-yellow-500 outline-none resize-none bg-yellow-50/30",placeholder:"Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø± Ù‡Ù†Ø§...",value:S,onChange:y=>f(y.target.value)}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs(z,{onClick:r,disabled:w,children:[e.jsx(gs,{size:18})," ",w?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª"]})})]})]})]})},st=({students:l,productsCollection:a,selectedBranch:t,logActivity:d})=>{var y;const[n,o]=u.useState(null),[i,h]=u.useState(""),[b,S]=u.useState(""),[f,w]=u.useState("Ø§Ø´ØªØ±Ø§Ùƒ Ø´Ù‡Ø±ÙŠ"),[D,r]=u.useState(""),x=(a==null?void 0:a.data)||[],c=x.filter(j=>(j.branch===t||j.branch==="Ù…Ø´ØªØ±Ùƒ")&&j.stock>0),m=l.filter(j=>j.branch===t&&(j.name.includes(i)||j.phone&&j.phone.includes(i))),k=async j=>{if(j.preventDefault(),!n)return alert("Ø§Ø®ØªØ± Ø§Ù„Ø·Ø§Ù„Ø¨ Ø£ÙˆÙ„Ø§Ù‹");if(!b&&!D)return alert("ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØ© Ø§Ø´ØªØ±Ø§Ùƒ Ø£Ùˆ Ù…Ù†ØªØ¬ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©ØŸ"))try{let I=0,L=[];if(b){const F=Number(b);I+=F,L.push(`${f}: ${F} JD`),await oe(te(J,"artifacts",W,"public","data","payments"),{amount:F,studentId:n.id,name:n.name,branch:t,reason:"Ø§Ø´ØªØ±Ø§Ùƒ",details:f,date:new Date().toISOString().split("T")[0],createdAt:new Date().toISOString()})}if(D){const F=x.find(T=>T.id===D);if(F){I+=Number(F.price),L.push(`${F.name}: ${F.price} JD`),await oe(te(J,"artifacts",W,"public","data","payments"),{amount:Number(F.price),studentId:n.id,name:n.name,branch:t,reason:"Ù…Ø¨ÙŠØ¹Ø§Øª",details:F.name,date:new Date().toISOString().split("T")[0],createdAt:new Date().toISOString()});const T=se(J,"artifacts",W,"public","data","products",F.id);await He(T,{stock:Number(F.stock)-1})}}d("new_receipt",`ÙˆØµÙ„ Ø¨Ù‚ÙŠÙ…Ø© ${I} Ù„Ù„Ø·Ø§Ù„Ø¨ ${n.name}`,t,{role:"user"}),alert(`ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${I} Ø¯ÙŠÙ†Ø§Ø±`),S(""),r(""),o(null),h("")}catch(I){console.error(I),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸")}};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(_,{className:"lg:col-span-1 h-fit",children:[e.jsxs("h3",{className:"font-bold mb-4 flex gap-2",children:[e.jsx(ke,{size:20})," Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø·Ø§Ù„Ø¨"]}),e.jsx("input",{className:"w-full border p-3 rounded-lg mb-4",placeholder:"Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…...",value:i,onChange:j=>h(j.target.value)}),e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:m.map(j=>e.jsxs("div",{onClick:()=>o(j),className:`p-3 rounded-lg cursor-pointer border transition-colors ${(n==null?void 0:n.id)===j.id?"bg-yellow-100 border-yellow-500":"hover:bg-gray-50 border-gray-100"}`,children:[e.jsx("p",{className:"font-bold",children:j.name}),e.jsx("p",{className:"text-xs text-gray-500",children:j.belt})]},j.id))})]}),e.jsx(_,{className:"lg:col-span-2",title:n?`ÙØ§ØªÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©: ${n.name}`:"ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø·Ø§Ù„Ø¨",children:n?e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border",children:[e.jsx("h4",{className:"font-bold text-gray-700 mb-3 border-b pb-2",children:"1. Ø±Ø³ÙˆÙ… Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ/Ø§Ù„ØªØ¯Ø±ÙŠØ¨"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ù…Ø¨Ù„Øº (Ø¯ÙŠÙ†Ø§Ø±)"}),e.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:b,onChange:j=>S(j.target.value),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ø¨ÙŠØ§Ù†"}),e.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:f,onChange:j=>w(j.target.value)})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsxs("h4",{className:"font-bold text-blue-800 mb-3 border-b border-blue-200 pb-2 flex gap-2",children:[e.jsx(Be,{size:18})," 2. Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±"]}),e.jsxs("select",{className:"w-full border p-3 rounded bg-white",value:D,onChange:j=>r(j.target.value),children:[e.jsx("option",{value:"",children:"-- Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´Ø±Ø§Ø¡ Ù…Ù†ØªØ¬Ø§Øª --"}),c.map(j=>e.jsxs("option",{value:j.id,children:[j.name," (",j.price," JD) - Ù…ØªÙˆÙØ±: ",j.stock]},j.id))]})]}),e.jsxs("div",{className:"pt-4 border-t flex justify-between items-center",children:[e.jsxs("div",{className:"text-xl font-bold text-gray-800",children:["Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ",e.jsxs("span",{className:"text-green-600",children:[(Number(b)||0)+(D?Number(((y=x.find(j=>j.id===D))==null?void 0:y.price)||0):0)," JD"]})]}),e.jsxs(z,{type:"submit",size:"lg",className:"px-8 shadow-xl shadow-yellow-500/20",children:[e.jsx(Ve,{size:20})," Ø­ÙØ¸ ÙˆØ·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙˆØµÙ„"]})]})]}):e.jsxs("div",{className:"text-center py-10 text-gray-400",children:[e.jsx(ke,{size:48,className:"mx-auto mb-2 opacity-20"}),e.jsx("p",{children:"Ø§Ø®ØªØ± Ø·Ø§Ù„Ø¨Ø§Ù‹ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ù„Ù„Ø¨Ø¯Ø¡"})]})})]})},tt=({productsCollection:l,selectedBranch:a})=>{const d=((l==null?void 0:l.data)||[]).filter(c=>c.branch===a||c.branch==="Ù…Ø´ØªØ±Ùƒ"),[n,o]=u.useState(!1),[i,h]=u.useState(!1),[b,S]=u.useState({name:"",price:"",stock:"",image:"",category:"equipment"}),[f,w]=u.useState(null),D=c=>{if(c.target.files[0]){w(c.target.files[0]);const m=new FileReader;m.onloadend=()=>S({...b,image:m.result}),m.readAsDataURL(c.target.files[0])}},r=async c=>{c.preventDefault(),h(!0);try{let m=b.image;if(f){const k=os(fs,`products/${Date.now()}_${f.name}`),y=await is(k,f);m=await ds(y.ref)}await oe(te(J,"artifacts",W,"public","data","products"),{...b,price:Number(b.price),stock:Number(b.stock),image:m,branch:a,createdAt:new Date().toISOString()}),alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­"),o(!1),S({name:"",price:"",stock:"",image:"",category:"equipment"}),w(null)}catch(m){console.error(m),alert("Ø­Ø¯Ø« Ø®Ø·Ø£")}h(!1)},x=async c=>{confirm("Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ")&&await De(se(J,"artifacts",W,"public","data","products",c))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm",children:[e.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(_e,{})," Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ§Ù„Ù…ØªØ¬Ø±"]}),e.jsxs(z,{onClick:()=>o(!0),children:[e.jsx(Ye,{size:18})," Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:d.map(c=>e.jsxs(_,{className:"relative group",children:[e.jsx("div",{className:"h-40 bg-gray-100 rounded-t-xl overflow-hidden relative",children:c.image?e.jsx("img",{src:c.image,alt:c.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(_e,{size:40,className:"text-gray-300"})})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold",children:c.name}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[e.jsxs("span",{className:"font-bold text-green-600",children:[c.price," JD"]}),e.jsxs("span",{className:`px-2 rounded ${c.stock<5?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:["Ø§Ù„ÙƒÙ…ÙŠØ©: ",c.stock]})]}),e.jsx(z,{variant:"danger",onClick:()=>x(c.id),className:"w-full mt-3 text-xs",children:"Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬"})]})]},c.id))}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:e.jsx(_,{className:"w-full max-w-md",title:"Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù„Ù„Ù…ØªØ¬Ø±",children:e.jsxs("form",{onSubmit:r,className:"space-y-3",children:[e.jsx("input",{placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ (Ù…Ø«Ù„Ø§Ù‹: Ø¨Ø¯Ù„Ø© ØªØ§ÙŠÙƒÙˆØ§Ù†Ø¯Ùˆ)",required:!0,className:"w-full border p-2 rounded",value:b.name,onChange:c=>S({...b,name:c.target.value})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹",required:!0,className:"w-full border p-2 rounded",value:b.price,onChange:c=>S({...b,price:c.target.value})}),e.jsx("input",{type:"number",placeholder:"Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªÙˆÙØ±Ø©",required:!0,className:"w-full border p-2 rounded",value:b.stock,onChange:c=>S({...b,stock:c.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block mb-1",children:"ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"w-full border p-2 rounded bg-gray-50"})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(z,{variant:"ghost",onClick:()=>o(!1),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(z,{type:"submit",disabled:i,children:i?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":"Ø­ÙØ¸"})]})]})})})]})},at=({isOpen:l,onClose:a,groups:t,onAdd:d,onDelete:n})=>{const[o,i]=u.useState("");return l?rs.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-fade-in",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(We,{size:20,className:"text-gray-600"})," Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØªØ±Ø§Øª ÙˆØ§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª"]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("input",{className:"flex-1 border-2 border-gray-200 rounded-xl px-4 py-2 focus:border-blue-500 outline-none",placeholder:"Ø§Ø³Ù… Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©...",value:o,onChange:h=>i(h.target.value)}),e.jsx("button",{onClick:()=>{o&&(d(o),i(""))},className:"bg-blue-600 text-white p-3 rounded-xl hover:bg-blue-700",children:e.jsx(Ye,{size:20})})]}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4",children:[t.map((h,b)=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-xl border border-gray-100",children:[e.jsx("span",{className:"font-bold text-gray-700",children:h.name}),e.jsx("button",{onClick:()=>n(h),className:"text-red-500 hover:bg-red-50 p-2 rounded-lg transition-colors",children:e.jsx(xe,{size:18})})]},b)),t.length===0&&e.jsx("p",{className:"text-center text-gray-400 text-sm",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙØªØ±Ø§Øª Ù…Ø¶Ø§ÙØ©"})]}),e.jsx(z,{onClick:a,variant:"outline",className:"w-full",children:"Ø¥ØºÙ„Ø§Ù‚"})]})]}),document.body):null};function lt({students:l,studentsCollection:a,groups:t=[],groupsCollection:d,selectedBranch:n}){const[o,i]=u.useState(new Date),[h,b]=u.useState(new Date().getDate()),[S,f]=u.useState(""),[w,D]=u.useState(1),[r,x]=u.useState(10),[c,m]=u.useState(!1),[k,y]=u.useState(!1),[j,I]=u.useState("Ø§Ù„ÙƒÙ„"),L=u.useMemo(()=>t?t.map(g=>g.name):[],[t]),F=async g=>{var C;if(L.includes(g))return alert("Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹");await d.add({name:g,branch:n||((C=l[0])==null?void 0:C.branch)||"Ø¹Ø§Ù…"})},T=async g=>{confirm(`Ø­Ø°Ù Ø§Ù„ÙØªØ±Ø© "${g.name}"ØŸ`)&&(await d.remove(g.id),j===g.name&&I("Ø§Ù„ÙƒÙ„"))},O=o.getFullYear(),q=o.getMonth(),A=new Date(O,q+1,0).getDate(),H=["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"],ae=["Ø£Ø­Ø¯","Ø¥Ø«Ù†ÙŠÙ†","Ø«Ù„Ø§Ø«Ø§Ø¡","Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø®Ù…ÙŠØ³","Ø¬Ù…Ø¹Ø©","Ø³Ø¨Øª"],p=Array.from({length:8},(g,C)=>2023+C),P=(g,C)=>{const M=new Date(o);g!==null&&M.setFullYear(g),C!==null&&M.setMonth(C),i(M),b(1)},V=g=>{const C=new Date(O,q+1,0).getDate();let M=h+g;M>C&&(M=C),M<1&&(M=1),b(M)},G=u.useMemo(()=>{let g=Array.isArray(l)?[...l]:[];return j!=="Ø§Ù„ÙƒÙ„"&&(g=g.filter(C=>C.group===j)),g.sort((C,M)=>(C.customOrder||999999)-(M.customOrder||999999)),S&&(g=g.filter(C=>C.name.toLowerCase().includes(S.toLowerCase()))),g},[l,S,j]),Y=Math.ceil(G.length/r),X=c?G:G.slice((w-1)*r,w*r),me=async(g,C)=>{const M=`${O}-${String(q+1).padStart(2,"0")}-${String(C).padStart(2,"0")}`,s={...l.find(N=>N.id===g).attendance||{}};s[M]?delete s[M]:s[M]=!0,await a.update(g,{attendance:s})},ie=async(g,C)=>{let M=C-1;if(M<0&&(M=0),M>=G.length&&(M=G.length-1),M===g)return;const E=[...G],[s]=E.splice(g,1);E.splice(M,0,s);const N=E.map(($,R)=>a.update($.id,{customOrder:R+1}));await Promise.all(N)},de=async(g,C)=>{confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù†Ù‚Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨ Ù„Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©ØŸ")&&await a.update(g,{group:C})},be=()=>{const g=window.open("","PRINT","height=800,width=1200"),C=window.location.origin+ne.LOGO;let M="";for(let N=1;N<=A;N++)M+=`<th style="font-size:10px; width:20px; border:1px solid #ccc; background:#f9f9f9;">${N}</th>`;let E="";G.forEach((N,$)=>{var v;let R="";for(let U=1;U<=A;U++){const K=`${O}-${String(q+1).padStart(2,"0")}-${String(U).padStart(2,"0")}`,Q=(v=N.attendance)==null?void 0:v[K],le=new Date(O,q,U).getDay()===5;let ce="",ee="";le?ee="#eee":Q&&(ce="âœ“",ee="#dcfce7"),R+=`<td style="border:1px solid #ccc; background:${ee}; text-align:center; font-size:12px; color:#166534; font-weight:bold;">${ce}</td>`}E+=`
            <tr>
                <td style="border:1px solid #ccc; padding:5px; font-weight:bold; text-align:center;">${$+1}</td>
                <td style="border:1px solid #ccc; padding:5px; text-align:right;">${N.name}</td>
                <td style="border:1px solid #ccc; padding:5px; text-align:center; font-size:11px;">${N.group||"-"}</td>
                ${R}
            </tr>
        `});const s=`
      <!DOCTYPE html>
      <html lang="ar" dir="rtl">
        <head>
          <title>ÙƒØ´Ù Ø§Ù„Ø­Ø¶ÙˆØ± - ${H[q]} ${O}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
            body { font-family: 'Cairo', sans-serif; padding: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            h1 { text-align: center; color: #b45309; margin-bottom: 5px; }
            .header-info { text-align: center; margin-bottom: 20px; font-weight:bold; color:#555; }
            @page { size: A4 landscape; margin: 10mm; }
          </style>
        </head>
        <body>
            <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid #b45309; padding-bottom:10px;">
                <div>
                    <h1>Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹ Ù„Ù„ØªØ§ÙŠÙƒÙˆØ§Ù†Ø¯Ùˆ</h1>
                    <div style="font-size:12px;">ÙØ±Ø¹: ${n}</div>
                </div>
                <img src="${C}" style="height:60px;" onerror="this.style.display='none'"/>
            </div>

            <div class="header-info">
                Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨ | Ø´Ù‡Ø±: ${H[q]} ${O} | Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©: ${j}
            </div>

            <table>
                <thead>
                    <tr>
                        <th style="border:1px solid #ccc; background:#eee; width:30px;">#</th>
                        <th style="border:1px solid #ccc; background:#eee; width:200px;">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                        <th style="border:1px solid #ccc; background:#eee; width:80px;">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©</th>
                        ${M}
                    </tr>
                </thead>
                <tbody>
                    ${E}
                </tbody>
            </table>
            
            <div style="margin-top:20px; font-size:10px; text-align:left; color:#777;">
                ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©: ${new Date().toLocaleDateString("ar-JO")}
            </div>
        </body>
      </html>
    `;g.document.write(s),g.document.close(),g.onload=()=>{g.focus(),setTimeout(()=>{g.print(),g.close()},500)}};return e.jsxs("div",{className:"space-y-6 animate-fade-in font-sans",children:[e.jsx(at,{isOpen:k,onClose:()=>y(!1),groups:t||[],onAdd:F,onDelete:T}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex flex-col xl:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-gray-50 p-2 rounded-xl border border-gray-200 justify-center w-full md:w-auto",children:[e.jsx(Ge,{size:18,className:"text-gray-500 ml-1"}),e.jsx("select",{className:"bg-transparent font-bold text-gray-700 outline-none cursor-pointer",value:q,onChange:g=>P(null,parseInt(g.target.value)),children:H.map((g,C)=>e.jsx("option",{value:C,children:g},C))}),e.jsx("select",{className:"bg-transparent font-bold text-gray-700 outline-none cursor-pointer",value:O,onChange:g=>P(parseInt(g.target.value),null),children:p.map(g=>e.jsx("option",{value:g,children:g},g))})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 p-2 pl-3 rounded-xl border border-blue-100 w-full md:w-auto",children:[e.jsx(ze,{size:18,className:"text-blue-500 ml-1"}),e.jsx("span",{className:"text-xs font-bold text-blue-800 ml-1 hidden sm:inline",children:"Ø§Ù„ÙØªØ±Ø©:"}),e.jsx("div",{className:"relative group",children:e.jsxs("select",{className:"bg-transparent text-blue-900 font-bold outline-none w-full md:w-40 cursor-pointer appearance-none pr-4",value:j,onChange:g=>{I(g.target.value),D(1)},children:[e.jsx("option",{value:"Ø§Ù„ÙƒÙ„",children:"Ø§Ù„ÙƒÙ„ (Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨)"}),L.map((g,C)=>e.jsx("option",{value:g,children:g},C))]})}),e.jsx("button",{onClick:()=>y(!0),className:"bg-white p-1.5 rounded-lg text-blue-500 hover:text-blue-700 hover:shadow-sm border border-transparent hover:border-blue-200 transition-all",title:"Ø¥Ø¶Ø§ÙØ©/Ø­Ø°Ù ÙØªØ±Ø§Øª",children:e.jsx(We,{size:16})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full xl:w-auto",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(ke,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Ø¨Ø­Ø«...",className:"w-full pl-4 pr-10 py-2.5 border-2 border-gray-100 rounded-xl focus:border-yellow-500 outline-none",value:S,onChange:g=>{f(g.target.value),D(1)}})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(z,{variant:c?"default":"outline",onClick:()=>m(!c),className:`gap-2 whitespace-nowrap ${c?"bg-yellow-500 text-black border-none":""}`,children:[c?e.jsx(gs,{size:18}):e.jsx(_s,{size:18}),c?"Ø­ÙØ¸ Ø§Ù„ØªØ±ØªÙŠØ¨":"ØªØ±ØªÙŠØ¨"]}),e.jsxs(z,{onClick:be,className:"bg-gray-800 text-white gap-2 hover:bg-black",title:"Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙƒØ´Ù",children:[e.jsx(Ve,{size:18})," ",e.jsx("span",{className:"hidden md:inline",children:"Ø·Ø¨Ø§Ø¹Ø©"})]})]})]})]}),e.jsxs("div",{className:"md:hidden space-y-4",children:[e.jsxs("div",{className:"bg-yellow-500 text-black p-4 rounded-xl shadow-lg flex justify-between items-center",children:[e.jsx("button",{onClick:()=>V(-1),className:"p-2 bg-white/20 rounded-lg",children:e.jsx(Ce,{})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs opacity-75 font-bold mb-1",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±"}),e.jsx("div",{className:"text-xl font-bold flex flex-col",children:e.jsxs("span",{children:[h," ",H[q]]})})]}),e.jsx("button",{onClick:()=>V(1),className:"p-2 bg-white/20 rounded-lg",children:e.jsx(Je,{})})]}),e.jsx("div",{className:"grid gap-3",children:X.map((g,C)=>{var N;const M=`${O}-${String(q+1).padStart(2,"0")}-${String(h).padStart(2,"0")}`,E=!!((N=g.attendance)!=null&&N[M]),s=new Date(O,q,h).getDay()===5;return e.jsx("div",{className:"p-4 rounded-xl border border-gray-100 bg-white shadow-sm",children:e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center font-bold text-gray-500 text-sm",children:(w-1)*r+C+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800",children:g.name}),e.jsx("div",{className:"relative mt-1",children:e.jsx("select",{className:"text-[10px] bg-blue-50 text-blue-700 px-2 py-0.5 rounded-md outline-none border-none font-bold w-full appearance-none",value:g.group||(L.length>0?L[0]:""),onChange:$=>de(g.id,$.target.value),children:L.map(($,R)=>e.jsx("option",{value:$,children:$},R))})})]})]}),!c&&(s?e.jsx("span",{className:"text-xs font-bold text-red-500 bg-red-50 px-2 py-1 rounded",children:"Ø¹Ø·Ù„Ø©"}):e.jsx("button",{onClick:()=>me(g.id,h),className:`w-10 h-10 rounded-full flex items-center justify-center ${E?"bg-green-500 text-white":"bg-gray-100 text-gray-300"}`,children:E?e.jsx(as,{size:20}):e.jsx("span",{className:"w-3 h-3 bg-gray-300 rounded-full"})}))]})},g.id)})})]}),e.jsx(_,{className:"hidden md:block overflow-visible p-0 border-none shadow-md rounded-2xl",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsx("thead",{className:"bg-gray-800 text-white sticky top-0 z-20",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"p-4 sticky right-0 bg-gray-800 z-30 text-right min-w-[280px] font-bold text-base shadow-lg",children:["Ø§Ù„Ø·Ù„Ø§Ø¨ ",j!=="Ø§Ù„ÙƒÙ„"&&e.jsxs("span",{className:"text-yellow-400 text-sm",children:["(",j,")"]})]}),!c&&[...Array(A)].map((g,C)=>{const M=C+1,E=new Date(O,q,M).getDay()===5;return e.jsx("th",{className:`p-2 border-l border-gray-700 text-center min-w-[40px] ${E?"bg-red-900/40 text-red-100":""}`,children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"opacity-60 text-[10px]",children:ae[new Date(O,q,M).getDay()]}),e.jsx("span",{children:M})]})},C)}),c&&e.jsx("th",{className:"p-4 text-center w-64 bg-yellow-600/90 text-white",children:"Ø§Ù„ØªØ±ØªÙŠØ¨"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:X.map((g,C)=>{const M=(w-1)*r+C+1;return e.jsxs("tr",{className:"hover:bg-yellow-50 transition-colors group",children:[e.jsx("td",{className:"p-3 sticky right-0 bg-white group-hover:bg-yellow-50 font-bold border-l border-gray-100 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] z-10 text-gray-800 text-sm flex items-center justify-between h-[50px]",children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx("span",{className:`text-xs w-6 h-6 flex items-center justify-center rounded-full font-mono ${c?"bg-yellow-100 text-yellow-800 font-bold":"bg-gray-100 text-gray-500"}`,children:M}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("span",{className:"truncate",children:g.name}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(Rs,{size:10,className:"text-gray-400"}),e.jsxs("select",{className:"bg-transparent text-[10px] text-gray-500 outline-none cursor-pointer hover:text-blue-600 w-full",value:g.group||(L.length>0?L[0]:""),onChange:E=>de(g.id,E.target.value),onClick:E=>E.stopPropagation(),children:[e.jsx("option",{value:"",disabled:!0,children:"Ù†Ù‚Ù„ Ø¥Ù„Ù‰..."}),L.map((E,s)=>e.jsx("option",{value:E,children:E},s))]})]})]})]})}),!c&&[...Array(A)].map((E,s)=>{var U;const N=s+1,$=`${O}-${String(q+1).padStart(2,"0")}-${String(N).padStart(2,"0")}`,R=!!((U=g.attendance)!=null&&U[$]),v=new Date(O,q,N).getDay()===5;return e.jsx("td",{className:`border-l border-gray-100 text-center p-0 ${v?"bg-gray-50":""}`,children:v?e.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-20 pointer-events-none",children:e.jsx(ye,{size:12})}):e.jsxs("label",{className:"cursor-pointer w-full h-full flex items-center justify-center hover:bg-gray-100",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:()=>me(g.id,N),className:"hidden"}),e.jsx("div",{className:`w-6 h-6 rounded flex items-center justify-center transition-all ${R?"bg-green-500 text-white scale-110":"bg-gray-100 hover:bg-gray-300"}`,children:e.jsx(as,{size:14})})]})},s)}),c&&e.jsx("td",{className:"p-2 text-center bg-yellow-50/20 border-l border-yellow-100",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Ø±Ù‚Ù…:"}),e.jsx("input",{type:"number",className:"w-20 p-2 text-center border-2 border-yellow-300 rounded-lg focus:border-yellow-600 outline-none font-bold text-lg",placeholder:M,onKeyDown:E=>{E.key==="Enter"&&(ie(C,parseInt(E.target.value)),E.target.value="",E.target.blur())},onBlur:E=>{E.target.value&&(ie(C,parseInt(E.target.value)),E.target.value="")}})]})})]},g.id)})})]})})}),!c&&Y>1&&e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-100 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:"Ø¹Ø±Ø¶"}),e.jsxs("select",{className:"bg-gray-50 border border-gray-200 rounded-lg p-1.5 focus:outline-none font-bold cursor-pointer",value:r,onChange:g=>{x(Number(g.target.value)),D(1)},children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:G.length,children:"Ø§Ù„ÙƒÙ„"})]}),e.jsxs("span",{children:["Ù…Ù† Ø£ØµÙ„ ",G.length," Ø·Ø§Ù„Ø¨"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(z,{variant:"outline",disabled:w===1,onClick:()=>D(g=>g-1),className:"px-4 text-sm",children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsx("div",{className:"flex gap-1 overflow-x-auto hide-scrollbar max-w-[150px] md:max-w-none px-1",children:[...Array(Y)].map((g,C)=>e.jsx("button",{onClick:()=>D(C+1),className:`w-9 h-9 flex items-center justify-center rounded-lg text-sm font-bold transition-all ${w===C+1?"bg-yellow-500 text-black shadow-md scale-105":"bg-gray-50 text-gray-600 hover:bg-gray-200"}`,children:C+1},C))}),e.jsx(z,{variant:"outline",disabled:w===Y,onClick:()=>D(g=>g+1),className:"px-4 text-sm",children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})]})]})}const rt=()=>{const a=`student${Math.floor(1e3+Math.random()*9e3)}`;let t="";const d="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789";for(let n=0;n<8;n++)t+=d.charAt(Math.floor(Math.random()*d.length));return{username:a,password:t}};function nt({registrations:l,students:a,registrationsCollection:t,studentsCollection:d,selectedBranch:n,logActivity:o}){const[i,h]=u.useState(null),[b,S]=u.useState({}),f=[...new Map(a.map(r=>[r.familyId,r.familyName])).entries()],w=r=>{const x=new Date().toISOString().split("T")[0],c=new Date;c.setMonth(c.getMonth()+1),S({name:r.name,phone:r.phone,dob:r.dob,address:r.address,belt:"Ø£Ø¨ÙŠØ¶",joinDate:x,subEnd:c.toISOString().split("T")[0],balance:0,linkFamily:"new"}),h(r)},D=async r=>{var j;r.preventDefault();const{username:x,password:c}=rt();let m,k;b.linkFamily==="new"?(m=Math.floor(Date.now()/1e3),k=`Ø¹Ø§Ø¦Ù„Ø© ${b.name.split(" ").slice(-1)[0]}`):(m=parseInt(b.linkFamily),k=((j=a.find(I=>I.familyId===m))==null?void 0:j.familyName)||"Ø¹Ø§Ø¦Ù„Ø©");const y={branch:n,status:"active",notes:[],internalNotes:[],attendance:{},username:x,password:c,familyId:m,familyName:k,customOrder:Date.now(),...b};delete y.linkFamily,await d.add(y),await t.remove(i.id),o("ØªØ³Ø¬ÙŠÙ„ Ø·Ø§Ù„Ø¨",`ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨ ${b.name}`),alert(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!
User: ${x}
Pass: ${c}`),h(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-4",children:l.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border-2 border-dashed border-gray-200",children:[e.jsx(ps,{size:48,className:"mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ø­Ø§Ù„ÙŠØ§Ù‹."})]}):l.map(r=>e.jsx(_,{className:"border-r-4 border-blue-500",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-lg flex items-center gap-2",children:[r.name," ",e.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded",children:"Ø¬Ø¯ÙŠØ¯"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(pe,{size:14})," ",r.phone]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Pe,{size:14})," ",r.address]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ge,{size:14})," ",r.dob]})]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsx(z,{onClick:()=>w(r),className:"bg-green-600 hover:bg-green-700 text-white text-sm flex-1 md:flex-none",children:"Ø§Ø¹ØªÙ…Ø§Ø¯ ÙƒØ·Ø§Ù„Ø¨"}),e.jsx("button",{onClick:()=>{confirm("Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ØŸ")&&t.remove(r.id)},className:"text-red-500 p-2 hover:bg-red-50 rounded border border-red-200",children:e.jsx(xe,{size:18})})]})]})},r.id))}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60] p-4 backdrop-blur-sm",children:e.jsx(_,{className:"w-full max-w-2xl animate-fade-in",title:"Ø¥ÙƒÙ…Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("input",{className:"w-full border p-2 bg-gray-100 rounded text-gray-500",value:b.name,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("input",{className:"w-full border p-2 bg-gray-100 rounded text-gray-500",value:b.phone,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:b.linkFamily,onChange:r=>S({...b,linkFamily:r.target.value}),children:[e.jsx("option",{value:"new",children:"Ø¹Ø§Ø¦Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),f.map(([r,x])=>e.jsx("option",{value:r,children:x},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"Ø§Ù„Ø­Ø²Ø§Ù…"}),e.jsx("select",{className:"w-full border p-2 rounded",value:b.belt,onChange:r=>S({...b,belt:r.target.value}),children:re.map(r=>e.jsx("option",{children:r},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚"}),e.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:b.joinDate,onChange:r=>S({...b,joinDate:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold text-green-600",children:"Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("input",{type:"date",className:"w-full border p-2 rounded bg-green-50",value:b.subEnd,onChange:r=>S({...b,subEnd:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 text-red-600 font-bold",children:"Ø±ØµÙŠØ¯ Ù…Ø³ØªØ­Ù‚ (JOD)"}),e.jsx("input",{type:"number",className:"w-full border p-2 rounded focus:ring-2 ring-red-500 outline-none",value:b.balance,onChange:r=>S({...b,balance:r.target.value})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[e.jsx(z,{variant:"ghost",onClick:()=>h(null),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(z,{type:"submit",children:"ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø¶Ø§ÙØ©"})]})]})})})]})}function ot({schedule:l,scheduleCollection:a}){const[t,d]=u.useState({level:"",days:"",time:"",branch:""}),n=async i=>{i.preventDefault(),await a.add({...t}),d({level:"",days:"",time:"",branch:""})},o=async i=>{confirm("Ø­Ø°ÙØŸ")&&await a.remove(i)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(_,{title:"Ø¥Ø¶Ø§ÙØ© Ø­ØµØ©",children:e.jsxs("form",{onSubmit:n,className:"grid grid-cols-2 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ù…Ø³ØªÙˆÙ‰"}),e.jsx("input",{className:"w-full border p-2 rounded",value:t.level,onChange:i=>d({...t,level:i.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ø£ÙŠØ§Ù…"}),e.jsx("input",{className:"w-full border p-2 rounded",value:t.days,onChange:i=>d({...t,days:i.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„ÙˆÙ‚Øª"}),e.jsx("input",{className:"w-full border p-2 rounded",value:t.time,onChange:i=>d({...t,time:i.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„ÙØ±Ø¹"}),e.jsx("input",{className:"w-full border p-2 rounded",value:t.branch,onChange:i=>d({...t,branch:i.target.value}),required:!0})]}),e.jsx(z,{type:"submit",children:"Ø¥Ø¶Ø§ÙØ©"})]})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:l.map(i=>e.jsxs("div",{className:"bg-white p-4 rounded border flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:i.level}),e.jsxs("p",{className:"text-xs text-gray-500",children:[i.days," | ",i.time]})]}),e.jsx("button",{onClick:()=>o(i.id),className:"text-red-500",children:e.jsx(xe,{size:16})})]},i.id))})]})}function it({captains:l,captainsCollection:a}){const[t,d]=u.useState({name:"",branch:Z.SHAFA,username:"",password:"",salary:"",holidays:[],withdrawals:[]}),[n,o]=u.useState(null),i=async h=>{h.preventDefault(),n?(await a.update(n,t),o(null)):await a.add({...t,role:"captain"}),d({name:"",branch:Z.SHAFA,username:"",password:"",salary:"",holidays:[],withdrawals:[]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(_,{title:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒØ¨Ø§ØªÙ†",children:e.jsxs("form",{onSubmit:i,className:"grid gap-4 md:grid-cols-2",children:[e.jsx("input",{className:"border p-2 rounded",placeholder:"Ø§Ù„Ø§Ø³Ù…",value:t.name,onChange:h=>d({...t,name:h.target.value}),required:!0}),e.jsxs("select",{className:"border p-2 rounded",value:t.branch,onChange:h=>d({...t,branch:h.target.value}),children:[e.jsx("option",{value:Z.SHAFA,children:"Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†"}),e.jsx("option",{value:Z.ABU_NSEIR,children:"Ø£Ø¨Ùˆ Ù†ØµÙŠØ±"})]}),e.jsx("input",{className:"border p-2 rounded",placeholder:"User",value:t.username,onChange:h=>d({...t,username:h.target.value}),required:!0}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Pass",value:t.password,onChange:h=>d({...t,password:h.target.value}),required:!0}),e.jsx("input",{className:"border p-2 rounded",type:"number",placeholder:"Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ",value:t.salary,onChange:h=>d({...t,salary:h.target.value})}),e.jsx(z,{type:"submit",children:n?"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„":"Ø¥Ø¶Ø§ÙØ© ÙƒØ§Ø¨ØªÙ†"})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:l.map(h=>e.jsx(_,{className:"border-l-4 border-purple-500",children:e.jsxs("div",{className:"flex justify-between flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:h.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Ø§Ù„Ø±Ø§ØªØ¨: ",h.salary," | User: ",h.username," | Pass: ",h.password]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("button",{onClick:()=>{o(h.id),d(h)},className:"text-blue-500",children:e.jsx(Te,{size:16})}),e.jsx("button",{onClick:()=>a.remove(h.id),className:"text-red-500",children:e.jsx(xe,{size:16})})]})]})},h.id))})]})}const dt=({news:l,newsCollection:a,selectedBranch:t})=>{const[d,n]=u.useState(!1),[o,i]=u.useState({title:"",desc:"",image:"",branch:t}),[h,b]=u.useState(null),[S,f]=u.useState(!1),w=x=>{const c=x.target.files[0];if(c){b(c);const m=new FileReader;m.onloadend=()=>{i({...o,image:m.result})},m.readAsDataURL(c)}},D=async x=>{x.preventDefault(),f(!0);try{let c="";if(h){const m=os(fs,`news/${Date.now()}_${h.name}`),k=await is(m,h);c=await ds(k.ref)}await oe(te(J,"artifacts",W,"public","data","news"),{title:o.title,desc:o.desc,branch:o.branch,image:c,createdAt:new Date().toISOString()}),alert("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø± Ø¨Ù†Ø¬Ø§Ø­!"),n(!1),i({title:"",desc:"",image:"",branch:t}),b(null)}catch(c){console.error("Error adding news:",c),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø´Ø±ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙˆØ§Ù„Ø§ØªØµØ§Ù„.")}f(!1)},r=async x=>{confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø®Ø¨Ø±ØŸ")&&await De(se(J,"artifacts",W,"public","data","news",x))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm",children:[e.jsx("h2",{className:"font-bold text-lg",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª"}),e.jsxs(z,{onClick:()=>n(!0),children:[e.jsx(Ye,{size:18})," Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(x=>e.jsxs(_,{className:"relative overflow-hidden group",children:[e.jsxs("div",{className:"aspect-video w-full bg-gray-100 relative",children:[x.image?e.jsx("img",{src:x.image,alt:x.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-300",children:e.jsx(Us,{size:48})}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxs(z,{variant:"danger",onClick:()=>r(x.id),children:[e.jsx(xe,{size:18})," Ø­Ø°Ù"]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:x.title}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:x.desc}),e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded mt-2 inline-block",children:x.branch})]})]},x.id))}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:e.jsx(_,{className:"w-full max-w-lg",title:"Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block mb-1",children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø±"}),e.jsx("input",{required:!0,className:"w-full border p-2 rounded",value:o.title,onChange:x=>i({...o,title:x.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block mb-1",children:"Ø§Ù„ØªÙØ§ØµÙŠÙ„"}),e.jsx("textarea",{required:!0,className:"w-full border p-2 rounded h-24",value:o.desc,onChange:x=>i({...o,desc:x.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold block mb-1",children:"ØµÙˆØ±Ø© Ø§Ù„Ø®Ø¨Ø±"}),e.jsx("input",{type:"file",accept:"image/*",onChange:w,className:"w-full border p-2 rounded bg-gray-50"}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"ÙŠÙØ¶Ù„ ØµÙˆØ± Ø¨Ø§Ù„Ø¹Ø±Ø¶ (Landscape)"})]}),o.image&&e.jsx("img",{src:o.image,alt:"preview",className:"w-full h-32 object-cover rounded border"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(z,{variant:"ghost",onClick:()=>n(!1),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(z,{type:"submit",disabled:S,children:S?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹...":"Ù†Ø´Ø±"})]})]})})})]})},Ee=l=>{if(!l)return"expired";const a=new Date,t=new Date(l);a.setHours(0,0,0,0),t.setHours(0,0,0,0);const d=t-a,n=Math.ceil(d/(1e3*60*60*24));return n<0?"expired":n<=7?"near_end":"active"},ct=async(l,a,t,d)=>{try{await oe(te(J,"artifacts",W,"public","data","activity_logs"),{action:l,details:a,branch:t,performedBy:d.name||"Admin",role:d.role||"admin",timestamp:new Date().toISOString()})}catch(n){console.error("Log error",n)}},xt=({user:l,selectedBranch:a,studentsCollection:t,scheduleCollection:d,handleLogout:n})=>{const[o,i]=u.useState("dashboard"),[h,b]=u.useState(!0),S=B("payments"),f=B("expenses"),w=B("archive"),D=B("registrations"),r=B("captains"),x=B("products"),c=(t==null?void 0:t.data)||[],m=(S==null?void 0:S.data)||[],k=(f==null?void 0:f.data)||[],y=(D==null?void 0:D.data)||[],j=(d==null?void 0:d.data)||[],I=(r==null?void 0:r.data)||[],L=B("groups"),F=(L==null?void 0:L.data)||[],T=B("news"),O=(T==null?void 0:T.data)||[],q=B("finance_reasons"),A=(q==null?void 0:q.data)||[],H=B("activity_logs"),ae=(H==null?void 0:H.data)||[],p=u.useMemo(()=>c.filter(v=>v.branch===a),[c,a]),P=u.useMemo(()=>m.filter(v=>v.branch===a),[m,a]),V=u.useMemo(()=>k.filter(v=>v.branch===a),[k,a]),G=u.useMemo(()=>y.filter(v=>v.branch===a),[y,a]),Y=u.useMemo(()=>F.filter(v=>v.branch===a),[F,a]);u.useMemo(()=>A.filter(v=>v.branch===a),[A,a]);const X=u.useMemo(()=>ae.filter(v=>v.branch===a).sort((v,U)=>new Date(U.timestamp)-new Date(v.timestamp)).slice(0,50),[ae,a]),me=P.reduce((v,U)=>v+U.amount,0),ie=V.reduce((v,U)=>v+U.amount,0),de=me-ie,be=p.filter(v=>Ee(v.subEnd)==="active").length,g=p.filter(v=>Ee(v.subEnd)==="near_end").length,C=p.filter(v=>Ee(v.subEnd)==="expired").length,M=p.length,E=new Date,s=`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}`,N=p.reduce((v,U)=>U.attendance?v+Object.keys(U.attendance).filter(K=>K.startsWith(s)).length:v,0),$=(v,U)=>ct(v,U,a,l),R=[{id:"dashboard",icon:Se,label:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©"},{id:"news",icon:ue,label:"Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„Ø¹Ø±ÙˆØ¶"},{id:"registrations",icon:ps,label:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª",badge:G.length},{id:"receipts",icon:bs,label:"Ø§Ù„ÙˆØµÙˆÙ„Ø§Øª ÙˆØ§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"},{id:"students",icon:ze,label:"Ø§Ù„Ø·Ù„Ø§Ø¨"},{id:"attendance",icon:us,label:"Ø§Ù„Ø­Ø¶ÙˆØ±"},{id:"schedule",icon:Ie,label:"Ø§Ù„Ø¬Ø¯ÙˆÙ„"},{id:"store",icon:Be,label:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ¬Ø±",role:"admin"},{id:"finance_reports",icon:Ke,label:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ©",role:"admin"},{id:"archive",icon:fe,label:"Ø§Ù„Ø£Ø±Ø´ÙŠÙ",role:"admin"},{id:"captains",icon:xs,label:"Ø§Ù„ÙƒØ¨Ø§ØªÙ†",role:"admin"}];return e.jsxs("div",{className:"flex min-h-screen bg-gray-100 text-right font-sans",dir:"rtl",children:[e.jsxs("aside",{className:`${h?"w-64":"w-20"} bg-black text-gray-300 transition-all duration-300 flex flex-col sticky top-0 h-screen shadow-2xl z-40`,children:[e.jsxs("div",{className:"p-6 flex justify-between border-b border-gray-800",children:[h&&e.jsx("h2",{className:"font-black text-yellow-500 text-xl",children:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsx("button",{onClick:()=>b(!h),children:e.jsx(Le,{size:20})})]}),e.jsxs("div",{className:"p-4 border-b border-gray-800",children:[e.jsx("p",{className:"text-white font-bold",children:l.name}),e.jsx("p",{className:"text-xs text-gray-500",children:l.role==="admin"?"Ù…Ø¯ÙŠØ± Ø¹Ø§Ù…":"ÙƒØ§Ø¨ØªÙ†"})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-6 space-y-2 px-3 custom-scrollbar",children:R.filter(v=>!v.role||v.role===l.role).map(v=>e.jsxs("button",{onClick:()=>{i(v.id),b(!1)},className:`w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all ${o===v.id?"bg-yellow-500 text-black font-bold":"hover:bg-gray-800"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(v.icon,{size:20}),v.badge>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] w-4 h-4 rounded-full flex items-center justify-center",children:v.badge})]}),h&&e.jsx("span",{children:v.label})]},v.id))}),e.jsx("div",{className:"p-4 space-y-2 border-t border-gray-800",children:e.jsxs("button",{onClick:n,className:`w-full flex items-center gap-4 px-4 py-3 text-red-400 hover:bg-gray-900 rounded transition-colors ${!h&&"justify-center"}`,title:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",children:[e.jsx(ms,{size:20})," ",h&&"Ø®Ø±ÙˆØ¬"]})})]}),e.jsxs("main",{className:"flex-1 p-4 md:p-8 w-full overflow-x-hidden",children:[e.jsxs("div",{className:"md:hidden mb-4 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>b(!0),className:"p-2 bg-white rounded shadow",children:e.jsx(Le,{})}),e.jsx("h2",{className:"font-bold text-gray-800",children:"Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹"})]}),o==="dashboard"&&e.jsx(Bs,{user:l,selectedBranch:a,branchStudents:p,netProfit:de,totalAttendance:N,expiredCount:C,activeStudentsCount:be,nearEndCount:g,totalStudents:M,branchRegistrations:G,branchPayments:P,activityLogs:X}),o==="receipts"&&e.jsx(st,{students:p,productsCollection:x,selectedBranch:a,logActivity:$}),o==="store"&&l.role==="admin"&&e.jsx(tt,{productsCollection:x,selectedBranch:a}),o==="finance_reports"&&l.role==="admin"&&e.jsx(et,{selectedBranch:a,logActivity:$}),o==="students"&&e.jsx(Qs,{students:p,groups:Y,studentsCollection:t,archiveCollection:w,selectedBranch:a,logActivity:$}),o==="attendance"&&e.jsx(lt,{students:p,groups:Y,groupsCollection:L,studentsCollection:t,selectedBranch:a}),o==="registrations"&&e.jsx(nt,{registrations:G,students:c,registrationsCollection:D,studentsCollection:t,selectedBranch:a,logActivity:$}),o==="schedule"&&e.jsx(ot,{schedule:j,scheduleCollection:d}),o==="archive"&&e.jsx(Xs,{archiveCollection:w,studentsCollection:t,payments:m,logActivity:$}),o==="captains"&&e.jsx(it,{captains:I,captainsCollection:r}),o==="news"&&e.jsx(dt,{news:O,newsCollection:T,selectedBranch:a})]})]})},Fe="brave-academy-live-data";function mt(){const[l,a]=u.useState(()=>{const x=localStorage.getItem("braveUser");return x?JSON.parse(x):null}),[t,d]=u.useState(()=>typeof window<"u"&&localStorage.getItem("braveUser")?JSON.parse(localStorage.getItem("braveUser")).role==="student"?"student_portal":"admin_dashboard":"home"),[n,o]=u.useState(()=>l&&l.branch?l.branch:Z.SHAFA),[i,h]=u.useState(!0),b=B("students"),S=B("schedule"),f=B("news"),w=x=>{d(x),window.history.pushState({view:x},"","")};u.useEffect(()=>{window.history.replaceState({view:t},"","");const x=c=>{c.state&&c.state.view?d(c.state.view):d("home")};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[]);const D=async(x,c)=>{try{const m=te(J,"artifacts",Fe,"public","data","students"),k=we(m,Ne("username","==",x),Ne("password","==",c)),y=await Qe(k);if(!y.empty){const F=y.docs[0],T=F.data(),O={role:"student",familyId:T.familyId,name:T.familyName||T.name,id:F.id};a(O),localStorage.setItem("braveUser",JSON.stringify(O)),w("student_portal");return}const j=te(J,"artifacts",Fe,"public","data","captains"),I=we(j,Ne("username","==",x),Ne("password","==",c)),L=await Qe(I);if(!L.empty){const F=L.docs[0],T=F.data(),O={role:"captain",...T,id:F.id};a(O),localStorage.setItem("braveUser",JSON.stringify(O)),o(T.branch),w("admin_dashboard");return}if(x.includes("@")||x==="admin1"){let F=x;x==="admin1"&&(F="admin@brave.com"),await vs(Me,F,c);return}alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø®Ø§Ø·Ø¦Ø©! ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.")}catch(m){console.error("Login Error:",m),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.")}};u.useEffect(()=>{const x=Ns(Me,async c=>{if(c){const m=c.email;let k={email:m};m==="admin@brave.com"?k={...k,role:"admin",isSuper:!0,name:"Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…",branch:Z.SHAFA}:m==="shafa@brave.com"?k={...k,role:"admin",isSuper:!1,name:"Ù…Ø¯ÙŠØ± Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†",branch:Z.SHAFA}:m==="abunseir@brave.com"&&(k={...k,role:"admin",isSuper:!1,name:"Ù…Ø¯ÙŠØ± Ø£Ø¨Ùˆ Ù†ØµÙŠØ±",branch:Z.ABU_NSEIR});try{const y=se(J,"artifacts",Fe,"public","data","admin_profiles",m),j=await ns(y);j.exists()&&j.data().name&&(k.name=j.data().name)}catch{console.log("Profile fetch warning")}a(k),o(k.branch),localStorage.setItem("braveUser",JSON.stringify(k)),d("admin_dashboard")}else localStorage.getItem("braveUser")||a(null);h(!1)});return()=>x()},[]);const r=async()=>{await ws(Me),localStorage.removeItem("braveUser"),a(null),w("home")};return i&&l?e.jsx("div",{className:"flex h-screen items-center justify-center font-bold text-xl text-yellow-600 bg-gray-50",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."}):e.jsxs(e.Fragment,{children:[t==="home"&&e.jsx(Hs,{setView:w,schedule:S.data}),t==="login"&&e.jsx(Js,{setView:w,handleLogin:D}),t==="student_portal"&&l&&e.jsx(Ws,{user:l,students:b.data,schedule:S.data,news:f.data,handleLogout:r}),t==="admin_dashboard"&&l&&e.jsx(xt,{user:l,selectedBranch:n,onSwitchBranch:l.isSuper?o:null,studentsCollection:b,scheduleCollection:S,handleLogout:r})]})}js(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(mt,{})}));
