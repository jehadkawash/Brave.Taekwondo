import{r as o,j as e,R as Ue}from"./react-CFCE4xZu.js";import{c as qe}from"./react-dom-CUeQ5oZw.js";import{g as Be,s as Ge,a as Je}from"./firebase-Bnagrt6-.js";import{w as Ve,x as Ye,y as xe,z as We,A as Ke,B as Qe,D as me,G as Xe,H as Ze}from"./@firebase-Brwzt7Nd.js";import{X as ye,M as we,a as he,P as ue,C as K,b as Se,A as ke,c as ne,L as Ce,d as De,U as es,e as be,D as ss,f as pe,g as ts,h as je,T as Y,i as as,j as ls,k as ge,l as ns,F as rs,m as ds,S as is}from"./lucide-react-BnBSCsqt.js";import"./scheduler-DYLXRpC5.js";import"./idb-BXWtuYvb.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))b(a);new MutationObserver(a=>{for(const h of a)if(h.type==="childList")for(const y of h.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&b(y)}).observe(document,{childList:!0,subtree:!0});function n(a){const h={};return a.integrity&&(h.integrity=a.integrity),a.referrerPolicy&&(h.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?h.credentials="include":a.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function b(a){if(a.ep)return;a.ep=!0;const h=n(a);fetch(a.href,h)}})();const cs={apiKey:"AIzaSyCKMrH2E_GP_MYZJrhF4LbxC1LmtVGx3Co",authDomain:"brave-academy.firebaseapp.com",projectId:"brave-academy",storageBucket:"brave-academy.firebasestorage.app",messagingSenderId:"862804404676",appId:"1:862804404676:web:871e3bb0796c354f1f5c91"},Ie=Ve(cs),fe=Be(Ie),Z=Ye(Ie),ee="brave-academy-live-data",B={LOGO:"/logo.jpg",HERO_BG:"/hero.jpg",BRANCH_SHAFA:"/shafa.jpg",BRANCH_ABU_NSEIR:"/abunseir.jpg"},Oe=[{id:1,days:"Ø§Ù„Ø³Ø¨Øª / Ø§Ù„Ø§Ø«Ù†ÙŠÙ† / Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡",time:"4:00 Ù… - 5:00 Ù…",level:"Ù…Ø¨ØªØ¯Ø¦ÙŠÙ† (Ø£Ø¨ÙŠØ¶ - Ø£ØµÙØ±)",branch:"Ù…Ø´ØªØ±Ùƒ"},{id:2,days:"Ø§Ù„Ø³Ø¨Øª / Ø§Ù„Ø§Ø«Ù†ÙŠÙ† / Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡",time:"5:00 Ù… - 6:30 Ù…",level:"Ø£Ø­Ø²Ù…Ø© Ù…Ù„ÙˆÙ†Ø© (Ø£Ø®Ø¶Ø± - Ø£Ø²Ø±Ù‚)",branch:"Ù…Ø´ØªØ±Ùƒ"},{id:3,days:"Ø§Ù„Ø£Ø­Ø¯ / Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡ / Ø§Ù„Ø®Ù…ÙŠØ³",time:"5:00 Ù… - 6:30 Ù…",level:"Ù…ØªÙ‚Ø¯Ù… (Ø£Ø­Ù…Ø± - Ø£Ø³ÙˆØ¯)",branch:"Ù…Ø´ØªØ±Ùƒ"},{id:4,days:"Ø§Ù„Ø¬Ù…Ø¹Ø©",time:"9:00 Øµ - 11:00 Øµ",level:"ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ù†ØªØ®Ø¨Ø§Øª",branch:"Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ"}],W=c=>{const[i,n]=o.useState([]),[b,a]=o.useState(!0);return o.useEffect(()=>{const u=xe(Z,"artifacts",ee,"public","data",c),M=We(u),S=Ke(M,$=>{const L=$.docs.map(E=>({...E.data(),id:E.id}));n(L),a(!1)},$=>{console.error(`Error fetching ${c}:`,$),a(!1)});return()=>S()},[c]),{data:i,loading:b,add:async u=>{try{await Ze(xe(Z,"artifacts",ee,"public","data",c),u)}catch(M){console.error(M),alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª")}},update:async(u,M)=>{try{await Xe(me(Z,"artifacts",ee,"public","data",c,u),M)}catch(S){console.error(S)}},remove:async u=>{try{await Qe(me(Z,"artifacts",ee,"public","data",c,u))}catch(M){console.error(M)}}}},Ne={SHAFA:"Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†",ABU_NSEIR:"Ø£Ø¨Ùˆ Ù†ØµÙŠØ±"},J=["Ø£Ø¨ÙŠØ¶","Ø£ØµÙØ±","Ø£Ø®Ø¶Ø± 1","Ø£Ø®Ø¶Ø± 2","Ø£Ø²Ø±Ù‚ 1","Ø£Ø²Ø±Ù‚ 2","Ø¨Ù†ÙŠ 1","Ø¨Ù†ÙŠ 2","Ø£Ø­Ù…Ø± 1","Ø£Ø­Ù…Ø± 2","Ø£Ø³ÙˆØ¯"],se=c=>{if(!c)return"expired";const i=new Date,n=new Date(c);i.setHours(0,0,0,0),n.setHours(0,0,0,0);const b=n-i,a=Math.ceil(b/(1e3*60*60*24));return a<0?"expired":a<=7?"near_end":"active"},os=()=>{const i=`student${Math.floor(1e3+Math.random()*9e3)}`,n="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789";let b="";for(let a=0;a<8;a++)b+=n.charAt(Math.floor(Math.random()*n.length));return{username:i,password:b}},xs=(c,i)=>{const n=window.open("","PRINT","height=600,width=800"),b=window.location.origin+B.LOGO;return n.document.write(`
    <html>
      <head>
        <title>Ø³Ù†Ø¯ Ù‚Ø¨Ø¶ - ${c.id.slice(0,8)}</title>
        <style>
          body { font-family: 'Courier New', sans-serif; direction: rtl; padding: 20px; text-align: center; border: 2px solid #000; max-width: 600px; margin: 20px auto; position: relative; overflow: hidden; }
          .header { margin-bottom: 20px; border-bottom: 2px dashed #000; padding-bottom: 10px; position: relative; z-index: 2; }
          .logo { width: 80px; height: auto; margin-bottom: 10px; }
          .title { font-size: 24px; margin: 10px 0; background: #eee; display: inline-block; padding: 5px 20px; border-radius: 5px; position: relative; z-index: 2; }
          .content { text-align: right; margin: 20px 0; font-size: 18px; line-height: 2; position: relative; z-index: 2; }
          .amount { font-weight: bold; font-size: 22px; }
          .footer { margin-top: 40px; border-top: 2px dashed #000; padding-top: 10px; font-size: 12px; position: relative; z-index: 2; }
          .watermark {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            opacity: 0.1; width: 60%; z-index: 1; pointer-events: none;
          }
        </style>
      </head>
      <body>
        <img src="${b}" class="watermark" />
        <div class="header">
          <img src="${b}" class="logo" alt="Logo" />
          <div>Brave Taekwondo Academy</div>
          <div>ÙØ±Ø¹: ${i}</div>
        </div>
        <div class="title">Ø³Ù†Ø¯ Ù‚Ø¨Ø¶</div>
        <div class="content">
          <div><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${c.date}</div>
          <div><strong>Ø±Ù‚Ù… Ø§Ù„Ø³Ù†Ø¯:</strong> #${c.id.slice(0,8)}</div>
          <div><strong>Ø§Ø³ØªÙ„Ù…Ù†Ø§ Ù…Ù† Ø§Ù„Ø³ÙŠØ¯/Ø©:</strong> ${c.name}</div>
          <div><strong>Ù…Ø¨Ù„Øº ÙˆÙ‚Ø¯Ø±Ù‡:</strong> <span class="amount">${c.amount} JOD</span></div>
          <div><strong>ÙˆØ°Ù„Ùƒ Ø¹Ù†:</strong> ${c.reason} ${c.details?"(${payment.details})":""}</div>
        </div>
        <div class="footer"><p>ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ„Ù…: __________________</p><p>Ø´ÙƒØ±Ø§Ù‹ Ù„Ø«Ù‚ØªÙƒÙ… Ø¨Ù†Ø§ | Ù‡Ø§ØªÙ: 0791234567</p></div>
      </body>
    </html>
  `),n.document.close(),n.focus(),setTimeout(()=>{n.print(),n.close()},500),!0},ms=c=>{if(!c)return;let i=c.replace(/\D/g,"");i.startsWith("0")&&(i=i.substring(1));const n=`https://wa.me/962${i}`;window.open(n,"_blank")},ve=c=>{window.open(c,"_blank")},q=({students:c,onSelect:i,placeholder:n="Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨...",showAllOption:b=!1,onClear:a})=>{const[h,y]=o.useState(""),[z,u]=o.useState(!1),M=o.useMemo(()=>h?c.filter(S=>S.name.includes(h)):c,[c,h]);return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:"w-full border p-2 pr-8 rounded focus:ring-2 focus:ring-yellow-500 outline-none",placeholder:n,value:h,onChange:S=>{y(S.target.value),u(!0),S.target.value===""&&a&&a()},onFocus:()=>u(!0),onBlur:()=>setTimeout(()=>u(!1),200)}),e.jsx(is,{className:"absolute left-2 top-2.5 text-gray-400",size:16}),h&&e.jsx("button",{onClick:()=>{y(""),a&&a()},className:"absolute left-8 top-2.5 text-gray-400 hover:text-red-500",children:e.jsx(ye,{size:16})})]}),z&&e.jsxs("div",{className:"absolute z-50 w-full bg-white border rounded shadow-lg max-h-48 overflow-y-auto mt-1",children:[b&&e.jsx("div",{className:"p-2 hover:bg-gray-100 cursor-pointer text-sm border-b font-bold text-blue-600",onClick:()=>{y(""),a&&a(),u(!1)},children:"Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„"}),M.length>0?M.map(S=>e.jsxs("div",{className:"p-2 hover:bg-yellow-50 cursor-pointer text-sm border-b last:border-0 flex justify-between items-center",onClick:()=>{y(S.name),i(S),u(!1)},children:[e.jsx("span",{className:"font-bold",children:S.name}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:S.belt})]},S.id)):e.jsx("div",{className:"p-2 text-gray-500 text-sm text-center",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬"})]})]})},D=({children:c,onClick:i,variant:n="primary",className:b="",type:a="button"})=>{const h={primary:"bg-yellow-500 text-black hover:bg-yellow-400 border border-yellow-600 font-bold",secondary:"bg-gray-800 text-white hover:bg-gray-700",danger:"bg-red-600 text-white hover:bg-red-700",outline:"border-2 border-yellow-500 text-yellow-600 hover:bg-yellow-50",ghost:"bg-transparent text-gray-600 hover:bg-gray-100"};return e.jsx("button",{type:a,onClick:i,className:`px-4 py-2 rounded-lg transition duration-200 flex items-center justify-center gap-2 shadow-sm ${h[n]} ${b}`,children:c})},w=({children:c,className:i="",title:n,action:b})=>e.jsxs("div",{className:`bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden ${i}`,children:[(n||b)&&e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[n&&e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:n}),b&&e.jsx("div",{children:b})]}),e.jsx("div",{className:"p-6",children:c})]}),te=({status:c})=>{const i={active:{text:"ÙØ¹Ø§Ù„",style:"bg-green-100 text-green-800 border-green-200"},near_end:{text:"Ù‚Ø§Ø±Ø¨ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡",style:"bg-yellow-100 text-yellow-800 border-yellow-200"},expired:{text:"Ù…Ù†ØªÙ‡ÙŠ",style:"bg-red-100 text-red-800 border-red-200"}},n=i[c]||i.active;return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${n.style}`,children:n.text})},hs=({setView:c,schedule:i})=>{const[n,b]=o.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans text-right",dir:"rtl",children:[e.jsxs("header",{className:"bg-black text-yellow-500 shadow-lg sticky top-0 z-50",children:[e.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>window.scrollTo(0,0),children:[e.jsx("img",{src:B.LOGO,alt:"Logo",className:"w-12 h-12 rounded-full bg-white p-1 object-contain"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-extrabold leading-none",children:"Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹"}),e.jsx("p",{className:"text-[10px] text-gray-400 tracking-wider uppercase",children:"Brave Taekwondo"})]})]}),e.jsx("nav",{className:"hidden md:flex gap-8 font-medium text-sm",children:["Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©","Ù…Ù† Ù†Ø­Ù†","Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ","Ø§Ù„ÙØ±ÙˆØ¹"].map(a=>e.jsx("button",{className:"hover:text-white transition-colors duration-300",onClick:()=>{var h,y;a==="Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ"&&((h=document.getElementById("schedule"))==null||h.scrollIntoView({behavior:"smooth"})),a==="Ø§Ù„ÙØ±ÙˆØ¹"&&((y=document.getElementById("branches"))==null||y.scrollIntoView({behavior:"smooth"})),a==="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"&&window.scrollTo(0,0)},children:a},a))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{onClick:()=>c("login"),className:"px-4 py-2 text-sm hidden md:block",children:"Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡"}),e.jsx("button",{className:"md:hidden p-2 text-yellow-500",onClick:()=>b(!n),children:n?e.jsx(ye,{size:24}):e.jsx(we,{size:24})})]})]}),n&&e.jsxs("div",{className:"md:hidden bg-gray-900 border-t border-gray-800 p-4 flex flex-col gap-4",children:[["Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©","Ù…Ù† Ù†Ø­Ù†","Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ","Ø§Ù„ÙØ±ÙˆØ¹"].map(a=>e.jsx("button",{className:"text-right py-2 hover:text-white border-b border-gray-800",onClick:()=>{var h,y;b(!1),a==="Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ"&&((h=document.getElementById("schedule"))==null||h.scrollIntoView({behavior:"smooth"})),a==="Ø§Ù„ÙØ±ÙˆØ¹"&&((y=document.getElementById("branches"))==null||y.scrollIntoView({behavior:"smooth"}))},children:a},a)),e.jsx(D,{onClick:()=>{b(!1),c("login")},className:"w-full py-3",children:"Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡"})]})]}),e.jsxs("div",{className:"relative bg-gray-900 text-white h-[600px] flex items-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 z-10"}),e.jsx("img",{src:B.HERO_BG,alt:"Hero",className:"absolute inset-0 w-full h-full object-cover"}),e.jsxs("div",{className:"container mx-auto px-6 relative z-20 flex flex-col items-start",children:[e.jsx("span",{className:"bg-yellow-500 text-black font-bold px-3 py-1 rounded mb-4 text-sm",children:"Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…ÙØªÙˆØ­ Ø§Ù„Ø¢Ù†"}),e.jsxs("h2",{className:"text-5xl md:text-7xl font-black mb-6 leading-tight",children:["Ø³Ø¬Ù„ Ø§Ù„Ø§Ù† ..",e.jsx("br",{}),e.jsx("span",{className:"text-yellow-500",children:"ÙˆØ§Ù†Ø¶Ù… Ù„Ø¹Ø§Ø¦Ù„ØªÙ†Ø§"})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx(D,{onClick:()=>c("login"),className:"px-8 py-4 text-lg",children:"Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†"})})]})]}),e.jsx("section",{id:"branches",className:"py-20 bg-gray-100",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"ÙØ±ÙˆØ¹Ù†Ø§"}),e.jsx("p",{className:"text-gray-500",children:"Ø§Ø®ØªØ± Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø£Ù‚Ø±Ø¨ Ø¥Ù„ÙŠÙƒ ÙˆØ§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition group",children:[e.jsxs("div",{className:"h-64 bg-gray-800 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 group-hover:bg-black/20 transition z-10"}),e.jsx("img",{src:B.BRANCH_SHAFA,alt:"Shafa Badran",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:"absolute bottom-4 right-4 text-white z-20",children:e.jsx("h3",{className:"text-2xl font-bold",children:"ÙØ±Ø¹ Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù†"})})]}),e.jsxs("div",{className:"p-8 space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(he,{className:"text-yellow-600 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:"Ø´ÙØ§ Ø¨Ø¯Ø±Ø§Ù† - Ø´Ø§Ø±Ø¹ Ø±ÙØ¹Øª Ø´Ù…ÙˆØ·"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Ø¨Ø¬Ø§Ù†Ø¨ Ù…Ø´Ø§ØªÙ„ Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø£Ø±Ø¯Ù†"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ue,{className:"text-yellow-600"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("a",{href:"tel:0795629606",className:"font-bold text-gray-900 hover:text-yellow-600 transition",dir:"ltr",children:"07 9562 9606"})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(K,{className:"text-yellow-600"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"ÙŠÙˆÙ…ÙŠØ§Ù‹ Ù…Ù† 3:00 Ù… - 9:00 Ù… (Ù…Ø§ Ø¹Ø¯Ø§ Ø§Ù„Ø¬Ù…Ø¹Ø©)"})]}),e.jsx(D,{variant:"outline",className:"w-full mt-4",onClick:()=>ve("https://share.google/PGRNQACVSiOhXkmbj"),children:"Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition group",children:[e.jsxs("div",{className:"h-64 bg-gray-800 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 group-hover:bg-black/20 transition z-10"}),e.jsx("img",{src:B.BRANCH_ABU_NSEIR,alt:"Abu Nseir",className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:"absolute bottom-4 right-4 text-white z-20",children:e.jsx("h3",{className:"text-2xl font-bold",children:"ÙØ±Ø¹ Ø£Ø¨Ùˆ Ù†ØµÙŠØ±"})})]}),e.jsxs("div",{className:"p-8 space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(he,{className:"text-yellow-600 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:"Ø£Ø¨Ùˆ Ù†ØµÙŠØ± - Ø¯ÙˆØ§Ø± Ø§Ù„Ø¨Ø­Ø±ÙŠØ©"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Ù…Ø¬Ù…Ø¹ Ø§Ù„ÙØ±Ø§"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ue,{className:"text-yellow-600"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("a",{href:"tel:0790368603",className:"font-bold text-gray-900 hover:text-yellow-600 transition",dir:"ltr",children:"07 9036 8603"})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(K,{className:"text-yellow-600"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"ÙŠÙˆÙ…ÙŠØ§Ù‹ Ù…Ù† 3:00 Ù… - 9:00 Ù… (Ù…Ø§ Ø¹Ø¯Ø§ Ø§Ù„Ø¬Ù…Ø¹Ø©)"})]}),e.jsx(D,{variant:"outline",className:"w-full mt-4",onClick:()=>ve("https://share.google/6rSHFxa03RG6n9WH0"),children:"Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©"})]})]})]})]})}),e.jsxs("section",{id:"schedule",className:"py-20 container mx-auto px-6",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(i&&i.length>0?i:Oe).map(a=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border-t-4 border-yellow-500",children:[e.jsx("div",{className:"bg-gray-50 w-12 h-12 rounded-full flex items-center justify-center mb-4",children:e.jsx(K,{className:"text-gray-800",size:24})}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:a.level}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:a.branch}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(Se,{size:16,className:"text-yellow-500"}),e.jsx("span",{children:a.days})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-800",children:[e.jsx(ke,{size:16,className:"text-yellow-500"}),e.jsx("span",{children:a.time})]})]})]},a.id))})]}),e.jsx("footer",{className:"bg-black text-white pt-16 pb-8 border-t-4 border-yellow-500",children:e.jsx("div",{className:"container mx-auto px-6 text-center text-sm text-gray-500",children:e.jsx("p",{children:"Â© 2026 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø¬Ø§Ø¹ Ù„Ù„ØªØ§ÙŠÙƒÙˆÙ†Ø¯Ùˆ."})})})]})},us=({setView:c,handleLogin:i,loginError:n})=>{const[b,a]=o.useState(""),[h,y]=o.useState("");return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4 relative overflow-hidden",dir:"rtl",children:e.jsxs(w,{className:"w-full max-w-md relative z-10 border-t-4 border-yellow-500",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg p-2",children:e.jsx("img",{src:B.LOGO,alt:"Logo",className:"w-full h-full object-contain"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"})]}),n&&e.jsx("div",{className:"bg-red-100 text-red-700 p-2 rounded mb-4 text-sm text-center",children:n}),e.jsxs("form",{className:"space-y-5",onSubmit:z=>{z.preventDefault(),i(b,h)},children:[e.jsx("input",{className:"w-full border p-3 rounded-lg",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",value:b,onChange:z=>a(z.target.value)}),e.jsx("input",{className:"w-full border p-3 rounded-lg",type:"password",placeholder:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",value:h,onChange:z=>y(z.target.value)}),e.jsx(D,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-yellow-500/30",children:"Ø¯Ø®ÙˆÙ„"})]}),e.jsx("div",{className:"mt-8 text-center border-t pt-4",children:e.jsxs("button",{onClick:()=>c("home"),className:"text-gray-500 hover:text-gray-800 text-sm font-medium flex items-center justify-center gap-2 w-full",children:[e.jsx(ne,{size:16})," Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"]})})]})})},bs=({user:c,students:i,schedule:n,payments:b,handleLogout:a})=>{const[h,y]=o.useState(new Date),z=x=>{const T=new Date(h);T.setMonth(T.getMonth()+x),y(T)},u=h.getFullYear(),M=h.getMonth(),S=new Date(u,M+1,0).getDate(),$=["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"],L=i.filter(x=>x.familyId===c.familyId),E=b.filter(x=>L.some(T=>T.id===x.studentId));return e.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans",dir:"rtl",children:[e.jsx("header",{className:"bg-black text-yellow-500 p-4 shadow-lg sticky top-0 z-40",children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:B.LOGO,alt:"Logo",className:"w-10 h-10 bg-white rounded-full p-1"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-bold text-lg",children:["Ù…Ø±Ø­Ø¨Ø§Ù‹ ",c.name]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©"})]})]}),e.jsxs(D,{variant:"secondary",onClick:a,className:"text-sm",children:[e.jsx(Ce,{size:16})," Ø®Ø±ÙˆØ¬"]})]})}),e.jsxs("div",{className:"container mx-auto p-4 md:p-8 max-w-5xl space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 text-white p-6 rounded-2xl shadow-lg",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(K,{className:"text-yellow-500"})," Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø­ØµØµ"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n&&n.length>0?n.map(x=>e.jsxs("div",{className:"bg-white/10 p-4 rounded-lg",children:[e.jsx("p",{className:"font-bold text-yellow-400 mb-1",children:x.level}),e.jsxs("p",{className:"text-sm",children:[x.days," | ",x.time]})]},x.id)):e.jsx("p",{className:"text-gray-400",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø¯ÙˆÙ„ Ø­ØµØµ Ù…Ø¹Ù„Ù† Ø­Ø§Ù„ÙŠØ§Ù‹"})})]}),e.jsx(w,{title:"ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø§Ù„Ø¯ÙØ¹Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)",children:E.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø¨ÙŠØ§Ù†"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨Ù„Øº"})]})}),e.jsx("tbody",{children:E.map(x=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-3",children:x.date}),e.jsx("td",{className:"p-3 font-bold",children:x.name}),e.jsxs("td",{className:"p-3",children:[x.reason,x.details&&e.jsxs("span",{className:"block text-xs text-gray-400 mt-1",children:["(",x.details,")"]})]}),e.jsxs("td",{className:"p-3 text-green-600 font-bold",children:[x.amount," JOD"]})]},x.id))})]})}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©"})}),L.map(x=>e.jsxs(w,{className:"mb-8 border-t-4 border-yellow-500",title:x.name,children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø§Ù„Ø­Ø²Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("p",{className:"font-bold text-xl",children:x.belt})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx(te,{status:se(x.subEnd)}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["ÙŠÙ†ØªÙ‡ÙŠ: ",x.subEnd]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ­Ù‚"}),e.jsxs("p",{className:`font-bold text-xl ${x.balance>0?"text-red-600":"text-green-600"}`,children:[x.balance," JOD"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Ø§Ù„ÙØ±Ø¹"}),e.jsx("p",{className:"font-bold text-lg",children:x.branch})]})]}),x.notes&&x.notes.length>0&&e.jsxs("div",{className:"mb-6 bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsx("h4",{className:"font-bold text-blue-800 text-sm mb-2",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-blue-900",children:x.notes.map(T=>e.jsxs("li",{children:[T.text," (",T.date,")"]},T.id))})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-bold text-gray-700",children:["Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±: ",$[M]," ",u]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{variant:"ghost",onClick:()=>z(-1),children:e.jsx(ne,{size:16})}),e.jsx(D,{variant:"ghost",onClick:()=>z(1),children:e.jsx(De,{size:16})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:[...Array(S)].map((T,Q)=>{const k=Q+1,V=`${u}-${String(M+1).padStart(2,"0")}-${String(k).padStart(2,"0")}`,X=x.attendance&&x.attendance[V];return e.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-xs font-bold border ${X?"bg-green-500 text-white":"bg-gray-100 text-gray-400"}`,children:k},k)})})]})]},x.id))]})]})},ps=({user:c,selectedBranch:i,studentsCollection:n,paymentsCollection:b,expensesCollection:a,scheduleCollection:h,archiveCollection:y,handleLogout:z})=>{const[u,M]=o.useState("dashboard"),[S,$]=o.useState(!0),L=n.data,E=b.data,x=a.data,T=h.data,Q=y.data,k=o.useMemo(()=>L.filter(l=>l.branch===i),[L,i]),V=o.useMemo(()=>E.filter(l=>l.branch===i),[E,i]),X=o.useMemo(()=>x.filter(l=>l.branch===i),[x,i]),re=V.reduce((l,v)=>l+v.amount,0),de=X.reduce((l,v)=>l+v.amount,0),ie=re-de,Ae=()=>e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(w,{className:"bg-gray-800 text-white border-none",children:[e.jsx("h3",{className:"text-gray-400 text-sm mb-1",children:"Ø§Ù„Ø·Ù„Ø§Ø¨"}),e.jsx("p",{className:"text-4xl font-bold",children:k.length})]}),e.jsxs(w,{className:"bg-blue-600 text-white border-none",children:[e.jsx("h3",{className:"text-blue-200 text-sm mb-1",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª"}),e.jsx("p",{className:"text-4xl font-bold",children:re})]}),e.jsxs(w,{className:"bg-red-600 text-white border-none",children:[e.jsx("h3",{className:"text-red-200 text-sm mb-1",children:"Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ"}),e.jsx("p",{className:"text-4xl font-bold",children:de})]}),e.jsxs(w,{className:`border-none text-white ${ie>=0?"bg-green-600":"bg-orange-600"}`,children:[e.jsx("h3",{className:"text-white/70 text-sm mb-1",children:"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­"}),e.jsx("p",{className:"text-4xl font-bold",children:ie})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(w,{title:"Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ Ø§Ù„Ø­Ø§Ù„ÙŠ",children:e.jsx("div",{className:"space-y-3",children:T.map(l=>e.jsxs("div",{className:"flex justify-between p-3 bg-gray-50 rounded border hover:border-yellow-500 transition",children:[e.jsx("span",{className:"font-bold text-gray-700",children:l.level}),e.jsx("span",{className:"text-sm text-gray-500",children:l.time})]},l.id))})}),e.jsx(w,{title:"Ø¢Ø®Ø± Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†",children:e.jsx("div",{className:"space-y-2",children:k.slice(-3).reverse().map(l=>e.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 text-yellow-800 rounded-full flex items-center justify-center font-bold",children:l.name.charAt(0)}),e.jsx("span",{className:"font-medium",children:l.name})]}),e.jsx(te,{status:se(l.subEnd)})]},l.id))})})]})]}),ze=()=>{const[l,v]=o.useState(""),[m,g]=o.useState(!1),[r,I]=o.useState(null),[p,A]=o.useState(null),[j,O]=o.useState({name:"",phone:"",belt:"Ø£Ø¨ÙŠØ¶",joinDate:new Date().toISOString().split("T")[0],dob:"",address:"",balance:0}),[s,f]=o.useState("new"),F=[...new Map(L.map(t=>[t.familyId,t.familyName])).entries()],d=k.filter(t=>t.name.includes(l)),P=async t=>{var oe;t.preventDefault();const{username:R,password:G}=os();let U,ae;s==="new"?(U=Math.floor(Date.now()/1e3),ae=`Ø¹Ø§Ø¦Ù„Ø© ${j.name.split(" ").slice(-1)[0]}`):(U=parseInt(s),ae=((oe=L.find(He=>He.familyId===U))==null?void 0:oe.familyName)||"Ø¹Ø§Ø¦Ù„Ø©");const Re=new Date(j.joinDate||new Date),le=new Date(Re);le.setMonth(le.getMonth()+1);const Pe=le.toISOString().split("T")[0],ce={branch:i,status:"active",subEnd:Pe,notes:[],internalNotes:[],attendance:{},username:R,password:G,familyId:U,familyName:ae,customOrder:Date.now(),...j};await n.add(ce),A({name:ce.name,username:R,password:G}),g(!1),O({name:"",phone:"",belt:"Ø£Ø¨ÙŠØ¶",joinDate:new Date().toISOString().split("T")[0],dob:"",address:"",balance:0}),f("new")},N=t=>{I(t),O({name:t.name,phone:t.phone,belt:t.belt,joinDate:t.joinDate,dob:t.dob,address:t.address||"",subEnd:t.subEnd,balance:t.balance}),f(t.familyId),g(!0)},C=async t=>{t.preventDefault(),await n.update(r.id,j),g(!1),I(null)},_=async t=>{const R=J.indexOf(t.belt);R<J.length-1&&await n.update(t.id,{belt:J[R+1]})},H=async t=>{confirm("Ø£Ø±Ø´ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨ØŸ")&&(await y.add({...t,archiveDate:new Date().toLocaleDateString()}),await n.remove(t.id))};return e.jsxs("div",{className:"space-y-6",children:[p&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[60] p-4",children:e.jsxs(w,{className:"w-full max-w-md bg-green-50 border-green-500 border-2 text-center p-8",title:"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­",children:[e.jsxs("p",{className:"mb-4",children:["Ø§Ù„Ø·Ø§Ù„Ø¨: ",e.jsx("strong",{children:p.name})]}),e.jsxs("div",{className:"bg-white p-4 border rounded mb-4",children:[e.jsxs("p",{children:["User: ",p.username]}),e.jsxs("p",{children:["Pass: ",p.password]})]}),e.jsx(D,{onClick:()=>A(null),className:"w-full",children:"Ø¥ØºÙ„Ø§Ù‚"})]})}),e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm",children:[e.jsx("div",{className:"w-1/2",children:e.jsx("input",{className:"border p-2 rounded w-full",placeholder:"Ø¨Ø­Ø«...",value:l,onChange:t=>v(t.target.value)})}),e.jsxs(D,{onClick:()=>{I(null),g(!0)},children:[e.jsx(as,{size:18})," Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯"]})]}),e.jsx(w,{className:"overflow-x-auto border-none shadow-md rounded-xl",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-4",children:"Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„"}),e.jsx("th",{className:"p-4",children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("th",{className:"p-4",children:"Ø§Ù„Ø­Ø²Ø§Ù…"}),e.jsx("th",{className:"p-4",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{className:"p-4",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx("tbody",{className:"divide-y",children:d.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-4 font-bold",children:t.name}),e.jsx("td",{className:"p-4 text-xs font-mono bg-gray-50 rounded p-2",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{children:["U: ",e.jsx("span",{className:"font-bold select-all",children:t.username})]}),e.jsxs("span",{children:["P: ",e.jsx("span",{className:"font-bold text-red-500 select-all",children:t.password})]})]})}),e.jsxs("td",{className:"p-4 flex items-center gap-2",children:[e.jsx("a",{href:`tel:${t.phone}`,className:"text-gray-900 hover:text-blue-600 transition",children:t.phone}),e.jsx("button",{onClick:()=>ms(t.phone),className:"text-green-600 hover:bg-green-50 p-1 rounded-full",children:e.jsx(pe,{size:18})})]}),e.jsx("td",{className:"p-4",children:t.belt}),e.jsx("td",{className:"p-4",children:e.jsx(te,{status:se(t.subEnd)})}),e.jsxs("td",{className:"p-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>_(t),className:"bg-green-100 text-green-700 p-2 rounded-lg hover:bg-green-200 transition flex items-center gap-1 font-bold",title:"ØªØ±ÙÙŠØ¹",children:[e.jsx(ls,{size:16})," ØªØ±ÙÙŠØ¹"]}),e.jsx("button",{onClick:()=>N(t),className:"text-blue-600 bg-blue-50 p-2 rounded",children:e.jsx(ge,{size:16})}),e.jsx("button",{onClick:()=>H(t),className:"text-red-600 bg-red-50 p-2 rounded",children:e.jsx(je,{size:16})})]})]},t.id))})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:e.jsx(w,{className:"w-full max-w-2xl",title:r?"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨":"Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯",children:e.jsxs("form",{onSubmit:r?C:P,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs mb-1",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("input",{required:!0,className:"w-full border p-2 rounded",value:j.name,onChange:t=>O({...j,name:t.target.value})})]}),!r&&e.jsxs("div",{className:"md:col-span-2 bg-blue-50 p-2 rounded border",children:[e.jsx("label",{className:"block text-xs mb-1",children:"Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:t=>f(t.target.value),children:[e.jsx("option",{value:"new",children:"Ø¹Ø§Ø¦Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),F.map(([t,R])=>e.jsx("option",{value:t,children:R},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("input",{required:!0,className:"w-full border p-2 rounded",value:j.phone,onChange:t=>O({...j,phone:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",children:"Ø§Ù„Ø­Ø²Ø§Ù…"}),e.jsx("select",{className:"w-full border p-3 rounded-lg bg-white",value:j.belt,onChange:t=>O({...j,belt:t.target.value}),children:J.map(t=>e.jsx("option",{children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold text-red-600",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ­Ù‚ (JOD)"}),e.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:j.balance,onChange:t=>O({...j,balance:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",children:"Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯"}),e.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j.dob,onChange:t=>O({...j,dob:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",children:"Ø§Ù„Ø§Ù„ØªØ­Ø§Ù‚"}),e.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j.joinDate,onChange:t=>O({...j,joinDate:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1 font-bold text-green-600",children:"Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),e.jsx("input",{type:"date",className:"w-full border p-2 rounded bg-green-50",value:j.subEnd,onChange:t=>O({...j,subEnd:t.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs mb-1",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx("input",{className:"w-full border p-2 rounded",value:j.address,onChange:t=>O({...j,address:t.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[e.jsx(D,{variant:"ghost",onClick:()=>g(!1),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(D,{type:"submit",children:"Ø­ÙØ¸"})]})]})})})]})},_e=()=>{const[l,v]=o.useState(new Date),[m,g]=o.useState(null),[r,I]=o.useState("manual"),p=N=>{const C=new Date(l);C.setMonth(C.getMonth()+N),v(C)},A=l.getFullYear(),j=l.getMonth(),O=new Date(A,j+1,0).getDate(),s=["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"],f=o.useMemo(()=>{let N=[...k];return r==="name"?N.sort((C,_)=>C.name.localeCompare(_.name)):r==="belt"?N.sort((C,_)=>J.indexOf(_.belt)-J.indexOf(C.belt)):r==="status"?N.sort((C,_)=>C.status==="active"?-1:1):N.sort((C,_)=>(C.customOrder||0)-(_.customOrder||0)),N},[k,r]),F=m?f.filter(N=>N.id===m):f,d=async(N,C)=>{const _=`${A}-${String(j+1).padStart(2,"0")}-${String(C).padStart(2,"0")}`,t={...L.find(R=>R.id===N).attendance||{}};t[_]?delete t[_]:t[_]=!0,await n.update(N,{attendance:t})},P=async(N,C)=>{if(r!=="manual")return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ÙŠØ¯ÙˆÙŠ Ø£ÙˆÙ„Ø§Ù‹");const _=C==="up"?N-1:N+1;if(_<0||_>=F.length)return;const H=F[N],t=F[_],R=H.customOrder||Date.now(),G=t.customOrder||Date.now()+1;await n.update(H.id,{customOrder:G}),await n.update(t.id,{customOrder:R})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(D,{variant:"ghost",onClick:()=>p(-1),children:e.jsx(ne,{})}),e.jsxs("span",{className:"font-bold",children:[s[j]," ",A]}),e.jsx(D,{variant:"ghost",onClick:()=>p(1),children:e.jsx(De,{})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I("manual"),className:`px-3 py-1 text-xs rounded border ${r==="manual"?"bg-black text-white":""}`,children:"ÙŠØ¯ÙˆÙŠ (ØªØ±ØªÙŠØ¨ÙŠ)"}),e.jsx("button",{onClick:()=>I("name"),className:`px-3 py-1 text-xs rounded border ${r==="name"?"bg-black text-white":""}`,children:"Ø£Ø¨Ø¬Ø¯ÙŠ"}),e.jsx("button",{onClick:()=>I("belt"),className:`px-3 py-1 text-xs rounded border ${r==="belt"?"bg-black text-white":""}`,children:"Ø­Ø²Ø§Ù…"})]}),e.jsx("div",{className:"w-64 relative",children:e.jsx(q,{students:k,onSelect:N=>g(N.id),onClear:()=>g(null),placeholder:"Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹...",showAllOption:!0})})]}),e.jsx(w,{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsx("thead",{className:"bg-gray-800 text-white sticky top-0 z-20",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 sticky right-0 bg-gray-800 z-30 text-right",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-3 text-center",children:"ØªØ±ØªÙŠØ¨"}),[...Array(O)].map((N,C)=>e.jsx("th",{className:"p-2 border-gray-700 text-center",children:C+1},C))]})}),e.jsx("tbody",{children:F.map((N,C)=>e.jsxs("tr",{className:"hover:bg-yellow-50",children:[e.jsx("td",{className:"p-3 sticky right-0 bg-white font-bold border-l shadow-sm",children:N.name}),e.jsx("td",{className:"p-3 text-center border flex flex-col gap-1",children:r==="manual"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>P(C,"up"),className:"text-gray-500 hover:text-black",children:"â¬†ï¸"}),e.jsx("button",{onClick:()=>P(C,"down"),className:"text-gray-500 hover:text-black",children:"â¬‡ï¸"})]})}),[...Array(O)].map((_,H)=>{var U;const t=H+1,R=`${A}-${String(j+1).padStart(2,"0")}-${String(t).padStart(2,"0")}`,G=!!((U=N.attendance)!=null&&U[R]);return e.jsx("td",{className:"border text-center p-0",children:e.jsx("input",{type:"checkbox",checked:G,onChange:()=>d(N.id,t),className:"w-4 h-4 accent-green-600 cursor-pointer"})},H)})]},N.id))})]})})]})},Me=()=>{const[l,v]=o.useState(""),[m,g]=o.useState("general"),[r,I]=o.useState(""),[p,A]=o.useState(null),j=async s=>{if(s.preventDefault(),!r||!l)return;const f=k.find(d=>d.id===r),F={id:Date.now(),text:l,type:m,date:new Date().toLocaleDateString("ar-JO")};await n.update(r,{internalNotes:[...f.internalNotes||[],F]}),v(""),alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­")},O=async(s,f)=>{if(confirm("Ø­Ø°ÙØŸ")){const F=k.find(d=>d.id===s);await n.update(s,{internalNotes:F.internalNotes.filter(d=>d.id!==f)})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(w,{title:"ØªØ³Ø¬ÙŠÙ„ Ù…Ù„Ø§Ø­Ø¸Ø© Ø¥Ø¯Ø§Ø±ÙŠØ© (Ø¯Ø§Ø®Ù„ÙŠØ©)",children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx(q,{students:k,onSelect:s=>I(s.id),placeholder:"Ø§Ø¨Ø­Ø« Ù„Ø§Ø®ØªÙŠØ§Ø± Ø·Ø§Ù„Ø¨..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"finance",children:"ğŸ’° Ø°Ù…Ù… Ù…Ø§Ù„ÙŠØ© / Ø­Ø³Ø§Ø¨"}),e.jsx("option",{value:"behavior",children:"âš ï¸ Ø³Ù„ÙˆÙƒ ÙˆØ§Ù†Ø¶Ø¨Ø§Ø·"}),e.jsx("option",{value:"exam",children:"ğŸ†“ ÙØ­Øµ Ù…Ø¬Ø§Ù†ÙŠ / Ù…Ù†Ø­Ø©"}),e.jsx("option",{value:"general",children:"ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø© Ø¹Ø§Ù…Ø©"})]})]})]}),e.jsx("textarea",{className:"w-full border p-2 rounded",rows:"3",placeholder:"Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ù‡Ù†Ø§ (Ù„Ù† ØªØ¸Ù‡Ø± Ù„Ù„Ø£Ù‡Ù„)...",value:l,onChange:s=>v(s.target.value),required:!0}),e.jsx("div",{className:"flex justify-end",children:e.jsx(D,{type:"submit",className:"bg-gray-800 text-white hover:bg-gray-700",children:"Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ"})})]})}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsx("div",{className:"w-64",children:e.jsx(q,{students:k,onSelect:s=>A(s.id),onClear:()=>A(null),placeholder:"ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø·Ø§Ù„Ø¨...",showAllOption:!0})})}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:k.filter(s=>(p?s.id===p:!0)&&s.internalNotes&&s.internalNotes.length>0).map(s=>e.jsx(w,{title:s.name,className:"border-r-4 border-gray-800",children:e.jsx("div",{className:"space-y-2",children:s.internalNotes.map(f=>e.jsxs("div",{className:"p-3 rounded border flex justify-between items-start bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-xs bg-gray-200 px-1 rounded ml-2",children:f.type}),e.jsx("span",{className:"text-sm text-gray-700",children:f.text})]}),e.jsx("button",{onClick:()=>O(s.id,f.id),className:"text-red-400 hover:text-red-600",children:e.jsx(Y,{size:16})})]},f.id))})},s.id))})]})},Ee=()=>{const[l,v]=o.useState("income"),[m,g]=o.useState({sid:"",amount:"",reason:"Ø§Ø´ØªØ±Ø§Ùƒ Ø´Ù‡Ø±ÙŠ",customReason:"",details:""}),[r,I]=o.useState({title:"",amount:"",date:new Date().toISOString().split("T")[0]}),[p,A]=o.useState(null),j=async d=>{if(d.preventDefault(),!m.studentObjId)return alert("Ø§Ø®ØªØ± Ø·Ø§Ù„Ø¨Ø§Ù‹");const P=k.find(_=>_.id===m.studentObjId);if(!P)return alert("Ø·Ø§Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");const N=m.reason==="Ø£Ø®Ø±Ù‰"?m.customReason:m.reason,C={id:Date.now().toString(),studentId:P.id,name:P.name,amount:Number(m.amount),reason:N,details:m.details,date:new Date().toISOString().split("T")[0],branch:i};await b.add(C),g({sid:"",amount:"",reason:"Ø§Ø´ØªØ±Ø§Ùƒ Ø´Ù‡Ø±ÙŠ",customReason:"",details:""})},O=async d=>{d.preventDefault(),await a.add({id:Date.now().toString(),title:r.title,amount:Number(r.amount),date:r.date,branch:i}),I({title:"",amount:"",date:new Date().toISOString().split("T")[0]})},s=async d=>{confirm("Ø­Ø°Ù Ø§Ù„Ø³Ù†Ø¯ØŸ")&&await b.remove(d)},f=async d=>{confirm("Ø­Ø°Ù Ø§Ù„Ù…ØµØ±ÙˆÙØŸ")&&await a.remove(d)},F=p?V.filter(d=>d.studentId===p):V;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>v("income"),className:`flex-1 py-3 rounded-xl font-bold ${l==="income"?"bg-green-600 text-white":"bg-white"}`,children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª"}),e.jsx("button",{onClick:()=>v("expense"),className:`flex-1 py-3 rounded-xl font-bold ${l==="expense"?"bg-red-600 text-white":"bg-white"}`,children:"Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ"})]}),l==="income"?e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Ø³Ù†Ø¯ Ù‚Ø¨Ø¶ Ø¬Ø¯ÙŠØ¯",children:e.jsxs("form",{onSubmit:j,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"text-xs block mb-1 font-bold text-gray-700",children:"Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx(q,{students:k,onSelect:d=>g({...m,sid:d.name,studentObjId:d.id}),placeholder:"Ø§Ø¨Ø­Ø«..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:m.amount,onChange:d=>g({...m,amount:d.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ø³Ø¨Ø¨"}),e.jsxs("select",{className:"w-full border p-2 rounded",value:m.reason,onChange:d=>g({...m,reason:d.target.value}),children:[e.jsx("option",{children:"Ø§Ø´ØªØ±Ø§Ùƒ Ø´Ù‡Ø±ÙŠ"}),e.jsx("option",{children:"Ø¹Ø±Ø¶ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ 3 Ø´Ù‡ÙˆØ±"}),e.jsx("option",{children:"Ø±Ø³ÙˆÙ… ÙØ­Øµ"}),e.jsx("option",{children:"Ø£Ø®Ø±Ù‰"})]})]}),m.reason==="Ø£Ø®Ø±Ù‰"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"ÙˆØ¶Ø­ Ø§Ù„Ø³Ø¨Ø¨"}),e.jsx("input",{className:"w-full border p-2 rounded",value:m.customReason,onChange:d=>g({...m,customReason:d.target.value}),required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs block mb-1",children:"ØªÙØ§ØµÙŠÙ„"}),e.jsx("input",{className:"w-full border p-2 rounded",value:m.details,onChange:d=>g({...m,details:d.target.value})})]}),e.jsx(D,{type:"submit",children:"Ø­ÙØ¸ ÙˆÙ‚Ø¨Ø¶"})]})}),e.jsx("div",{className:"flex items-center gap-2 mb-2 w-64",children:e.jsx(q,{students:k,onSelect:d=>A(d.id),onClear:()=>A(null),placeholder:"ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ø·Ø§Ù„Ø¨...",showAllOption:!0})}),e.jsx(w,{children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"#"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø³Ø¨Ø¨"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("th",{className:"p-3",children:"Ø·Ø¨Ø§Ø¹Ø©"}),e.jsx("th",{className:"p-3",children:"Ø­Ø°Ù"})]})}),e.jsx("tbody",{children:F.map(d=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:d.id.slice(0,8)}),e.jsx("td",{className:"p-3 font-bold",children:d.name}),e.jsxs("td",{className:"p-3",children:[d.reason," ",e.jsx("span",{className:"text-xs text-gray-400",children:d.details})]}),e.jsx("td",{className:"p-3 text-green-600",children:d.amount}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>xs(d,i),children:e.jsx(ns,{size:16})})}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>s(d.id),className:"text-red-500",children:e.jsx(Y,{size:16})})})]},d.id))})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"ØªØ³Ø¬ÙŠÙ„ Ù…ØµØ±ÙˆÙ",children:e.jsxs("form",{onSubmit:O,className:"flex gap-4 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ø¨Ù†Ø¯"}),e.jsx("input",{className:"w-full border p-2 rounded",value:r.title,onChange:d=>I({...r,title:d.target.value}),required:!0})]}),e.jsxs("div",{className:"w-32",children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:r.amount,onChange:d=>I({...r,amount:d.target.value}),required:!0})]}),e.jsx(D,{type:"submit",children:"Ø­ÙØ¸"})]})}),e.jsx(w,{children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø¨Ù†Ø¯"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("th",{className:"p-3",children:"Ø­Ø°Ù"})]})}),e.jsx("tbody",{children:X.map(d=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-3",children:d.title}),e.jsx("td",{className:"p-3 text-red-600",children:d.amount}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>f(d.id),className:"text-red-500",children:e.jsx(Y,{size:16})})})]},d.id))})]})})]})]})},$e=()=>{const[l,v]=o.useState({level:"",days:"",time:"",branch:""}),m=async r=>{r.preventDefault(),await h.add({...l}),v({level:"",days:"",time:"",branch:""})},g=async r=>{confirm("Ø­Ø°ÙØŸ")&&await h.remove(r)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(w,{title:"Ø¥Ø¶Ø§ÙØ© Ø­ØµØ©",children:e.jsxs("form",{onSubmit:m,className:"grid grid-cols-2 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ù…Ø³ØªÙˆÙ‰"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.level,onChange:r=>v({...l,level:r.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ø£ÙŠØ§Ù…"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.days,onChange:r=>v({...l,days:r.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„ÙˆÙ‚Øª"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.time,onChange:r=>v({...l,time:r.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„ÙØ±Ø¹"}),e.jsx("input",{className:"w-full border p-2 rounded",value:l.branch,onChange:r=>v({...l,branch:r.target.value}),required:!0})]}),e.jsx(D,{type:"submit",children:"Ø¥Ø¶Ø§ÙØ©"})]})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:T.map(r=>e.jsxs("div",{className:"bg-white p-4 rounded border flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:r.level}),e.jsxs("p",{className:"text-xs text-gray-500",children:[r.days," | ",r.time]})]}),e.jsx("button",{onClick:()=>g(r.id),className:"text-red-500",children:e.jsx(Y,{size:16})})]},r.id))})]})},Fe=()=>{const[l,v]=o.useState(""),[m,g]=o.useState([]),[r,I]=o.useState(!1),p=()=>{g(r?[]:k.map(s=>s.id)),I(!r)},A=s=>{m.includes(s)?g(m.filter(f=>f!==s)):g([...m,s])},j=async()=>{if(m.length===0||!l)return alert("Ø§Ø®ØªØ± Ø·Ù„Ø§Ø¨Ø§Ù‹");const s={id:Date.now(),text:l,date:new Date().toLocaleDateString("ar-JO")};for(const f of m){const F=L.find(d=>d.id===f);await n.update(f,{notes:[...F.notes||[],s]})}v(""),g([]),I(!1),alert("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„")},O=async(s,f)=>{if(confirm("Ø­Ø°ÙØŸ")){const F=L.find(d=>d.id===s);await n.update(s,{notes:F.notes.filter(d=>d.id!==f)})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4 h-[300px]",children:[e.jsxs("div",{className:"w-1/3 bg-white rounded border flex flex-col",children:[e.jsxs("div",{className:"p-2 border-b flex justify-between",children:[e.jsx("span",{className:"font-bold",children:"ØªØ­Ø¯ÙŠØ¯"}),e.jsx("button",{onClick:p,className:"text-xs text-blue-600",children:r?"Ø¥Ù„ØºØ§Ø¡":"Ø§Ù„ÙƒÙ„"})]}),e.jsx("div",{className:"overflow-y-auto p-2",children:k.map(s=>e.jsxs("div",{onClick:()=>A(s.id),className:`p-2 cursor-pointer flex justify-between ${m.includes(s.id)?"bg-yellow-100":""}`,children:[e.jsx("span",{children:s.name}),m.includes(s.id)&&e.jsx(be,{size:14})]},s.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-4",children:e.jsxs(w,{className:"flex-1 flex flex-col",children:[e.jsx("textarea",{className:"flex-1 w-full border p-2 rounded",value:l,onChange:s=>v(s.target.value),placeholder:"Ù†Øµ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©..."}),e.jsx(D,{onClick:j,className:"mt-2",children:"Ø¥Ø±Ø³Ø§Ù„"})]})})]}),e.jsx("div",{className:"grid gap-4",children:k.filter(s=>s.notes&&s.notes.length>0).map(s=>e.jsx(w,{title:s.name,children:s.notes.map(f=>e.jsxs("div",{className:"flex justify-between border-b p-2 last:border-0",children:[e.jsx("span",{children:f.text}),e.jsx("button",{onClick:()=>O(s.id,f.id),className:"text-red-500",children:e.jsx(Y,{size:14})})]},f.id))},s.id))})]})},Le=()=>{const[l,v]=o.useState(""),[m,g]=o.useState(""),r=async(p,A)=>{await n.update(p,{subEnd:A})},I=m?k.filter(p=>p.id===m):k;return e.jsx("div",{className:"space-y-4",children:e.jsxs(w,{children:[e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200 mb-6 flex gap-4 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"ØªØ¬Ø¯ÙŠØ¯ Ø³Ø±ÙŠØ¹ Ù„Ø·Ø§Ù„Ø¨"}),e.jsx(q,{students:k,onSelect:p=>v(p.id),placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨ Ù„ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§ÙƒÙ‡..."})]}),e.jsx(D,{onClick:()=>{if(!l)return;const p=prompt("ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (YYYY-MM-DD):",new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0]);p&&r(l,p)},children:"ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"})]}),e.jsxs("div",{className:"mb-4 w-64",children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"ÙÙ„ØªØ±Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„"}),e.jsx(q,{students:k,onSelect:p=>g(p.id),onClear:()=>g(null),placeholder:"Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©...",showAllOption:!0})]}),e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{className:"p-3",children:"ØªØ¬Ø¯ÙŠØ¯"})]})}),e.jsx("tbody",{children:I.map(p=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-3 font-bold",children:p.name}),e.jsx("td",{className:"p-3",children:p.subEnd}),e.jsx("td",{className:"p-3",children:e.jsx(te,{status:se(p.subEnd)})}),e.jsx("td",{className:"p-3",children:e.jsx("input",{type:"date",className:"border rounded text-xs",onChange:A=>r(p.id,A.target.value)})})]},p.id))})]})]})})},Te=()=>{const[l,v]=o.useState(null),[m,g]=o.useState(null),[r,I]=o.useState({}),p=s=>{g(s),I({name:s.name,phone:s.phone,belt:s.belt,address:s.address||""})},A=async s=>{s.preventDefault(),await y.update(m.id,r),g(null)},j=l?E.filter(s=>s.studentId===l.id):[],O=l?l.internalNotes||[]:[];return e.jsxs("div",{className:"space-y-6",children:[l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60] p-4",children:e.jsxs(w,{className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto",title:`Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø§Ù…Ù„: ${l.name}`,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold border-b pb-2 mb-2 text-red-600",children:"Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©"}),O.length>0?e.jsx("ul",{className:"space-y-2 text-sm",children:O.map(s=>e.jsxs("li",{className:"bg-red-50 p-2 rounded border border-red-100",children:[s.text," ",e.jsx("span",{className:"text-xs text-gray-400 block",children:s.date})]},s.id))}):e.jsx("p",{className:"text-gray-400 text-sm",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ø³Ø¬Ù„Ø©."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold border-b pb-2 mb-2 text-green-600",children:"Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø§Ù„ÙŠ"}),j.length>0?e.jsx("div",{className:"space-y-2 text-sm max-h-60 overflow-y-auto",children:j.map(s=>e.jsxs("div",{className:"flex justify-between bg-green-50 p-2 rounded border border-green-100",children:[e.jsx("span",{children:s.reason}),e.jsxs("span",{className:"font-bold",children:[s.amount," JOD"]})]},s.id))}):e.jsx("p",{className:"text-gray-400 text-sm",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø©."})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(D,{onClick:()=>v(null),children:"Ø¥ØºÙ„Ø§Ù‚"})})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[60] p-4",children:e.jsx(w,{className:"w-full max-w-lg",title:"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø±Ø´ÙŠÙ",children:e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("input",{className:"w-full border p-2 rounded",value:r.name,onChange:s=>I({...r,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ù‡Ø§ØªÙ"}),e.jsx("input",{className:"w-full border p-2 rounded",value:r.phone,onChange:s=>I({...r,phone:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs block mb-1",children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx("input",{className:"w-full border p-2 rounded",value:r.address,onChange:s=>I({...r,address:s.target.value})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(D,{variant:"ghost",onClick:()=>g(null),children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(D,{type:"submit",children:"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª"})]})]})})}),e.jsx(w,{title:"Ø³Ø¬Ù„ Ø§Ù„Ø£Ø±Ø´ÙŠÙ",children:Q.length===0?e.jsx("p",{className:"text-center py-8 text-gray-400",children:"Ø§Ù„Ø£Ø±Ø´ÙŠÙ ÙØ§Ø±Øº"}):e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("th",{className:"p-3",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£Ø±Ø´ÙØ©"}),e.jsx("th",{className:"p-3",children:"Ø®ÙŠØ§Ø±Ø§Øª"})]})}),e.jsx("tbody",{className:"divide-y",children:Q.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:s.name}),e.jsx("td",{className:"p-3 text-gray-500",children:s.archiveDate}),e.jsxs("td",{className:"p-3 flex gap-2",children:[e.jsxs(D,{variant:"outline",className:"py-1 px-2 text-xs",onClick:()=>v(s),children:[e.jsx(rs,{size:14,className:"ml-1"})," Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø§Ù„ÙŠ"]}),e.jsx("button",{onClick:()=>p(s),className:"bg-blue-50 text-blue-600 p-1 rounded border border-blue-200",title:"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª",children:e.jsx(ge,{size:14})}),e.jsx("button",{onClick:async()=>{await n.add(s),await y.remove(s.id)},className:"bg-green-50 text-green-600 p-1 rounded border border-green-200",title:"Ø§Ø³ØªØ¹Ø§Ø¯Ø©",children:e.jsx(ds,{size:14})})]})]},s.id))})]})})]})};return e.jsxs("div",{className:"flex min-h-screen bg-gray-100 text-right font-sans",dir:"rtl",children:[e.jsxs("aside",{className:`${S?"w-64":"w-20"} bg-black text-gray-300 transition-all duration-300 flex flex-col sticky top-0 h-screen shadow-2xl z-40`,children:[e.jsxs("div",{className:"p-6 flex justify-between border-b border-gray-800",children:[S&&e.jsx("h2",{className:"font-black text-yellow-500 text-xl",children:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsx("button",{onClick:()=>$(!S),children:e.jsx(we,{size:20})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-6 space-y-2 px-3 custom-scrollbar",children:[{id:"dashboard",icon:ke,label:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©"},{id:"schedule",icon:K,label:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„"},{id:"students",icon:es,label:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨"},{id:"subs",icon:Se,label:"Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª"},{id:"attendance",icon:be,label:"Ø§Ù„Ø­Ø¶ÙˆØ±"},{id:"payments",icon:ss,label:"Ø§Ù„Ù…Ø§Ù„ÙŠØ©"},{id:"notes",icon:pe,label:"Ù…Ø±Ø§Ø³Ù„Ø§Øª Ø§Ù„Ø£Ù‡Ù„"},{id:"internal_notes",icon:ts,label:"Ø³Ø¬Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©"},{id:"archive",icon:je,label:"Ø§Ù„Ø£Ø±Ø´ÙŠÙ"}].map(l=>e.jsxs("button",{onClick:()=>M(l.id),className:`w-full flex items-center gap-4 px-4 py-3 rounded-xl transition-all ${u===l.id?"bg-yellow-500 text-black font-bold":"hover:bg-gray-800"}`,children:[e.jsx(l.icon,{size:22}),S&&e.jsx("span",{children:l.label})]},l.id))}),e.jsx("div",{className:"p-4 border-t border-gray-800",children:e.jsxs("button",{onClick:z,className:"w-full flex items-center gap-4 px-4 py-3 text-red-400 hover:bg-red-900/10 rounded-xl",children:[e.jsx(Ce,{size:20}),S&&e.jsx("span",{children:"Ø®Ø±ÙˆØ¬"})]})})]}),e.jsxs("main",{className:"flex-1 p-6 md:p-10 overflow-y-auto w-full",children:[e.jsxs("header",{className:"mb-10",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-1",children:[u==="dashboard"&&"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©",u==="schedule"&&"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„",u==="students"&&"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨",u==="subs"&&"Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª",u==="attendance"&&"Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨",u==="payments"&&"Ø§Ù„Ù…Ø§Ù„ÙŠØ©",u==="notes"&&"Ù…Ø±Ø§Ø³Ù„Ø§Øª Ø§Ù„Ø£Ù‡Ù„",u==="internal_notes"&&"Ø³Ø¬Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©",u==="archive"&&"Ø§Ù„Ø£Ø±Ø´ÙŠÙ"]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["ÙØ±Ø¹ ",i]})]}),u==="dashboard"&&e.jsx(Ae,{}),u==="schedule"&&e.jsx($e,{}),u==="students"&&e.jsx(ze,{}),u==="attendance"&&e.jsx(_e,{}),u==="payments"&&e.jsx(Ee,{}),u==="notes"&&e.jsx(Fe,{}),u==="internal_notes"&&e.jsx(Me,{}),u==="subs"&&e.jsx(Le,{}),u==="archive"&&e.jsx(Te,{})]})]})};function js(){const[c,i]=o.useState("home"),[n,b]=o.useState(()=>{const $=localStorage.getItem("braveUser");return $?JSON.parse($):null});o.useEffect(()=>{n&&(n.role==="admin"?i("admin_dashboard"):i("student_portal"))},[]);const a=W("students"),h=W("payments"),y=W("expenses"),z=W("schedule"),u=W("archive"),M=($,L)=>{if($.startsWith("admin")&&L==="123"){const E={role:"admin",name:"Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…",username:$,branch:$==="admin1"?Ne.SHAFA:Ne.ABU_NSEIR};b(E),localStorage.setItem("braveUser",JSON.stringify(E)),i("admin_dashboard")}else{const E=a.data.find(x=>x.username===$&&x.password===L);if(E){const x={role:"student",familyId:E.familyId,name:E.familyName,id:E.id};b(x),localStorage.setItem("braveUser",JSON.stringify(x)),i("student_portal")}else alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©! Ø¬Ø±Ø¨ admin1/123")}},S=()=>{b(null),localStorage.removeItem("braveUser"),i("home")};return o.useEffect(()=>{(async()=>{typeof __initial_auth_token<"u"&&__initial_auth_token?await Ge(fe,__initial_auth_token):await Je(fe)})()},[]),a.loading||z.loading?e.jsx("div",{className:"flex items-center justify-center h-screen text-yellow-600 font-bold text-xl",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…..."}):e.jsxs(e.Fragment,{children:[c==="home"&&e.jsx(hs,{setView:i,schedule:z.data.length>0?z.data:Oe}),c==="login"&&e.jsx(us,{setView:i,handleLogin:M}),c==="student_portal"&&n&&e.jsx(bs,{user:n,students:a.data,schedule:z.data,payments:h.data,handleLogout:S}),c==="admin_dashboard"&&n&&e.jsx(ps,{user:n,selectedBranch:n.branch,studentsCollection:a,paymentsCollection:h,expensesCollection:y,scheduleCollection:z,archiveCollection:u,handleLogout:S})]})}qe.createRoot(document.getElementById("root")).render(e.jsx(Ue.StrictMode,{children:e.jsx(js,{})}));
